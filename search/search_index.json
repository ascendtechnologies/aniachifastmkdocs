{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Aniachifast A modular, high-performance backend framework built with FastAPI and SQLAlchemy . Features \u2705 Authentication - Cognito integration or database-backed \u2705 Database Management - Automatic connection testing and model synchronization \u2705 Request Utilities - Header enforcement and rate limiting \u2705 Developer Tools - Logging, startup events, and configuration management Quick Links Getting Started Configuration Authentication Tools & Utilities API Reference Architecture Aniachifast follows a modular architecture with clear separation of concerns: Core - Configuration, models, and database management Auth - Authentication interfaces and implementations Services - Business logic and response handling Tools - Utility functions and helpers Middlewares - Request/response processing API - WebSocket endpoints and handlers","title":"Home"},{"location":"#aniachifast","text":"A modular, high-performance backend framework built with FastAPI and SQLAlchemy .","title":"Aniachifast"},{"location":"#features","text":"\u2705 Authentication - Cognito integration or database-backed \u2705 Database Management - Automatic connection testing and model synchronization \u2705 Request Utilities - Header enforcement and rate limiting \u2705 Developer Tools - Logging, startup events, and configuration management","title":"Features"},{"location":"#quick-links","text":"Getting Started Configuration Authentication Tools & Utilities API Reference","title":"Quick Links"},{"location":"#architecture","text":"Aniachifast follows a modular architecture with clear separation of concerns: Core - Configuration, models, and database management Auth - Authentication interfaces and implementations Services - Business logic and response handling Tools - Utility functions and helpers Middlewares - Request/response processing API - WebSocket endpoints and handlers","title":"Architecture"},{"location":"__about__/","text":"About aniachifast.__about__ fastapibase package metadata. This module exposes core package information such as version, title, and a brief description. It is intended to be used by the application, tooling, and build pipelines for reporting and introspection purposes. __description__ module-attribute __description__ = \"FastAPI JWT authentication and database management tools\" __title__ module-attribute __title__ = 'fastapibase' __version__ module-attribute __version__ = '0.0.55'","title":"About"},{"location":"__about__/#about","text":"","title":"About"},{"location":"__about__/#aniachifast.__about__","text":"fastapibase package metadata. This module exposes core package information such as version, title, and a brief description. It is intended to be used by the application, tooling, and build pipelines for reporting and introspection purposes.","title":"__about__"},{"location":"__about__/#aniachifast.__about__.__description__","text":"__description__ = \"FastAPI JWT authentication and database management tools\"","title":"__description__"},{"location":"__about__/#aniachifast.__about__.__title__","text":"__title__ = 'fastapibase'","title":"__title__"},{"location":"__about__/#aniachifast.__about__.__version__","text":"__version__ = '0.0.55'","title":"__version__"},{"location":"api-reference/","text":"Complete API Reference Complete API reference for all modules in Aniachifast. Authentication Auth Interface aniachifast.auth.auth_interface Authentication Interface Module This module defines the AuthInterface abstract base class for user authentication systems. Any concrete implementation of this interface must provide methods for user registration, login, token validation, and retrieving the current authenticated user. The interface allows flexibility to implement multiple authentication backends (e.g., database, Cognito, etc.) while keeping the contract consistent. AuthInterface Bases: ABC Abstract base class defining the interface for authentication operations. Implementations must provide async methods for user registration, login, retrieving the current user from a token, and verifying tokens. activate_user abstractmethod async activate_user ( activation_code : str ) -> dict Activate a user account using the activation code. Parameters: activation_code ( str ) \u2013 The activation code sent to the user. Returns: dict ( dict ) \u2013 Activation result message. Raises: HTTPException \u2013 If the activation code is invalid or expired. get_current_user abstractmethod async get_current_user ( token : str ) -> dict Retrieve the currently authenticated user from a JWT token. Parameters: token ( str ) \u2013 JWT access token. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse) or 'code' (str). Success case: {'status': 'success', 'message': 'Token validated successfully', 'user': UserResponse(...)} Failure cases: - Invalid token: {'status': 'error', 'message': 'Could not validate credentials', 'code': '401-001'} - Missing claims: {'status': 'error', 'message': 'Invalid token claims', 'code': '401-002'} login abstractmethod async login ( credentials : UserLogin ) -> dict Authenticate a user and return result with token or error. Parameters: credentials ( UserLogin ) \u2013 Pydantic model containing the username/email and password. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'token' (Token), 'user_id' (UUID) and 'company_id' (UUID). Success case: {'status': 'success', 'message': 'Login successful', 'token': Token(...), 'user_id': UUID(...), 'company_id': UUID(...)} Failure case: {'status': 'error', 'message': 'Error description'} register abstractmethod async register ( user : UserCreate ) -> dict Register a new user in the authentication system. Parameters: user ( UserCreate ) \u2013 Pydantic model containing the user's registration data (e.g., username, email, password, and other required fields depending on the implementation). Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse). Success case: {'status': 'success', 'message': 'User registered successfully', 'user': UserResponse(...)} Failure case: {'status': 'error', 'message': 'Error description'} request_password_reset abstractmethod async request_password_reset ( email : str ) -> dict Generate a password reset code for a user. Parameters: email ( str ) \u2013 The email address of the user requesting a password reset. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'reset_code' (str), 'user_id' (UUID) and 'company_id' (UUID) fields if identifiable. Success case: {'status': 'success', 'message': 'Reset code generated successfully', 'reset_code': 'abc123...', 'user_id': UUID(...), 'company_id': UUID(...)} Failure case: {'status': 'error', 'message': 'Error description', 'user_id': UUID(...), 'company_id': UUID(...)} Raises: HTTPException \u2013 If there's a system error. resend_activation_code abstractmethod async resend_activation_code ( email : str ) -> dict Resend or regenerate activation code for a user. Parameters: email ( str ) \u2013 The email address of the user. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields, and optionally 'user_id' (UUID) and 'company_id' (UUID) if identifiable. Success case: {'status': 'success', 'message': 'Activation code sent successfully', 'user_id': UUID(...), 'company_id': UUID(...)} Failure case: {'status': 'error', 'message': 'Error description', 'user_id': UUID(...), 'company_id': UUID(...)} Raises: HTTPException \u2013 If there's a system error. verify_token abstractmethod async verify_token ( token : str ) -> bool Verify if a given JWT token is valid. Parameters: token ( str ) \u2013 JWT access token to validate. Returns: bool ( bool ) \u2013 True if the token is valid and not expired, False bool \u2013 otherwise. Auth Factory aniachifast.auth.auth_factory Authentication Service Factory. This module provides a factory responsible for instantiating and returning the appropriate authentication service implementation based on application configuration. Supported authentication backends: - Cognito (AWS Cognito) - Database-based authentication The selection is controlled via the AUTH_PROVIDER configuration setting. settings module-attribute settings = get_settings () AuthFactory Factory class for authentication service resolution. This class encapsulates the logic required to select and instantiate the correct authentication provider according to the application's runtime configuration. get_auth_service staticmethod get_auth_service ( db : Session | None = None , ) -> AuthInterface Resolve and return the configured authentication service. Parameters: db ( Session | None , default: None ) \u2013 Database session. Required for database-based authentication when performing operations that need DB access (login, register, etc.). Can be None for stateless operations like JWT token validation. Returns: AuthInterface ( AuthInterface ) \u2013 Authentication service instance. Raises: ValueError \u2013 If AUTH_PROVIDER is invalid or unsupported. Notes For Cognito provider: db parameter is ignored For Database provider: db can be None for stateless operations (token validation), but required for DB operations (login, register) Tools & Utilities Dependencies aniachifast.tools.dependencies FastAPI request validation dependencies and helpers. This module provides reusable validation utilities designed to be used primarily as FastAPI dependencies. Their main purpose is to validate HTTP request headers (such as Accept ) and ensure that incoming requests comply with the formats supported by the application. Key concepts: - Header validation is performed using FastAPI dependency injection. - The allowed_headers family of functions works together with predefined media type constants (e.g. MediaTypes, COMMON_TYPES). - These dependencies are commonly used to enforce content negotiation rules before an endpoint handler is executed. Additionally, this module contains helper utilities that are not yet dependencies but are used to validate and sanitize metadata values received from the client. VALID_KEY_REGEX module-attribute VALID_KEY_REGEX = compile ( '^ \\\\ w+$' ) logger module-attribute logger = getLogger () security module-attribute security = HTTPBearer () allowed_extension async allowed_extension ( headers : Set [ str ], ) -> Callable [[ Request ], str ] FastAPI dependency that validates request format based on extensions. This dependency behaves similarly to allowed_headers but is designed to support scenarios where request format validation is tied to URL extensions or future asynchronous logic. Currently, it validates the Accept header and raises HTTP 406 if no allowed format is found. Parameters: headers ( Set [ str ] ) \u2013 A set of allowed media types. Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: A dependency function returning the matched media type. Raises: HTTPException \u2013 406 Not Acceptable if no allowed media type is found. allowed_headers allowed_headers ( headers : Set [ str ], ) -> Callable [[ Request ], str ] FastAPI dependency that enforces allowed Accept header values. This dependency validates the incoming request Accept header against a predefined set of allowed media types. If none of the provided media types matches the request, an HTTP 406 (Not Acceptable) error is raised. IMPORTANT : You MUST use the predefined header sets from aniachifast.tools.request_types (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets. This ensures consistency and maintains a single source of truth for allowed header combinations. Parameters: headers ( Set [ str ] ) \u2013 A set of allowed media types. Use predefined sets from request_types module (COMMON_TYPES, SIMPLE_TYPES, JSON_TYPES, HTML_TYPES). Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: A dependency function that returns the matched media type. Raises: HTTPException \u2013 406 Not Acceptable if no allowed media type is found. Example CORRECT - Using predefined sets from request_types: from fastapi import Depends, APIRouter from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES, JSON_TYPES router = APIRouter() @router.get( \"/items\", dependencies=[Depends(allowed_headers(COMMON_TYPES))] ) async def list_items(): return {\"status\": \"ok\"} @router.post( \"/items\", dependencies=[Depends(allowed_headers(JSON_TYPES))] ) async def create_item(): return {\"status\": \"created\"} INCORRECT - Do NOT create ad-hoc sets: # \u274c WRONG - Don't do this from aniachifast.tools.media_utils import MediaTypes @router.get( \"/items\", dependencies=[Depends(allowed_headers( {MediaTypes.JSON, MediaTypes.HTML}))] ) get_accept_header get_accept_header ( request : Request ) -> Optional [ str ] FastAPI dependency that extracts the Accept header from the request. This is a simple dependency that returns the Accept header value or None if not present. Useful for content negotiation in endpoints. Parameters: request ( Request ) \u2013 The incoming FastAPI request. Returns: Optional [ str ] \u2013 Optional[str]: The Accept header value or None. Example @router.get(\"/endpoint\") async def example( accept: str | None = Depends(get_accept_header) ): return {\"accept\": accept or \"not specified\"} get_header_format get_header_format ( headers : Set [ str ], ) -> Callable [[ Request ], Optional [ str ]] FastAPI dependency that optionally extracts a valid Accept header. Unlike allowed_headers , this dependency does not raise an exception if the request does not contain an accepted media type. Instead, it returns None when no intersection is found. This is useful for endpoints where content negotiation is optional or where a default format can be applied. Parameters: headers ( Set [ str ] ) \u2013 A set of acceptable media types. Returns: Callable [[ Request ], Optional [ str ]] \u2013 Callable[[Request], Optional[str]]: A dependency function returning the matched media type or None if no match is found. Example @router.get(\"/optional-format\") async def example( fmt: str | None = Depends(get_header_format({MediaTypes.JSON})) ): return {\"format\": fmt or \"default\"} no_query_params no_query_params ( request : Request ) -> bool Reject requests that include query parameters. This dependency enforces a strict API contract for endpoints that must not receive any query parameters. If any query parameters are present in the request URL, the request is rejected with HTTP 422 (Unprocessable Entity). Example (rejected): GET /tables?foo=bar Example (allowed): GET /tables How to use @router.get('/tables') async def tables( _: bool = Depends(no_query_params) ): Parameters: request ( Request ) \u2013 The FastAPI request object. Returns: bool ( bool ) \u2013 Always True if validation passes. Raises: HTTPException \u2013 422 Unprocessable Entity if query parameters are provided. save_upload_file_dependency save_upload_file_dependency ( * , allowed_types : Set [ str ] | None = None , max_size_bytes : int ) validate_and_parse_accept_header validate_and_parse_accept_header ( accepted_headers : Set [ str ], raise_exception : bool = True , default_format : str = \"json\" , html_default_format : str | None = None , ) -> Callable [[ Request ], str ] FastAPI dependency factory that validates and parses Accept header. This dependency validates the Accept header against a set of supported media types and returns a format identifier. If the Accept header contains an unsupported media type, it can either raise a RequestValidationError (HTTP 422) or return a default format. This validation happens BEFORE the endpoint handler is executed, preventing unnecessary database queries for invalid requests. Media type to format mapping: - application/json -> 'json' - text/html -> 'html' - text/csv -> 'csv' - text/tab-separated-values -> 'tsv' - application/xml -> 'xml' - text/yaml, application/yaml -> 'yaml' - text/plain -> 'txt' - / -> default_format - None -> default_format Parameters: accepted_headers ( Set [ str ] ) \u2013 Set of allowed media types. Use predefined sets from request_types module (e.g., ALL_FORMATS_TYPES, COMMON_TYPES). raise_exception ( bool , default: True ) \u2013 If True, raises RequestValidationError for unsupported formats. If False, returns default_format. Default: True. default_format ( str , default: 'json' ) \u2013 Format to return when Accept header is None, wildcard, or unsupported (if raise_exception=False). Default: 'json'. Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: Dependency function that returns format identifier. Raises: RequestValidationError \u2013 422 if Accept header contains unsupported media type and raise_exception=True. Example from aniachifast.tools.request_types import ALL_FORMATS_TYPES from aniachifast.tools.dependencies import validate_and_parse_accept_header # Create dependency PARSE_ACCEPT_DEPENDENCY = Depends( validate_and_parse_accept_header(ALL_FORMATS_TYPES) ) @router.get(\"/endpoint\") async def example( fmt: str = PARSE_ACCEPT_DEPENDENCY ): if fmt == 'json': return JSONResponse(...) elif fmt == 'html': return HTMLResponse(...) validate_metadata validate_metadata ( metadata : Optional [ str ], dict_convert : bool = True ) -> tuple [ Optional [ Union [ dict , str ]], bool ] not necessary dependency because of pydantic models Validate and sanitize metadata input. This helper function validates that a metadata string: - Is valid JSON - Deserializes to a dictionary - Contains only valid string keys without spaces - Uses alphanumeric and underscore characters only This function is NOT a FastAPI dependency yet, but it is designed to be easily adapted into one in the future. Parameters: metadata ( Optional [ str ] ) \u2013 JSON string representing metadata. dict_convert ( bool , default: True ) \u2013 If True, returns a dictionary when valid. If False, returns the original string. Returns: tuple [ Optional [ Union [ dict , str ]], bool ] \u2013 tuple[Optional[Union[dict, str]], bool]: - The validated metadata (dict or original value) - A boolean indicating whether validation succeeded Example data, ok = validate_metadata('{\"user_id\": \"123\"}') if not ok: raise ValueError(\"Invalid metadata\") String Utils aniachifast.tools.string_utils String and text manipulation utilities. This module centralizes a collection of helper functions focused on string manipulation, normalization, searching, sanitization, and token generation. It is designed to be reusable across different layers of an application (e.g. API, services, utilities) and contains pure functions with no side effects, except where explicitly required (e.g. secure token generation). Common use cases include: - Phone number parsing - Path manipulation - Random and secure string generation - Unicode normalization and accent removal - Text searching and matching - Filename sanitization - Decorative ASCII output PATTERN module-attribute PATTERN = '^([ \\\\ d \\\\ + \\\\ - \\\\ . \\\\ s]+)[xX]? \\\\ s*( \\\\ d+)?$' clean_filename clean_filename ( filename : str , preffix_uuid : bool = True ) -> str Sanitize a filename and optionally prefix it with a UUID. Replaces spaces and invalid characters to ensure filesystem safety. Parameters: filename ( str ) \u2013 Original filename. preffix_uuid ( bool , default: True ) \u2013 Whether to prefix the filename with a UUID. Returns: str ( str ) \u2013 Sanitized filename. find_all_occurrences find_all_occurrences ( source : str , words : str , normalize : bool = False ) -> list [ tuple [ int , int ]] Find all occurrences of a substring in a string. Optionally normalizes the source text before searching. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ tuple [ int , int ]] \u2013 list[tuple[int, int]]: List of (start, end) index tuples. find_all_occurrences_as_dict find_all_occurrences_as_dict ( source : str , words : str , normalize : bool = False ) -> list [ dict [ str , Any ] | None ] Find all occurrences of a substring and return them as dictionaries. This function is a wrapper over find_all_occurrences that transforms index tuples into dictionaries. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ dict [ str , Any ] | None] \u2013 list[dict[str, Any]]: List of dictionaries with start and end indices. find_if_exists_any find_if_exists_any ( source : str , words : str , normalize : bool = False ) -> bool Check if any word exists in the source text. Splits the input words by whitespace and searches each token independently. Parameters: source ( str ) \u2013 Text to search in. words ( str ) \u2013 Space-separated words to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: bool ( bool ) \u2013 True if any word is found, False otherwise. generate_random_string generate_random_string ( length : int = 10 ) -> str Generate a random alphanumeric string. Intended for non-cryptographic use cases such as identifiers, temporary values, or test data. Parameters: length ( int , default: 10 ) \u2013 Length of the generated string. Returns: str ( str ) \u2013 Random alphanumeric string. generate_random_string_url_safe generate_random_string_url_safe ( length : int = 100 ) -> str Generate a cryptographically secure URL-safe token. Uses os.urandom and base64 encoding to produce a secure token suitable for authentication, reset links, or secrets. Parameters: length ( int , default: 100 ) \u2013 Number of random bytes to generate before encoding. Returns: str ( str ) \u2013 URL-safe base64-encoded token. get_cleaned_text get_cleaned_text ( text : str ) -> str Clean text by normalizing and trimming whitespace. Removes accents and diacritical marks, returning a stripped string. Parameters: text ( str ) \u2013 Input text. Returns: str ( str ) \u2013 Cleaned and normalized text. get_last_directory get_last_directory ( path : str ) -> str Return the last directory component of a filesystem path. Normalizes the path and extracts the final directory name. Parameters: path ( str ) \u2013 Filesystem path. Returns: str ( str ) \u2013 Last directory prefixed with / , or / if empty. get_single_ascii_art get_single_ascii_art ( msg : str , msg2 : Optional [ str ]) -> str Generate a simple ASCII art block with optional footer text. Useful for decorative output, logs, or playful API responses. Parameters: msg ( str ) \u2013 Primary message. msg2 ( Optional [ str ] ) \u2013 Optional secondary message. Returns: str ( str ) \u2013 ASCII art string. mask_ip mask_ip ( ip : Optional [ str ]) -> Optional [ str ] Mask an IP address (IPv4 or IPv6) to avoid exposing PII. IPv4 192.168.10.45 -> 192.168.xxx.xxx IPv6 2001:db8:85a3:0:0:8a2e:370:7334 -> 2001:db8:85a3:xxxx:xxxx:xxxx:xxxx:xxxx Parameters: ip ( Optional [ str ] ) \u2013 Raw IP address as string. Returns: Optional [ str ] \u2013 Masked IP address or None if input is None or invalid. normalize_str normalize_str ( value : object ) -> str Convert a value into a human-readable string representation. This function is primarily intended to normalize bytes values by decoding them into UTF-8 strings (with replacement for invalid sequences), preventing the default Python b'...' representation from leaking into user-facing messages. For all other types, str(value) is used. Parameters: value ( object ) \u2013 Any value to normalize. Returns: str ( str ) \u2013 A human-readable string representation of the value. Examples: >>> normalize_str ( b \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( 123 ) '123' >>> normalize_str ( None ) 'None' normalize_text normalize_text ( source : str | None ) -> str Normalize Unicode text by removing accents and diacritics. Converts accented characters into their ASCII equivalents. Parameters: source ( str | None ) \u2013 Input text. Returns: str ( str ) \u2013 Normalized text without diacritics. normalized_metadata_as_str normalized_metadata_as_str ( metadata : dict [ str , Any ] | None , ) -> dict [ str , str ] | None Normalize metadata values to strings. This helper converts all metadata values to their string representation, ensuring compatibility with backends that require dict[str, str] metadata (e.g. MinIO/S3). Parameters metadata : dict[str, Any] | None Arbitrary metadata dictionary. Returns dict[str, str] | None Metadata with all values converted to strings, or None if the input was None. split_phone_extension split_phone_extension ( phone : str , ) -> tuple [ str , Optional [ str ]] Split a phone number from its optional extension. Attempts to extract a phone extension if present. Supported formats include numbers followed by x , X , or whitespace-separated extensions. Parameters: phone ( str ) \u2013 Phone number string. Returns: str \u2013 tuple[str, Optional[str]]: A tuple containing the base phone number Optional [ str ] \u2013 and the extension if found, otherwise None.","title":"API Reference"},{"location":"api-reference/#complete-api-reference","text":"Complete API reference for all modules in Aniachifast.","title":"Complete API Reference"},{"location":"api-reference/#authentication","text":"","title":"Authentication"},{"location":"api-reference/#auth-interface","text":"","title":"Auth Interface"},{"location":"api-reference/#aniachifast.auth.auth_interface","text":"","title":"auth_interface"},{"location":"api-reference/#aniachifast.auth.auth_interface--authentication-interface-module","text":"This module defines the AuthInterface abstract base class for user authentication systems. Any concrete implementation of this interface must provide methods for user registration, login, token validation, and retrieving the current authenticated user. The interface allows flexibility to implement multiple authentication backends (e.g., database, Cognito, etc.) while keeping the contract consistent.","title":"Authentication Interface Module"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface","text":"Bases: ABC Abstract base class defining the interface for authentication operations. Implementations must provide async methods for user registration, login, retrieving the current user from a token, and verifying tokens.","title":"AuthInterface"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface.activate_user","text":"activate_user ( activation_code : str ) -> dict Activate a user account using the activation code. Parameters: activation_code ( str ) \u2013 The activation code sent to the user. Returns: dict ( dict ) \u2013 Activation result message. Raises: HTTPException \u2013 If the activation code is invalid or expired.","title":"activate_user"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface.get_current_user","text":"get_current_user ( token : str ) -> dict Retrieve the currently authenticated user from a JWT token. Parameters: token ( str ) \u2013 JWT access token. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse) or 'code' (str). Success case: {'status': 'success', 'message': 'Token validated successfully', 'user': UserResponse(...)} Failure cases: - Invalid token: {'status': 'error', 'message': 'Could not validate credentials', 'code': '401-001'} - Missing claims: {'status': 'error', 'message': 'Invalid token claims', 'code': '401-002'}","title":"get_current_user"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface.login","text":"login ( credentials : UserLogin ) -> dict Authenticate a user and return result with token or error. Parameters: credentials ( UserLogin ) \u2013 Pydantic model containing the username/email and password. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'token' (Token), 'user_id' (UUID) and 'company_id' (UUID). Success case: {'status': 'success', 'message': 'Login successful', 'token': Token(...), 'user_id': UUID(...), 'company_id': UUID(...)} Failure case: {'status': 'error', 'message': 'Error description'}","title":"login"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface.register","text":"register ( user : UserCreate ) -> dict Register a new user in the authentication system. Parameters: user ( UserCreate ) \u2013 Pydantic model containing the user's registration data (e.g., username, email, password, and other required fields depending on the implementation). Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse). Success case: {'status': 'success', 'message': 'User registered successfully', 'user': UserResponse(...)} Failure case: {'status': 'error', 'message': 'Error description'}","title":"register"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface.request_password_reset","text":"request_password_reset ( email : str ) -> dict Generate a password reset code for a user. Parameters: email ( str ) \u2013 The email address of the user requesting a password reset. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'reset_code' (str), 'user_id' (UUID) and 'company_id' (UUID) fields if identifiable. Success case: {'status': 'success', 'message': 'Reset code generated successfully', 'reset_code': 'abc123...', 'user_id': UUID(...), 'company_id': UUID(...)} Failure case: {'status': 'error', 'message': 'Error description', 'user_id': UUID(...), 'company_id': UUID(...)} Raises: HTTPException \u2013 If there's a system error.","title":"request_password_reset"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface.resend_activation_code","text":"resend_activation_code ( email : str ) -> dict Resend or regenerate activation code for a user. Parameters: email ( str ) \u2013 The email address of the user. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields, and optionally 'user_id' (UUID) and 'company_id' (UUID) if identifiable. Success case: {'status': 'success', 'message': 'Activation code sent successfully', 'user_id': UUID(...), 'company_id': UUID(...)} Failure case: {'status': 'error', 'message': 'Error description', 'user_id': UUID(...), 'company_id': UUID(...)} Raises: HTTPException \u2013 If there's a system error.","title":"resend_activation_code"},{"location":"api-reference/#aniachifast.auth.auth_interface.AuthInterface.verify_token","text":"verify_token ( token : str ) -> bool Verify if a given JWT token is valid. Parameters: token ( str ) \u2013 JWT access token to validate. Returns: bool ( bool ) \u2013 True if the token is valid and not expired, False bool \u2013 otherwise.","title":"verify_token"},{"location":"api-reference/#auth-factory","text":"","title":"Auth Factory"},{"location":"api-reference/#aniachifast.auth.auth_factory","text":"Authentication Service Factory. This module provides a factory responsible for instantiating and returning the appropriate authentication service implementation based on application configuration. Supported authentication backends: - Cognito (AWS Cognito) - Database-based authentication The selection is controlled via the AUTH_PROVIDER configuration setting.","title":"auth_factory"},{"location":"api-reference/#aniachifast.auth.auth_factory.settings","text":"settings = get_settings ()","title":"settings"},{"location":"api-reference/#aniachifast.auth.auth_factory.AuthFactory","text":"Factory class for authentication service resolution. This class encapsulates the logic required to select and instantiate the correct authentication provider according to the application's runtime configuration.","title":"AuthFactory"},{"location":"api-reference/#aniachifast.auth.auth_factory.AuthFactory.get_auth_service","text":"get_auth_service ( db : Session | None = None , ) -> AuthInterface Resolve and return the configured authentication service. Parameters: db ( Session | None , default: None ) \u2013 Database session. Required for database-based authentication when performing operations that need DB access (login, register, etc.). Can be None for stateless operations like JWT token validation. Returns: AuthInterface ( AuthInterface ) \u2013 Authentication service instance. Raises: ValueError \u2013 If AUTH_PROVIDER is invalid or unsupported. Notes For Cognito provider: db parameter is ignored For Database provider: db can be None for stateless operations (token validation), but required for DB operations (login, register)","title":"get_auth_service"},{"location":"api-reference/#tools-utilities","text":"","title":"Tools &amp; Utilities"},{"location":"api-reference/#dependencies","text":"","title":"Dependencies"},{"location":"api-reference/#aniachifast.tools.dependencies","text":"FastAPI request validation dependencies and helpers. This module provides reusable validation utilities designed to be used primarily as FastAPI dependencies. Their main purpose is to validate HTTP request headers (such as Accept ) and ensure that incoming requests comply with the formats supported by the application. Key concepts: - Header validation is performed using FastAPI dependency injection. - The allowed_headers family of functions works together with predefined media type constants (e.g. MediaTypes, COMMON_TYPES). - These dependencies are commonly used to enforce content negotiation rules before an endpoint handler is executed. Additionally, this module contains helper utilities that are not yet dependencies but are used to validate and sanitize metadata values received from the client.","title":"dependencies"},{"location":"api-reference/#aniachifast.tools.dependencies.VALID_KEY_REGEX","text":"VALID_KEY_REGEX = compile ( '^ \\\\ w+$' )","title":"VALID_KEY_REGEX"},{"location":"api-reference/#aniachifast.tools.dependencies.logger","text":"logger = getLogger ()","title":"logger"},{"location":"api-reference/#aniachifast.tools.dependencies.security","text":"security = HTTPBearer ()","title":"security"},{"location":"api-reference/#aniachifast.tools.dependencies.allowed_extension","text":"allowed_extension ( headers : Set [ str ], ) -> Callable [[ Request ], str ] FastAPI dependency that validates request format based on extensions. This dependency behaves similarly to allowed_headers but is designed to support scenarios where request format validation is tied to URL extensions or future asynchronous logic. Currently, it validates the Accept header and raises HTTP 406 if no allowed format is found. Parameters: headers ( Set [ str ] ) \u2013 A set of allowed media types. Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: A dependency function returning the matched media type. Raises: HTTPException \u2013 406 Not Acceptable if no allowed media type is found.","title":"allowed_extension"},{"location":"api-reference/#aniachifast.tools.dependencies.allowed_headers","text":"allowed_headers ( headers : Set [ str ], ) -> Callable [[ Request ], str ] FastAPI dependency that enforces allowed Accept header values. This dependency validates the incoming request Accept header against a predefined set of allowed media types. If none of the provided media types matches the request, an HTTP 406 (Not Acceptable) error is raised. IMPORTANT : You MUST use the predefined header sets from aniachifast.tools.request_types (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets. This ensures consistency and maintains a single source of truth for allowed header combinations. Parameters: headers ( Set [ str ] ) \u2013 A set of allowed media types. Use predefined sets from request_types module (COMMON_TYPES, SIMPLE_TYPES, JSON_TYPES, HTML_TYPES). Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: A dependency function that returns the matched media type. Raises: HTTPException \u2013 406 Not Acceptable if no allowed media type is found. Example CORRECT - Using predefined sets from request_types: from fastapi import Depends, APIRouter from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES, JSON_TYPES router = APIRouter() @router.get( \"/items\", dependencies=[Depends(allowed_headers(COMMON_TYPES))] ) async def list_items(): return {\"status\": \"ok\"} @router.post( \"/items\", dependencies=[Depends(allowed_headers(JSON_TYPES))] ) async def create_item(): return {\"status\": \"created\"} INCORRECT - Do NOT create ad-hoc sets: # \u274c WRONG - Don't do this from aniachifast.tools.media_utils import MediaTypes @router.get( \"/items\", dependencies=[Depends(allowed_headers( {MediaTypes.JSON, MediaTypes.HTML}))] )","title":"allowed_headers"},{"location":"api-reference/#aniachifast.tools.dependencies.get_accept_header","text":"get_accept_header ( request : Request ) -> Optional [ str ] FastAPI dependency that extracts the Accept header from the request. This is a simple dependency that returns the Accept header value or None if not present. Useful for content negotiation in endpoints. Parameters: request ( Request ) \u2013 The incoming FastAPI request. Returns: Optional [ str ] \u2013 Optional[str]: The Accept header value or None. Example @router.get(\"/endpoint\") async def example( accept: str | None = Depends(get_accept_header) ): return {\"accept\": accept or \"not specified\"}","title":"get_accept_header"},{"location":"api-reference/#aniachifast.tools.dependencies.get_header_format","text":"get_header_format ( headers : Set [ str ], ) -> Callable [[ Request ], Optional [ str ]] FastAPI dependency that optionally extracts a valid Accept header. Unlike allowed_headers , this dependency does not raise an exception if the request does not contain an accepted media type. Instead, it returns None when no intersection is found. This is useful for endpoints where content negotiation is optional or where a default format can be applied. Parameters: headers ( Set [ str ] ) \u2013 A set of acceptable media types. Returns: Callable [[ Request ], Optional [ str ]] \u2013 Callable[[Request], Optional[str]]: A dependency function returning the matched media type or None if no match is found. Example @router.get(\"/optional-format\") async def example( fmt: str | None = Depends(get_header_format({MediaTypes.JSON})) ): return {\"format\": fmt or \"default\"}","title":"get_header_format"},{"location":"api-reference/#aniachifast.tools.dependencies.no_query_params","text":"no_query_params ( request : Request ) -> bool Reject requests that include query parameters. This dependency enforces a strict API contract for endpoints that must not receive any query parameters. If any query parameters are present in the request URL, the request is rejected with HTTP 422 (Unprocessable Entity). Example (rejected): GET /tables?foo=bar Example (allowed): GET /tables How to use @router.get('/tables') async def tables( _: bool = Depends(no_query_params) ): Parameters: request ( Request ) \u2013 The FastAPI request object. Returns: bool ( bool ) \u2013 Always True if validation passes. Raises: HTTPException \u2013 422 Unprocessable Entity if query parameters are provided.","title":"no_query_params"},{"location":"api-reference/#aniachifast.tools.dependencies.save_upload_file_dependency","text":"save_upload_file_dependency ( * , allowed_types : Set [ str ] | None = None , max_size_bytes : int )","title":"save_upload_file_dependency"},{"location":"api-reference/#aniachifast.tools.dependencies.validate_and_parse_accept_header","text":"validate_and_parse_accept_header ( accepted_headers : Set [ str ], raise_exception : bool = True , default_format : str = \"json\" , html_default_format : str | None = None , ) -> Callable [[ Request ], str ] FastAPI dependency factory that validates and parses Accept header. This dependency validates the Accept header against a set of supported media types and returns a format identifier. If the Accept header contains an unsupported media type, it can either raise a RequestValidationError (HTTP 422) or return a default format. This validation happens BEFORE the endpoint handler is executed, preventing unnecessary database queries for invalid requests. Media type to format mapping: - application/json -> 'json' - text/html -> 'html' - text/csv -> 'csv' - text/tab-separated-values -> 'tsv' - application/xml -> 'xml' - text/yaml, application/yaml -> 'yaml' - text/plain -> 'txt' - / -> default_format - None -> default_format Parameters: accepted_headers ( Set [ str ] ) \u2013 Set of allowed media types. Use predefined sets from request_types module (e.g., ALL_FORMATS_TYPES, COMMON_TYPES). raise_exception ( bool , default: True ) \u2013 If True, raises RequestValidationError for unsupported formats. If False, returns default_format. Default: True. default_format ( str , default: 'json' ) \u2013 Format to return when Accept header is None, wildcard, or unsupported (if raise_exception=False). Default: 'json'. Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: Dependency function that returns format identifier. Raises: RequestValidationError \u2013 422 if Accept header contains unsupported media type and raise_exception=True. Example from aniachifast.tools.request_types import ALL_FORMATS_TYPES from aniachifast.tools.dependencies import validate_and_parse_accept_header # Create dependency PARSE_ACCEPT_DEPENDENCY = Depends( validate_and_parse_accept_header(ALL_FORMATS_TYPES) ) @router.get(\"/endpoint\") async def example( fmt: str = PARSE_ACCEPT_DEPENDENCY ): if fmt == 'json': return JSONResponse(...) elif fmt == 'html': return HTMLResponse(...)","title":"validate_and_parse_accept_header"},{"location":"api-reference/#aniachifast.tools.dependencies.validate_metadata","text":"validate_metadata ( metadata : Optional [ str ], dict_convert : bool = True ) -> tuple [ Optional [ Union [ dict , str ]], bool ] not necessary dependency because of pydantic models Validate and sanitize metadata input. This helper function validates that a metadata string: - Is valid JSON - Deserializes to a dictionary - Contains only valid string keys without spaces - Uses alphanumeric and underscore characters only This function is NOT a FastAPI dependency yet, but it is designed to be easily adapted into one in the future. Parameters: metadata ( Optional [ str ] ) \u2013 JSON string representing metadata. dict_convert ( bool , default: True ) \u2013 If True, returns a dictionary when valid. If False, returns the original string. Returns: tuple [ Optional [ Union [ dict , str ]], bool ] \u2013 tuple[Optional[Union[dict, str]], bool]: - The validated metadata (dict or original value) - A boolean indicating whether validation succeeded Example data, ok = validate_metadata('{\"user_id\": \"123\"}') if not ok: raise ValueError(\"Invalid metadata\")","title":"validate_metadata"},{"location":"api-reference/#string-utils","text":"","title":"String Utils"},{"location":"api-reference/#aniachifast.tools.string_utils","text":"String and text manipulation utilities. This module centralizes a collection of helper functions focused on string manipulation, normalization, searching, sanitization, and token generation. It is designed to be reusable across different layers of an application (e.g. API, services, utilities) and contains pure functions with no side effects, except where explicitly required (e.g. secure token generation). Common use cases include: - Phone number parsing - Path manipulation - Random and secure string generation - Unicode normalization and accent removal - Text searching and matching - Filename sanitization - Decorative ASCII output","title":"string_utils"},{"location":"api-reference/#aniachifast.tools.string_utils.PATTERN","text":"PATTERN = '^([ \\\\ d \\\\ + \\\\ - \\\\ . \\\\ s]+)[xX]? \\\\ s*( \\\\ d+)?$'","title":"PATTERN"},{"location":"api-reference/#aniachifast.tools.string_utils.clean_filename","text":"clean_filename ( filename : str , preffix_uuid : bool = True ) -> str Sanitize a filename and optionally prefix it with a UUID. Replaces spaces and invalid characters to ensure filesystem safety. Parameters: filename ( str ) \u2013 Original filename. preffix_uuid ( bool , default: True ) \u2013 Whether to prefix the filename with a UUID. Returns: str ( str ) \u2013 Sanitized filename.","title":"clean_filename"},{"location":"api-reference/#aniachifast.tools.string_utils.find_all_occurrences","text":"find_all_occurrences ( source : str , words : str , normalize : bool = False ) -> list [ tuple [ int , int ]] Find all occurrences of a substring in a string. Optionally normalizes the source text before searching. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ tuple [ int , int ]] \u2013 list[tuple[int, int]]: List of (start, end) index tuples.","title":"find_all_occurrences"},{"location":"api-reference/#aniachifast.tools.string_utils.find_all_occurrences_as_dict","text":"find_all_occurrences_as_dict ( source : str , words : str , normalize : bool = False ) -> list [ dict [ str , Any ] | None ] Find all occurrences of a substring and return them as dictionaries. This function is a wrapper over find_all_occurrences that transforms index tuples into dictionaries. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ dict [ str , Any ] | None] \u2013 list[dict[str, Any]]: List of dictionaries with start and end indices.","title":"find_all_occurrences_as_dict"},{"location":"api-reference/#aniachifast.tools.string_utils.find_if_exists_any","text":"find_if_exists_any ( source : str , words : str , normalize : bool = False ) -> bool Check if any word exists in the source text. Splits the input words by whitespace and searches each token independently. Parameters: source ( str ) \u2013 Text to search in. words ( str ) \u2013 Space-separated words to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: bool ( bool ) \u2013 True if any word is found, False otherwise.","title":"find_if_exists_any"},{"location":"api-reference/#aniachifast.tools.string_utils.generate_random_string","text":"generate_random_string ( length : int = 10 ) -> str Generate a random alphanumeric string. Intended for non-cryptographic use cases such as identifiers, temporary values, or test data. Parameters: length ( int , default: 10 ) \u2013 Length of the generated string. Returns: str ( str ) \u2013 Random alphanumeric string.","title":"generate_random_string"},{"location":"api-reference/#aniachifast.tools.string_utils.generate_random_string_url_safe","text":"generate_random_string_url_safe ( length : int = 100 ) -> str Generate a cryptographically secure URL-safe token. Uses os.urandom and base64 encoding to produce a secure token suitable for authentication, reset links, or secrets. Parameters: length ( int , default: 100 ) \u2013 Number of random bytes to generate before encoding. Returns: str ( str ) \u2013 URL-safe base64-encoded token.","title":"generate_random_string_url_safe"},{"location":"api-reference/#aniachifast.tools.string_utils.get_cleaned_text","text":"get_cleaned_text ( text : str ) -> str Clean text by normalizing and trimming whitespace. Removes accents and diacritical marks, returning a stripped string. Parameters: text ( str ) \u2013 Input text. Returns: str ( str ) \u2013 Cleaned and normalized text.","title":"get_cleaned_text"},{"location":"api-reference/#aniachifast.tools.string_utils.get_last_directory","text":"get_last_directory ( path : str ) -> str Return the last directory component of a filesystem path. Normalizes the path and extracts the final directory name. Parameters: path ( str ) \u2013 Filesystem path. Returns: str ( str ) \u2013 Last directory prefixed with / , or / if empty.","title":"get_last_directory"},{"location":"api-reference/#aniachifast.tools.string_utils.get_single_ascii_art","text":"get_single_ascii_art ( msg : str , msg2 : Optional [ str ]) -> str Generate a simple ASCII art block with optional footer text. Useful for decorative output, logs, or playful API responses. Parameters: msg ( str ) \u2013 Primary message. msg2 ( Optional [ str ] ) \u2013 Optional secondary message. Returns: str ( str ) \u2013 ASCII art string.","title":"get_single_ascii_art"},{"location":"api-reference/#aniachifast.tools.string_utils.mask_ip","text":"mask_ip ( ip : Optional [ str ]) -> Optional [ str ] Mask an IP address (IPv4 or IPv6) to avoid exposing PII. IPv4 192.168.10.45 -> 192.168.xxx.xxx IPv6 2001:db8:85a3:0:0:8a2e:370:7334 -> 2001:db8:85a3:xxxx:xxxx:xxxx:xxxx:xxxx Parameters: ip ( Optional [ str ] ) \u2013 Raw IP address as string. Returns: Optional [ str ] \u2013 Masked IP address or None if input is None or invalid.","title":"mask_ip"},{"location":"api-reference/#aniachifast.tools.string_utils.normalize_str","text":"normalize_str ( value : object ) -> str Convert a value into a human-readable string representation. This function is primarily intended to normalize bytes values by decoding them into UTF-8 strings (with replacement for invalid sequences), preventing the default Python b'...' representation from leaking into user-facing messages. For all other types, str(value) is used. Parameters: value ( object ) \u2013 Any value to normalize. Returns: str ( str ) \u2013 A human-readable string representation of the value. Examples: >>> normalize_str ( b \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( 123 ) '123' >>> normalize_str ( None ) 'None'","title":"normalize_str"},{"location":"api-reference/#aniachifast.tools.string_utils.normalize_text","text":"normalize_text ( source : str | None ) -> str Normalize Unicode text by removing accents and diacritics. Converts accented characters into their ASCII equivalents. Parameters: source ( str | None ) \u2013 Input text. Returns: str ( str ) \u2013 Normalized text without diacritics.","title":"normalize_text"},{"location":"api-reference/#aniachifast.tools.string_utils.normalized_metadata_as_str","text":"normalized_metadata_as_str ( metadata : dict [ str , Any ] | None , ) -> dict [ str , str ] | None Normalize metadata values to strings. This helper converts all metadata values to their string representation, ensuring compatibility with backends that require dict[str, str] metadata (e.g. MinIO/S3).","title":"normalized_metadata_as_str"},{"location":"api-reference/#aniachifast.tools.string_utils.normalized_metadata_as_str--parameters","text":"metadata : dict[str, Any] | None Arbitrary metadata dictionary.","title":"Parameters"},{"location":"api-reference/#aniachifast.tools.string_utils.normalized_metadata_as_str--returns","text":"dict[str, str] | None Metadata with all values converted to strings, or None if the input was None.","title":"Returns"},{"location":"api-reference/#aniachifast.tools.string_utils.split_phone_extension","text":"split_phone_extension ( phone : str , ) -> tuple [ str , Optional [ str ]] Split a phone number from its optional extension. Attempts to extract a phone extension if present. Supported formats include numbers followed by x , X , or whitespace-separated extensions. Parameters: phone ( str ) \u2013 Phone number string. Returns: str \u2013 tuple[str, Optional[str]]: A tuple containing the base phone number Optional [ str ] \u2013 and the extension if found, otherwise None.","title":"split_phone_extension"},{"location":"architecture/","text":"","title":"Architecture"},{"location":"constants/","text":"Constants aniachifast.constants Module for Standard Constants. This module defines common constants used across the application for error messages, status indications, or placeholder values. These constants ensure consistency in messages and reduce hard-coded strings scattered throughout the codebase. Constants: - NOT_IMPLEMENTED (str): Message indicating that a method or feature is not yet implemented. - NOT_INSTALLED (str): Message indicating that a required package or component is not installed. Example from my_constants_module import NOT_IMPLEMENTED print(NOT_IMPLEMENTED) 'Method not implemented yet' ACTIVITES_LOGGING_WARNING_1 module-attribute ACTIVITES_LOGGING_WARNING_1 : Final [ str ] = ( \"\u26a0\ufe0f WARNING: all kind of activities can be logged in the ledger \u26a0\ufe0f\" ) ACTIVITES_LOGGING_WARNING_2 module-attribute ACTIVITES_LOGGING_WARNING_2 : Final [ str ] = ( \"\u26a0\ufe0f WARNING: LEDGER_ACTIVITY_TYPES is not defined or empty!\" ) ACTVITIES_LOGGING_SUCCESS module-attribute ACTVITIES_LOGGING_SUCCESS : Final [ str ] = ( \"\u2705 Raw activity types configuration: loaded from settings\" ) APPLICATION_UPTIME module-attribute APPLICATION_UPTIME : Final [ str ] = 'Application uptime' CURRENT_HEALTH_STATUS module-attribute CURRENT_HEALTH_STATUS : Final [ str ] = ( \"Current health status of the application\" ) DATABASE_CONNECTION_FAILED module-attribute DATABASE_CONNECTION_FAILED : Final [ str ] = ( \"\ud83d\udea8 Database connection failed after all retries. Stopping process.\" ) EPOCH_TIME_DESC module-attribute EPOCH_TIME_DESC : Final [ str ] = ( \"Current server time expressed as Unix epoch seconds\" ) NOT_IMPLEMENTED module-attribute NOT_IMPLEMENTED : Final [ str ] = 'Method not implemented yet' NOT_INSTALLED module-attribute NOT_INSTALLED : Final [ str ] = 'Not installed' OAUTH2_TOKEN_TYPE module-attribute OAUTH2_TOKEN_TYPE = 'bearer' UNKNOWN_TIME_ZONE module-attribute UNKNOWN_TIME_ZONE : Final [ str ] = 'Unknown time zone'","title":"Constants"},{"location":"constants/#constants","text":"","title":"Constants"},{"location":"constants/#aniachifast.constants","text":"Module for Standard Constants. This module defines common constants used across the application for error messages, status indications, or placeholder values. These constants ensure consistency in messages and reduce hard-coded strings scattered throughout the codebase. Constants: - NOT_IMPLEMENTED (str): Message indicating that a method or feature is not yet implemented. - NOT_INSTALLED (str): Message indicating that a required package or component is not installed. Example from my_constants_module import NOT_IMPLEMENTED print(NOT_IMPLEMENTED) 'Method not implemented yet'","title":"constants"},{"location":"constants/#aniachifast.constants.ACTIVITES_LOGGING_WARNING_1","text":"ACTIVITES_LOGGING_WARNING_1 : Final [ str ] = ( \"\u26a0\ufe0f WARNING: all kind of activities can be logged in the ledger \u26a0\ufe0f\" )","title":"ACTIVITES_LOGGING_WARNING_1"},{"location":"constants/#aniachifast.constants.ACTIVITES_LOGGING_WARNING_2","text":"ACTIVITES_LOGGING_WARNING_2 : Final [ str ] = ( \"\u26a0\ufe0f WARNING: LEDGER_ACTIVITY_TYPES is not defined or empty!\" )","title":"ACTIVITES_LOGGING_WARNING_2"},{"location":"constants/#aniachifast.constants.ACTVITIES_LOGGING_SUCCESS","text":"ACTVITIES_LOGGING_SUCCESS : Final [ str ] = ( \"\u2705 Raw activity types configuration: loaded from settings\" )","title":"ACTVITIES_LOGGING_SUCCESS"},{"location":"constants/#aniachifast.constants.APPLICATION_UPTIME","text":"APPLICATION_UPTIME : Final [ str ] = 'Application uptime'","title":"APPLICATION_UPTIME"},{"location":"constants/#aniachifast.constants.CURRENT_HEALTH_STATUS","text":"CURRENT_HEALTH_STATUS : Final [ str ] = ( \"Current health status of the application\" )","title":"CURRENT_HEALTH_STATUS"},{"location":"constants/#aniachifast.constants.DATABASE_CONNECTION_FAILED","text":"DATABASE_CONNECTION_FAILED : Final [ str ] = ( \"\ud83d\udea8 Database connection failed after all retries. Stopping process.\" )","title":"DATABASE_CONNECTION_FAILED"},{"location":"constants/#aniachifast.constants.EPOCH_TIME_DESC","text":"EPOCH_TIME_DESC : Final [ str ] = ( \"Current server time expressed as Unix epoch seconds\" )","title":"EPOCH_TIME_DESC"},{"location":"constants/#aniachifast.constants.NOT_IMPLEMENTED","text":"NOT_IMPLEMENTED : Final [ str ] = 'Method not implemented yet'","title":"NOT_IMPLEMENTED"},{"location":"constants/#aniachifast.constants.NOT_INSTALLED","text":"NOT_INSTALLED : Final [ str ] = 'Not installed'","title":"NOT_INSTALLED"},{"location":"constants/#aniachifast.constants.OAUTH2_TOKEN_TYPE","text":"OAUTH2_TOKEN_TYPE = 'bearer'","title":"OAUTH2_TOKEN_TYPE"},{"location":"constants/#aniachifast.constants.UNKNOWN_TIME_ZONE","text":"UNKNOWN_TIME_ZONE : Final [ str ] = 'Unknown time zone'","title":"UNKNOWN_TIME_ZONE"},{"location":"info/","text":"Info aniachifast.info Application build and version metadata. This module contains immutable build-time information used for observability, diagnostics, and informational endpoints such as /info , /health , or /version . All variables defined here are intended to be constants and MUST NOT be modified at runtime. Typical use cases: - Displaying build information in API responses - Debugging deployed versions - CI/CD build traceability BUILD_HASH module-attribute BUILD_HASH : Final [ str ] = '2542a669ad38' BUILD_TYPE module-attribute BUILD_TYPE : Final [ str ] = 'development' COMMIT_ID module-attribute COMMIT_ID : Final [ str ] = 'c5b1f81' DATE_TIME module-attribute DATE_TIME : Final [ str ] = '202601241723' VERSION_PARAM module-attribute VERSION_PARAM : Final [ str ] = '101-17:05-20000-2grg0'","title":"Info"},{"location":"info/#info","text":"","title":"Info"},{"location":"info/#aniachifast.info","text":"Application build and version metadata. This module contains immutable build-time information used for observability, diagnostics, and informational endpoints such as /info , /health , or /version . All variables defined here are intended to be constants and MUST NOT be modified at runtime. Typical use cases: - Displaying build information in API responses - Debugging deployed versions - CI/CD build traceability","title":"info"},{"location":"info/#aniachifast.info.BUILD_HASH","text":"BUILD_HASH : Final [ str ] = '2542a669ad38'","title":"BUILD_HASH"},{"location":"info/#aniachifast.info.BUILD_TYPE","text":"BUILD_TYPE : Final [ str ] = 'development'","title":"BUILD_TYPE"},{"location":"info/#aniachifast.info.COMMIT_ID","text":"COMMIT_ID : Final [ str ] = 'c5b1f81'","title":"COMMIT_ID"},{"location":"info/#aniachifast.info.DATE_TIME","text":"DATE_TIME : Final [ str ] = '202601241723'","title":"DATE_TIME"},{"location":"info/#aniachifast.info.VERSION_PARAM","text":"VERSION_PARAM : Final [ str ] = '101-17:05-20000-2grg0'","title":"VERSION_PARAM"},{"location":"__about__/overview/","text":"About Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"About"},{"location":"__about__/overview/#about","text":"","title":"About"},{"location":"__about__/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"__about__/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"__about__/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"admin_tools/ledger_management_dynamodb/","text":"Admin Tools Ledger Management Dynamodb aniachifast.admin_tools.ledger_management_dynamodb Activity Ledger Management Module. This module provides a high-level read-only interface to query activity events stored in DynamoDB. Supported access patterns: - Query events by user (using a Global Secondary Index) - Query events by company (using the table primary key) - Optional date range filtering This module intentionally contains no HTTP or FastAPI logic . It is designed to be used by service layers and background jobs. LedgerManagement High-level query interface for the Activity Ledger. This class encapsulates DynamoDB query logic for activity events, exposing clear read access patterns without leaking DynamoDB implementation details to higher layers. Query capabilities: - Events by user (via GSI gsi1 ) - Events by company (via partition key) client instance-attribute client = client __init__ __init__ ( client : BaseClient ) Parameters: client ( BaseClient ) \u2013 Boto3 DynamoDB client instance. get_events_by_company get_events_by_company ( company_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a company. If company_id is None, anonymous events are returned (partition key: COMPANY#ANON). Parameters: company_id ( Optional [ UUID ] ) \u2013 Company identifier. from_ts ( Optional [ datetime ] , default: None ) \u2013 Start timestamp (inclusive). to_ts ( Optional [ datetime ] , default: None ) \u2013 End timestamp (inclusive). limit ( Optional [ int ] , default: 200 ) \u2013 Maximum number of items to return. oldest_first ( bool , default: True ) \u2013 If True, sort oldest events first. Returns: LedgerQueryResult ( LedgerQueryResult ) \u2013 Result object containing event count LedgerQueryResult \u2013 and a list of LedgerEvent items. Example manager.get_events_by_company( ... company_id=None ... ) get_events_by_registered_users get_events_by_registered_users ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch all activity events for registered users (user_id exists). WARNING: This operation can be very inefficient and costly on large tables. get_events_by_user get_events_by_user ( user_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a specific user. This method queries the gsi_user index using the user identifier as the partition key and optionally filters results by timestamp range. Parameters: user_id ( Optional [ UUID ] ) \u2013 Unique identifier of the user (can be None for anonymous). from_ts ( Optional [ datetime ] , default: None ) \u2013 Start timestamp (inclusive). to_ts ( Optional [ datetime ] , default: None ) \u2013 End timestamp (inclusive). limit ( Optional [ int ] , default: 200 ) \u2013 Maximum number of items to return. oldest_first ( bool , default: True ) \u2013 If True, sort oldest events first. Returns: LedgerQueryResult ( LedgerQueryResult ) \u2013 Result object containing event count LedgerQueryResult \u2013 and a list of LedgerEvent items. Example manager.get_events_by_user( ... user_id=UUID(\"abc123...\"), ... from_ts=datetime(2026, 1, 1), ... to_ts=datetime(2026, 1, 31), ... limit=50, ... oldest_first=True, ... )","title":"Ledger Management Dynamodb"},{"location":"admin_tools/ledger_management_dynamodb/#admin-tools-ledger-management-dynamodb","text":"","title":"Admin Tools Ledger Management Dynamodb"},{"location":"admin_tools/ledger_management_dynamodb/#aniachifast.admin_tools.ledger_management_dynamodb","text":"Activity Ledger Management Module. This module provides a high-level read-only interface to query activity events stored in DynamoDB. Supported access patterns: - Query events by user (using a Global Secondary Index) - Query events by company (using the table primary key) - Optional date range filtering This module intentionally contains no HTTP or FastAPI logic . It is designed to be used by service layers and background jobs.","title":"ledger_management_dynamodb"},{"location":"admin_tools/ledger_management_dynamodb/#aniachifast.admin_tools.ledger_management_dynamodb.LedgerManagement","text":"High-level query interface for the Activity Ledger. This class encapsulates DynamoDB query logic for activity events, exposing clear read access patterns without leaking DynamoDB implementation details to higher layers. Query capabilities: - Events by user (via GSI gsi1 ) - Events by company (via partition key)","title":"LedgerManagement"},{"location":"admin_tools/ledger_management_dynamodb/#aniachifast.admin_tools.ledger_management_dynamodb.LedgerManagement.client","text":"client = client","title":"client"},{"location":"admin_tools/ledger_management_dynamodb/#aniachifast.admin_tools.ledger_management_dynamodb.LedgerManagement.__init__","text":"__init__ ( client : BaseClient ) Parameters: client ( BaseClient ) \u2013 Boto3 DynamoDB client instance.","title":"__init__"},{"location":"admin_tools/ledger_management_dynamodb/#aniachifast.admin_tools.ledger_management_dynamodb.LedgerManagement.get_events_by_company","text":"get_events_by_company ( company_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a company. If company_id is None, anonymous events are returned (partition key: COMPANY#ANON). Parameters: company_id ( Optional [ UUID ] ) \u2013 Company identifier. from_ts ( Optional [ datetime ] , default: None ) \u2013 Start timestamp (inclusive). to_ts ( Optional [ datetime ] , default: None ) \u2013 End timestamp (inclusive). limit ( Optional [ int ] , default: 200 ) \u2013 Maximum number of items to return. oldest_first ( bool , default: True ) \u2013 If True, sort oldest events first. Returns: LedgerQueryResult ( LedgerQueryResult ) \u2013 Result object containing event count LedgerQueryResult \u2013 and a list of LedgerEvent items. Example manager.get_events_by_company( ... company_id=None ... )","title":"get_events_by_company"},{"location":"admin_tools/ledger_management_dynamodb/#aniachifast.admin_tools.ledger_management_dynamodb.LedgerManagement.get_events_by_registered_users","text":"get_events_by_registered_users ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch all activity events for registered users (user_id exists). WARNING: This operation can be very inefficient and costly on large tables.","title":"get_events_by_registered_users"},{"location":"admin_tools/ledger_management_dynamodb/#aniachifast.admin_tools.ledger_management_dynamodb.LedgerManagement.get_events_by_user","text":"get_events_by_user ( user_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a specific user. This method queries the gsi_user index using the user identifier as the partition key and optionally filters results by timestamp range. Parameters: user_id ( Optional [ UUID ] ) \u2013 Unique identifier of the user (can be None for anonymous). from_ts ( Optional [ datetime ] , default: None ) \u2013 Start timestamp (inclusive). to_ts ( Optional [ datetime ] , default: None ) \u2013 End timestamp (inclusive). limit ( Optional [ int ] , default: 200 ) \u2013 Maximum number of items to return. oldest_first ( bool , default: True ) \u2013 If True, sort oldest events first. Returns: LedgerQueryResult ( LedgerQueryResult ) \u2013 Result object containing event count LedgerQueryResult \u2013 and a list of LedgerEvent items. Example manager.get_events_by_user( ... user_id=UUID(\"abc123...\"), ... from_ts=datetime(2026, 1, 1), ... to_ts=datetime(2026, 1, 31), ... limit=50, ... oldest_first=True, ... )","title":"get_events_by_user"},{"location":"admin_tools/ledger_management_psql/","text":"Admin Tools Ledger Management Psql aniachifast.admin_tools.ledger_management_psql PostgreSQL Activity Ledger Management Module. Provides read-only query access to activity events stored in PostgreSQL, mirroring the DynamoDB ledger semantics. PostgresLedgerManagement PostgreSQL-backed implementation of the Activity Ledger reader. This class mirrors the DynamoDB access patterns and satisfies the ActivityLedgerReader protocol. db instance-attribute db = db __init__ __init__ ( db : Session ) Parameters: db ( Session ) \u2013 SQLAlchemy database session (injected). get_all_events get_all_events ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch all activity events. get_events_by_company get_events_by_company ( company_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a company or anonymous scope. get_events_by_registered_users get_events_by_registered_users ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch all activity events for registered users (user_id is not None). get_events_by_user get_events_by_user ( user_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a specific user.","title":"Ledger Management Psql"},{"location":"admin_tools/ledger_management_psql/#admin-tools-ledger-management-psql","text":"","title":"Admin Tools Ledger Management Psql"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql","text":"PostgreSQL Activity Ledger Management Module. Provides read-only query access to activity events stored in PostgreSQL, mirroring the DynamoDB ledger semantics.","title":"ledger_management_psql"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql.PostgresLedgerManagement","text":"PostgreSQL-backed implementation of the Activity Ledger reader. This class mirrors the DynamoDB access patterns and satisfies the ActivityLedgerReader protocol.","title":"PostgresLedgerManagement"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql.PostgresLedgerManagement.db","text":"db = db","title":"db"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql.PostgresLedgerManagement.__init__","text":"__init__ ( db : Session ) Parameters: db ( Session ) \u2013 SQLAlchemy database session (injected).","title":"__init__"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql.PostgresLedgerManagement.get_all_events","text":"get_all_events ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch all activity events.","title":"get_all_events"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql.PostgresLedgerManagement.get_events_by_company","text":"get_events_by_company ( company_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a company or anonymous scope.","title":"get_events_by_company"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql.PostgresLedgerManagement.get_events_by_registered_users","text":"get_events_by_registered_users ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch all activity events for registered users (user_id is not None).","title":"get_events_by_registered_users"},{"location":"admin_tools/ledger_management_psql/#aniachifast.admin_tools.ledger_management_psql.PostgresLedgerManagement.get_events_by_user","text":"get_events_by_user ( user_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Fetch activity events for a specific user.","title":"get_events_by_user"},{"location":"admin_tools/ledger_protocol/","text":"Admin Tools Ledger Protocol aniachifast.admin_tools.ledger_protocol Activity Ledger Query Protocol. Defines the read-only contract that all activity ledger implementations must satisfy, regardless of storage backend. ActivityLedgerReader Bases: Protocol Protocol defining read access patterns for the Activity Ledger. Implementations must provide identical query semantics so they can be swapped transparently at runtime. This protocol is intentionally read-only. get_all_events get_all_events ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve all activity events without filtering by user or company. get_events_by_company get_events_by_company ( company_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve activity events for a company or anonymous scope. get_events_by_registered_users get_events_by_registered_users ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve all activity events for registered users (where user_id is not None). get_events_by_user get_events_by_user ( user_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve activity events for a specific user.","title":"Ledger Protocol"},{"location":"admin_tools/ledger_protocol/#admin-tools-ledger-protocol","text":"","title":"Admin Tools Ledger Protocol"},{"location":"admin_tools/ledger_protocol/#aniachifast.admin_tools.ledger_protocol","text":"Activity Ledger Query Protocol. Defines the read-only contract that all activity ledger implementations must satisfy, regardless of storage backend.","title":"ledger_protocol"},{"location":"admin_tools/ledger_protocol/#aniachifast.admin_tools.ledger_protocol.ActivityLedgerReader","text":"Bases: Protocol Protocol defining read access patterns for the Activity Ledger. Implementations must provide identical query semantics so they can be swapped transparently at runtime. This protocol is intentionally read-only.","title":"ActivityLedgerReader"},{"location":"admin_tools/ledger_protocol/#aniachifast.admin_tools.ledger_protocol.ActivityLedgerReader.get_all_events","text":"get_all_events ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve all activity events without filtering by user or company.","title":"get_all_events"},{"location":"admin_tools/ledger_protocol/#aniachifast.admin_tools.ledger_protocol.ActivityLedgerReader.get_events_by_company","text":"get_events_by_company ( company_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve activity events for a company or anonymous scope.","title":"get_events_by_company"},{"location":"admin_tools/ledger_protocol/#aniachifast.admin_tools.ledger_protocol.ActivityLedgerReader.get_events_by_registered_users","text":"get_events_by_registered_users ( from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve all activity events for registered users (where user_id is not None).","title":"get_events_by_registered_users"},{"location":"admin_tools/ledger_protocol/#aniachifast.admin_tools.ledger_protocol.ActivityLedgerReader.get_events_by_user","text":"get_events_by_user ( user_id : Optional [ UUID ], from_ts : Optional [ datetime ] = None , to_ts : Optional [ datetime ] = None , limit : Optional [ int ] = 200 , oldest_first : bool = True , ) -> LedgerQueryResult Retrieve activity events for a specific user.","title":"get_events_by_user"},{"location":"admin_tools/overview/","text":"Admin Tools Overview The admin tools module provides utilities for administrative operations in the application. Features User management operations Administrative utilities Bulk operations support Modules User Management - User administration utilities Usage from aniachifast.admin_tools import user_management","title":"Overview"},{"location":"admin_tools/overview/#admin-tools-overview","text":"The admin tools module provides utilities for administrative operations in the application.","title":"Admin Tools Overview"},{"location":"admin_tools/overview/#features","text":"User management operations Administrative utilities Bulk operations support","title":"Features"},{"location":"admin_tools/overview/#modules","text":"User Management - User administration utilities","title":"Modules"},{"location":"admin_tools/overview/#usage","text":"from aniachifast.admin_tools import user_management","title":"Usage"},{"location":"admin_tools/user_management/","text":"User Management aniachifast.admin_tools.user_management User Management Admin Tools This module provides administrative functions for managing users in the database. These functions are intended for administrative use only and should be protected by appropriate access controls. Functions in this module allow: - Retrieving complete user information by UUID with automatic data masking - Managing user accounts with comprehensive details - Viewing user metadata and status with security considerations The module uses specialized Pydantic models that automatically handle sensitive data masking (credit cards, SSNs) and proper data formatting for administrative interfaces. logger module-attribute logger = getLogger ( 'aniachifast' ) UserManagement Administrative tools for user management. This class provides methods for administrative operations on user accounts, including retrieval of complete user information with automatic sensitive data masking and proper formatting. All methods return data using specialized admin Pydantic models that ensure consistent formatting and security best practices. db instance-attribute db = db __init__ __init__ ( db : Session ) Parameters: db ( Session ) \u2013 SQLAlchemy database session for database operations. get_user_by_uuid get_user_by_uuid ( user_uuid : UUID ) -> dict Retrieve complete user information by UUID. This method returns all user data including sensitive fields that are normally not exposed through public APIs. Sensitive data (credit cards, SSNs) is automatically masked using Pydantic field validators for security. The response uses the AdminUserResponse model which provides: - Automatic data type conversion (UUID to string, datetime formatting) - Sensitive data masking (credit card: *- - ***-1234) - Comprehensive field validation and documentation - Consistent JSON serialization Parameters: user_uuid ( UUID ) \u2013 The UUID of the user to retrieve. Returns: dict ( dict ) \u2013 Response dictionary with 'status' and 'message' or 'data'. Success case: { 'status': 'success', 'data': AdminUserResponse (as dict) } Failure case: { 'status': 'error', 'message': 'User with UUID {uuid} not found' } Example user_mgmt = UserManagement(db_session) result = user_mgmt.get_user_by_uuid(user_uuid) if result['status'] == 'success': ... user_data = result['data'] ... print(f\"User: {user_data['username']}\") ... print(f\"Masked CC: {user_data['creditcard']}\") ... # *- - ***-1234 list_user list_user () -> dict Retrieve a list of user identifiers and email addresses. This method returns a lightweight representation of all users, exposing only non-sensitive fields intended for administrative and integration use cases (e.g., notifications, audits, lookups). Returned fields: - uuid : User unique identifier - email : User email address The response is sorted by email for consistency. Returns dict Success case: { \"status\": \"success\", \"data\": [ {\"uuid\": \" \", \"email\": \"user@example.com\"}, ... ] } Failure case: { \"status\": \"error\", \"message\": \"<error description>\" }","title":"User Management"},{"location":"admin_tools/user_management/#user-management","text":"","title":"User Management"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management","text":"","title":"user_management"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management--user-management-admin-tools","text":"This module provides administrative functions for managing users in the database. These functions are intended for administrative use only and should be protected by appropriate access controls. Functions in this module allow: - Retrieving complete user information by UUID with automatic data masking - Managing user accounts with comprehensive details - Viewing user metadata and status with security considerations The module uses specialized Pydantic models that automatically handle sensitive data masking (credit cards, SSNs) and proper data formatting for administrative interfaces.","title":"User Management Admin Tools"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management.UserManagement","text":"Administrative tools for user management. This class provides methods for administrative operations on user accounts, including retrieval of complete user information with automatic sensitive data masking and proper formatting. All methods return data using specialized admin Pydantic models that ensure consistent formatting and security best practices.","title":"UserManagement"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management.UserManagement.db","text":"db = db","title":"db"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management.UserManagement.__init__","text":"__init__ ( db : Session ) Parameters: db ( Session ) \u2013 SQLAlchemy database session for database operations.","title":"__init__"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management.UserManagement.get_user_by_uuid","text":"get_user_by_uuid ( user_uuid : UUID ) -> dict Retrieve complete user information by UUID. This method returns all user data including sensitive fields that are normally not exposed through public APIs. Sensitive data (credit cards, SSNs) is automatically masked using Pydantic field validators for security. The response uses the AdminUserResponse model which provides: - Automatic data type conversion (UUID to string, datetime formatting) - Sensitive data masking (credit card: *- - ***-1234) - Comprehensive field validation and documentation - Consistent JSON serialization Parameters: user_uuid ( UUID ) \u2013 The UUID of the user to retrieve. Returns: dict ( dict ) \u2013 Response dictionary with 'status' and 'message' or 'data'. Success case: { 'status': 'success', 'data': AdminUserResponse (as dict) } Failure case: { 'status': 'error', 'message': 'User with UUID {uuid} not found' } Example user_mgmt = UserManagement(db_session) result = user_mgmt.get_user_by_uuid(user_uuid) if result['status'] == 'success': ... user_data = result['data'] ... print(f\"User: {user_data['username']}\") ... print(f\"Masked CC: {user_data['creditcard']}\") ... # *- - ***-1234","title":"get_user_by_uuid"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management.UserManagement.list_user","text":"list_user () -> dict Retrieve a list of user identifiers and email addresses. This method returns a lightweight representation of all users, exposing only non-sensitive fields intended for administrative and integration use cases (e.g., notifications, audits, lookups). Returned fields: - uuid : User unique identifier - email : User email address The response is sorted by email for consistency.","title":"list_user"},{"location":"admin_tools/user_management/#aniachifast.admin_tools.user_management.UserManagement.list_user--returns","text":"dict Success case: { \"status\": \"success\", \"data\": [ {\"uuid\": \" \", \"email\": \"user@example.com\"}, ... ] } Failure case: { \"status\": \"error\", \"message\": \"<error description>\" }","title":"Returns"},{"location":"api/overview/","text":"API Overview This section provides an overview of the api components. Components Usage Examples","title":"Overview"},{"location":"api/overview/#api-overview","text":"This section provides an overview of the api components.","title":"API Overview"},{"location":"api/overview/#components","text":"","title":"Components"},{"location":"api/overview/#usage-examples","text":"","title":"Usage Examples"},{"location":"api/v1/overview/","text":"Api V1 Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Api V1"},{"location":"api/v1/overview/#api-v1","text":"","title":"Api V1"},{"location":"api/v1/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"api/v1/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"api/v1/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"api/v1/ws/overview/","text":"Api V1 Ws Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Api V1 Ws"},{"location":"api/v1/ws/overview/#api-v1-ws","text":"","title":"Api V1 Ws"},{"location":"api/v1/ws/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"api/v1/ws/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"api/v1/ws/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"api/ws/commons/","text":"Common WebSocket Handlers aniachifast.api.v1.ws.commons_ws Commons endpoint helpers for basic service checks and status. This module provides simple WebSocket/text-based endpoints for monitoring and testing service availability. It includes: index_ws(): Displays a stylized ASCII banner with build info and current time. ping_ws(): Returns a simple 'ping' string for connectivity checks. pong_ws(): Returns a simple 'pong' string as a response to ping checks. favicon_ws favicon_ws ( as_base64 : bool ) -> str | bytes Return the application favicon in binary or Base64 format. This helper function retrieves the service favicon and returns it either as raw bytes or as a Base64-encoded string, depending on the requested format. It is typically used by HTTP or WebSocket endpoints that expose a default favicon for browsers, monitoring tools, or UI clients. Parameters: as_base64 ( bool ) \u2013 If True, the favicon is returned as a Base64-encoded string. If False, the favicon is returned as raw bytes suitable for binary HTTP responses. Returns: str | bytes \u2013 str | bytes: - Base64-encoded favicon string if as_base64 is True. - Raw favicon bytes if as_base64 is False. Example favicon_bytes = favicon_ws(as_base64=False) favicon_b64 = favicon_ws(as_base64=True) index_ws index_ws () -> str Returns a stylized ASCII banner including build information and current time. This endpoint can be used to visually confirm service deployment and runtime metadata. Returns: str ( str ) \u2013 Multi-line ASCII string with service info and timestamp. ping_ws ping_ws () -> str Returns a simple \"ping\" request string. Can be used to test connectivity and service responsiveness. Returns: str ( str ) \u2013 The string 'ping'. pong_ws pong_ws () -> str Returns a simple \"pong\" response. Can be used to verify connectivity or as a response to a ping request. Returns: str ( str ) \u2013 The string 'pong'.","title":"Commons WS"},{"location":"api/ws/commons/#common-websocket-handlers","text":"","title":"Common WebSocket Handlers"},{"location":"api/ws/commons/#aniachifast.api.v1.ws.commons_ws","text":"Commons endpoint helpers for basic service checks and status. This module provides simple WebSocket/text-based endpoints for monitoring and testing service availability. It includes: index_ws(): Displays a stylized ASCII banner with build info and current time. ping_ws(): Returns a simple 'ping' string for connectivity checks. pong_ws(): Returns a simple 'pong' string as a response to ping checks.","title":"commons_ws"},{"location":"api/ws/commons/#aniachifast.api.v1.ws.commons_ws.favicon_ws","text":"favicon_ws ( as_base64 : bool ) -> str | bytes Return the application favicon in binary or Base64 format. This helper function retrieves the service favicon and returns it either as raw bytes or as a Base64-encoded string, depending on the requested format. It is typically used by HTTP or WebSocket endpoints that expose a default favicon for browsers, monitoring tools, or UI clients. Parameters: as_base64 ( bool ) \u2013 If True, the favicon is returned as a Base64-encoded string. If False, the favicon is returned as raw bytes suitable for binary HTTP responses. Returns: str | bytes \u2013 str | bytes: - Base64-encoded favicon string if as_base64 is True. - Raw favicon bytes if as_base64 is False. Example favicon_bytes = favicon_ws(as_base64=False) favicon_b64 = favicon_ws(as_base64=True)","title":"favicon_ws"},{"location":"api/ws/commons/#aniachifast.api.v1.ws.commons_ws.index_ws","text":"index_ws () -> str Returns a stylized ASCII banner including build information and current time. This endpoint can be used to visually confirm service deployment and runtime metadata. Returns: str ( str ) \u2013 Multi-line ASCII string with service info and timestamp.","title":"index_ws"},{"location":"api/ws/commons/#aniachifast.api.v1.ws.commons_ws.ping_ws","text":"ping_ws () -> str Returns a simple \"ping\" request string. Can be used to test connectivity and service responsiveness. Returns: str ( str ) \u2013 The string 'ping'.","title":"ping_ws"},{"location":"api/ws/commons/#aniachifast.api.v1.ws.commons_ws.pong_ws","text":"pong_ws () -> str Returns a simple \"pong\" response. Can be used to verify connectivity or as a response to a ping request. Returns: str ( str ) \u2013 The string 'pong'.","title":"pong_ws"},{"location":"api/ws/health/","text":"Health WebSocket aniachifast.api.v1.ws.health_ws Health check service functions. This module provides lightweight, synchronous health check helpers used by FastAPI endpoints. The functions return system and application health data such as uptime, timestamps, memory availability, and node information. All functions are intentionally simple and side-effect free to ensure they can be safely used in health and monitoring endpoints. settings module-attribute settings = get_settings () health_epoch_ws health_epoch_ws () -> dict Return the current server time as a Unix epoch timestamp. Useful for programmatic time comparisons and logging. Returns: dict ( dict ) \u2013 Dictionary containing the current epoch timestamp. health_mem_ws health_mem_ws () -> dict Return system memory health information. Provides memory availability in a human-readable format along with basic system and runtime metadata. Returns: dict ( dict ) \u2013 Dictionary containing memory and system health data. health_time_ws health_time_ws () -> dict Return the current server time. Used for time synchronization checks and debugging. Returns: dict ( dict ) \u2013 Dictionary containing the current server time. health_uptime_ws health_uptime_ws () -> dict Return the current server uptime. Useful for monitoring and debugging. Returns: dict ( dict ) \u2013 Dictionary containing the current uptime. health_ws health_ws () -> dict Return detailed application and system health information. This function provides general runtime and system metadata such as hostname, uptime, timestamps, and timezone information. Returns: dict ( dict ) \u2013 Dictionary containing application health metadata. simple_health_ws simple_health_ws () -> dict Return a minimal health response. Intended for lightweight health checks where only a timestamp and status confirmation are required. Returns: dict ( dict ) \u2013 Minimal health status response.","title":"Health WS"},{"location":"api/ws/health/#health-websocket","text":"","title":"Health WebSocket"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws","text":"Health check service functions. This module provides lightweight, synchronous health check helpers used by FastAPI endpoints. The functions return system and application health data such as uptime, timestamps, memory availability, and node information. All functions are intentionally simple and side-effect free to ensure they can be safely used in health and monitoring endpoints.","title":"health_ws"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws.settings","text":"settings = get_settings ()","title":"settings"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws.health_epoch_ws","text":"health_epoch_ws () -> dict Return the current server time as a Unix epoch timestamp. Useful for programmatic time comparisons and logging. Returns: dict ( dict ) \u2013 Dictionary containing the current epoch timestamp.","title":"health_epoch_ws"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws.health_mem_ws","text":"health_mem_ws () -> dict Return system memory health information. Provides memory availability in a human-readable format along with basic system and runtime metadata. Returns: dict ( dict ) \u2013 Dictionary containing memory and system health data.","title":"health_mem_ws"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws.health_time_ws","text":"health_time_ws () -> dict Return the current server time. Used for time synchronization checks and debugging. Returns: dict ( dict ) \u2013 Dictionary containing the current server time.","title":"health_time_ws"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws.health_uptime_ws","text":"health_uptime_ws () -> dict Return the current server uptime. Useful for monitoring and debugging. Returns: dict ( dict ) \u2013 Dictionary containing the current uptime.","title":"health_uptime_ws"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws.health_ws","text":"health_ws () -> dict Return detailed application and system health information. This function provides general runtime and system metadata such as hostname, uptime, timestamps, and timezone information. Returns: dict ( dict ) \u2013 Dictionary containing application health metadata.","title":"health_ws"},{"location":"api/ws/health/#aniachifast.api.v1.ws.health_ws.simple_health_ws","text":"simple_health_ws () -> dict Return a minimal health response. Intended for lightweight health checks where only a timestamp and status confirmation are required. Returns: dict ( dict ) \u2013 Minimal health status response.","title":"simple_health_ws"},{"location":"auth/auth_dependency/","text":"Authentication Dependency aniachifast.auth.auth_dependency Authentication service dependency resolution. This module defines FastAPI dependencies responsible for resolving the active authentication service used by the application. The main responsibility of this module is to: - Integrate FastAPI dependency injection with the authentication layer - Delegate authentication provider selection to AuthFactory - Ensure a database session is available when required by the provider This design allows: - Seamless switching between authentication backends (e.g. database-based auth, AWS Cognito) - Clear separation between HTTP routing and authentication logic - Centralized control over how authentication services are constructed The dependency defined here is typically injected into route handlers that require authentication operations such as login, registration, or token verification. Example Basic usage in a FastAPI router:: from fastapi import APIRouter, Depends from aniachifast.auth.auth_dependency import get_auth_service from aniachifast.auth.auth_interface import AuthInterface router = APIRouter() @router.post(\"/login\") async def login( auth_service: AuthInterface = Depends(get_auth_service), ): return await auth_service.login(...) DB_DEPENDENCY module-attribute DB_DEPENDENCY = Depends ( get_db ) settings module-attribute settings = get_settings () get_auth_service get_auth_service ( db : Session = DB_DEPENDENCY , ) -> AuthInterface Resolve and return the authentication service for the current request. This function is a FastAPI dependency that determines which concrete authentication service should be used for the current request. The resolution logic is delegated to AuthFactory , which selects the appropriate implementation based on application configuration (e.g. database authentication, AWS Cognito). A SQLAlchemy session is injected automatically using FastAPI's dependency system and passed to the authentication factory when required by the selected provider. Parameters: db ( Session , default: DB_DEPENDENCY ) \u2013 SQLAlchemy database session injected by FastAPI. The session lifecycle (open, rollback, close) is managed by the get_db dependency. Returns: AuthInterface ( AuthInterface ) \u2013 A concrete authentication service instance implementing the AuthInterface contract. Raises: Exception \u2013 Any exception raised by the underlying authentication provider during initialization. Example Injecting the authentication service into a route:: from fastapi import Depends @router.post(\"/register\") async def register_user( user: UserCreate, auth_service: AuthInterface = Depends(get_auth_service), ): return await auth_service.register(user) Notes This dependency does not perform authentication itself. It only resolves and returns the appropriate service. Business logic remains fully encapsulated in the auth service. get_auth_service_stateless get_auth_service_stateless () -> AuthInterface Resolve and return the authentication service WITHOUT database connection. This function is a FastAPI dependency for stateless authentication operations that don't require database access (e.g., JWT token validation). Use this dependency when: - Validating JWT tokens (stateless) - Verifying token signatures - Decoding token claims - Any operation that only needs the token itself DO NOT use this for: - Login (needs DB to verify credentials) - Registration (needs DB to create user) - Token tracking (needs DB to store usage) - Any operation requiring user data from DB Returns: AuthInterface ( AuthInterface ) \u2013 A concrete authentication service instance with db=None. Example Using in a stateless endpoint:: from fastapi import Depends from aniachifast.auth.auth_dependency import get_auth_service_stateless @router.get(\"/validate/token/{token}\") async def validate_token( token: str, auth_service: AuthInterface = Depends(get_auth_service_stateless), ): result = await auth_service.get_current_user(token) return result Notes This dependency passes db=None to the auth service DatabaseAuth.get_current_user() works without DB (stateless JWT validation) Other methods may fail if they require database access","title":"Auth Dependency"},{"location":"auth/auth_dependency/#authentication-dependency","text":"","title":"Authentication Dependency"},{"location":"auth/auth_dependency/#aniachifast.auth.auth_dependency","text":"Authentication service dependency resolution. This module defines FastAPI dependencies responsible for resolving the active authentication service used by the application. The main responsibility of this module is to: - Integrate FastAPI dependency injection with the authentication layer - Delegate authentication provider selection to AuthFactory - Ensure a database session is available when required by the provider This design allows: - Seamless switching between authentication backends (e.g. database-based auth, AWS Cognito) - Clear separation between HTTP routing and authentication logic - Centralized control over how authentication services are constructed The dependency defined here is typically injected into route handlers that require authentication operations such as login, registration, or token verification. Example Basic usage in a FastAPI router:: from fastapi import APIRouter, Depends from aniachifast.auth.auth_dependency import get_auth_service from aniachifast.auth.auth_interface import AuthInterface router = APIRouter() @router.post(\"/login\") async def login( auth_service: AuthInterface = Depends(get_auth_service), ): return await auth_service.login(...)","title":"auth_dependency"},{"location":"auth/auth_dependency/#aniachifast.auth.auth_dependency.DB_DEPENDENCY","text":"DB_DEPENDENCY = Depends ( get_db )","title":"DB_DEPENDENCY"},{"location":"auth/auth_dependency/#aniachifast.auth.auth_dependency.settings","text":"settings = get_settings ()","title":"settings"},{"location":"auth/auth_dependency/#aniachifast.auth.auth_dependency.get_auth_service","text":"get_auth_service ( db : Session = DB_DEPENDENCY , ) -> AuthInterface Resolve and return the authentication service for the current request. This function is a FastAPI dependency that determines which concrete authentication service should be used for the current request. The resolution logic is delegated to AuthFactory , which selects the appropriate implementation based on application configuration (e.g. database authentication, AWS Cognito). A SQLAlchemy session is injected automatically using FastAPI's dependency system and passed to the authentication factory when required by the selected provider. Parameters: db ( Session , default: DB_DEPENDENCY ) \u2013 SQLAlchemy database session injected by FastAPI. The session lifecycle (open, rollback, close) is managed by the get_db dependency. Returns: AuthInterface ( AuthInterface ) \u2013 A concrete authentication service instance implementing the AuthInterface contract. Raises: Exception \u2013 Any exception raised by the underlying authentication provider during initialization. Example Injecting the authentication service into a route:: from fastapi import Depends @router.post(\"/register\") async def register_user( user: UserCreate, auth_service: AuthInterface = Depends(get_auth_service), ): return await auth_service.register(user) Notes This dependency does not perform authentication itself. It only resolves and returns the appropriate service. Business logic remains fully encapsulated in the auth service.","title":"get_auth_service"},{"location":"auth/auth_dependency/#aniachifast.auth.auth_dependency.get_auth_service_stateless","text":"get_auth_service_stateless () -> AuthInterface Resolve and return the authentication service WITHOUT database connection. This function is a FastAPI dependency for stateless authentication operations that don't require database access (e.g., JWT token validation). Use this dependency when: - Validating JWT tokens (stateless) - Verifying token signatures - Decoding token claims - Any operation that only needs the token itself DO NOT use this for: - Login (needs DB to verify credentials) - Registration (needs DB to create user) - Token tracking (needs DB to store usage) - Any operation requiring user data from DB Returns: AuthInterface ( AuthInterface ) \u2013 A concrete authentication service instance with db=None. Example Using in a stateless endpoint:: from fastapi import Depends from aniachifast.auth.auth_dependency import get_auth_service_stateless @router.get(\"/validate/token/{token}\") async def validate_token( token: str, auth_service: AuthInterface = Depends(get_auth_service_stateless), ): result = await auth_service.get_current_user(token) return result Notes This dependency passes db=None to the auth service DatabaseAuth.get_current_user() works without DB (stateless JWT validation) Other methods may fail if they require database access","title":"get_auth_service_stateless"},{"location":"auth/auth_factory/","text":"Authentication Factory Factory pattern for creating authentication instances. aniachifast.auth.auth_factory Authentication Service Factory. This module provides a factory responsible for instantiating and returning the appropriate authentication service implementation based on application configuration. Supported authentication backends: - Cognito (AWS Cognito) - Database-based authentication The selection is controlled via the AUTH_PROVIDER configuration setting. settings module-attribute settings = get_settings () AuthFactory Factory class for authentication service resolution. This class encapsulates the logic required to select and instantiate the correct authentication provider according to the application's runtime configuration. get_auth_service staticmethod get_auth_service ( db : Session | None = None , ) -> AuthInterface Resolve and return the configured authentication service. Parameters: db ( Session | None , default: None ) \u2013 Database session. Required for database-based authentication when performing operations that need DB access (login, register, etc.). Can be None for stateless operations like JWT token validation. Returns: AuthInterface ( AuthInterface ) \u2013 Authentication service instance. Raises: ValueError \u2013 If AUTH_PROVIDER is invalid or unsupported. Notes For Cognito provider: db parameter is ignored For Database provider: db can be None for stateless operations (token validation), but required for DB operations (login, register)","title":"Auth Factory"},{"location":"auth/auth_factory/#authentication-factory","text":"Factory pattern for creating authentication instances.","title":"Authentication Factory"},{"location":"auth/auth_factory/#aniachifast.auth.auth_factory","text":"Authentication Service Factory. This module provides a factory responsible for instantiating and returning the appropriate authentication service implementation based on application configuration. Supported authentication backends: - Cognito (AWS Cognito) - Database-based authentication The selection is controlled via the AUTH_PROVIDER configuration setting.","title":"auth_factory"},{"location":"auth/auth_factory/#aniachifast.auth.auth_factory.settings","text":"settings = get_settings ()","title":"settings"},{"location":"auth/auth_factory/#aniachifast.auth.auth_factory.AuthFactory","text":"Factory class for authentication service resolution. This class encapsulates the logic required to select and instantiate the correct authentication provider according to the application's runtime configuration.","title":"AuthFactory"},{"location":"auth/auth_factory/#aniachifast.auth.auth_factory.AuthFactory.get_auth_service","text":"get_auth_service ( db : Session | None = None , ) -> AuthInterface Resolve and return the configured authentication service. Parameters: db ( Session | None , default: None ) \u2013 Database session. Required for database-based authentication when performing operations that need DB access (login, register, etc.). Can be None for stateless operations like JWT token validation. Returns: AuthInterface ( AuthInterface ) \u2013 Authentication service instance. Raises: ValueError \u2013 If AUTH_PROVIDER is invalid or unsupported. Notes For Cognito provider: db parameter is ignored For Database provider: db can be None for stateless operations (token validation), but required for DB operations (login, register)","title":"get_auth_service"},{"location":"auth/auth_interface/","text":"Authentication Interface Base authentication interface for implementing different auth backends.","title":"Auth Interface"},{"location":"auth/auth_interface/#authentication-interface","text":"Base authentication interface for implementing different auth backends.","title":"Authentication Interface"},{"location":"auth/cognito_auth/","text":"AWS Cognito Authentication aniachifast.auth.cognito_auth AWS Cognito Authentication Module This module provides an implementation of the AuthInterface using AWS Cognito as the authentication provider. It supports user registration, login, token validation, and retrieving the current authenticated user. AWS Cognito is used as an external identity provider, therefore some fields (such as numeric user IDs) are not available and are mapped accordingly. settings module-attribute settings = get_settings () CognitoAuth Bases: AuthInterface Authentication service implementation using AWS Cognito. This class integrates with AWS Cognito User Pools to handle authentication-related operations such as user registration, login, token validation, and user retrieval. client instance-attribute client = client ( 'cognito-idp' , region_name = AWS_REGION ) client_id instance-attribute client_id = COGNITO_CLIENT_ID client_secret instance-attribute client_secret = COGNITO_CLIENT_SECRET jwks instance-attribute jwks = _get_jwks () user_pool_id instance-attribute user_pool_id = COGNITO_USER_POOL_ID __init__ __init__ () activate_user async activate_user ( activation_code : str ) -> dict Activate a user account using the activation code. For Cognito, this would typically involve confirming the user signup. This is a placeholder implementation that returns a consistent format. Parameters: activation_code ( str ) \u2013 The activation code sent to the user. Returns: dict ( dict ) \u2013 Dictionary with 'success' (bool) and 'message' (str) fields. For Cognito, this returns not implemented status. get_current_user async get_current_user ( token : str ) -> dict Retrieve the current authenticated user from a Cognito token. Parameters: token ( str ) \u2013 Cognito access token. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse) or 'code' (str). Success case: {'status': 'success', 'message': 'Token validated successfully', 'user': UserResponse(...)} Failure case: {'status': 'error', 'message': 'Invalid token', 'code': '401-004'} login async login ( credentials : UserLogin ) -> dict Authenticate a user using AWS Cognito. Parameters: credentials ( UserLogin ) \u2013 User login credentials. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'token' (Token). register async register ( user : UserCreate ) -> dict Register a new user in AWS Cognito. Parameters: user ( UserCreate ) \u2013 User registration data. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse). Raises: HTTPException \u2013 If the user already exists or registration fails. request_password_reset async request_password_reset ( email : str ) -> dict Generate a password reset code for a user using AWS Cognito. Parameters: email ( str ) \u2013 The email address of the user requesting a password reset. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields. resend_activation_code async resend_activation_code ( email : str ) -> dict Resend or regenerate activation code for a user. For Cognito, this uses the resend_confirmation_code API. Note: Cognito requires the username, not email, but we'll attempt to use email as username for consistency with the interface. Parameters: email ( str ) \u2013 The email address of the user (used as username). Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields. Success case: {'status': 'success', 'message': 'Activation code sent successfully'} Failure case: {'status': 'error', 'message': 'Error description'} verify_token async verify_token ( token : str ) -> bool Verify whether a Cognito access token is valid. Parameters: token ( str ) \u2013 Cognito access token. Returns: bool ( bool ) \u2013 True if the token is valid, False otherwise.","title":"Cognito Auth"},{"location":"auth/cognito_auth/#aws-cognito-authentication","text":"","title":"AWS Cognito Authentication"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth","text":"","title":"cognito_auth"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth--aws-cognito-authentication-module","text":"This module provides an implementation of the AuthInterface using AWS Cognito as the authentication provider. It supports user registration, login, token validation, and retrieving the current authenticated user. AWS Cognito is used as an external identity provider, therefore some fields (such as numeric user IDs) are not available and are mapped accordingly.","title":"AWS Cognito Authentication Module"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.settings","text":"settings = get_settings ()","title":"settings"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth","text":"Bases: AuthInterface Authentication service implementation using AWS Cognito. This class integrates with AWS Cognito User Pools to handle authentication-related operations such as user registration, login, token validation, and user retrieval.","title":"CognitoAuth"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.client","text":"client = client ( 'cognito-idp' , region_name = AWS_REGION )","title":"client"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.client_id","text":"client_id = COGNITO_CLIENT_ID","title":"client_id"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.client_secret","text":"client_secret = COGNITO_CLIENT_SECRET","title":"client_secret"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.jwks","text":"jwks = _get_jwks ()","title":"jwks"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.user_pool_id","text":"user_pool_id = COGNITO_USER_POOL_ID","title":"user_pool_id"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.__init__","text":"__init__ ()","title":"__init__"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.activate_user","text":"activate_user ( activation_code : str ) -> dict Activate a user account using the activation code. For Cognito, this would typically involve confirming the user signup. This is a placeholder implementation that returns a consistent format. Parameters: activation_code ( str ) \u2013 The activation code sent to the user. Returns: dict ( dict ) \u2013 Dictionary with 'success' (bool) and 'message' (str) fields. For Cognito, this returns not implemented status.","title":"activate_user"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.get_current_user","text":"get_current_user ( token : str ) -> dict Retrieve the current authenticated user from a Cognito token. Parameters: token ( str ) \u2013 Cognito access token. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse) or 'code' (str). Success case: {'status': 'success', 'message': 'Token validated successfully', 'user': UserResponse(...)} Failure case: {'status': 'error', 'message': 'Invalid token', 'code': '401-004'}","title":"get_current_user"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.login","text":"login ( credentials : UserLogin ) -> dict Authenticate a user using AWS Cognito. Parameters: credentials ( UserLogin ) \u2013 User login credentials. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'token' (Token).","title":"login"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.register","text":"register ( user : UserCreate ) -> dict Register a new user in AWS Cognito. Parameters: user ( UserCreate ) \u2013 User registration data. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse). Raises: HTTPException \u2013 If the user already exists or registration fails.","title":"register"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.request_password_reset","text":"request_password_reset ( email : str ) -> dict Generate a password reset code for a user using AWS Cognito. Parameters: email ( str ) \u2013 The email address of the user requesting a password reset. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields.","title":"request_password_reset"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.resend_activation_code","text":"resend_activation_code ( email : str ) -> dict Resend or regenerate activation code for a user. For Cognito, this uses the resend_confirmation_code API. Note: Cognito requires the username, not email, but we'll attempt to use email as username for consistency with the interface. Parameters: email ( str ) \u2013 The email address of the user (used as username). Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields. Success case: {'status': 'success', 'message': 'Activation code sent successfully'} Failure case: {'status': 'error', 'message': 'Error description'}","title":"resend_activation_code"},{"location":"auth/cognito_auth/#aniachifast.auth.cognito_auth.CognitoAuth.verify_token","text":"verify_token ( token : str ) -> bool Verify whether a Cognito access token is valid. Parameters: token ( str ) \u2013 Cognito access token. Returns: bool ( bool ) \u2013 True if the token is valid, False otherwise.","title":"verify_token"},{"location":"auth/database_auth/","text":"Database Authentication aniachifast.auth.database_auth Database Authentication Module This module provides a concrete implementation of AuthInterface for user authentication using a relational database. It manages user registration, login, token generation, and validation using JWT (JSON Web Tokens). Dependencies jose: For JWT encoding and decoding. passlib (via secure_utils): For hashing and verifying passwords. SQLAlchemy: For database interactions. settings module-attribute settings = get_settings () DatabaseAuth Bases: AuthInterface DatabaseAuth provides an implementation of AuthInterface that performs authentication operations against a relational database using SQLAlchemy. Attributes: db ( Session ) \u2013 SQLAlchemy session used for database operations. db instance-attribute db = db __init__ __init__ ( db : Session | None = None ) Parameters: db ( Session | None , default: None ) \u2013 A SQLAlchemy Session instance used for interacting with the db. Can be None for stateless operations like JWT token validation that don't require database access. activate_user async activate_user ( activation_code : str ) -> dict Activate a user account using the activation code. Parameters: activation_code ( str ) \u2013 The activation code sent to the user. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields. Success case: {'status': 'success', 'message': 'Account activated successfully'} Failure case: {'status': 'error', 'message': 'Invalid or expired activation code or disabled account'} create_access_token create_access_token ( data : dict , user_id : int , user : User ) -> str Generates a JWT access token with user claims and stores it in the database for tracking. Parameters: data ( dict ) \u2013 The payload data to include in the JWT. user_id ( int ) \u2013 The user ID for token tracking. user ( User ) \u2013 The user object to extract claims from. Returns: str ( str ) \u2013 A JWT-encoded access token. get_current_user async get_current_user ( token : str ) -> dict Decodes the JWT token and retrieves user information ONLY from the token claims. This is a truly stateless authentication approach. NO database queries are performed. All user information comes from the JWT token itself. Parameters: token ( str ) \u2013 JWT access token from the client. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse) or 'code' (str). Success case: {'status': 'success', 'message': 'Token validated successfully', 'user': UserResponse(...)} Failure cases: - Invalid token: {'status': 'error', 'message': 'Could not validate credentials', 'code': '401-001'} - Missing claims: {'status': 'error', 'message': 'Invalid token claims', 'code': '401-002'} - JWT error: {'status': 'error', 'message': 'Token decode error', 'code': '401-003'} get_current_user_with_tracking async get_current_user_with_tracking ( token : str ) -> UserResponse Decodes JWT token and tracks token usage in the database. This method is similar to get_current_user() but adds token usage tracking and rate limiting. Use this if you need to: - Track how many times a token has been used - Enforce per-token request limits - Audit token usage Note: This method DOES query the database for tracking purposes. For truly stateless authentication, use get_current_user() instead. Parameters: token ( str ) \u2013 JWT access token from the client. Raises: HTTPException \u2013 If the token is invalid, expired, or usage limit exceeded. Returns: UserResponse ( UserResponse ) \u2013 Pydantic model of the authenticated user. login async login ( credentials : UserLogin ) -> dict Authenticates a user using their username and password. Implements account lockout after MAX_LOGIN_ATTEMPTS failed attempts. Parameters: credentials ( UserLogin ) \u2013 Pydantic model containing the username and password. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'token' (Token) or 'attempts_remaining' (int). register async register ( user : UserCreate ) -> dict Registers a new user in the database with activation code. Validates username and password according to configured rules: 1. Username will be set to email (if FORCE_USERNAME_EQUALS_EMAIL=True) 2. Username must match USERNAME_PATTERN regex 3. Password must match PASSWORD_PATTERN regex Parameters: user ( UserCreate ) \u2013 Pydantic model containing user registration data (username, email, password). Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'data' (UserResponse) or 'user' (UserResponse). Success case: {'status': 'success', 'message': 'User registered successfully', 'user': UserResponse(...)} Failure cases: - Invalid username pattern: {'status': 'error', 'message': 'Username pattern error'} - Invalid password pattern: {'status': 'error', 'message': 'Password pattern error'} - User exists: {'status': 'error', 'message': 'User already registered'} request_password_reset async request_password_reset ( email : str ) -> dict Generate a password reset code for a user. This method: 1. Validates that the user exists 2. Checks if the user account is disabled 3. Generates a new reset code with expiration 4. Updates the user record in the database Parameters: email ( str ) \u2013 The email address of the user requesting a password reset. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'reset_code' (str) fields. Success case: {'status': 'success', 'message': 'Reset code generated successfully', 'reset_code': 'abc123...'} Failure cases: - User not found: {'status': 'error', 'message': 'User not found'} - Account disabled: {'status': 'error', 'message': 'Account is disabled'} - Account blocked: {'status': 'error', 'message': 'Account is locked'} resend_activation_code async resend_activation_code ( email : str ) -> dict Resend or regenerate activation code for a user. This method: 1. Validates that the user exists 2. Checks if the user is already activated 3. Checks if the user account is disabled 4. Generates a new activation code with expiration 5. Updates the user record in the database Parameters: email ( str ) \u2013 The email address of the user requesting a new activation code. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields. Success case: {'status': 'success', 'message': 'Activation code sent successfully'} Failure cases: - User not found: {'status': 'error', 'message': 'User not found'} - Already activated: {'status': 'error', 'message': 'Account already activated'} - Account disabled: {'status': 'error', 'message': 'Account is disabled'} verify_token async verify_token ( token : str ) -> bool Validates the JWT token without fetching the user from the database. Parameters: token ( str ) \u2013 JWT access token to validate. Returns: bool ( bool ) \u2013 True if the token is valid and contains a subject, bool \u2013 False otherwise.","title":"Database Auth"},{"location":"auth/database_auth/#database-authentication","text":"","title":"Database Authentication"},{"location":"auth/database_auth/#aniachifast.auth.database_auth","text":"","title":"database_auth"},{"location":"auth/database_auth/#aniachifast.auth.database_auth--database-authentication-module","text":"This module provides a concrete implementation of AuthInterface for user authentication using a relational database. It manages user registration, login, token generation, and validation using JWT (JSON Web Tokens). Dependencies jose: For JWT encoding and decoding. passlib (via secure_utils): For hashing and verifying passwords. SQLAlchemy: For database interactions.","title":"Database Authentication Module"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.settings","text":"settings = get_settings ()","title":"settings"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth","text":"Bases: AuthInterface DatabaseAuth provides an implementation of AuthInterface that performs authentication operations against a relational database using SQLAlchemy. Attributes: db ( Session ) \u2013 SQLAlchemy session used for database operations.","title":"DatabaseAuth"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.db","text":"db = db","title":"db"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.__init__","text":"__init__ ( db : Session | None = None ) Parameters: db ( Session | None , default: None ) \u2013 A SQLAlchemy Session instance used for interacting with the db. Can be None for stateless operations like JWT token validation that don't require database access.","title":"__init__"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.activate_user","text":"activate_user ( activation_code : str ) -> dict Activate a user account using the activation code. Parameters: activation_code ( str ) \u2013 The activation code sent to the user. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields. Success case: {'status': 'success', 'message': 'Account activated successfully'} Failure case: {'status': 'error', 'message': 'Invalid or expired activation code or disabled account'}","title":"activate_user"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.create_access_token","text":"create_access_token ( data : dict , user_id : int , user : User ) -> str Generates a JWT access token with user claims and stores it in the database for tracking. Parameters: data ( dict ) \u2013 The payload data to include in the JWT. user_id ( int ) \u2013 The user ID for token tracking. user ( User ) \u2013 The user object to extract claims from. Returns: str ( str ) \u2013 A JWT-encoded access token.","title":"create_access_token"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.get_current_user","text":"get_current_user ( token : str ) -> dict Decodes the JWT token and retrieves user information ONLY from the token claims. This is a truly stateless authentication approach. NO database queries are performed. All user information comes from the JWT token itself. Parameters: token ( str ) \u2013 JWT access token from the client. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'user' (UserResponse) or 'code' (str). Success case: {'status': 'success', 'message': 'Token validated successfully', 'user': UserResponse(...)} Failure cases: - Invalid token: {'status': 'error', 'message': 'Could not validate credentials', 'code': '401-001'} - Missing claims: {'status': 'error', 'message': 'Invalid token claims', 'code': '401-002'} - JWT error: {'status': 'error', 'message': 'Token decode error', 'code': '401-003'}","title":"get_current_user"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.get_current_user_with_tracking","text":"get_current_user_with_tracking ( token : str ) -> UserResponse Decodes JWT token and tracks token usage in the database. This method is similar to get_current_user() but adds token usage tracking and rate limiting. Use this if you need to: - Track how many times a token has been used - Enforce per-token request limits - Audit token usage Note: This method DOES query the database for tracking purposes. For truly stateless authentication, use get_current_user() instead. Parameters: token ( str ) \u2013 JWT access token from the client. Raises: HTTPException \u2013 If the token is invalid, expired, or usage limit exceeded. Returns: UserResponse ( UserResponse ) \u2013 Pydantic model of the authenticated user.","title":"get_current_user_with_tracking"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.login","text":"login ( credentials : UserLogin ) -> dict Authenticates a user using their username and password. Implements account lockout after MAX_LOGIN_ATTEMPTS failed attempts. Parameters: credentials ( UserLogin ) \u2013 Pydantic model containing the username and password. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'token' (Token) or 'attempts_remaining' (int).","title":"login"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.register","text":"register ( user : UserCreate ) -> dict Registers a new user in the database with activation code. Validates username and password according to configured rules: 1. Username will be set to email (if FORCE_USERNAME_EQUALS_EMAIL=True) 2. Username must match USERNAME_PATTERN regex 3. Password must match PASSWORD_PATTERN regex Parameters: user ( UserCreate ) \u2013 Pydantic model containing user registration data (username, email, password). Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'data' (UserResponse) or 'user' (UserResponse). Success case: {'status': 'success', 'message': 'User registered successfully', 'user': UserResponse(...)} Failure cases: - Invalid username pattern: {'status': 'error', 'message': 'Username pattern error'} - Invalid password pattern: {'status': 'error', 'message': 'Password pattern error'} - User exists: {'status': 'error', 'message': 'User already registered'}","title":"register"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.request_password_reset","text":"request_password_reset ( email : str ) -> dict Generate a password reset code for a user. This method: 1. Validates that the user exists 2. Checks if the user account is disabled 3. Generates a new reset code with expiration 4. Updates the user record in the database Parameters: email ( str ) \u2013 The email address of the user requesting a password reset. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str), 'message' (str), and optionally 'reset_code' (str) fields. Success case: {'status': 'success', 'message': 'Reset code generated successfully', 'reset_code': 'abc123...'} Failure cases: - User not found: {'status': 'error', 'message': 'User not found'} - Account disabled: {'status': 'error', 'message': 'Account is disabled'} - Account blocked: {'status': 'error', 'message': 'Account is locked'}","title":"request_password_reset"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.resend_activation_code","text":"resend_activation_code ( email : str ) -> dict Resend or regenerate activation code for a user. This method: 1. Validates that the user exists 2. Checks if the user is already activated 3. Checks if the user account is disabled 4. Generates a new activation code with expiration 5. Updates the user record in the database Parameters: email ( str ) \u2013 The email address of the user requesting a new activation code. Returns: dict ( dict ) \u2013 Dictionary with 'status' (str) and 'message' (str) fields. Success case: {'status': 'success', 'message': 'Activation code sent successfully'} Failure cases: - User not found: {'status': 'error', 'message': 'User not found'} - Already activated: {'status': 'error', 'message': 'Account already activated'} - Account disabled: {'status': 'error', 'message': 'Account is disabled'}","title":"resend_activation_code"},{"location":"auth/database_auth/#aniachifast.auth.database_auth.DatabaseAuth.verify_token","text":"verify_token ( token : str ) -> bool Validates the JWT token without fetching the user from the database. Parameters: token ( str ) \u2013 JWT access token to validate. Returns: bool ( bool ) \u2013 True if the token is valid and contains a subject, bool \u2013 False otherwise.","title":"verify_token"},{"location":"auth/dependencies/","text":"Auth Dependencies aniachifast.auth.dependencies Authentication Dependencies Module This module provides FastAPI dependency injection functions for authentication and authorization. These dependencies can be used to protect endpoints and retrieve the current authenticated user. The main dependency get_current_user validates JWT tokens and returns the authenticated user with their ID and UUID, making it easy to implement user-specific endpoints. Example usage from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/profile\") async def get_profile( current_user: UserResponse = Depends(get_current_user) ): return { \"id\": current_user.id, \"uuid\": str(current_user.uuid), \"username\": current_user.username, \"email\": current_user.email } security module-attribute security = HTTPBearer () get_current_active_user async get_current_active_user ( current_user : Annotated [ UserResponse , Depends ( get_current_user ) ], ) -> UserResponse FastAPI dependency that ensures the current user is active. This dependency builds on get_current_user and adds an additional check to ensure the user account is active. Use this when you want to restrict access to only active users. Parameters: current_user ( UserResponse ) \u2013 The authenticated user from get_current_user dependency. Returns: UserResponse ( UserResponse ) \u2013 The authenticated and active user. Raises: HTTPException \u2013 403 Forbidden if the user account is not active. Example from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_active_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/active-only\") async def active_users_only( current_user: UserResponse = Depends(get_current_active_user) ): return {\"message\": \"Only active users can see this\"} get_current_admin_user async get_current_admin_user ( current_user : Annotated [ UserResponse , Depends ( get_current_active_user ) ], ) -> UserResponse FastAPI dependency that ensures the current user is an admin. This dependency builds on get_current_active_user and adds an additional check to ensure the user has admin privileges. Use this to protect admin-only endpoints. Parameters: current_user ( UserResponse ) \u2013 The authenticated and active user. Returns: UserResponse ( UserResponse ) \u2013 The authenticated admin user. Raises: HTTPException \u2013 403 Forbidden if the user is not an admin. Example from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_admin_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/admin/users\") async def list_all_users( current_user: UserResponse = Depends(get_current_admin_user) ): return {\"message\": \"Admin endpoint - list all users\"} get_current_user async get_current_user ( credentials : Annotated [ HTTPAuthorizationCredentials , Depends ( security ) ], auth_service : Annotated [ AuthInterface , Depends ( get_auth_service_stateless ) ], ) -> UserResponse FastAPI dependency that validates JWT token and returns current user. This dependency extracts the Bearer token from the Authorization header, validates it using the configured authentication provider (via factory), and returns the authenticated user. IMPORTANT: This dependency is STATELESS - it does NOT connect to the database. Token validation is performed entirely from JWT claims. Parameters: credentials ( HTTPAuthorizationCredentials ) \u2013 Bearer token from Authorization header, automatically extracted by FastAPI. auth_service ( AuthInterface ) \u2013 Authentication service resolved by factory (stateless - no DB connection). Returns: UserResponse ( UserResponse ) \u2013 Pydantic model containing the authenticated user's information including: - id (int): User's database ID - uuid (UUID): User's unique identifier - username (str): User's username - email (str): User's email - is_active (bool): Whether user is active - is_verified (bool): Whether user is verified - And other user fields Raises: HTTPException \u2013 401 Unauthorized if: - Token is missing or invalid - Token has expired - Token claims are incomplete Example Protecting an endpoint with authentication: from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/me\") async def read_users_me( current_user: UserResponse = Depends(get_current_user) ): return { \"id\": current_user.id, \"uuid\": str(current_user.uuid), \"username\": current_user.username, \"email\": current_user.email } @router.get(\"/my-data\") async def get_my_data( current_user: UserResponse = Depends(get_current_user) ): # Use current_user.id or current_user.uuid to fetch user data return {\"user_id\": current_user.id, \"data\": \"...\"} Using with router-level dependencies: from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_user # All endpoints in this router require authentication router = APIRouter( prefix=\"/protected\", dependencies=[Depends(get_current_user)] ) @router.get(\"/resource\") async def protected_resource(): return {\"message\": \"This is protected\"} Accessing user info in endpoint: @router.post(\"/items\") async def create_item( item_data: dict, current_user: UserResponse = Depends(get_current_user) ): # Create item associated with current user item = { \"user_id\": current_user.id, \"user_uuid\": str(current_user.uuid), \"data\": item_data } return item Notes This dependency uses the authentication factory to support multiple auth providers (Database, Cognito, etc.) Token validation is stateless (no DB queries) All user information comes from JWT token claims get_current_verified_user async get_current_verified_user ( current_user : Annotated [ UserResponse , Depends ( get_current_user ) ], ) -> UserResponse FastAPI dependency that ensures the current user is verified. This dependency builds on get_current_user and adds an additional check to ensure the user account is verified. Use this when you want to restrict access to only verified users. Parameters: current_user ( UserResponse ) \u2013 The authenticated user from get_current_user dependency. Returns: UserResponse ( UserResponse ) \u2013 The authenticated and verified user. Raises: HTTPException \u2013 403 Forbidden if the user account is not verified. Example from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_verified_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/verified-only\") async def verified_users_only( current_user: UserResponse = Depends(get_current_verified_user) ): return {\"message\": \"Only verified users can see this\"}","title":"Dependencies"},{"location":"auth/dependencies/#auth-dependencies","text":"","title":"Auth Dependencies"},{"location":"auth/dependencies/#aniachifast.auth.dependencies","text":"","title":"dependencies"},{"location":"auth/dependencies/#aniachifast.auth.dependencies--authentication-dependencies-module","text":"This module provides FastAPI dependency injection functions for authentication and authorization. These dependencies can be used to protect endpoints and retrieve the current authenticated user. The main dependency get_current_user validates JWT tokens and returns the authenticated user with their ID and UUID, making it easy to implement user-specific endpoints. Example usage from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/profile\") async def get_profile( current_user: UserResponse = Depends(get_current_user) ): return { \"id\": current_user.id, \"uuid\": str(current_user.uuid), \"username\": current_user.username, \"email\": current_user.email }","title":"Authentication Dependencies Module"},{"location":"auth/dependencies/#aniachifast.auth.dependencies.security","text":"security = HTTPBearer ()","title":"security"},{"location":"auth/dependencies/#aniachifast.auth.dependencies.get_current_active_user","text":"get_current_active_user ( current_user : Annotated [ UserResponse , Depends ( get_current_user ) ], ) -> UserResponse FastAPI dependency that ensures the current user is active. This dependency builds on get_current_user and adds an additional check to ensure the user account is active. Use this when you want to restrict access to only active users. Parameters: current_user ( UserResponse ) \u2013 The authenticated user from get_current_user dependency. Returns: UserResponse ( UserResponse ) \u2013 The authenticated and active user. Raises: HTTPException \u2013 403 Forbidden if the user account is not active. Example from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_active_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/active-only\") async def active_users_only( current_user: UserResponse = Depends(get_current_active_user) ): return {\"message\": \"Only active users can see this\"}","title":"get_current_active_user"},{"location":"auth/dependencies/#aniachifast.auth.dependencies.get_current_admin_user","text":"get_current_admin_user ( current_user : Annotated [ UserResponse , Depends ( get_current_active_user ) ], ) -> UserResponse FastAPI dependency that ensures the current user is an admin. This dependency builds on get_current_active_user and adds an additional check to ensure the user has admin privileges. Use this to protect admin-only endpoints. Parameters: current_user ( UserResponse ) \u2013 The authenticated and active user. Returns: UserResponse ( UserResponse ) \u2013 The authenticated admin user. Raises: HTTPException \u2013 403 Forbidden if the user is not an admin. Example from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_admin_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/admin/users\") async def list_all_users( current_user: UserResponse = Depends(get_current_admin_user) ): return {\"message\": \"Admin endpoint - list all users\"}","title":"get_current_admin_user"},{"location":"auth/dependencies/#aniachifast.auth.dependencies.get_current_user","text":"get_current_user ( credentials : Annotated [ HTTPAuthorizationCredentials , Depends ( security ) ], auth_service : Annotated [ AuthInterface , Depends ( get_auth_service_stateless ) ], ) -> UserResponse FastAPI dependency that validates JWT token and returns current user. This dependency extracts the Bearer token from the Authorization header, validates it using the configured authentication provider (via factory), and returns the authenticated user. IMPORTANT: This dependency is STATELESS - it does NOT connect to the database. Token validation is performed entirely from JWT claims. Parameters: credentials ( HTTPAuthorizationCredentials ) \u2013 Bearer token from Authorization header, automatically extracted by FastAPI. auth_service ( AuthInterface ) \u2013 Authentication service resolved by factory (stateless - no DB connection). Returns: UserResponse ( UserResponse ) \u2013 Pydantic model containing the authenticated user's information including: - id (int): User's database ID - uuid (UUID): User's unique identifier - username (str): User's username - email (str): User's email - is_active (bool): Whether user is active - is_verified (bool): Whether user is verified - And other user fields Raises: HTTPException \u2013 401 Unauthorized if: - Token is missing or invalid - Token has expired - Token claims are incomplete Example Protecting an endpoint with authentication: from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/me\") async def read_users_me( current_user: UserResponse = Depends(get_current_user) ): return { \"id\": current_user.id, \"uuid\": str(current_user.uuid), \"username\": current_user.username, \"email\": current_user.email } @router.get(\"/my-data\") async def get_my_data( current_user: UserResponse = Depends(get_current_user) ): # Use current_user.id or current_user.uuid to fetch user data return {\"user_id\": current_user.id, \"data\": \"...\"} Using with router-level dependencies: from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_user # All endpoints in this router require authentication router = APIRouter( prefix=\"/protected\", dependencies=[Depends(get_current_user)] ) @router.get(\"/resource\") async def protected_resource(): return {\"message\": \"This is protected\"} Accessing user info in endpoint: @router.post(\"/items\") async def create_item( item_data: dict, current_user: UserResponse = Depends(get_current_user) ): # Create item associated with current user item = { \"user_id\": current_user.id, \"user_uuid\": str(current_user.uuid), \"data\": item_data } return item Notes This dependency uses the authentication factory to support multiple auth providers (Database, Cognito, etc.) Token validation is stateless (no DB queries) All user information comes from JWT token claims","title":"get_current_user"},{"location":"auth/dependencies/#aniachifast.auth.dependencies.get_current_verified_user","text":"get_current_verified_user ( current_user : Annotated [ UserResponse , Depends ( get_current_user ) ], ) -> UserResponse FastAPI dependency that ensures the current user is verified. This dependency builds on get_current_user and adds an additional check to ensure the user account is verified. Use this when you want to restrict access to only verified users. Parameters: current_user ( UserResponse ) \u2013 The authenticated user from get_current_user dependency. Returns: UserResponse ( UserResponse ) \u2013 The authenticated and verified user. Raises: HTTPException \u2013 403 Forbidden if the user account is not verified. Example from fastapi import APIRouter, Depends from aniachifast.auth.dependencies import get_current_verified_user from aniachifast.core.models.auth import UserResponse router = APIRouter() @router.get(\"/verified-only\") async def verified_users_only( current_user: UserResponse = Depends(get_current_verified_user) ): return {\"message\": \"Only verified users can see this\"}","title":"get_current_verified_user"},{"location":"auth/overview/","text":"Authentication Overview This section provides an overview of the authentication components. Components Usage Examples","title":"Overview"},{"location":"auth/overview/#authentication-overview","text":"This section provides an overview of the authentication components.","title":"Authentication Overview"},{"location":"auth/overview/#components","text":"","title":"Components"},{"location":"auth/overview/#usage-examples","text":"","title":"Usage Examples"},{"location":"auth/role_dependencies/","text":"Auth Role Dependencies aniachifast.auth.role_dependencies Role-Based Access Control Dependencies This module provides FastAPI dependencies for role-based access control. Use these dependencies to protect endpoints and require specific roles. require_admin module-attribute require_admin = require_role ( 'admin' ) require_editor module-attribute require_editor = require_role ( 'editor' ) require_moderator module-attribute require_moderator = require_role ( 'moderator' ) require_all_roles require_all_roles ( * required_roles : str ) -> Callable Dependency factory that requires all specified roles. Usage @router.get(\"/super-admin\") async def super_admin_only( current_user: UserResponse = Depends(require_all_roles(\"admin\", \"superuser\")) ): return {\"message\": \"Super admin access\"} Parameters: *required_roles ( str , default: () ) \u2013 All role names that the user must have Returns: Callable ( Callable ) \u2013 A FastAPI dependency function require_any_role require_any_role ( * required_roles : str ) -> Callable Dependency factory that requires at least one of the specified roles. Usage @router.get(\"/content/edit\") async def edit_content( current_user: UserResponse = Depends(require_any_role(\"admin\", \"editor\")) ): return {\"message\": \"You can edit content\"} Parameters: *required_roles ( str , default: () ) \u2013 One or more role names (user needs at least one) Returns: Callable ( Callable ) \u2013 A FastAPI dependency function require_role require_role ( required_role : str ) -> Callable Dependency factory that creates a dependency requiring a specific role. Usage @router.get(\"/admin/dashboard\") async def admin_dashboard( current_user: UserResponse = Depends(require_role(\"admin\")) ): return {\"message\": \"Welcome to admin dashboard\"} Parameters: required_role ( str ) \u2013 The role name required to access the endpoint Returns: Callable ( Callable ) \u2013 A FastAPI dependency function","title":"Role Dependencies"},{"location":"auth/role_dependencies/#auth-role-dependencies","text":"","title":"Auth Role Dependencies"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies","text":"","title":"role_dependencies"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies--role-based-access-control-dependencies","text":"This module provides FastAPI dependencies for role-based access control. Use these dependencies to protect endpoints and require specific roles.","title":"Role-Based Access Control Dependencies"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies.require_admin","text":"require_admin = require_role ( 'admin' )","title":"require_admin"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies.require_editor","text":"require_editor = require_role ( 'editor' )","title":"require_editor"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies.require_moderator","text":"require_moderator = require_role ( 'moderator' )","title":"require_moderator"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies.require_all_roles","text":"require_all_roles ( * required_roles : str ) -> Callable Dependency factory that requires all specified roles. Usage @router.get(\"/super-admin\") async def super_admin_only( current_user: UserResponse = Depends(require_all_roles(\"admin\", \"superuser\")) ): return {\"message\": \"Super admin access\"} Parameters: *required_roles ( str , default: () ) \u2013 All role names that the user must have Returns: Callable ( Callable ) \u2013 A FastAPI dependency function","title":"require_all_roles"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies.require_any_role","text":"require_any_role ( * required_roles : str ) -> Callable Dependency factory that requires at least one of the specified roles. Usage @router.get(\"/content/edit\") async def edit_content( current_user: UserResponse = Depends(require_any_role(\"admin\", \"editor\")) ): return {\"message\": \"You can edit content\"} Parameters: *required_roles ( str , default: () ) \u2013 One or more role names (user needs at least one) Returns: Callable ( Callable ) \u2013 A FastAPI dependency function","title":"require_any_role"},{"location":"auth/role_dependencies/#aniachifast.auth.role_dependencies.require_role","text":"require_role ( required_role : str ) -> Callable Dependency factory that creates a dependency requiring a specific role. Usage @router.get(\"/admin/dashboard\") async def admin_dashboard( current_user: UserResponse = Depends(require_role(\"admin\")) ): return {\"message\": \"Welcome to admin dashboard\"} Parameters: required_role ( str ) \u2013 The role name required to access the endpoint Returns: Callable ( Callable ) \u2013 A FastAPI dependency function","title":"require_role"},{"location":"constants/overview/","text":"Constants Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Constants"},{"location":"constants/overview/#constants","text":"","title":"Constants"},{"location":"constants/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"constants/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"constants/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/config/","text":"Configuration Application configuration management using Pydantic settings. aniachifast.core.config Application configuration module. This module defines and exposes the global application settings using Pydantic BaseSettings . Configuration values are loaded from environment variables, .env files, and default values defined in code. It centralizes all runtime configuration related to: - Application behavior and feature toggles - Database and cache connectivity - Observability and logging - Static files and branding - Third-party services and infrastructure A cache accessor ( get_settings ) is provided to ensure a single settings instance is shared across the entire application lifecycle. Usage with FastAPI dependencies The get_settings() function is designed to be used as a FastAPI dependency. This allows routes, background tasks, and services to access application configuration in a consistent and testable way. Example: from fastapi import Depends, FastAPI from aniachifast.config.settings import get_settings settings = get_settings() app = FastAPI() @app.get('/health') def health(): return { 'debug': settings.DEBUG, 'timezone': settings.TIME_TZ, } Because get_settings() is wrapped with a singleton decorator, the configuration is instantiated only once and reused across all requests. This approach: - Avoids global mutable state - Plays well with FastAPI's dependency injection system - Simplifies testing and overrides B module-attribute B = f ' { P } /static_files' C module-attribute C = f ' { P } /static_img' P module-attribute P = \"/Users/greg/Desktop/projects/python/python3.12/fastapi/learn1/static\" a module-attribute a = \"postgresql+psycopg://greg:gregorio@localhost:5432/sample\" logger module-attribute logger = getLogger ( 'uvicorn' ) GlobalSettings Bases: BaseSettings Internal application settings container. This class encapsulates all configuration values required by the application. It extends Pydantic's BaseSettings to automatically load values from environment variables and .env files, while providing sensible defaults. The class is intended for internal use and should be accessed through the get_settings() factory function to guarantee a singleton instance. ACCESS_TOKEN_EXPIRE_MINUTES class-attribute instance-attribute ACCESS_TOKEN_EXPIRE_MINUTES : int = 3000 ACCESS_TOKEN_EXPIRE_MINUTES_COGNITO class-attribute instance-attribute ACCESS_TOKEN_EXPIRE_MINUTES_COGNITO : int = 3000 ACCOUNT_LOCKOUT_DURATION_MINUTES class-attribute instance-attribute ACCOUNT_LOCKOUT_DURATION_MINUTES : int = 30 ACTIVATION_CODE_EXPIRE_MINUTES class-attribute instance-attribute ACTIVATION_CODE_EXPIRE_MINUTES : int = 14400 ALGORITHM class-attribute instance-attribute ALGORITHM : str = 'HS256' ALICLOUD_ACCESS_KEY_ID class-attribute instance-attribute ALICLOUD_ACCESS_KEY_ID : Optional [ str ] = None ALICLOUD_ACCESS_KEY_SECRET class-attribute instance-attribute ALICLOUD_ACCESS_KEY_SECRET : Optional [ str ] = None ALICLOUD_OSS_BUCKET_NAME class-attribute instance-attribute ALICLOUD_OSS_BUCKET_NAME : Optional [ str ] = None ALICLOUD_OSS_ENDPOINT class-attribute instance-attribute ALICLOUD_OSS_ENDPOINT : Optional [ str ] = None ALICLOUD_UPLOAD_BACKEND class-attribute instance-attribute ALICLOUD_UPLOAD_BACKEND : Optional [ str ] = None ALLOWED_ORIGINS class-attribute instance-attribute ALLOWED_ORIGINS : str = 'localhost:8888,127.0.0.1:8888' AUTH_PROVIDER class-attribute instance-attribute AUTH_PROVIDER : Literal [ 'cognito' , 'database' ] = 'database' AWS_ACCESS_KEY_ID class-attribute instance-attribute AWS_ACCESS_KEY_ID : Optional [ str ] = None AWS_BUCKET_OWNER class-attribute instance-attribute AWS_BUCKET_OWNER : Optional [ str ] = None AWS_DYNAMODB_LEDGER_ACTIVITY_TABLE class-attribute instance-attribute AWS_DYNAMODB_LEDGER_ACTIVITY_TABLE : Optional [ str ] = ( \"activity_ledger\" ) AWS_DYNAMODB_LOCAL_ENDPOINT class-attribute instance-attribute AWS_DYNAMODB_LOCAL_ENDPOINT : Optional [ str ] = ( \"http://localhost:8080\" ) AWS_ENABLED class-attribute instance-attribute AWS_ENABLED : bool = False AWS_OPEN_SEARCH_HOST class-attribute instance-attribute AWS_OPEN_SEARCH_HOST : Optional [ str ] = None AWS_RDS_SERVER_URL class-attribute instance-attribute AWS_RDS_SERVER_URL : Optional [ str ] = None AWS_REDIS_SERVER_URL class-attribute instance-attribute AWS_REDIS_SERVER_URL : Optional [ str ] = None AWS_REGION class-attribute instance-attribute AWS_REGION : Optional [ str ] = 'us-east-1' AWS_S3_BUCKET_NAME class-attribute instance-attribute AWS_S3_BUCKET_NAME : Optional [ str ] = None AWS_S3_BUCKET_PREFIX class-attribute instance-attribute AWS_S3_BUCKET_PREFIX : Optional [ str ] = 'uploads/' AWS_S3_UPLOAD_BACKEND class-attribute instance-attribute AWS_S3_UPLOAD_BACKEND : Optional [ str ] = None AWS_SECRET_ACCESS_KEY class-attribute instance-attribute AWS_SECRET_ACCESS_KEY : Optional [ str ] = None AWS_SESSION_TOKEN class-attribute instance-attribute AWS_SESSION_TOKEN : Optional [ str ] = None AZURE_ENABLED class-attribute instance-attribute AZURE_ENABLED : Optional [ bool ] = False AZURE_STORAGE_ACCOUNT_KEY class-attribute instance-attribute AZURE_STORAGE_ACCOUNT_KEY : Optional [ str ] = None AZURE_STORAGE_ACCOUNT_NAME class-attribute instance-attribute AZURE_STORAGE_ACCOUNT_NAME : Optional [ str ] = None AZURE_STORAGE_CONTAINER_NAME class-attribute instance-attribute AZURE_STORAGE_CONTAINER_NAME : Optional [ str ] = None AZURE_STORAGE_ENDPOINT class-attribute instance-attribute AZURE_STORAGE_ENDPOINT : Optional [ str ] = None AZURE_UPLOAD_BACKEND class-attribute instance-attribute AZURE_UPLOAD_BACKEND : Optional [ str ] = None COGNITO_CLIENT_ID class-attribute instance-attribute COGNITO_CLIENT_ID : str = '' COGNITO_CLIENT_SECRET class-attribute instance-attribute COGNITO_CLIENT_SECRET : str = '' COGNITO_USER_POOL_ID class-attribute instance-attribute COGNITO_USER_POOL_ID : str = '' CORS_ALLOW_CREDENTIALS class-attribute instance-attribute CORS_ALLOW_CREDENTIALS : bool = True CORS_ALLOW_HEADERS class-attribute instance-attribute CORS_ALLOW_HEADERS : List [ str ] = [ '*' ] CORS_ALLOW_METHODS class-attribute instance-attribute CORS_ALLOW_METHODS : List [ str ] = [ '*' ] CORS_ALLOW_ORIGINS class-attribute instance-attribute CORS_ALLOW_ORIGINS : List [ str ] = [ '*' ] CORS_EXPOSE_HEADERS class-attribute instance-attribute CORS_EXPOSE_HEADERS : List [ str ] = [ 'X-Request-ID' ] CTX_CLASSIFICATION class-attribute instance-attribute CTX_CLASSIFICATION : str = 'best_effort_metadata' CTX_EXCLUDE_FROM_RESPONSE class-attribute instance-attribute CTX_EXCLUDE_FROM_RESPONSE : bool = False CTX_LOGS_RETENTION_POLICY class-attribute instance-attribute CTX_LOGS_RETENTION_POLICY : str = '90_days' CTX_PURPOSE class-attribute instance-attribute CTX_PURPOSE : str = 'support' DATABASE_ENGINE class-attribute instance-attribute DATABASE_ENGINE : str = 'postgresql' DATABASE_URL class-attribute instance-attribute DATABASE_URL : str = a DEBUG class-attribute instance-attribute DEBUG : bool = True DEBUG_DB_QUERIES class-attribute instance-attribute DEBUG_DB_QUERIES : bool = False DEFAULT_ALT_AWS_RESPONSE_FORMAT class-attribute instance-attribute DEFAULT_ALT_AWS_RESPONSE_FORMAT : str = ( \" %a , %d %b %Y %H:%M:%S %Z\" ) DIGITALOCEAN_UPLOAD_BACKEND class-attribute instance-attribute DIGITALOCEAN_UPLOAD_BACKEND : Optional [ str ] = None DO_SPACES_BUCKET_NAME class-attribute instance-attribute DO_SPACES_BUCKET_NAME : Optional [ str ] = None DO_SPACES_ENDPOINT class-attribute instance-attribute DO_SPACES_ENDPOINT : Optional [ str ] = None DO_SPACES_KEY class-attribute instance-attribute DO_SPACES_KEY : Optional [ str ] = None DO_SPACES_REGION class-attribute instance-attribute DO_SPACES_REGION : Optional [ str ] = 'nyc3' DO_SPACES_SECRET class-attribute instance-attribute DO_SPACES_SECRET : Optional [ str ] = None EMAIL_BACKEND class-attribute instance-attribute EMAIL_BACKEND : Optional [ str ] = None EMAIL_FROM_ADDRESS class-attribute instance-attribute EMAIL_FROM_ADDRESS : EmailStr = 'set_your_email@domain' EMAIL_HOST class-attribute instance-attribute EMAIL_HOST : Optional [ str ] = 'smtp.gmail.com' EMAIL_HOST_PASSWORD class-attribute instance-attribute EMAIL_HOST_PASSWORD : Optional [ str ] = None EMAIL_HOST_USER class-attribute instance-attribute EMAIL_HOST_USER : Optional [ str ] = ( \"aniachidontrepply@gmail.com\" ) EMAIL_MAIN_CORPORATE class-attribute instance-attribute EMAIL_MAIN_CORPORATE : Optional [ str ] = ( \"aniachidontrepply@gmail.com\" ) EMAIL_MAX_EXECUTOR_WORKERS class-attribute instance-attribute EMAIL_MAX_EXECUTOR_WORKERS : int = 2 EMAIL_PORT class-attribute instance-attribute EMAIL_PORT : Optional [ int ] = 587 EMAIL_QUEUE_IMPLEMENTATION class-attribute instance-attribute EMAIL_QUEUE_IMPLEMENTATION : Literal [ \"redis\" , \"sqs\" , \"local\" , \"memory\" , \"test\" ] = \"local\" EMAIL_USE_TLS class-attribute instance-attribute EMAIL_USE_TLS : Optional [ bool ] = True ENABLE_ADMIN_ENDPOINTS class-attribute instance-attribute ENABLE_ADMIN_ENDPOINTS : bool = True ENABLE_CACHE class-attribute instance-attribute ENABLE_CACHE : bool = True ENABLE_CACHE_ON_START class-attribute instance-attribute ENABLE_CACHE_ON_START : bool = True ENABLE_COMMON_ENDPOINT class-attribute instance-attribute ENABLE_COMMON_ENDPOINT : bool = True ENABLE_CORE_ENDPOINT class-attribute instance-attribute ENABLE_CORE_ENDPOINT : bool = True ENABLE_DATABASE class-attribute instance-attribute ENABLE_DATABASE : Optional [ bool ] = True ENABLE_DEBUG_HEADERS class-attribute instance-attribute ENABLE_DEBUG_HEADERS : bool = True ENABLE_DEFAULT_FAVICON class-attribute instance-attribute ENABLE_DEFAULT_FAVICON : bool = True ENABLE_DEFAULT_INDEX_ENDPOINT class-attribute instance-attribute ENABLE_DEFAULT_INDEX_ENDPOINT : bool = True ENABLE_DOCS class-attribute instance-attribute ENABLE_DOCS : bool = True ENABLE_FRIENDLY_404_NOT_FOUND class-attribute instance-attribute ENABLE_FRIENDLY_404_NOT_FOUND : bool = False ENABLE_GEO_IP_ON_START class-attribute instance-attribute ENABLE_GEO_IP_ON_START : bool = True ENABLE_HEALTH_ENDPOINT class-attribute instance-attribute ENABLE_HEALTH_ENDPOINT : bool = True ENABLE_IN_MEMORY_CACHE class-attribute instance-attribute ENABLE_IN_MEMORY_CACHE : bool = True ENABLE_IP_INFO_ENDPOINT class-attribute instance-attribute ENABLE_IP_INFO_ENDPOINT : bool = True ENABLE_JWT_AUTH_ENDPOINT class-attribute instance-attribute ENABLE_JWT_AUTH_ENDPOINT : bool = True ENABLE_LEDGERS_DEBUG_ENDPOINT class-attribute instance-attribute ENABLE_LEDGERS_DEBUG_ENDPOINT : bool = True ENABLE_METRICS_ENDPOINT class-attribute instance-attribute ENABLE_METRICS_ENDPOINT : bool = True ENABLE_OPENAPI class-attribute instance-attribute ENABLE_OPENAPI : bool = True ENABLE_POSGRESQL_RDS class-attribute instance-attribute ENABLE_POSGRESQL_RDS : bool = True ENABLE_PRINTS_ACTIVITY_TYPES class-attribute instance-attribute ENABLE_PRINTS_ACTIVITY_TYPES : bool = False ENABLE_PRINTS_START_UP_EVENTS class-attribute instance-attribute ENABLE_PRINTS_START_UP_EVENTS : bool = True ENABLE_PROCESS_ENDPOINT class-attribute instance-attribute ENABLE_PROCESS_ENDPOINT : bool = True ENABLE_RDS_INFO_ENDPOINT class-attribute instance-attribute ENABLE_RDS_INFO_ENDPOINT : bool = True ENABLE_REDIS_CACHE class-attribute instance-attribute ENABLE_REDIS_CACHE : bool = False ENABLE_REDOC class-attribute instance-attribute ENABLE_REDOC : bool = True ENABLE_ROUTES_ENDPOINT class-attribute instance-attribute ENABLE_ROUTES_ENDPOINT : bool = True ENABLE_UTIlS_ENDPOINT class-attribute instance-attribute ENABLE_UTIlS_ENDPOINT : bool = True EXIT_IF_MODELS_SYNC_FAILS class-attribute instance-attribute EXIT_IF_MODELS_SYNC_FAILS : bool = False EXPOSE_HEADER_ELAPSED_TIME class-attribute instance-attribute EXPOSE_HEADER_ELAPSED_TIME : bool = True EXPOSE_HEADER_REQUEST_ID class-attribute instance-attribute EXPOSE_HEADER_REQUEST_ID : bool = True FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION class-attribute instance-attribute FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION : Literal [ \"minio\" , \"aws\" , \"gcp\" , \"test\" , \"alicloud\" , \"azure\" , \"digitalocean\" , \"local_fs\" , ] = \"local_fs\" FILE_LOCAL_FS_UPLOAD_BACKEND class-attribute instance-attribute FILE_LOCAL_FS_UPLOAD_BACKEND : Optional [ str ] = None FILE_LOCAL_FS_UPLOAD_DIR class-attribute instance-attribute FILE_LOCAL_FS_UPLOAD_DIR : Optional [ str ] = None FILE_UPLOAD_MAX_EXECUTOR_WORKERS class-attribute instance-attribute FILE_UPLOAD_MAX_EXECUTOR_WORKERS : int = 2 FORCE_USERNAME_EQUALS_EMAIL class-attribute instance-attribute FORCE_USERNAME_EQUALS_EMAIL : bool = True GCP_UPLOAD_BACKEND class-attribute instance-attribute GCP_UPLOAD_BACKEND : Optional [ str ] = None GCS_BUCKET_NAME class-attribute instance-attribute GCS_BUCKET_NAME : Optional [ str ] = None GEO_IP_CACHE_SIZE class-attribute instance-attribute GEO_IP_CACHE_SIZE : int | None = 10000 GEO_IP_CACHE_TTL_SECONDS class-attribute instance-attribute GEO_IP_CACHE_TTL_SECONDS : int | None = 3600 GEO_IP_PATH class-attribute instance-attribute GEO_IP_PATH : str | None = None HEALTH_CHECK_LIMIT class-attribute instance-attribute HEALTH_CHECK_LIMIT : str = '5/minute' HMAC_SECRET class-attribute instance-attribute HMAC_SECRET : str = 'secret123' INIT_PASSWORD_HASHER_ON_START class-attribute instance-attribute INIT_PASSWORD_HASHER_ON_START : bool = True LAMBDA_ZIP_DIR class-attribute instance-attribute LAMBDA_ZIP_DIR : Optional [ str ] = None LEDGER_ACTIVITY_TYPES class-attribute instance-attribute LEDGER_ACTIVITY_TYPES : str | None = ( \"login_attempt,login_success,login_failed,user_registration,user_registration_failed,user_activation,user_deactivation,password_reset_request,password_reset_success,profile_update,email_change,username_change,account_locked,account_unlocked,token_generated,token_validated,token_expired,api_access,unauthorized_access,permission_denied,data_export,data_import,file_upload,file_download,system_maintenance,admin_action,audit_log,resend_activation_code\" ) LEDGER_DYNAMODB_BACKEND class-attribute instance-attribute LEDGER_DYNAMODB_BACKEND : Optional [ str ] = None LEDGER_MAX_EXECUTOR_WORKERS class-attribute instance-attribute LEDGER_MAX_EXECUTOR_WORKERS : int = 2 LEDGER_POSTGRESQL_BACKEND class-attribute instance-attribute LEDGER_POSTGRESQL_BACKEND : Optional [ str ] = None LEDGER_QUEUE_IMPLEMENTATION class-attribute instance-attribute LEDGER_QUEUE_IMPLEMENTATION : Literal [ \"postgresql\" , \"redis\" , \"sqs\" , \"local\" , \"memory\" , \"test\" , \"dynamodb\" , ] = \"postgresql\" LOGIN_ATTEMPT_WINDOW_MINUTES class-attribute instance-attribute LOGIN_ATTEMPT_WINDOW_MINUTES : int = 15 LOG_FILE class-attribute instance-attribute LOG_FILE : str = '../../loggers/log.log' LOG_FORMAT class-attribute instance-attribute LOG_FORMAT : str = ( \" %(asctime)s - %(levelname)s - %(message)s \" ) LOG_LEVEL class-attribute instance-attribute LOG_LEVEL : str = 'INFO' LOG_MAX_SIZE class-attribute instance-attribute LOG_MAX_SIZE : int = 500 * 1024 * 1024 LOG_ROTATING class-attribute instance-attribute LOG_ROTATING : int = 10 MAIN_SEARCH_INDEX class-attribute instance-attribute MAIN_SEARCH_INDEX : str = 'default_alt_index' MAX_LOGIN_ATTEMPTS class-attribute instance-attribute MAX_LOGIN_ATTEMPTS : int = 5 MINIO_BUCKET_NAME class-attribute instance-attribute MINIO_BUCKET_NAME : Optional [ str ] = 'aws-fastapi' MINIO_PORT class-attribute instance-attribute MINIO_PORT : Optional [ int ] = 9000 MINIO_ROOT_PASSWORD class-attribute instance-attribute MINIO_ROOT_PASSWORD : Optional [ str ] = 'minioadmin123' MINIO_ROOT_USER class-attribute instance-attribute MINIO_ROOT_USER : Optional [ str ] = 'minioadmin' MINIO_SERVER class-attribute instance-attribute MINIO_SERVER : Optional [ str ] = 'localhost' MINIO_UPLOAD_BACKEND class-attribute instance-attribute MINIO_UPLOAD_BACKEND : Optional [ str ] = None MINIO_USE_SSL class-attribute instance-attribute MINIO_USE_SSL : Optional [ bool ] = False MINIO_WEB_UI_PORT class-attribute instance-attribute MINIO_WEB_UI_PORT : int = 9001 MODELS_TO_SYNC class-attribute instance-attribute MODELS_TO_SYNC : list [ str ] = [ \"aniachifast.core.models.database.User\" , \"aniachifast.core.models.database.UserToken\" , ] MONGO_INITDB class-attribute instance-attribute MONGO_INITDB : str = 'simple_db' MONGO_ROOT_PASSWORD class-attribute instance-attribute MONGO_ROOT_PASSWORD : str = 'password123' MONGO_ROOT_USER class-attribute instance-attribute MONGO_ROOT_USER : str = 'user123' OPEN_SEARCH_COMPRESS class-attribute instance-attribute OPEN_SEARCH_COMPRESS : Optional [ bool ] = True OPEN_SEARCH_IP class-attribute instance-attribute OPEN_SEARCH_IP : str = 'localhost' OPEN_SEARCH_PASSWORD class-attribute instance-attribute OPEN_SEARCH_PASSWORD : Optional [ str ] = None OPEN_SEARCH_PORT class-attribute instance-attribute OPEN_SEARCH_PORT : int = 9200 OPEN_SEARCH_SSL_ASSERT_HOSTNAME class-attribute instance-attribute OPEN_SEARCH_SSL_ASSERT_HOSTNAME : Optional [ bool ] = False OPEN_SEARCH_SSL_SHOW_WARN class-attribute instance-attribute OPEN_SEARCH_SSL_SHOW_WARN : Optional [ bool ] = False OPEN_SEARCH_USERNAME class-attribute instance-attribute OPEN_SEARCH_USERNAME : str = 'admin' OPEN_SEARCH_USE_SSL class-attribute instance-attribute OPEN_SEARCH_USE_SSL : Optional [ bool ] = True OPEN_SEARCH_VERIFY_CERTS class-attribute instance-attribute OPEN_SEARCH_VERIFY_CERTS : Optional [ bool ] = False PASSWORD_MAX_LENGTH class-attribute instance-attribute PASSWORD_MAX_LENGTH : int = 20 PASSWORD_MIN_LENGTH class-attribute instance-attribute PASSWORD_MIN_LENGTH : int = 8 PASSWORD_PATTERN class-attribute instance-attribute PASSWORD_PATTERN : str = ( \"^(?=.*[a-z])(?=.*[A-Z])(?=.* \\\\ d)(?=.*[@$!%*?&.])[A-Za-z \\\\ d@$!%*?&.]{8,20}$\" ) PASSWORD_PATTERN_MESSAGE class-attribute instance-attribute PASSWORD_PATTERN_MESSAGE : str = ( \"Password must be 8-20 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one special character (@$!%*?&.)\" ) PDF_CREATOR class-attribute instance-attribute PDF_CREATOR : str = 'Gobierno del Estado de Jalisco' PDF_PRODUCER class-attribute instance-attribute PDF_PRODUCER : str = 'aniachifast pdf builder version 1.1.0' POOL_OVERFLOW class-attribute instance-attribute POOL_OVERFLOW : int = 20 POOL_SIZE class-attribute instance-attribute POOL_SIZE : int = 10 POSGRESQL_DATABASE_NAME class-attribute instance-attribute POSGRESQL_DATABASE_NAME : str = 'sample' POSTGRESQL_CLIENT_ENCODING class-attribute instance-attribute POSTGRESQL_CLIENT_ENCODING : str = 'UTF8' POSTGRESQL_CONNECT_TIMEOUT class-attribute instance-attribute POSTGRESQL_CONNECT_TIMEOUT : int = 5 POSTGRESQL_USER class-attribute instance-attribute POSTGRESQL_USER : str = 'greg' PROMETHEUS_JOB_NAME class-attribute instance-attribute PROMETHEUS_JOB_NAME : Optional [ str ] = 'fastapi' PROMETHEUS_PORT class-attribute instance-attribute PROMETHEUS_PORT : int = 9090 PROMETHEUS_PUSHING_INTERVAL class-attribute instance-attribute PROMETHEUS_PUSHING_INTERVAL : int = 2000 PROMETHEUS_SERVER_URL class-attribute instance-attribute PROMETHEUS_SERVER_URL : Optional [ str ] = ( \"http://localhost:9090\" ) PROMETHUS_PUSHGATEWAY_URL class-attribute instance-attribute PROMETHUS_PUSHGATEWAY_URL : Optional [ str ] = ( \"http://localhost:9091\" ) REACTIVATION_CODE_EXPIRE_DAYS class-attribute instance-attribute REACTIVATION_CODE_EXPIRE_DAYS : int = 7 REDIS_DB class-attribute instance-attribute REDIS_DB : int = 0 REDIS_PREFIX class-attribute instance-attribute REDIS_PREFIX : str = 'fastapi-default-cache' REDIS_SERVER_URL class-attribute instance-attribute REDIS_SERVER_URL : str = 'redis://localhost:6379' RELEASE class-attribute instance-attribute RELEASE : str = '000025.12.01r0b' REQUEST_ID_PREFIX class-attribute instance-attribute REQUEST_ID_PREFIX : str = 'req_' RESET_CODE_EXPIRE_MINUTES class-attribute instance-attribute RESET_CODE_EXPIRE_MINUTES : int = 15 S3_BUCKET_NAME class-attribute instance-attribute S3_BUCKET_NAME : Optional [ str ] = None SECRET_KEY class-attribute instance-attribute SECRET_KEY : str = ( \"tu-secret-key-super-segura-cambiar-en-produccion\" ) SENSITIVE_KEYWORDS class-attribute instance-attribute SENSITIVE_KEYWORDS : set [ str ] = { \"SECRET\" , \"PASSWORD\" , \"TOKEN\" , \"KEY\" , \"COGNITO\" , } SHOW_BRAND_ON_START class-attribute instance-attribute SHOW_BRAND_ON_START : bool = True SHOW_LOGO_ON_START class-attribute instance-attribute SHOW_LOGO_ON_START : bool = False SHOW_SERVER_INFO_ON_START class-attribute instance-attribute SHOW_SERVER_INFO_ON_START : bool = True STATIC_DIRS class-attribute instance-attribute STATIC_DIRS : str = f ' { B } , { C } ' SUPPORT_EMAIL class-attribute instance-attribute SUPPORT_EMAIL : str = 'set_your_email@domain' SUPPORT_URL class-attribute instance-attribute SUPPORT_URL : str = 'https://set_your_domain/fastapi-sample' SYNC_MODELS_ON_START class-attribute instance-attribute SYNC_MODELS_ON_START : bool = True TEST_CONNECTION_DELAY_SECONDS class-attribute instance-attribute TEST_CONNECTION_DELAY_SECONDS : int = 4 TEST_CONNECTION_MAX_RETRIES class-attribute instance-attribute TEST_CONNECTION_MAX_RETRIES : int = 3 TEST_DB_CONNECTION_ON_START class-attribute instance-attribute TEST_DB_CONNECTION_ON_START : bool = True TIME_FORMAT class-attribute instance-attribute TIME_FORMAT : str = '%Y-%m- %d %H:%M:%S' TIME_TZ class-attribute instance-attribute TIME_TZ : str = 'America/Mexico_City' TIME_ZONE class-attribute instance-attribute TIME_ZONE : str = 'America/Mexico_City' TOKEN_MAX_USAGE class-attribute instance-attribute TOKEN_MAX_USAGE : int = 15 UNKNOWN_TIME_ZONE class-attribute instance-attribute UNKNOWN_TIME_ZONE : str = 'UTC' UPLOAD_WEB_HOOK_TOKEN class-attribute instance-attribute UPLOAD_WEB_HOOK_TOKEN : str = 'password123' USERNAME_PATTERN class-attribute instance-attribute USERNAME_PATTERN : str = ( \"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+ \\\\ .[a-zA-Z]{2,}$\" ) USERNAME_PATTERN_MESSAGE class-attribute instance-attribute USERNAME_PATTERN_MESSAGE : str = ( \"Username must be a valid email address\" ) UVICORN_PORT class-attribute instance-attribute UVICORN_PORT : int = 8888 allowed_origins_list property allowed_origins_list : List [ str ] Return the list of allowed CORS origins. This property converts the comma-separated ALLOWED_ORIGINS configuration value into a list of strings. Returns: List [ str ] \u2013 List[str]: A list of allowed origin strings. model_config class-attribute instance-attribute model_config = SettingsConfigDict ( case_sensitive = True , validate_default = False ) static_dirs_list property static_dirs_list : List [ str ] Return the list of configured static directories. This property converts the comma-separated STATIC_DIRS configuration value into a list of filesystem paths. Returns: List [ str ] \u2013 List[str]: A list of static directory paths. __str__ __str__ () -> str Return a safe string representation of the configuration. Sensitive values are masked to prevent secret exposure. get_as_table get_as_table () -> str Render the current configuration as a formatted table.\"\"\" Render the model data as a human-readable key/value table. This method serializes the current model instance into a dictionary using model_dump() , sorts the fields alphabetically by key, and formats the result as a plain-text table using tabulate . The resulting string is intended for logging, diagnostics, CLI output, or debugging purposes where a compact and readable representation of the model state is required. Returns: str ( str ) \u2013 A formatted plain-text table where each row contains a str \u2013 field name and its corresponding value. Notes The output format does not include headers or borders. Field ordering is deterministic due to alphabetical sorting. This method performs no I/O and does not modify the model state. get_settings_for_logging get_settings_for_logging () -> str Render the current configuration as a formatted table. This method converts the configuration into a sorted dictionary and renders it as a human-readable table. Optional ASCII branding elements may be included depending on configuration flags. Returns: str ( str ) \u2013 A formatted table containing all configuration values. get_settings cached get_settings () -> GlobalSettings Retrieve the global application settings instance. This function returns a singleton instance of the internal GlobalSettings class, ensuring that configuration is loaded and parsed only once during the application lifecycle. Returns: GlobalSettings ( GlobalSettings ) \u2013 The global application settings instance.","title":"Configuration"},{"location":"core/config/#configuration","text":"Application configuration management using Pydantic settings.","title":"Configuration"},{"location":"core/config/#aniachifast.core.config","text":"Application configuration module. This module defines and exposes the global application settings using Pydantic BaseSettings . Configuration values are loaded from environment variables, .env files, and default values defined in code. It centralizes all runtime configuration related to: - Application behavior and feature toggles - Database and cache connectivity - Observability and logging - Static files and branding - Third-party services and infrastructure A cache accessor ( get_settings ) is provided to ensure a single settings instance is shared across the entire application lifecycle.","title":"config"},{"location":"core/config/#aniachifast.core.config--usage-with-fastapi-dependencies","text":"The get_settings() function is designed to be used as a FastAPI dependency. This allows routes, background tasks, and services to access application configuration in a consistent and testable way. Example: from fastapi import Depends, FastAPI from aniachifast.config.settings import get_settings settings = get_settings() app = FastAPI() @app.get('/health') def health(): return { 'debug': settings.DEBUG, 'timezone': settings.TIME_TZ, } Because get_settings() is wrapped with a singleton decorator, the configuration is instantiated only once and reused across all requests. This approach: - Avoids global mutable state - Plays well with FastAPI's dependency injection system - Simplifies testing and overrides","title":"Usage with FastAPI dependencies"},{"location":"core/config/#aniachifast.core.config.B","text":"B = f ' { P } /static_files'","title":"B"},{"location":"core/config/#aniachifast.core.config.C","text":"C = f ' { P } /static_img'","title":"C"},{"location":"core/config/#aniachifast.core.config.P","text":"P = \"/Users/greg/Desktop/projects/python/python3.12/fastapi/learn1/static\"","title":"P"},{"location":"core/config/#aniachifast.core.config.a","text":"a = \"postgresql+psycopg://greg:gregorio@localhost:5432/sample\"","title":"a"},{"location":"core/config/#aniachifast.core.config.logger","text":"logger = getLogger ( 'uvicorn' )","title":"logger"},{"location":"core/config/#aniachifast.core.config.GlobalSettings","text":"Bases: BaseSettings Internal application settings container. This class encapsulates all configuration values required by the application. It extends Pydantic's BaseSettings to automatically load values from environment variables and .env files, while providing sensible defaults. The class is intended for internal use and should be accessed through the get_settings() factory function to guarantee a singleton instance.","title":"GlobalSettings"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ACCESS_TOKEN_EXPIRE_MINUTES","text":"ACCESS_TOKEN_EXPIRE_MINUTES : int = 3000","title":"ACCESS_TOKEN_EXPIRE_MINUTES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ACCESS_TOKEN_EXPIRE_MINUTES_COGNITO","text":"ACCESS_TOKEN_EXPIRE_MINUTES_COGNITO : int = 3000","title":"ACCESS_TOKEN_EXPIRE_MINUTES_COGNITO"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ACCOUNT_LOCKOUT_DURATION_MINUTES","text":"ACCOUNT_LOCKOUT_DURATION_MINUTES : int = 30","title":"ACCOUNT_LOCKOUT_DURATION_MINUTES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ACTIVATION_CODE_EXPIRE_MINUTES","text":"ACTIVATION_CODE_EXPIRE_MINUTES : int = 14400","title":"ACTIVATION_CODE_EXPIRE_MINUTES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ALGORITHM","text":"ALGORITHM : str = 'HS256'","title":"ALGORITHM"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ALICLOUD_ACCESS_KEY_ID","text":"ALICLOUD_ACCESS_KEY_ID : Optional [ str ] = None","title":"ALICLOUD_ACCESS_KEY_ID"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ALICLOUD_ACCESS_KEY_SECRET","text":"ALICLOUD_ACCESS_KEY_SECRET : Optional [ str ] = None","title":"ALICLOUD_ACCESS_KEY_SECRET"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ALICLOUD_OSS_BUCKET_NAME","text":"ALICLOUD_OSS_BUCKET_NAME : Optional [ str ] = None","title":"ALICLOUD_OSS_BUCKET_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ALICLOUD_OSS_ENDPOINT","text":"ALICLOUD_OSS_ENDPOINT : Optional [ str ] = None","title":"ALICLOUD_OSS_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ALICLOUD_UPLOAD_BACKEND","text":"ALICLOUD_UPLOAD_BACKEND : Optional [ str ] = None","title":"ALICLOUD_UPLOAD_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ALLOWED_ORIGINS","text":"ALLOWED_ORIGINS : str = 'localhost:8888,127.0.0.1:8888'","title":"ALLOWED_ORIGINS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AUTH_PROVIDER","text":"AUTH_PROVIDER : Literal [ 'cognito' , 'database' ] = 'database'","title":"AUTH_PROVIDER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_ACCESS_KEY_ID","text":"AWS_ACCESS_KEY_ID : Optional [ str ] = None","title":"AWS_ACCESS_KEY_ID"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_BUCKET_OWNER","text":"AWS_BUCKET_OWNER : Optional [ str ] = None","title":"AWS_BUCKET_OWNER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_DYNAMODB_LEDGER_ACTIVITY_TABLE","text":"AWS_DYNAMODB_LEDGER_ACTIVITY_TABLE : Optional [ str ] = ( \"activity_ledger\" )","title":"AWS_DYNAMODB_LEDGER_ACTIVITY_TABLE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_DYNAMODB_LOCAL_ENDPOINT","text":"AWS_DYNAMODB_LOCAL_ENDPOINT : Optional [ str ] = ( \"http://localhost:8080\" )","title":"AWS_DYNAMODB_LOCAL_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_ENABLED","text":"AWS_ENABLED : bool = False","title":"AWS_ENABLED"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_OPEN_SEARCH_HOST","text":"AWS_OPEN_SEARCH_HOST : Optional [ str ] = None","title":"AWS_OPEN_SEARCH_HOST"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_RDS_SERVER_URL","text":"AWS_RDS_SERVER_URL : Optional [ str ] = None","title":"AWS_RDS_SERVER_URL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_REDIS_SERVER_URL","text":"AWS_REDIS_SERVER_URL : Optional [ str ] = None","title":"AWS_REDIS_SERVER_URL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_REGION","text":"AWS_REGION : Optional [ str ] = 'us-east-1'","title":"AWS_REGION"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_S3_BUCKET_NAME","text":"AWS_S3_BUCKET_NAME : Optional [ str ] = None","title":"AWS_S3_BUCKET_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_S3_BUCKET_PREFIX","text":"AWS_S3_BUCKET_PREFIX : Optional [ str ] = 'uploads/'","title":"AWS_S3_BUCKET_PREFIX"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_S3_UPLOAD_BACKEND","text":"AWS_S3_UPLOAD_BACKEND : Optional [ str ] = None","title":"AWS_S3_UPLOAD_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_SECRET_ACCESS_KEY","text":"AWS_SECRET_ACCESS_KEY : Optional [ str ] = None","title":"AWS_SECRET_ACCESS_KEY"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AWS_SESSION_TOKEN","text":"AWS_SESSION_TOKEN : Optional [ str ] = None","title":"AWS_SESSION_TOKEN"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AZURE_ENABLED","text":"AZURE_ENABLED : Optional [ bool ] = False","title":"AZURE_ENABLED"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AZURE_STORAGE_ACCOUNT_KEY","text":"AZURE_STORAGE_ACCOUNT_KEY : Optional [ str ] = None","title":"AZURE_STORAGE_ACCOUNT_KEY"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AZURE_STORAGE_ACCOUNT_NAME","text":"AZURE_STORAGE_ACCOUNT_NAME : Optional [ str ] = None","title":"AZURE_STORAGE_ACCOUNT_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AZURE_STORAGE_CONTAINER_NAME","text":"AZURE_STORAGE_CONTAINER_NAME : Optional [ str ] = None","title":"AZURE_STORAGE_CONTAINER_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AZURE_STORAGE_ENDPOINT","text":"AZURE_STORAGE_ENDPOINT : Optional [ str ] = None","title":"AZURE_STORAGE_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.AZURE_UPLOAD_BACKEND","text":"AZURE_UPLOAD_BACKEND : Optional [ str ] = None","title":"AZURE_UPLOAD_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.COGNITO_CLIENT_ID","text":"COGNITO_CLIENT_ID : str = ''","title":"COGNITO_CLIENT_ID"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.COGNITO_CLIENT_SECRET","text":"COGNITO_CLIENT_SECRET : str = ''","title":"COGNITO_CLIENT_SECRET"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.COGNITO_USER_POOL_ID","text":"COGNITO_USER_POOL_ID : str = ''","title":"COGNITO_USER_POOL_ID"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CORS_ALLOW_CREDENTIALS","text":"CORS_ALLOW_CREDENTIALS : bool = True","title":"CORS_ALLOW_CREDENTIALS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CORS_ALLOW_HEADERS","text":"CORS_ALLOW_HEADERS : List [ str ] = [ '*' ]","title":"CORS_ALLOW_HEADERS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CORS_ALLOW_METHODS","text":"CORS_ALLOW_METHODS : List [ str ] = [ '*' ]","title":"CORS_ALLOW_METHODS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CORS_ALLOW_ORIGINS","text":"CORS_ALLOW_ORIGINS : List [ str ] = [ '*' ]","title":"CORS_ALLOW_ORIGINS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CORS_EXPOSE_HEADERS","text":"CORS_EXPOSE_HEADERS : List [ str ] = [ 'X-Request-ID' ]","title":"CORS_EXPOSE_HEADERS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CTX_CLASSIFICATION","text":"CTX_CLASSIFICATION : str = 'best_effort_metadata'","title":"CTX_CLASSIFICATION"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CTX_EXCLUDE_FROM_RESPONSE","text":"CTX_EXCLUDE_FROM_RESPONSE : bool = False","title":"CTX_EXCLUDE_FROM_RESPONSE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CTX_LOGS_RETENTION_POLICY","text":"CTX_LOGS_RETENTION_POLICY : str = '90_days'","title":"CTX_LOGS_RETENTION_POLICY"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.CTX_PURPOSE","text":"CTX_PURPOSE : str = 'support'","title":"CTX_PURPOSE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DATABASE_ENGINE","text":"DATABASE_ENGINE : str = 'postgresql'","title":"DATABASE_ENGINE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DATABASE_URL","text":"DATABASE_URL : str = a","title":"DATABASE_URL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DEBUG","text":"DEBUG : bool = True","title":"DEBUG"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DEBUG_DB_QUERIES","text":"DEBUG_DB_QUERIES : bool = False","title":"DEBUG_DB_QUERIES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DEFAULT_ALT_AWS_RESPONSE_FORMAT","text":"DEFAULT_ALT_AWS_RESPONSE_FORMAT : str = ( \" %a , %d %b %Y %H:%M:%S %Z\" )","title":"DEFAULT_ALT_AWS_RESPONSE_FORMAT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DIGITALOCEAN_UPLOAD_BACKEND","text":"DIGITALOCEAN_UPLOAD_BACKEND : Optional [ str ] = None","title":"DIGITALOCEAN_UPLOAD_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DO_SPACES_BUCKET_NAME","text":"DO_SPACES_BUCKET_NAME : Optional [ str ] = None","title":"DO_SPACES_BUCKET_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DO_SPACES_ENDPOINT","text":"DO_SPACES_ENDPOINT : Optional [ str ] = None","title":"DO_SPACES_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DO_SPACES_KEY","text":"DO_SPACES_KEY : Optional [ str ] = None","title":"DO_SPACES_KEY"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DO_SPACES_REGION","text":"DO_SPACES_REGION : Optional [ str ] = 'nyc3'","title":"DO_SPACES_REGION"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.DO_SPACES_SECRET","text":"DO_SPACES_SECRET : Optional [ str ] = None","title":"DO_SPACES_SECRET"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_BACKEND","text":"EMAIL_BACKEND : Optional [ str ] = None","title":"EMAIL_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_FROM_ADDRESS","text":"EMAIL_FROM_ADDRESS : EmailStr = 'set_your_email@domain'","title":"EMAIL_FROM_ADDRESS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_HOST","text":"EMAIL_HOST : Optional [ str ] = 'smtp.gmail.com'","title":"EMAIL_HOST"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_HOST_PASSWORD","text":"EMAIL_HOST_PASSWORD : Optional [ str ] = None","title":"EMAIL_HOST_PASSWORD"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_HOST_USER","text":"EMAIL_HOST_USER : Optional [ str ] = ( \"aniachidontrepply@gmail.com\" )","title":"EMAIL_HOST_USER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_MAIN_CORPORATE","text":"EMAIL_MAIN_CORPORATE : Optional [ str ] = ( \"aniachidontrepply@gmail.com\" )","title":"EMAIL_MAIN_CORPORATE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_MAX_EXECUTOR_WORKERS","text":"EMAIL_MAX_EXECUTOR_WORKERS : int = 2","title":"EMAIL_MAX_EXECUTOR_WORKERS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_PORT","text":"EMAIL_PORT : Optional [ int ] = 587","title":"EMAIL_PORT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_QUEUE_IMPLEMENTATION","text":"EMAIL_QUEUE_IMPLEMENTATION : Literal [ \"redis\" , \"sqs\" , \"local\" , \"memory\" , \"test\" ] = \"local\"","title":"EMAIL_QUEUE_IMPLEMENTATION"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EMAIL_USE_TLS","text":"EMAIL_USE_TLS : Optional [ bool ] = True","title":"EMAIL_USE_TLS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_ADMIN_ENDPOINTS","text":"ENABLE_ADMIN_ENDPOINTS : bool = True","title":"ENABLE_ADMIN_ENDPOINTS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_CACHE","text":"ENABLE_CACHE : bool = True","title":"ENABLE_CACHE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_CACHE_ON_START","text":"ENABLE_CACHE_ON_START : bool = True","title":"ENABLE_CACHE_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_COMMON_ENDPOINT","text":"ENABLE_COMMON_ENDPOINT : bool = True","title":"ENABLE_COMMON_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_CORE_ENDPOINT","text":"ENABLE_CORE_ENDPOINT : bool = True","title":"ENABLE_CORE_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_DATABASE","text":"ENABLE_DATABASE : Optional [ bool ] = True","title":"ENABLE_DATABASE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_DEBUG_HEADERS","text":"ENABLE_DEBUG_HEADERS : bool = True","title":"ENABLE_DEBUG_HEADERS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_DEFAULT_FAVICON","text":"ENABLE_DEFAULT_FAVICON : bool = True","title":"ENABLE_DEFAULT_FAVICON"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_DEFAULT_INDEX_ENDPOINT","text":"ENABLE_DEFAULT_INDEX_ENDPOINT : bool = True","title":"ENABLE_DEFAULT_INDEX_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_DOCS","text":"ENABLE_DOCS : bool = True","title":"ENABLE_DOCS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_FRIENDLY_404_NOT_FOUND","text":"ENABLE_FRIENDLY_404_NOT_FOUND : bool = False","title":"ENABLE_FRIENDLY_404_NOT_FOUND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_GEO_IP_ON_START","text":"ENABLE_GEO_IP_ON_START : bool = True","title":"ENABLE_GEO_IP_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_HEALTH_ENDPOINT","text":"ENABLE_HEALTH_ENDPOINT : bool = True","title":"ENABLE_HEALTH_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_IN_MEMORY_CACHE","text":"ENABLE_IN_MEMORY_CACHE : bool = True","title":"ENABLE_IN_MEMORY_CACHE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_IP_INFO_ENDPOINT","text":"ENABLE_IP_INFO_ENDPOINT : bool = True","title":"ENABLE_IP_INFO_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_JWT_AUTH_ENDPOINT","text":"ENABLE_JWT_AUTH_ENDPOINT : bool = True","title":"ENABLE_JWT_AUTH_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_LEDGERS_DEBUG_ENDPOINT","text":"ENABLE_LEDGERS_DEBUG_ENDPOINT : bool = True","title":"ENABLE_LEDGERS_DEBUG_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_METRICS_ENDPOINT","text":"ENABLE_METRICS_ENDPOINT : bool = True","title":"ENABLE_METRICS_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_OPENAPI","text":"ENABLE_OPENAPI : bool = True","title":"ENABLE_OPENAPI"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_POSGRESQL_RDS","text":"ENABLE_POSGRESQL_RDS : bool = True","title":"ENABLE_POSGRESQL_RDS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_PRINTS_ACTIVITY_TYPES","text":"ENABLE_PRINTS_ACTIVITY_TYPES : bool = False","title":"ENABLE_PRINTS_ACTIVITY_TYPES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_PRINTS_START_UP_EVENTS","text":"ENABLE_PRINTS_START_UP_EVENTS : bool = True","title":"ENABLE_PRINTS_START_UP_EVENTS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_PROCESS_ENDPOINT","text":"ENABLE_PROCESS_ENDPOINT : bool = True","title":"ENABLE_PROCESS_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_RDS_INFO_ENDPOINT","text":"ENABLE_RDS_INFO_ENDPOINT : bool = True","title":"ENABLE_RDS_INFO_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_REDIS_CACHE","text":"ENABLE_REDIS_CACHE : bool = False","title":"ENABLE_REDIS_CACHE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_REDOC","text":"ENABLE_REDOC : bool = True","title":"ENABLE_REDOC"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_ROUTES_ENDPOINT","text":"ENABLE_ROUTES_ENDPOINT : bool = True","title":"ENABLE_ROUTES_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.ENABLE_UTIlS_ENDPOINT","text":"ENABLE_UTIlS_ENDPOINT : bool = True","title":"ENABLE_UTIlS_ENDPOINT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EXIT_IF_MODELS_SYNC_FAILS","text":"EXIT_IF_MODELS_SYNC_FAILS : bool = False","title":"EXIT_IF_MODELS_SYNC_FAILS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EXPOSE_HEADER_ELAPSED_TIME","text":"EXPOSE_HEADER_ELAPSED_TIME : bool = True","title":"EXPOSE_HEADER_ELAPSED_TIME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.EXPOSE_HEADER_REQUEST_ID","text":"EXPOSE_HEADER_REQUEST_ID : bool = True","title":"EXPOSE_HEADER_REQUEST_ID"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION","text":"FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION : Literal [ \"minio\" , \"aws\" , \"gcp\" , \"test\" , \"alicloud\" , \"azure\" , \"digitalocean\" , \"local_fs\" , ] = \"local_fs\"","title":"FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.FILE_LOCAL_FS_UPLOAD_BACKEND","text":"FILE_LOCAL_FS_UPLOAD_BACKEND : Optional [ str ] = None","title":"FILE_LOCAL_FS_UPLOAD_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.FILE_LOCAL_FS_UPLOAD_DIR","text":"FILE_LOCAL_FS_UPLOAD_DIR : Optional [ str ] = None","title":"FILE_LOCAL_FS_UPLOAD_DIR"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.FILE_UPLOAD_MAX_EXECUTOR_WORKERS","text":"FILE_UPLOAD_MAX_EXECUTOR_WORKERS : int = 2","title":"FILE_UPLOAD_MAX_EXECUTOR_WORKERS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.FORCE_USERNAME_EQUALS_EMAIL","text":"FORCE_USERNAME_EQUALS_EMAIL : bool = True","title":"FORCE_USERNAME_EQUALS_EMAIL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.GCP_UPLOAD_BACKEND","text":"GCP_UPLOAD_BACKEND : Optional [ str ] = None","title":"GCP_UPLOAD_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.GCS_BUCKET_NAME","text":"GCS_BUCKET_NAME : Optional [ str ] = None","title":"GCS_BUCKET_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.GEO_IP_CACHE_SIZE","text":"GEO_IP_CACHE_SIZE : int | None = 10000","title":"GEO_IP_CACHE_SIZE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.GEO_IP_CACHE_TTL_SECONDS","text":"GEO_IP_CACHE_TTL_SECONDS : int | None = 3600","title":"GEO_IP_CACHE_TTL_SECONDS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.GEO_IP_PATH","text":"GEO_IP_PATH : str | None = None","title":"GEO_IP_PATH"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.HEALTH_CHECK_LIMIT","text":"HEALTH_CHECK_LIMIT : str = '5/minute'","title":"HEALTH_CHECK_LIMIT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.HMAC_SECRET","text":"HMAC_SECRET : str = 'secret123'","title":"HMAC_SECRET"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.INIT_PASSWORD_HASHER_ON_START","text":"INIT_PASSWORD_HASHER_ON_START : bool = True","title":"INIT_PASSWORD_HASHER_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LAMBDA_ZIP_DIR","text":"LAMBDA_ZIP_DIR : Optional [ str ] = None","title":"LAMBDA_ZIP_DIR"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LEDGER_ACTIVITY_TYPES","text":"LEDGER_ACTIVITY_TYPES : str | None = ( \"login_attempt,login_success,login_failed,user_registration,user_registration_failed,user_activation,user_deactivation,password_reset_request,password_reset_success,profile_update,email_change,username_change,account_locked,account_unlocked,token_generated,token_validated,token_expired,api_access,unauthorized_access,permission_denied,data_export,data_import,file_upload,file_download,system_maintenance,admin_action,audit_log,resend_activation_code\" )","title":"LEDGER_ACTIVITY_TYPES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LEDGER_DYNAMODB_BACKEND","text":"LEDGER_DYNAMODB_BACKEND : Optional [ str ] = None","title":"LEDGER_DYNAMODB_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LEDGER_MAX_EXECUTOR_WORKERS","text":"LEDGER_MAX_EXECUTOR_WORKERS : int = 2","title":"LEDGER_MAX_EXECUTOR_WORKERS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LEDGER_POSTGRESQL_BACKEND","text":"LEDGER_POSTGRESQL_BACKEND : Optional [ str ] = None","title":"LEDGER_POSTGRESQL_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LEDGER_QUEUE_IMPLEMENTATION","text":"LEDGER_QUEUE_IMPLEMENTATION : Literal [ \"postgresql\" , \"redis\" , \"sqs\" , \"local\" , \"memory\" , \"test\" , \"dynamodb\" , ] = \"postgresql\"","title":"LEDGER_QUEUE_IMPLEMENTATION"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LOGIN_ATTEMPT_WINDOW_MINUTES","text":"LOGIN_ATTEMPT_WINDOW_MINUTES : int = 15","title":"LOGIN_ATTEMPT_WINDOW_MINUTES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LOG_FILE","text":"LOG_FILE : str = '../../loggers/log.log'","title":"LOG_FILE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LOG_FORMAT","text":"LOG_FORMAT : str = ( \" %(asctime)s - %(levelname)s - %(message)s \" )","title":"LOG_FORMAT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LOG_LEVEL","text":"LOG_LEVEL : str = 'INFO'","title":"LOG_LEVEL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LOG_MAX_SIZE","text":"LOG_MAX_SIZE : int = 500 * 1024 * 1024","title":"LOG_MAX_SIZE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.LOG_ROTATING","text":"LOG_ROTATING : int = 10","title":"LOG_ROTATING"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MAIN_SEARCH_INDEX","text":"MAIN_SEARCH_INDEX : str = 'default_alt_index'","title":"MAIN_SEARCH_INDEX"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MAX_LOGIN_ATTEMPTS","text":"MAX_LOGIN_ATTEMPTS : int = 5","title":"MAX_LOGIN_ATTEMPTS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_BUCKET_NAME","text":"MINIO_BUCKET_NAME : Optional [ str ] = 'aws-fastapi'","title":"MINIO_BUCKET_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_PORT","text":"MINIO_PORT : Optional [ int ] = 9000","title":"MINIO_PORT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_ROOT_PASSWORD","text":"MINIO_ROOT_PASSWORD : Optional [ str ] = 'minioadmin123'","title":"MINIO_ROOT_PASSWORD"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_ROOT_USER","text":"MINIO_ROOT_USER : Optional [ str ] = 'minioadmin'","title":"MINIO_ROOT_USER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_SERVER","text":"MINIO_SERVER : Optional [ str ] = 'localhost'","title":"MINIO_SERVER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_UPLOAD_BACKEND","text":"MINIO_UPLOAD_BACKEND : Optional [ str ] = None","title":"MINIO_UPLOAD_BACKEND"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_USE_SSL","text":"MINIO_USE_SSL : Optional [ bool ] = False","title":"MINIO_USE_SSL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MINIO_WEB_UI_PORT","text":"MINIO_WEB_UI_PORT : int = 9001","title":"MINIO_WEB_UI_PORT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MODELS_TO_SYNC","text":"MODELS_TO_SYNC : list [ str ] = [ \"aniachifast.core.models.database.User\" , \"aniachifast.core.models.database.UserToken\" , ]","title":"MODELS_TO_SYNC"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MONGO_INITDB","text":"MONGO_INITDB : str = 'simple_db'","title":"MONGO_INITDB"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MONGO_ROOT_PASSWORD","text":"MONGO_ROOT_PASSWORD : str = 'password123'","title":"MONGO_ROOT_PASSWORD"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.MONGO_ROOT_USER","text":"MONGO_ROOT_USER : str = 'user123'","title":"MONGO_ROOT_USER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_COMPRESS","text":"OPEN_SEARCH_COMPRESS : Optional [ bool ] = True","title":"OPEN_SEARCH_COMPRESS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_IP","text":"OPEN_SEARCH_IP : str = 'localhost'","title":"OPEN_SEARCH_IP"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_PASSWORD","text":"OPEN_SEARCH_PASSWORD : Optional [ str ] = None","title":"OPEN_SEARCH_PASSWORD"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_PORT","text":"OPEN_SEARCH_PORT : int = 9200","title":"OPEN_SEARCH_PORT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_SSL_ASSERT_HOSTNAME","text":"OPEN_SEARCH_SSL_ASSERT_HOSTNAME : Optional [ bool ] = False","title":"OPEN_SEARCH_SSL_ASSERT_HOSTNAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_SSL_SHOW_WARN","text":"OPEN_SEARCH_SSL_SHOW_WARN : Optional [ bool ] = False","title":"OPEN_SEARCH_SSL_SHOW_WARN"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_USERNAME","text":"OPEN_SEARCH_USERNAME : str = 'admin'","title":"OPEN_SEARCH_USERNAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_USE_SSL","text":"OPEN_SEARCH_USE_SSL : Optional [ bool ] = True","title":"OPEN_SEARCH_USE_SSL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.OPEN_SEARCH_VERIFY_CERTS","text":"OPEN_SEARCH_VERIFY_CERTS : Optional [ bool ] = False","title":"OPEN_SEARCH_VERIFY_CERTS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PASSWORD_MAX_LENGTH","text":"PASSWORD_MAX_LENGTH : int = 20","title":"PASSWORD_MAX_LENGTH"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PASSWORD_MIN_LENGTH","text":"PASSWORD_MIN_LENGTH : int = 8","title":"PASSWORD_MIN_LENGTH"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PASSWORD_PATTERN","text":"PASSWORD_PATTERN : str = ( \"^(?=.*[a-z])(?=.*[A-Z])(?=.* \\\\ d)(?=.*[@$!%*?&.])[A-Za-z \\\\ d@$!%*?&.]{8,20}$\" )","title":"PASSWORD_PATTERN"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PASSWORD_PATTERN_MESSAGE","text":"PASSWORD_PATTERN_MESSAGE : str = ( \"Password must be 8-20 characters long and contain at least one uppercase letter, one lowercase letter, one number, and one special character (@$!%*?&.)\" )","title":"PASSWORD_PATTERN_MESSAGE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PDF_CREATOR","text":"PDF_CREATOR : str = 'Gobierno del Estado de Jalisco'","title":"PDF_CREATOR"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PDF_PRODUCER","text":"PDF_PRODUCER : str = 'aniachifast pdf builder version 1.1.0'","title":"PDF_PRODUCER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.POOL_OVERFLOW","text":"POOL_OVERFLOW : int = 20","title":"POOL_OVERFLOW"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.POOL_SIZE","text":"POOL_SIZE : int = 10","title":"POOL_SIZE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.POSGRESQL_DATABASE_NAME","text":"POSGRESQL_DATABASE_NAME : str = 'sample'","title":"POSGRESQL_DATABASE_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.POSTGRESQL_CLIENT_ENCODING","text":"POSTGRESQL_CLIENT_ENCODING : str = 'UTF8'","title":"POSTGRESQL_CLIENT_ENCODING"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.POSTGRESQL_CONNECT_TIMEOUT","text":"POSTGRESQL_CONNECT_TIMEOUT : int = 5","title":"POSTGRESQL_CONNECT_TIMEOUT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.POSTGRESQL_USER","text":"POSTGRESQL_USER : str = 'greg'","title":"POSTGRESQL_USER"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PROMETHEUS_JOB_NAME","text":"PROMETHEUS_JOB_NAME : Optional [ str ] = 'fastapi'","title":"PROMETHEUS_JOB_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PROMETHEUS_PORT","text":"PROMETHEUS_PORT : int = 9090","title":"PROMETHEUS_PORT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PROMETHEUS_PUSHING_INTERVAL","text":"PROMETHEUS_PUSHING_INTERVAL : int = 2000","title":"PROMETHEUS_PUSHING_INTERVAL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PROMETHEUS_SERVER_URL","text":"PROMETHEUS_SERVER_URL : Optional [ str ] = ( \"http://localhost:9090\" )","title":"PROMETHEUS_SERVER_URL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.PROMETHUS_PUSHGATEWAY_URL","text":"PROMETHUS_PUSHGATEWAY_URL : Optional [ str ] = ( \"http://localhost:9091\" )","title":"PROMETHUS_PUSHGATEWAY_URL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.REACTIVATION_CODE_EXPIRE_DAYS","text":"REACTIVATION_CODE_EXPIRE_DAYS : int = 7","title":"REACTIVATION_CODE_EXPIRE_DAYS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.REDIS_DB","text":"REDIS_DB : int = 0","title":"REDIS_DB"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.REDIS_PREFIX","text":"REDIS_PREFIX : str = 'fastapi-default-cache'","title":"REDIS_PREFIX"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.REDIS_SERVER_URL","text":"REDIS_SERVER_URL : str = 'redis://localhost:6379'","title":"REDIS_SERVER_URL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.RELEASE","text":"RELEASE : str = '000025.12.01r0b'","title":"RELEASE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.REQUEST_ID_PREFIX","text":"REQUEST_ID_PREFIX : str = 'req_'","title":"REQUEST_ID_PREFIX"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.RESET_CODE_EXPIRE_MINUTES","text":"RESET_CODE_EXPIRE_MINUTES : int = 15","title":"RESET_CODE_EXPIRE_MINUTES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.S3_BUCKET_NAME","text":"S3_BUCKET_NAME : Optional [ str ] = None","title":"S3_BUCKET_NAME"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SECRET_KEY","text":"SECRET_KEY : str = ( \"tu-secret-key-super-segura-cambiar-en-produccion\" )","title":"SECRET_KEY"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SENSITIVE_KEYWORDS","text":"SENSITIVE_KEYWORDS : set [ str ] = { \"SECRET\" , \"PASSWORD\" , \"TOKEN\" , \"KEY\" , \"COGNITO\" , }","title":"SENSITIVE_KEYWORDS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SHOW_BRAND_ON_START","text":"SHOW_BRAND_ON_START : bool = True","title":"SHOW_BRAND_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SHOW_LOGO_ON_START","text":"SHOW_LOGO_ON_START : bool = False","title":"SHOW_LOGO_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SHOW_SERVER_INFO_ON_START","text":"SHOW_SERVER_INFO_ON_START : bool = True","title":"SHOW_SERVER_INFO_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.STATIC_DIRS","text":"STATIC_DIRS : str = f ' { B } , { C } '","title":"STATIC_DIRS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SUPPORT_EMAIL","text":"SUPPORT_EMAIL : str = 'set_your_email@domain'","title":"SUPPORT_EMAIL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SUPPORT_URL","text":"SUPPORT_URL : str = 'https://set_your_domain/fastapi-sample'","title":"SUPPORT_URL"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.SYNC_MODELS_ON_START","text":"SYNC_MODELS_ON_START : bool = True","title":"SYNC_MODELS_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.TEST_CONNECTION_DELAY_SECONDS","text":"TEST_CONNECTION_DELAY_SECONDS : int = 4","title":"TEST_CONNECTION_DELAY_SECONDS"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.TEST_CONNECTION_MAX_RETRIES","text":"TEST_CONNECTION_MAX_RETRIES : int = 3","title":"TEST_CONNECTION_MAX_RETRIES"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.TEST_DB_CONNECTION_ON_START","text":"TEST_DB_CONNECTION_ON_START : bool = True","title":"TEST_DB_CONNECTION_ON_START"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.TIME_FORMAT","text":"TIME_FORMAT : str = '%Y-%m- %d %H:%M:%S'","title":"TIME_FORMAT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.TIME_TZ","text":"TIME_TZ : str = 'America/Mexico_City'","title":"TIME_TZ"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.TIME_ZONE","text":"TIME_ZONE : str = 'America/Mexico_City'","title":"TIME_ZONE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.TOKEN_MAX_USAGE","text":"TOKEN_MAX_USAGE : int = 15","title":"TOKEN_MAX_USAGE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.UNKNOWN_TIME_ZONE","text":"UNKNOWN_TIME_ZONE : str = 'UTC'","title":"UNKNOWN_TIME_ZONE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.UPLOAD_WEB_HOOK_TOKEN","text":"UPLOAD_WEB_HOOK_TOKEN : str = 'password123'","title":"UPLOAD_WEB_HOOK_TOKEN"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.USERNAME_PATTERN","text":"USERNAME_PATTERN : str = ( \"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+ \\\\ .[a-zA-Z]{2,}$\" )","title":"USERNAME_PATTERN"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.USERNAME_PATTERN_MESSAGE","text":"USERNAME_PATTERN_MESSAGE : str = ( \"Username must be a valid email address\" )","title":"USERNAME_PATTERN_MESSAGE"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.UVICORN_PORT","text":"UVICORN_PORT : int = 8888","title":"UVICORN_PORT"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.allowed_origins_list","text":"allowed_origins_list : List [ str ] Return the list of allowed CORS origins. This property converts the comma-separated ALLOWED_ORIGINS configuration value into a list of strings. Returns: List [ str ] \u2013 List[str]: A list of allowed origin strings.","title":"allowed_origins_list"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.model_config","text":"model_config = SettingsConfigDict ( case_sensitive = True , validate_default = False )","title":"model_config"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.static_dirs_list","text":"static_dirs_list : List [ str ] Return the list of configured static directories. This property converts the comma-separated STATIC_DIRS configuration value into a list of filesystem paths. Returns: List [ str ] \u2013 List[str]: A list of static directory paths.","title":"static_dirs_list"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.__str__","text":"__str__ () -> str Return a safe string representation of the configuration. Sensitive values are masked to prevent secret exposure.","title":"__str__"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.get_as_table","text":"get_as_table () -> str Render the current configuration as a formatted table.\"\"\" Render the model data as a human-readable key/value table. This method serializes the current model instance into a dictionary using model_dump() , sorts the fields alphabetically by key, and formats the result as a plain-text table using tabulate . The resulting string is intended for logging, diagnostics, CLI output, or debugging purposes where a compact and readable representation of the model state is required. Returns: str ( str ) \u2013 A formatted plain-text table where each row contains a str \u2013 field name and its corresponding value. Notes The output format does not include headers or borders. Field ordering is deterministic due to alphabetical sorting. This method performs no I/O and does not modify the model state.","title":"get_as_table"},{"location":"core/config/#aniachifast.core.config.GlobalSettings.get_settings_for_logging","text":"get_settings_for_logging () -> str Render the current configuration as a formatted table. This method converts the configuration into a sorted dictionary and renders it as a human-readable table. Optional ASCII branding elements may be included depending on configuration flags. Returns: str ( str ) \u2013 A formatted table containing all configuration values.","title":"get_settings_for_logging"},{"location":"core/config/#aniachifast.core.config.get_settings","text":"get_settings () -> GlobalSettings Retrieve the global application settings instance. This function returns a singleton instance of the internal GlobalSettings class, ensuring that configuration is loaded and parsed only once during the application lifecycle. Returns: GlobalSettings ( GlobalSettings ) \u2013 The global application settings instance.","title":"get_settings"},{"location":"core/databases/","text":"","title":"Databases"},{"location":"core/ledger-activity-types/","text":"Dynamic Activity Types for Ledger System The ledger system uses dynamic activity types that are configured through application settings and validated at runtime. This approach provides flexibility while maintaining type safety. Overview Activity types are defined as a comma-separated string in the configuration and automatically converted to a Python enum for validation. This allows you to: Add or remove activity types without code changes Maintain type safety and validation Have consistent activity naming across the application Generate documentation automatically Configuration Activity types are configured in the LEDGER_ACTIVITY_TYPES setting: # In settings LEDGER_ACTIVITY_TYPES: str = ( 'login_attempt,login_success,login_failed,' 'user_registration,user_activation,user_deactivation,' 'password_reset_request,password_reset_success,' 'profile_update,email_change,username_change,' 'account_locked,account_unlocked,' 'token_generated,token_validated,token_expired,' 'api_access,unauthorized_access,permission_denied,' 'data_export,data_import,file_upload,file_download,' 'system_maintenance,admin_action,audit_log' ) Usage Creating Activity Payloads from aniachifast.core.models.ledger import ActivityPayload # Valid activity - will work payload = ActivityPayload( user_id=\"user123\", activity=\"login_attempt\", # Must be in configured list ip_address=\"192.168.1.1\" ) # Invalid activity - will raise ValidationError try: invalid_payload = ActivityPayload( user_id=\"user123\", activity=\"invalid_activity\" # Not in configured list ) except ValidationError as e: print(f\"Validation failed: {e}\") Working with Activity Types Enum from aniachifast.core.models.activity_types import get_activity_types_enum # Get the dynamically generated enum ActivityTypes = get_activity_types_enum() # Access enum members print(ActivityTypes.LOGIN_ATTEMPT.value) # 'login_attempt' print(ActivityTypes.USER_REGISTRATION.value) # 'user_registration' # Iterate over all activity types for activity_type in ActivityTypes: print(f\"{activity_type.name} = {activity_type.value}\") Validation Utilities from aniachifast.core.models.activity_types import ( validate_activity_type, get_valid_activity_types ) # Check if an activity type is valid if validate_activity_type('login_attempt'): print(\"Valid activity type\") # Get all valid activity types valid_types = get_valid_activity_types() print(f\"Valid types: {valid_types}\") How It Works Configuration Parsing : The comma-separated string is parsed into individual activity types Enum Generation : A dynamic enum is created with uppercase member names and lowercase values Caching : The enum is cached using @lru_cache for performance Validation : Pydantic field validator checks activity types against the enum Naming Conventions Configuration : lowercase with underscores ( login_attempt ) Enum Members : uppercase with underscores ( LOGIN_ATTEMPT ) Enum Values : lowercase with underscores ( login_attempt ) Adding New Activity Types To add new activity types: Update the LEDGER_ACTIVITY_TYPES setting in your configuration Restart the application (the enum is cached) The new activity types will be automatically available Example: # Add 'custom_activity' to the configuration LEDGER_ACTIVITY_TYPES = 'login_attempt,user_registration,custom_activity' Error Handling When an invalid activity type is used, a detailed error message is provided: ValidationError: Activity type \"invalid_activity\" is not valid. Valid types are: login_attempt, login_success, login_failed, ... Best Practices Consistent Naming : Use lowercase with underscores Descriptive Names : Make activity types self-explanatory Logical Grouping : Group related activities together in configuration Documentation : Document what each activity type represents Performance Considerations The enum is generated once and cached using @lru_cache Validation is fast as it uses enum membership checking No runtime overhead after initial enum generation Testing The system includes comprehensive tests for: - Enum generation from configuration - Validation of valid and invalid activity types - Pydantic model integration - Error handling Run tests with: pytest tests/unit/core/models/test_activity_types.py pytest tests/unit/core/models/test_ledger.py","title":"Dynamic Activity Types for Ledger System"},{"location":"core/ledger-activity-types/#dynamic-activity-types-for-ledger-system","text":"The ledger system uses dynamic activity types that are configured through application settings and validated at runtime. This approach provides flexibility while maintaining type safety.","title":"Dynamic Activity Types for Ledger System"},{"location":"core/ledger-activity-types/#overview","text":"Activity types are defined as a comma-separated string in the configuration and automatically converted to a Python enum for validation. This allows you to: Add or remove activity types without code changes Maintain type safety and validation Have consistent activity naming across the application Generate documentation automatically","title":"Overview"},{"location":"core/ledger-activity-types/#configuration","text":"Activity types are configured in the LEDGER_ACTIVITY_TYPES setting: # In settings LEDGER_ACTIVITY_TYPES: str = ( 'login_attempt,login_success,login_failed,' 'user_registration,user_activation,user_deactivation,' 'password_reset_request,password_reset_success,' 'profile_update,email_change,username_change,' 'account_locked,account_unlocked,' 'token_generated,token_validated,token_expired,' 'api_access,unauthorized_access,permission_denied,' 'data_export,data_import,file_upload,file_download,' 'system_maintenance,admin_action,audit_log' )","title":"Configuration"},{"location":"core/ledger-activity-types/#usage","text":"","title":"Usage"},{"location":"core/ledger-activity-types/#creating-activity-payloads","text":"from aniachifast.core.models.ledger import ActivityPayload # Valid activity - will work payload = ActivityPayload( user_id=\"user123\", activity=\"login_attempt\", # Must be in configured list ip_address=\"192.168.1.1\" ) # Invalid activity - will raise ValidationError try: invalid_payload = ActivityPayload( user_id=\"user123\", activity=\"invalid_activity\" # Not in configured list ) except ValidationError as e: print(f\"Validation failed: {e}\")","title":"Creating Activity Payloads"},{"location":"core/ledger-activity-types/#working-with-activity-types-enum","text":"from aniachifast.core.models.activity_types import get_activity_types_enum # Get the dynamically generated enum ActivityTypes = get_activity_types_enum() # Access enum members print(ActivityTypes.LOGIN_ATTEMPT.value) # 'login_attempt' print(ActivityTypes.USER_REGISTRATION.value) # 'user_registration' # Iterate over all activity types for activity_type in ActivityTypes: print(f\"{activity_type.name} = {activity_type.value}\")","title":"Working with Activity Types Enum"},{"location":"core/ledger-activity-types/#validation-utilities","text":"from aniachifast.core.models.activity_types import ( validate_activity_type, get_valid_activity_types ) # Check if an activity type is valid if validate_activity_type('login_attempt'): print(\"Valid activity type\") # Get all valid activity types valid_types = get_valid_activity_types() print(f\"Valid types: {valid_types}\")","title":"Validation Utilities"},{"location":"core/ledger-activity-types/#how-it-works","text":"Configuration Parsing : The comma-separated string is parsed into individual activity types Enum Generation : A dynamic enum is created with uppercase member names and lowercase values Caching : The enum is cached using @lru_cache for performance Validation : Pydantic field validator checks activity types against the enum","title":"How It Works"},{"location":"core/ledger-activity-types/#naming-conventions","text":"Configuration : lowercase with underscores ( login_attempt ) Enum Members : uppercase with underscores ( LOGIN_ATTEMPT ) Enum Values : lowercase with underscores ( login_attempt )","title":"Naming Conventions"},{"location":"core/ledger-activity-types/#adding-new-activity-types","text":"To add new activity types: Update the LEDGER_ACTIVITY_TYPES setting in your configuration Restart the application (the enum is cached) The new activity types will be automatically available Example: # Add 'custom_activity' to the configuration LEDGER_ACTIVITY_TYPES = 'login_attempt,user_registration,custom_activity'","title":"Adding New Activity Types"},{"location":"core/ledger-activity-types/#error-handling","text":"When an invalid activity type is used, a detailed error message is provided: ValidationError: Activity type \"invalid_activity\" is not valid. Valid types are: login_attempt, login_success, login_failed, ...","title":"Error Handling"},{"location":"core/ledger-activity-types/#best-practices","text":"Consistent Naming : Use lowercase with underscores Descriptive Names : Make activity types self-explanatory Logical Grouping : Group related activities together in configuration Documentation : Document what each activity type represents","title":"Best Practices"},{"location":"core/ledger-activity-types/#performance-considerations","text":"The enum is generated once and cached using @lru_cache Validation is fast as it uses enum membership checking No runtime overhead after initial enum generation","title":"Performance Considerations"},{"location":"core/ledger-activity-types/#testing","text":"The system includes comprehensive tests for: - Enum generation from configuration - Validation of valid and invalid activity types - Pydantic model integration - Error handling Run tests with: pytest tests/unit/core/models/test_activity_types.py pytest tests/unit/core/models/test_ledger.py","title":"Testing"},{"location":"core/limiter/","text":"Rate Limiter Configuration aniachifast.core.limiter_cfg Rate limiter configuration module. This module provides a centralized configuration for the SlowAPI Limiter instance used across the FastAPI application. It encapsulates the creation and access to a single global Limiter configured to identify clients by their remote IP address. The limiter is intended to be reused by routers, endpoints, and middleware to apply consistent rate-limiting policies. limiter_config module-attribute limiter_config = _LimiterConfig ()","title":"Limiter"},{"location":"core/limiter/#rate-limiter-configuration","text":"","title":"Rate Limiter Configuration"},{"location":"core/limiter/#aniachifast.core.limiter_cfg","text":"Rate limiter configuration module. This module provides a centralized configuration for the SlowAPI Limiter instance used across the FastAPI application. It encapsulates the creation and access to a single global Limiter configured to identify clients by their remote IP address. The limiter is intended to be reused by routers, endpoints, and middleware to apply consistent rate-limiting policies.","title":"limiter_cfg"},{"location":"core/limiter/#aniachifast.core.limiter_cfg.limiter_config","text":"limiter_config = _LimiterConfig ()","title":"limiter_config"},{"location":"core/overview/","text":"Core Overview This section provides an overview of the core components. Components Usage Examples","title":"Overview"},{"location":"core/overview/#core-overview","text":"This section provides an overview of the core components.","title":"Core Overview"},{"location":"core/overview/#components","text":"","title":"Components"},{"location":"core/overview/#usage-examples","text":"","title":"Usage Examples"},{"location":"core/responses/","text":"","title":"Responses"},{"location":"core/async_helpers/email_helper/","text":"Core Async Helpers Email Helper aniachifast.core.async_helpers.email_helper Asynchronous email helper module. This module provides a thin abstraction for sending emails asynchronously using a background thread pool and a queue-based delivery system. Design goals: - Non-blocking email submission - Decoupled delivery via queue backends (Redis, SQS, test queue, etc.) - Centralized executor lifecycle - Minimal surface API for callers The actual email delivery is handled elsewhere by the configured EmailQueue consumer. MAX_THREADS module-attribute MAX_THREADS = EMAIL_MAX_EXECUTOR_WORKERS logger module-attribute logger = getLogger ( __name__ ) EmailHelper Provides a decoupled, high-performance interface for sending emails. Executive Summary The EmailHelper is a utility designed for sending emails in an asynchronous, \"fire-and-forget\" manner. Its purpose is to provide a simple, static interface that allows the application to request an email be sent without blocking the main process (e.g., an API request handler) while the email is being dispatched. Operating Principle: Fire-and-Forget Reception: An application service calls the static method EmailHelper.send() with the email details. Immediate Delegation: The method packages the details into an EmailPayload and submits a task to a dedicated ThreadPoolExecutor ( _email_executor ). The task is to call EmailQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The send() method returns immediately, freeing the main application thread. Asynchronous Processing: A background thread from the pool executes EmailQueue.enqueue() . The EmailQueue acts as a dispatcher, routing the payload to the configured backend (e.g., a local SMTP function, SQS) based on application settings. This is where the actual I/O happens, completely decoupled from the initial call. Workflow Diagram +----------------+ +--------------------+ +--------------------------------------------+ | | | (Static Method) | | (Configured by EMAIL_MAX_EXECUTOR_WORKERS) | | API Endpoint |----->| EmailHelper |----->| _email_executor | | (o Servicio) | | .send() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +--------------------------------------------+ | | Submits a Task (EmailQueue.enqueue) v +--------------------------------------------------------------------------+ | EmailQueue (Dispatcher) | | - Reads setting: EMAIL_QUEUE_IMPLEMENTATION | | - Selects backend logic based on value ('local', 'test', etc.) | +--------------------------------------------------------------------------+ | +--------------------------+------------------------------+ | (if 'local') | (if 'test') | v v v +--------------------------------------+ +----------------------------+ +----------------------+ | Calls callable from setting: | | Runs internal test logic | | (Future Impls.) | | EMAIL_BACKEND (e.g., smtp library) | | (simulates delay/failure) | | SQS / Redis etc. | +--------------------------------------+ +----------------------------+ +----------------------+ send staticmethod send ( to_email : str , subject : str , content : str , content_type : str = \"text\" , from_email : ( str | None ) = get_settings () . EMAIL_MAIN_CORPORATE , ) -> None Enqueue an email for asynchronous delivery. This method submits the email payload to a background thread pool, allowing the caller to continue execution without waiting for delivery to complete. Parameters to_email : str Recipient email address. subject : str Email subject line. content : str Email body content (plain text or HTML). content_type : str, optional Content type identifier (\"text\" or \"html\"), by default \"text\". from_email : str | None, optional Sender email address. If not provided, the system default configured in settings is used. Returns None Notes This method is fire-and-forget. Delivery failures are logged asynchronously. No exception is propagated to the caller.","title":"Email Helper"},{"location":"core/async_helpers/email_helper/#core-async-helpers-email-helper","text":"","title":"Core Async Helpers Email Helper"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper","text":"Asynchronous email helper module. This module provides a thin abstraction for sending emails asynchronously using a background thread pool and a queue-based delivery system. Design goals: - Non-blocking email submission - Decoupled delivery via queue backends (Redis, SQS, test queue, etc.) - Centralized executor lifecycle - Minimal surface API for callers The actual email delivery is handled elsewhere by the configured EmailQueue consumer.","title":"email_helper"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper.MAX_THREADS","text":"MAX_THREADS = EMAIL_MAX_EXECUTOR_WORKERS","title":"MAX_THREADS"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper.logger","text":"logger = getLogger ( __name__ )","title":"logger"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper.EmailHelper","text":"Provides a decoupled, high-performance interface for sending emails. Executive Summary The EmailHelper is a utility designed for sending emails in an asynchronous, \"fire-and-forget\" manner. Its purpose is to provide a simple, static interface that allows the application to request an email be sent without blocking the main process (e.g., an API request handler) while the email is being dispatched. Operating Principle: Fire-and-Forget Reception: An application service calls the static method EmailHelper.send() with the email details. Immediate Delegation: The method packages the details into an EmailPayload and submits a task to a dedicated ThreadPoolExecutor ( _email_executor ). The task is to call EmailQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The send() method returns immediately, freeing the main application thread. Asynchronous Processing: A background thread from the pool executes EmailQueue.enqueue() . The EmailQueue acts as a dispatcher, routing the payload to the configured backend (e.g., a local SMTP function, SQS) based on application settings. This is where the actual I/O happens, completely decoupled from the initial call. Workflow Diagram +----------------+ +--------------------+ +--------------------------------------------+ | | | (Static Method) | | (Configured by EMAIL_MAX_EXECUTOR_WORKERS) | | API Endpoint |----->| EmailHelper |----->| _email_executor | | (o Servicio) | | .send() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +--------------------------------------------+ | | Submits a Task (EmailQueue.enqueue) v +--------------------------------------------------------------------------+ | EmailQueue (Dispatcher) | | - Reads setting: EMAIL_QUEUE_IMPLEMENTATION | | - Selects backend logic based on value ('local', 'test', etc.) | +--------------------------------------------------------------------------+ | +--------------------------+------------------------------+ | (if 'local') | (if 'test') | v v v +--------------------------------------+ +----------------------------+ +----------------------+ | Calls callable from setting: | | Runs internal test logic | | (Future Impls.) | | EMAIL_BACKEND (e.g., smtp library) | | (simulates delay/failure) | | SQS / Redis etc. | +--------------------------------------+ +----------------------------+ +----------------------+","title":"EmailHelper"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper.EmailHelper.send","text":"send ( to_email : str , subject : str , content : str , content_type : str = \"text\" , from_email : ( str | None ) = get_settings () . EMAIL_MAIN_CORPORATE , ) -> None Enqueue an email for asynchronous delivery. This method submits the email payload to a background thread pool, allowing the caller to continue execution without waiting for delivery to complete.","title":"send"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper.EmailHelper.send--parameters","text":"to_email : str Recipient email address. subject : str Email subject line. content : str Email body content (plain text or HTML). content_type : str, optional Content type identifier (\"text\" or \"html\"), by default \"text\". from_email : str | None, optional Sender email address. If not provided, the system default configured in settings is used.","title":"Parameters"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper.EmailHelper.send--returns","text":"None","title":"Returns"},{"location":"core/async_helpers/email_helper/#aniachifast.core.async_helpers.email_helper.EmailHelper.send--notes","text":"This method is fire-and-forget. Delivery failures are logged asynchronously. No exception is propagated to the caller.","title":"Notes"},{"location":"core/async_helpers/ledger_helper/","text":"Core Async Helpers Ledger Helper aniachifast.core.async_helpers.ledger_helper Ledger Helper - Asynchronous User Activity Logging This module provides a simple, non-blocking ledger helper for logging user activities via a robust queue system. It's designed to be scalable and maintainable with support for multiple queue backends. All methods are fire-and-forget and will not block the main application flow. Usage Fire and forget - does not block LedgerHelper.log_activity( user_id=\"user123\", activity=\"login_attempt\", ip_address=\"192.168.1.1\", user_agent=\"Mozilla/5.0...\" ) MAX_THREADS module-attribute MAX_THREADS = LEDGER_MAX_EXECUTOR_WORKERS logger module-attribute logger = getLogger ( 'aniachifast' ) LedgerHelper Provides a decoupled, high-performance interface for recording ledger activities. Executive Summary The LedgerHelper is a central component designed for recording events (activities) in a ledger in an asynchronous, \"fire-and-forget\" manner. Its primary goal is to offer a simple, static, and high-performance interface to the rest of the application, ensuring that calls to record events do not block or slow down main processes (e.g., API responses). Operating Principle: Fire-and-Forget Reception: An application service or endpoint calls the static method LedgerHelper.log_activity() with the details of an event. Immediate Delegation: The method packages the details into an ActivityPayload and submits a task to a dedicated ThreadPoolExecutor ( _ledger_executor ). The task submitted is to call LedgerQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The log_activity method returns immediately, freeing the main application thread. Asynchronous Processing: A background thread from the pool executes LedgerQueue.enqueue() . The LedgerQueue then acts as a dispatcher, routing the payload to the configured backend (e.g., PostgreSQL, DynamoDB, SQS) based on application settings. This is where the actual I/O happens, completely decoupled from the initial call. This architecture is crucial for application performance, scalability, and resilience. Workflow Diagram +----------------+ +--------------------+ +------------------------------------------------+ | | | (Static Method) | | (Configured by LEDGER_MAX_EXECUTOR_WORKERS) | | API Endpoint |----->| LedgerHelper |----->| _ledger_executor | | (o Servicio) | | .log_activity() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +------------------------------------------------+ | | Submits a Task (LedgerQueue.enqueue) v +----------------------------------------------------------------------------------+ | LedgerQueue (Dispatcher) | | - Reads setting: LEDGER_QUEUE_IMPLEMENTATION | | - Selects backend logic based on the value ('postgresql', 'dynamodb', etc.) | +----------------------------------------------------------------------------------+ | +----------------------------------------+-------------------------------------------+ | (if 'postgresql') | (if 'dynamodb') | (if 'test') v v v +---------------------------+ +----------------------------+ +------------------------------+ | Calls callable from setting: | | Calls callable from setting: | | Runs internal test logic | | LEDGER_POSTGRESQL_BACKEND | | LEDGER_DYNAMODB_BACKEND | | (simulates delay/failure) | +---------------------------+ +----------------------------+ +------------------------------+ log_activity staticmethod log_activity ( activity : str , ip_address : str | None = None , user_agent : str | None = None , user_id : UUID | None = None , company_id : UUID | None = None , request_id : str | None = None , metadata : dict [ str , Any ] | None = None , ) -> None Log user activity asynchronously via queue system. This method enqueues the activity for background processing without blocking the caller. The actual logging is handled by the configured queue backend (test, database, redis, sqs, etc.). Parameters: user_id ( UUID | None , default: None ) \u2013 User identifier (can be None for anonymous activities) activity ( str ) \u2013 Activity description (e.g., \"login_attempt\", \"registration\") ip_address ( str | None , default: None ) \u2013 Client IP address (optional) user_agent ( str | None , default: None ) \u2013 Client user agent string (optional) request_id ( str | None , default: None ) \u2013 Unique identifier for the incoming request (optional) Note This method returns immediately. Activity logging happens asynchronously in a background thread pool. Check logs for processing status.","title":"Ledger Helper"},{"location":"core/async_helpers/ledger_helper/#core-async-helpers-ledger-helper","text":"","title":"Core Async Helpers Ledger Helper"},{"location":"core/async_helpers/ledger_helper/#aniachifast.core.async_helpers.ledger_helper","text":"","title":"ledger_helper"},{"location":"core/async_helpers/ledger_helper/#aniachifast.core.async_helpers.ledger_helper--ledger-helper-asynchronous-user-activity-logging","text":"This module provides a simple, non-blocking ledger helper for logging user activities via a robust queue system. It's designed to be scalable and maintainable with support for multiple queue backends. All methods are fire-and-forget and will not block the main application flow. Usage","title":"Ledger Helper - Asynchronous User Activity Logging"},{"location":"core/async_helpers/ledger_helper/#aniachifast.core.async_helpers.ledger_helper--fire-and-forget-does-not-block","text":"LedgerHelper.log_activity( user_id=\"user123\", activity=\"login_attempt\", ip_address=\"192.168.1.1\", user_agent=\"Mozilla/5.0...\" )","title":"Fire and forget - does not block"},{"location":"core/async_helpers/ledger_helper/#aniachifast.core.async_helpers.ledger_helper.MAX_THREADS","text":"MAX_THREADS = LEDGER_MAX_EXECUTOR_WORKERS","title":"MAX_THREADS"},{"location":"core/async_helpers/ledger_helper/#aniachifast.core.async_helpers.ledger_helper.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/async_helpers/ledger_helper/#aniachifast.core.async_helpers.ledger_helper.LedgerHelper","text":"Provides a decoupled, high-performance interface for recording ledger activities. Executive Summary The LedgerHelper is a central component designed for recording events (activities) in a ledger in an asynchronous, \"fire-and-forget\" manner. Its primary goal is to offer a simple, static, and high-performance interface to the rest of the application, ensuring that calls to record events do not block or slow down main processes (e.g., API responses). Operating Principle: Fire-and-Forget Reception: An application service or endpoint calls the static method LedgerHelper.log_activity() with the details of an event. Immediate Delegation: The method packages the details into an ActivityPayload and submits a task to a dedicated ThreadPoolExecutor ( _ledger_executor ). The task submitted is to call LedgerQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The log_activity method returns immediately, freeing the main application thread. Asynchronous Processing: A background thread from the pool executes LedgerQueue.enqueue() . The LedgerQueue then acts as a dispatcher, routing the payload to the configured backend (e.g., PostgreSQL, DynamoDB, SQS) based on application settings. This is where the actual I/O happens, completely decoupled from the initial call. This architecture is crucial for application performance, scalability, and resilience. Workflow Diagram +----------------+ +--------------------+ +------------------------------------------------+ | | | (Static Method) | | (Configured by LEDGER_MAX_EXECUTOR_WORKERS) | | API Endpoint |----->| LedgerHelper |----->| _ledger_executor | | (o Servicio) | | .log_activity() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +------------------------------------------------+ | | Submits a Task (LedgerQueue.enqueue) v +----------------------------------------------------------------------------------+ | LedgerQueue (Dispatcher) | | - Reads setting: LEDGER_QUEUE_IMPLEMENTATION | | - Selects backend logic based on the value ('postgresql', 'dynamodb', etc.) | +----------------------------------------------------------------------------------+ | +----------------------------------------+-------------------------------------------+ | (if 'postgresql') | (if 'dynamodb') | (if 'test') v v v +---------------------------+ +----------------------------+ +------------------------------+ | Calls callable from setting: | | Calls callable from setting: | | Runs internal test logic | | LEDGER_POSTGRESQL_BACKEND | | LEDGER_DYNAMODB_BACKEND | | (simulates delay/failure) | +---------------------------+ +----------------------------+ +------------------------------+","title":"LedgerHelper"},{"location":"core/async_helpers/ledger_helper/#aniachifast.core.async_helpers.ledger_helper.LedgerHelper.log_activity","text":"log_activity ( activity : str , ip_address : str | None = None , user_agent : str | None = None , user_id : UUID | None = None , company_id : UUID | None = None , request_id : str | None = None , metadata : dict [ str , Any ] | None = None , ) -> None Log user activity asynchronously via queue system. This method enqueues the activity for background processing without blocking the caller. The actual logging is handled by the configured queue backend (test, database, redis, sqs, etc.). Parameters: user_id ( UUID | None , default: None ) \u2013 User identifier (can be None for anonymous activities) activity ( str ) \u2013 Activity description (e.g., \"login_attempt\", \"registration\") ip_address ( str | None , default: None ) \u2013 Client IP address (optional) user_agent ( str | None , default: None ) \u2013 Client user agent string (optional) request_id ( str | None , default: None ) \u2013 Unique identifier for the incoming request (optional) Note This method returns immediately. Activity logging happens asynchronously in a background thread pool. Check logs for processing status.","title":"log_activity"},{"location":"core/async_helpers/overview/","text":"Core Async Helpers Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Async Helpers"},{"location":"core/async_helpers/overview/#core-async-helpers","text":"","title":"Core Async Helpers"},{"location":"core/async_helpers/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/async_helpers/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/async_helpers/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/async_helpers/upload_helper/","text":"Core Async Helpers Upload Helper aniachifast.core.async_helpers.upload_helper Cloud File Uploader Helper Module. This module provides an asynchronous, non-blocking interface for submitting file upload tasks to a background execution pipeline. It is responsible for: Initializing a dedicated ThreadPoolExecutor for file uploads. Exposing a simple static helper ( UploaderHelper.upload_file ) used by API endpoints or application services. Decoupling request handling from cloud storage I/O. Delegating upload execution to UploaderQueue , which dynamically selects the concrete storage backend based on application settings. Configuration-driven behavior: FILE_UPLOAD_MAX_EXECUTOR_WORKERS: Controls the size of the thread pool used for upload tasks. FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION: Determines which storage backend implementation is used (e.g. AWS S3, MinIO, GCP, Local FS). Design goals: Fire-and-forget uploads Minimal latency impact on request handlers Pluggable, backend-agnostic storage architecture Safe execution in multi-threaded environments This module performs executor initialization at import time, ensuring a single shared thread pool per application process. MAX_THREADS module-attribute MAX_THREADS = FILE_UPLOAD_MAX_EXECUTOR_WORKERS logger module-attribute logger = getLogger ( 'aniachifast' ) UploaderHelper Provides a decoupled, high-performance interface for uploading files. Executive Summary The UploaderHelper is a utility designed for uploading files in an asynchronous, \"fire-and-forget\" manner. Its purpose is to provide a simple, static interface that allows the application to request a file upload without blocking the main process (e.g., an API request handler) while the upload is in progress. Operating Principle: Fire-and-Forget Reception: An application service calls UploaderHelper.upload_file() with a validated file payload. Immediate Delegation: The method submits a task to a dedicated ThreadPoolExecutor ( _uploader_executor ). The task is to call UploaderQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The upload_file() method returns immediately. Asynchronous Processing: A background thread from the pool executes UploaderQueue.enqueue() . The UploaderQueue acts as a dispatcher, reading the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION setting to determine the target cloud storage provider (e.g., AWS S3, MinIO, GCP). It then dynamically loads and calls the appropriate backend function to perform the actual upload. Workflow Diagram +----------------+ +--------------------+ +-------------------------------------------------+ | | | (Static Method) | | (Configured by FILE_UPLOAD_MAX_EXECUTOR_WORKERS)| | API Endpoint |----->| UploaderHelper |----->| _uploader_executor | | (o Servicio) | | .upload_file() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +-------------------------------------------------+ | | Submits a Task (UploaderQueue.enqueue) v +------------------------------------------------------------------------------------------------+ | UploaderQueue (Dispatcher) | | - Reads setting: FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION | | - Selects backend logic based on value ('aws', 'minio', 'gcp', etc.) | +------------------------------------------------------------------------------------------------+ | +----------------------------------------+-------------------------------------------+ | (if 'aws') | (if 'minio') | (if 'gcp') v v v +----------------------------+ +-----------------------------+ +----------------------------+ | Calls callable from setting: | | Calls callable from setting: | | Calls callable from setting: | | AWS_S3_UPLOAD_BACKEND | | MINIO_UPLOAD_BACKEND | | GCP_UPLOAD_BACKEND | +----------------------------+ +-----------------------------+ +----------------------------+ upload_file staticmethod upload_file ( payload : ValidatedFile ) -> None Submit a file upload task for asynchronous execution. This method provides a non-blocking , fire-and-forget interface for file uploads. It does not perform the upload directly. Instead, it submits a background task to a dedicated ThreadPoolExecutor , which will invoke UploaderQueue.enqueue(payload) in a separate thread. The actual upload behavior (cloud provider, credentials, bucket, storage API) is determined at runtime by UploaderQueue , based on the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION application setting. Parameters payload : ValidatedFile A validated file payload containing metadata (user, filename, content type) and binary file contents ready for upload. Returns None This method returns immediately after task submission. Upload execution continues asynchronously. Raises None directly. Any exception raised during task submission is caught and logged. Upload execution errors are handled downstream by the queue and backend implementation. Notes This method is safe to call from request handlers. It should be treated as \"best-effort\" submission. Failure to submit a task does not crash the calling thread.","title":"Upload Helper"},{"location":"core/async_helpers/upload_helper/#core-async-helpers-upload-helper","text":"","title":"Core Async Helpers Upload Helper"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper","text":"Cloud File Uploader Helper Module. This module provides an asynchronous, non-blocking interface for submitting file upload tasks to a background execution pipeline. It is responsible for: Initializing a dedicated ThreadPoolExecutor for file uploads. Exposing a simple static helper ( UploaderHelper.upload_file ) used by API endpoints or application services. Decoupling request handling from cloud storage I/O. Delegating upload execution to UploaderQueue , which dynamically selects the concrete storage backend based on application settings. Configuration-driven behavior: FILE_UPLOAD_MAX_EXECUTOR_WORKERS: Controls the size of the thread pool used for upload tasks. FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION: Determines which storage backend implementation is used (e.g. AWS S3, MinIO, GCP, Local FS). Design goals: Fire-and-forget uploads Minimal latency impact on request handlers Pluggable, backend-agnostic storage architecture Safe execution in multi-threaded environments This module performs executor initialization at import time, ensuring a single shared thread pool per application process.","title":"upload_helper"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.MAX_THREADS","text":"MAX_THREADS = FILE_UPLOAD_MAX_EXECUTOR_WORKERS","title":"MAX_THREADS"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper","text":"Provides a decoupled, high-performance interface for uploading files. Executive Summary The UploaderHelper is a utility designed for uploading files in an asynchronous, \"fire-and-forget\" manner. Its purpose is to provide a simple, static interface that allows the application to request a file upload without blocking the main process (e.g., an API request handler) while the upload is in progress. Operating Principle: Fire-and-Forget Reception: An application service calls UploaderHelper.upload_file() with a validated file payload. Immediate Delegation: The method submits a task to a dedicated ThreadPoolExecutor ( _uploader_executor ). The task is to call UploaderQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The upload_file() method returns immediately. Asynchronous Processing: A background thread from the pool executes UploaderQueue.enqueue() . The UploaderQueue acts as a dispatcher, reading the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION setting to determine the target cloud storage provider (e.g., AWS S3, MinIO, GCP). It then dynamically loads and calls the appropriate backend function to perform the actual upload. Workflow Diagram +----------------+ +--------------------+ +-------------------------------------------------+ | | | (Static Method) | | (Configured by FILE_UPLOAD_MAX_EXECUTOR_WORKERS)| | API Endpoint |----->| UploaderHelper |----->| _uploader_executor | | (o Servicio) | | .upload_file() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +-------------------------------------------------+ | | Submits a Task (UploaderQueue.enqueue) v +------------------------------------------------------------------------------------------------+ | UploaderQueue (Dispatcher) | | - Reads setting: FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION | | - Selects backend logic based on value ('aws', 'minio', 'gcp', etc.) | +------------------------------------------------------------------------------------------------+ | +----------------------------------------+-------------------------------------------+ | (if 'aws') | (if 'minio') | (if 'gcp') v v v +----------------------------+ +-----------------------------+ +----------------------------+ | Calls callable from setting: | | Calls callable from setting: | | Calls callable from setting: | | AWS_S3_UPLOAD_BACKEND | | MINIO_UPLOAD_BACKEND | | GCP_UPLOAD_BACKEND | +----------------------------+ +-----------------------------+ +----------------------------+","title":"UploaderHelper"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file","text":"upload_file ( payload : ValidatedFile ) -> None Submit a file upload task for asynchronous execution. This method provides a non-blocking , fire-and-forget interface for file uploads. It does not perform the upload directly. Instead, it submits a background task to a dedicated ThreadPoolExecutor , which will invoke UploaderQueue.enqueue(payload) in a separate thread. The actual upload behavior (cloud provider, credentials, bucket, storage API) is determined at runtime by UploaderQueue , based on the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION application setting.","title":"upload_file"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--parameters","text":"payload : ValidatedFile A validated file payload containing metadata (user, filename, content type) and binary file contents ready for upload.","title":"Parameters"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--returns","text":"None This method returns immediately after task submission. Upload execution continues asynchronously.","title":"Returns"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--raises","text":"None directly. Any exception raised during task submission is caught and logged. Upload execution errors are handled downstream by the queue and backend implementation.","title":"Raises"},{"location":"core/async_helpers/upload_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--notes","text":"This method is safe to call from request handlers. It should be treated as \"best-effort\" submission. Failure to submit a task does not crash the calling thread.","title":"Notes"},{"location":"core/async_helpers/uploader_helper/","text":"Uploader Helper aniachifast.core.async_helpers.upload_helper.UploaderHelper Provides a decoupled, high-performance interface for uploading files. Executive Summary The UploaderHelper is a utility designed for uploading files in an asynchronous, \"fire-and-forget\" manner. Its purpose is to provide a simple, static interface that allows the application to request a file upload without blocking the main process (e.g., an API request handler) while the upload is in progress. Operating Principle: Fire-and-Forget Reception: An application service calls UploaderHelper.upload_file() with a validated file payload. Immediate Delegation: The method submits a task to a dedicated ThreadPoolExecutor ( _uploader_executor ). The task is to call UploaderQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The upload_file() method returns immediately. Asynchronous Processing: A background thread from the pool executes UploaderQueue.enqueue() . The UploaderQueue acts as a dispatcher, reading the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION setting to determine the target cloud storage provider (e.g., AWS S3, MinIO, GCP). It then dynamically loads and calls the appropriate backend function to perform the actual upload. Workflow Diagram +----------------+ +--------------------+ +-------------------------------------------------+ | | | (Static Method) | | (Configured by FILE_UPLOAD_MAX_EXECUTOR_WORKERS)| | API Endpoint |----->| UploaderHelper |----->| _uploader_executor | | (o Servicio) | | .upload_file() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +-------------------------------------------------+ | | Submits a Task (UploaderQueue.enqueue) v +------------------------------------------------------------------------------------------------+ | UploaderQueue (Dispatcher) | | - Reads setting: FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION | | - Selects backend logic based on value ('aws', 'minio', 'gcp', etc.) | +------------------------------------------------------------------------------------------------+ | +----------------------------------------+-------------------------------------------+ | (if 'aws') | (if 'minio') | (if 'gcp') v v v +----------------------------+ +-----------------------------+ +----------------------------+ | Calls callable from setting: | | Calls callable from setting: | | Calls callable from setting: | | AWS_S3_UPLOAD_BACKEND | | MINIO_UPLOAD_BACKEND | | GCP_UPLOAD_BACKEND | +----------------------------+ +-----------------------------+ +----------------------------+ upload_file staticmethod upload_file ( payload : ValidatedFile ) -> None Submit a file upload task for asynchronous execution. This method provides a non-blocking , fire-and-forget interface for file uploads. It does not perform the upload directly. Instead, it submits a background task to a dedicated ThreadPoolExecutor , which will invoke UploaderQueue.enqueue(payload) in a separate thread. The actual upload behavior (cloud provider, credentials, bucket, storage API) is determined at runtime by UploaderQueue , based on the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION application setting. Parameters payload : ValidatedFile A validated file payload containing metadata (user, filename, content type) and binary file contents ready for upload. Returns None This method returns immediately after task submission. Upload execution continues asynchronously. Raises None directly. Any exception raised during task submission is caught and logged. Upload execution errors are handled downstream by the queue and backend implementation. Notes This method is safe to call from request handlers. It should be treated as \"best-effort\" submission. Failure to submit a task does not crash the calling thread.","title":"Uploader Helper"},{"location":"core/async_helpers/uploader_helper/#uploader-helper","text":"","title":"Uploader Helper"},{"location":"core/async_helpers/uploader_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper","text":"Provides a decoupled, high-performance interface for uploading files. Executive Summary The UploaderHelper is a utility designed for uploading files in an asynchronous, \"fire-and-forget\" manner. Its purpose is to provide a simple, static interface that allows the application to request a file upload without blocking the main process (e.g., an API request handler) while the upload is in progress. Operating Principle: Fire-and-Forget Reception: An application service calls UploaderHelper.upload_file() with a validated file payload. Immediate Delegation: The method submits a task to a dedicated ThreadPoolExecutor ( _uploader_executor ). The task is to call UploaderQueue.enqueue(payload) . Rapid Response: The submission to the thread pool is non-blocking. The upload_file() method returns immediately. Asynchronous Processing: A background thread from the pool executes UploaderQueue.enqueue() . The UploaderQueue acts as a dispatcher, reading the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION setting to determine the target cloud storage provider (e.g., AWS S3, MinIO, GCP). It then dynamically loads and calls the appropriate backend function to perform the actual upload. Workflow Diagram +----------------+ +--------------------+ +-------------------------------------------------+ | | | (Static Method) | | (Configured by FILE_UPLOAD_MAX_EXECUTOR_WORKERS)| | API Endpoint |----->| UploaderHelper |----->| _uploader_executor | | (o Servicio) | | .upload_file() | | (ThreadPoolExecutor) | | | | | | | +----------------+ +--------------------+ +-------------------------------------------------+ | | Submits a Task (UploaderQueue.enqueue) v +------------------------------------------------------------------------------------------------+ | UploaderQueue (Dispatcher) | | - Reads setting: FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION | | - Selects backend logic based on value ('aws', 'minio', 'gcp', etc.) | +------------------------------------------------------------------------------------------------+ | +----------------------------------------+-------------------------------------------+ | (if 'aws') | (if 'minio') | (if 'gcp') v v v +----------------------------+ +-----------------------------+ +----------------------------+ | Calls callable from setting: | | Calls callable from setting: | | Calls callable from setting: | | AWS_S3_UPLOAD_BACKEND | | MINIO_UPLOAD_BACKEND | | GCP_UPLOAD_BACKEND | +----------------------------+ +-----------------------------+ +----------------------------+","title":"UploaderHelper"},{"location":"core/async_helpers/uploader_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file","text":"upload_file ( payload : ValidatedFile ) -> None Submit a file upload task for asynchronous execution. This method provides a non-blocking , fire-and-forget interface for file uploads. It does not perform the upload directly. Instead, it submits a background task to a dedicated ThreadPoolExecutor , which will invoke UploaderQueue.enqueue(payload) in a separate thread. The actual upload behavior (cloud provider, credentials, bucket, storage API) is determined at runtime by UploaderQueue , based on the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION application setting.","title":"upload_file"},{"location":"core/async_helpers/uploader_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--parameters","text":"payload : ValidatedFile A validated file payload containing metadata (user, filename, content type) and binary file contents ready for upload.","title":"Parameters"},{"location":"core/async_helpers/uploader_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--returns","text":"None This method returns immediately after task submission. Upload execution continues asynchronously.","title":"Returns"},{"location":"core/async_helpers/uploader_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--raises","text":"None directly. Any exception raised during task submission is caught and logged. Upload execution errors are handled downstream by the queue and backend implementation.","title":"Raises"},{"location":"core/async_helpers/uploader_helper/#aniachifast.core.async_helpers.upload_helper.UploaderHelper.upload_file--notes","text":"This method is safe to call from request handlers. It should be treated as \"best-effort\" submission. Failure to submit a task does not crash the calling thread.","title":"Notes"},{"location":"core/async_helpers/email_helper/overview/","text":"Core Async Helpers Email Helper Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Async Helpers Email Helper"},{"location":"core/async_helpers/email_helper/overview/#core-async-helpers-email-helper","text":"","title":"Core Async Helpers Email Helper"},{"location":"core/async_helpers/email_helper/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/async_helpers/email_helper/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/async_helpers/email_helper/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/async_helpers/ledger_helper/overview/","text":"Core Async Helpers Ledger Helper Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Async Helpers Ledger Helper"},{"location":"core/async_helpers/ledger_helper/overview/#core-async-helpers-ledger-helper","text":"","title":"Core Async Helpers Ledger Helper"},{"location":"core/async_helpers/ledger_helper/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/async_helpers/ledger_helper/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/async_helpers/ledger_helper/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/async_helpers/upload_helper/overview/","text":"Core Async Helpers Upload Helper Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Async Helpers Upload Helper"},{"location":"core/async_helpers/upload_helper/overview/#core-async-helpers-upload-helper","text":"","title":"Core Async Helpers Upload Helper"},{"location":"core/async_helpers/upload_helper/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/async_helpers/upload_helper/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/async_helpers/upload_helper/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/cache/redis/","text":"Redis Cache Implementation aniachifast.core.cache.redis_impl Redis cache configuration and lifecycle management for FastAPI. This module provides a thin abstraction layer around Redis and fastapi-cache to enable application-wide caching with minimal setup. It is responsible for: - Initializing a Redis connection using application settings - Configuring FastAPI-Cache with a Redis backend - Providing safe access to the underlying Redis client - Managing connection lifecycle (startup / shutdown) Typical usage Call redis_cache.connect() on application startup Call redis_cache.close() on application shutdown Use RedisCache.get_redis_client() when direct Redis access is needed The configuration is driven by environment-based settings retrieved via get_settings() , allowing seamless switching between local Redis and AWS-hosted Redis (ElastiCache). AWS_REDIS_URL module-attribute AWS_REDIS_URL = AWS_REDIS_SERVER_URL REDIS_DB module-attribute REDIS_DB = REDIS_DB REDIS_PREFIX module-attribute REDIS_PREFIX = REDIS_PREFIX REDIS_URL module-attribute REDIS_URL = REDIS_SERVER_URL URL module-attribute URL = REDIS_URL if AWS_REDIS_URL is None else AWS_REDIS_URL redis_cache module-attribute redis_cache = RedisCache () settings module-attribute settings = get_settings () RedisCache Redis cache manager for FastAPI applications. This class encapsulates Redis connection handling and integrates it with fastapi-cache using a Redis backend. It is designed to be instantiated once and reused across the application lifecycle. db instance-attribute db = db prefix instance-attribute prefix = prefix redis instance-attribute redis = None redis_url instance-attribute redis_url = redis_url __init__ __init__ ( redis_url = URL , db = REDIS_DB , prefix = REDIS_PREFIX ) Parameters: redis_url ( str , default: URL ) \u2013 Redis server URL. db ( int , default: REDIS_DB ) \u2013 Redis database index. prefix ( str , default: REDIS_PREFIX ) \u2013 Key prefix used by FastAPI-Cache. close async close () Close Redis connection gracefully. This method should be called during application shutdown to ensure all Redis connections are properly released. connect async connect () Establish Redis connection and initialize FastAPI-Cache. This method must be called during application startup. It creates an async Redis client and registers it as the cache backend for FastAPI-Cache. get_redis_client async staticmethod get_redis_client () -> redis . client . Redis Retrieve the underlying Redis client from FastAPI-Cache. Returns: Redis \u2013 redis.client.Redis: Active Redis client instance. Raises: ValueError \u2013 If the configured cache backend is not Redis.","title":"Redis Implementation"},{"location":"core/cache/redis/#redis-cache-implementation","text":"","title":"Redis Cache Implementation"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl","text":"Redis cache configuration and lifecycle management for FastAPI. This module provides a thin abstraction layer around Redis and fastapi-cache to enable application-wide caching with minimal setup. It is responsible for: - Initializing a Redis connection using application settings - Configuring FastAPI-Cache with a Redis backend - Providing safe access to the underlying Redis client - Managing connection lifecycle (startup / shutdown) Typical usage Call redis_cache.connect() on application startup Call redis_cache.close() on application shutdown Use RedisCache.get_redis_client() when direct Redis access is needed The configuration is driven by environment-based settings retrieved via get_settings() , allowing seamless switching between local Redis and AWS-hosted Redis (ElastiCache).","title":"redis_impl"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.AWS_REDIS_URL","text":"AWS_REDIS_URL = AWS_REDIS_SERVER_URL","title":"AWS_REDIS_URL"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.REDIS_DB","text":"REDIS_DB = REDIS_DB","title":"REDIS_DB"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.REDIS_PREFIX","text":"REDIS_PREFIX = REDIS_PREFIX","title":"REDIS_PREFIX"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.REDIS_URL","text":"REDIS_URL = REDIS_SERVER_URL","title":"REDIS_URL"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.URL","text":"URL = REDIS_URL if AWS_REDIS_URL is None else AWS_REDIS_URL","title":"URL"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.redis_cache","text":"redis_cache = RedisCache ()","title":"redis_cache"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache","text":"Redis cache manager for FastAPI applications. This class encapsulates Redis connection handling and integrates it with fastapi-cache using a Redis backend. It is designed to be instantiated once and reused across the application lifecycle.","title":"RedisCache"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.db","text":"db = db","title":"db"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.prefix","text":"prefix = prefix","title":"prefix"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.redis","text":"redis = None","title":"redis"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.redis_url","text":"redis_url = redis_url","title":"redis_url"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.__init__","text":"__init__ ( redis_url = URL , db = REDIS_DB , prefix = REDIS_PREFIX ) Parameters: redis_url ( str , default: URL ) \u2013 Redis server URL. db ( int , default: REDIS_DB ) \u2013 Redis database index. prefix ( str , default: REDIS_PREFIX ) \u2013 Key prefix used by FastAPI-Cache.","title":"__init__"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.close","text":"close () Close Redis connection gracefully. This method should be called during application shutdown to ensure all Redis connections are properly released.","title":"close"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.connect","text":"connect () Establish Redis connection and initialize FastAPI-Cache. This method must be called during application startup. It creates an async Redis client and registers it as the cache backend for FastAPI-Cache.","title":"connect"},{"location":"core/cache/redis/#aniachifast.core.cache.redis_impl.RedisCache.get_redis_client","text":"get_redis_client () -> redis . client . Redis Retrieve the underlying Redis client from FastAPI-Cache. Returns: Redis \u2013 redis.client.Redis: Active Redis client instance. Raises: ValueError \u2013 If the configured cache backend is not Redis.","title":"get_redis_client"},{"location":"core/cloudsrv/helpers/","text":"Cloud Service Helpers aniachifast.core.cloudsrv.helpers AWS client factory utilities. This module provides lightweight helper functions for creating AWS SDK (boto3) clients used across the application. The goal of this module is to: - Centralize the creation of AWS service clients - Provide a single place to tune low-level client configuration - Avoid duplicating boto3 client initialization logic Currently supported AWS services: - Amazon S3 - AWS Lambda Credentials, region, and environment configuration are resolved automatically by boto3 using the standard AWS configuration chain: - Environment variables - Shared credentials/config files - IAM roles (EC2, ECS, EKS, Lambda, etc.) This module does not cache clients. Each function call returns a new boto3 client instance. get_lambda_client get_lambda_client () -> boto3 . resource Create and return an AWS Lambda client. This function instantiates a boto3 Lambda client with custom network timeouts to prevent long blocking calls when invoking or managing Lambda functions. Configured timeouts: - connect_timeout: 3 seconds - read_timeout: 3 seconds Typical use cases: - Invoking Lambda functions - Retrieving function configuration - Managing Lambda aliases or versions Returns: resource \u2013 boto3.client: A boto3 client configured for the AWS Lambda service. Example lambda_client = get_lambda_client() response = lambda_client.list_functions() get_s3_client get_s3_client () -> boto3 . client Create and return an Amazon S3 client. This function instantiates a boto3 S3 client using the default AWS configuration resolution chain. No custom timeouts or retries are configured. Typical use cases: - Uploading and downloading objects - Listing buckets or objects - Managing object metadata Returns: client \u2013 boto3.client: A boto3 client configured for the Amazon S3 service. Example s3 = get_s3_client() s3.list_buckets()","title":"Helpers"},{"location":"core/cloudsrv/helpers/#cloud-service-helpers","text":"","title":"Cloud Service Helpers"},{"location":"core/cloudsrv/helpers/#aniachifast.core.cloudsrv.helpers","text":"AWS client factory utilities. This module provides lightweight helper functions for creating AWS SDK (boto3) clients used across the application. The goal of this module is to: - Centralize the creation of AWS service clients - Provide a single place to tune low-level client configuration - Avoid duplicating boto3 client initialization logic Currently supported AWS services: - Amazon S3 - AWS Lambda Credentials, region, and environment configuration are resolved automatically by boto3 using the standard AWS configuration chain: - Environment variables - Shared credentials/config files - IAM roles (EC2, ECS, EKS, Lambda, etc.) This module does not cache clients. Each function call returns a new boto3 client instance.","title":"helpers"},{"location":"core/cloudsrv/helpers/#aniachifast.core.cloudsrv.helpers.get_lambda_client","text":"get_lambda_client () -> boto3 . resource Create and return an AWS Lambda client. This function instantiates a boto3 Lambda client with custom network timeouts to prevent long blocking calls when invoking or managing Lambda functions. Configured timeouts: - connect_timeout: 3 seconds - read_timeout: 3 seconds Typical use cases: - Invoking Lambda functions - Retrieving function configuration - Managing Lambda aliases or versions Returns: resource \u2013 boto3.client: A boto3 client configured for the AWS Lambda service. Example lambda_client = get_lambda_client() response = lambda_client.list_functions()","title":"get_lambda_client"},{"location":"core/cloudsrv/helpers/#aniachifast.core.cloudsrv.helpers.get_s3_client","text":"get_s3_client () -> boto3 . client Create and return an Amazon S3 client. This function instantiates a boto3 S3 client using the default AWS configuration resolution chain. No custom timeouts or retries are configured. Typical use cases: - Uploading and downloading objects - Listing buckets or objects - Managing object metadata Returns: client \u2013 boto3.client: A boto3 client configured for the Amazon S3 service. Example s3 = get_s3_client() s3.list_buckets()","title":"get_s3_client"},{"location":"core/concurrency/executors/","text":"Core Concurrency Executors aniachifast.core.concurrency.executors Concurrency utilities. This module provides reusable concurrency primitives that extend Python's standard library executors with additional cross-cutting concerns such as logging and observability. The components defined here are framework-agnostic and can be safely reused across FastAPI, background workers, CLI commands, and scripts. P module-attribute P = ParamSpec ( 'P' ) T module-attribute T = TypeVar ( 'T' ) logger module-attribute logger = getLogger ( 'aniachifast' ) settings module-attribute settings = get_settings () AscendThreadPoolExecutor Bases: ThreadPoolExecutor ThreadPoolExecutor with task submission logging. This executor behaves exactly like ThreadPoolExecutor but logs each task submission, making it easier to trace when and where background tasks are scheduled. It does NOT: - Handle retries - Handle task execution errors - Guarantee task execution order Those concerns must be implemented by the submitted callable itself or by higher-level orchestration logic. Example from app.core.concurrency.executors import LoggingThreadPoolExecutor def send_email(to: str) -> None: ... print(f\"Sending email to {to}\") ... executor = LoggingThreadPoolExecutor(max_workers=2) executor.submit(send_email, \"user@example.com\") __init__ __init__ ( max_workers : int | None = None , thread_name_prefix : str = \"\" , initializer : Callable [ ... , Any ] | None = None , initargs : tuple [ Any , ... ] = (), ) Parameters: max_workers ( int | None , default: None ) \u2013 Maximum number of threads to use for executing calls. thread_name_prefix ( str , default: '' ) \u2013 Prefix for thread names. initializer ( Callable [..., Any ] | None , default: None ) \u2013 Callable to run on each worker thread at startup. initargs ( tuple [ Any , ...] , default: () ) \u2013 Arguments to pass to the initializer.","title":"Executors"},{"location":"core/concurrency/executors/#core-concurrency-executors","text":"","title":"Core Concurrency Executors"},{"location":"core/concurrency/executors/#aniachifast.core.concurrency.executors","text":"Concurrency utilities. This module provides reusable concurrency primitives that extend Python's standard library executors with additional cross-cutting concerns such as logging and observability. The components defined here are framework-agnostic and can be safely reused across FastAPI, background workers, CLI commands, and scripts.","title":"executors"},{"location":"core/concurrency/executors/#aniachifast.core.concurrency.executors.P","text":"P = ParamSpec ( 'P' )","title":"P"},{"location":"core/concurrency/executors/#aniachifast.core.concurrency.executors.T","text":"T = TypeVar ( 'T' )","title":"T"},{"location":"core/concurrency/executors/#aniachifast.core.concurrency.executors.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/concurrency/executors/#aniachifast.core.concurrency.executors.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/concurrency/executors/#aniachifast.core.concurrency.executors.AscendThreadPoolExecutor","text":"Bases: ThreadPoolExecutor ThreadPoolExecutor with task submission logging. This executor behaves exactly like ThreadPoolExecutor but logs each task submission, making it easier to trace when and where background tasks are scheduled. It does NOT: - Handle retries - Handle task execution errors - Guarantee task execution order Those concerns must be implemented by the submitted callable itself or by higher-level orchestration logic. Example from app.core.concurrency.executors import LoggingThreadPoolExecutor def send_email(to: str) -> None: ... print(f\"Sending email to {to}\") ... executor = LoggingThreadPoolExecutor(max_workers=2) executor.submit(send_email, \"user@example.com\")","title":"AscendThreadPoolExecutor"},{"location":"core/concurrency/executors/#aniachifast.core.concurrency.executors.AscendThreadPoolExecutor.__init__","text":"__init__ ( max_workers : int | None = None , thread_name_prefix : str = \"\" , initializer : Callable [ ... , Any ] | None = None , initargs : tuple [ Any , ... ] = (), ) Parameters: max_workers ( int | None , default: None ) \u2013 Maximum number of threads to use for executing calls. thread_name_prefix ( str , default: '' ) \u2013 Prefix for thread names. initializer ( Callable [..., Any ] | None , default: None ) \u2013 Callable to run on each worker thread at startup. initargs ( tuple [ Any , ...] , default: () ) \u2013 Arguments to pass to the initializer.","title":"__init__"},{"location":"core/concurrency/overview/","text":"Core Concurrency Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Concurrency"},{"location":"core/concurrency/overview/#core-concurrency","text":"","title":"Core Concurrency"},{"location":"core/concurrency/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/concurrency/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/concurrency/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/concurrency/executors/overview/","text":"Core Concurrency Executors Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Concurrency Executors"},{"location":"core/concurrency/executors/overview/#core-concurrency-executors","text":"","title":"Core Concurrency Executors"},{"location":"core/concurrency/executors/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/concurrency/executors/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/concurrency/executors/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/databases/opensearch/","text":"OpenSearch Connection aniachifast.core.databases.search_engine.opensearch_conn OpenSearch client initialization and integration utilities. This module provides helper functions to initialize and validate an OpenSearch client based on application configuration. It supports both AWS OpenSearch (using IAM authentication) and self-managed OpenSearch clusters (using username/password authentication). The primary goal of this module is to centralize search engine client creation and ensure consistent configuration across the application. FastAPI Integration The get_search_engine_client function is designed to be used as a FastAPI dependency via Depends , enabling automatic injection of an OpenSearch client into route handlers, services, or background tasks. Example: >>> from fastapi import Depends, APIRouter >>> from opensearchpy import OpenSearch >>> >>> router = APIRouter() >>> >>> @router.get(\"/search\") >>> def search_documents( ... client: OpenSearch = Depends(get_search_engine_client), ... ): ... return client.search( ... index=\"documents\", ... body={\"query\": {\"match_all\": {}}} ... ) Notes If no search engine configuration is provided, the client resolver returns None . Callers must validate availability before usage. For production workloads, consider creating the client during application startup and reusing it across requests. settings module-attribute settings = get_settings () get_search_engine_client get_search_engine_client () -> OpenSearch | None Create and return an OpenSearch client based on application settings. This function supports two initialization modes: AWS OpenSearch (IAM authentication): Uses AWS credentials obtained from the current boto3 session to authenticate requests using AWS SigV4. Self-managed OpenSearch: Uses a username and password for HTTP basic authentication. If no valid configuration is found, the function returns None . Returns: OpenSearch | None \u2013 OpenSearch | None: An initialized OpenSearch client if configuration is present, otherwise None . Example client = get_search_engine_client() if client: ... client.info() FastAPI Dependency Example from fastapi import Depends from opensearchpy import OpenSearch def endpoint( ... client: OpenSearch = Depends(get_search_engine_client), ... ): ... return client.ping() test_init_opensearch test_init_opensearch () Validate OpenSearch connectivity and initialize the main index. This function performs the following checks: - Verifies that a search engine client is configured - Tests connectivity to the OpenSearch cluster - Attempts to create the main index if it does not exist This function is intended for startup diagnostics and should not be used as part of request handling logic. Side Effects Prints status messages to stdout Creates an index in OpenSearch if missing Example test_init_opensearch()","title":"OpenSearch"},{"location":"core/databases/opensearch/#opensearch-connection","text":"","title":"OpenSearch Connection"},{"location":"core/databases/opensearch/#aniachifast.core.databases.search_engine.opensearch_conn","text":"OpenSearch client initialization and integration utilities. This module provides helper functions to initialize and validate an OpenSearch client based on application configuration. It supports both AWS OpenSearch (using IAM authentication) and self-managed OpenSearch clusters (using username/password authentication). The primary goal of this module is to centralize search engine client creation and ensure consistent configuration across the application. FastAPI Integration The get_search_engine_client function is designed to be used as a FastAPI dependency via Depends , enabling automatic injection of an OpenSearch client into route handlers, services, or background tasks. Example: >>> from fastapi import Depends, APIRouter >>> from opensearchpy import OpenSearch >>> >>> router = APIRouter() >>> >>> @router.get(\"/search\") >>> def search_documents( ... client: OpenSearch = Depends(get_search_engine_client), ... ): ... return client.search( ... index=\"documents\", ... body={\"query\": {\"match_all\": {}}} ... ) Notes If no search engine configuration is provided, the client resolver returns None . Callers must validate availability before usage. For production workloads, consider creating the client during application startup and reusing it across requests.","title":"opensearch_conn"},{"location":"core/databases/opensearch/#aniachifast.core.databases.search_engine.opensearch_conn.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/databases/opensearch/#aniachifast.core.databases.search_engine.opensearch_conn.get_search_engine_client","text":"get_search_engine_client () -> OpenSearch | None Create and return an OpenSearch client based on application settings. This function supports two initialization modes: AWS OpenSearch (IAM authentication): Uses AWS credentials obtained from the current boto3 session to authenticate requests using AWS SigV4. Self-managed OpenSearch: Uses a username and password for HTTP basic authentication. If no valid configuration is found, the function returns None . Returns: OpenSearch | None \u2013 OpenSearch | None: An initialized OpenSearch client if configuration is present, otherwise None . Example client = get_search_engine_client() if client: ... client.info() FastAPI Dependency Example from fastapi import Depends from opensearchpy import OpenSearch def endpoint( ... client: OpenSearch = Depends(get_search_engine_client), ... ): ... return client.ping()","title":"get_search_engine_client"},{"location":"core/databases/opensearch/#aniachifast.core.databases.search_engine.opensearch_conn.test_init_opensearch","text":"test_init_opensearch () Validate OpenSearch connectivity and initialize the main index. This function performs the following checks: - Verifies that a search engine client is configured - Tests connectivity to the OpenSearch cluster - Attempts to create the main index if it does not exist This function is intended for startup diagnostics and should not be used as part of request handling logic. Side Effects Prints status messages to stdout Creates an index in OpenSearch if missing Example test_init_opensearch()","title":"test_init_opensearch"},{"location":"core/databases/overview/","text":"Database Overview This section provides an overview of the database components. Components Usage Examples","title":"Overview"},{"location":"core/databases/overview/#database-overview","text":"This section provides an overview of the database components.","title":"Database Overview"},{"location":"core/databases/overview/#components","text":"","title":"Components"},{"location":"core/databases/overview/#usage-examples","text":"","title":"Usage Examples"},{"location":"core/databases/rds-connection/","text":"RDS Connection aniachifast.core.databases.rds.connection Database session and engine dependency module. This module is responsible for: - Creating the SQLAlchemy engine using application settings - Configuring connection pooling and engine behavior - Exposing a database session dependency for FastAPI routes - Providing sync session context manager for ThreadPoolExecutor tasks - Performing initial database synchronization on startup The database configuration is dynamically resolved using application settings, allowing seamless switching between local databases and AWS RDS environments. FastAPI dependency usage The get_db() function is designed to be used as a FastAPI dependency. It provides a SQLAlchemy session with proper lifecycle management (open, rollback on error, and close). Example: from fastapi import Depends, APIRouter from sqlalchemy.orm import Session from aniachifast.db.session import get_db router = APIRouter() @router.get('/users') def list_users(db: Session = Depends(get_db)): return db.query(User).all() ThreadPoolExecutor usage The get_sync_db_session() context manager is designed for use in ThreadPoolExecutor tasks where FastAPI dependencies are not available. Example: from aniachifast.db.session import get_sync_db_session def background_task(): with get_sync_db_session() as db: user = db.query(User).first() db.commit() Key characteristics: - One engine per application instance - One session per request (FastAPI) - One session per thread (ThreadPoolExecutor) - Automatic rollback on exceptions - Safe connection reuse via connection pooling This pattern follows SQLAlchemy + FastAPI best practices and ensures robust resource management under high concurrency. Base module-attribute Base = declarative_base () SessionLocal module-attribute SessionLocal = sessionmaker ( bind = engine , autoflush = False , expire_on_commit = False ) __DEBUG_DB_QUERIES module-attribute __DEBUG_DB_QUERIES = DEBUG_DB_QUERIES __POOL_OVERFLOW module-attribute __POOL_OVERFLOW = POOL_OVERFLOW __POOL_SIZE module-attribute __POOL_SIZE = POOL_SIZE __POSTGRES_URL module-attribute __POSTGRES_URL = ( _AWS_RDS if _AWS_RDS is not None else DATABASE_URL ) engine module-attribute engine = create_engine ( __POSTGRES_URL , pool_size = __POOL_SIZE , max_overflow = __POOL_OVERFLOW , echo = __DEBUG_DB_QUERIES , pool_timeout = 5 , pool_pre_ping = True , ) settings module-attribute settings = get_settings () get_db get_db () -> Generator [ Session , None , None ] FastAPI dependency that provides a database session. This generator yields a SQLAlchemy session tied to the current request. The session lifecycle is fully managed: - A new session is created per request - Transactions are rolled back if an exception occurs - The session is always closed at the end of the request Intended usage is via FastAPI's dependency injection system. Example: from fastapi import Depends from sqlalchemy.orm import Session def endpoint(db: Session = Depends(get_db)): ... Yields: Session \u2013 sqlalchemy.orm.Session: An active database session. get_sync_db_session get_sync_db_session () -> Generator [ Session , None , None ] Context manager that provides a synchronous database session. This context manager is designed for use in ThreadPoolExecutor tasks where FastAPI's dependency injection is not available. It provides the same lifecycle guarantees as get_db(): - A new session is created - Transactions are rolled back if an exception occurs - The session is always closed at the end IMPORTANT: Use this ONLY in synchronous contexts (ThreadPoolExecutor). For FastAPI routes, use get_db() instead. Example usage in ThreadPoolExecutor: from aniachifast.db.session import get_sync_db_session def background_upload_task(payload): with get_sync_db_session() as db: user_file = UserFile(...) db.add(user_file) db.commit() # In queue: executor.submit(background_upload_task, payload) Yields: Session \u2013 sqlalchemy.orm.Session: An active database session. Note Each thread gets its own session, ensuring thread-safety. The session uses the same engine and connection pool as FastAPI routes.","title":"RDS Connection"},{"location":"core/databases/rds-connection/#rds-connection","text":"","title":"RDS Connection"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection","text":"Database session and engine dependency module. This module is responsible for: - Creating the SQLAlchemy engine using application settings - Configuring connection pooling and engine behavior - Exposing a database session dependency for FastAPI routes - Providing sync session context manager for ThreadPoolExecutor tasks - Performing initial database synchronization on startup The database configuration is dynamically resolved using application settings, allowing seamless switching between local databases and AWS RDS environments.","title":"connection"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection--fastapi-dependency-usage","text":"The get_db() function is designed to be used as a FastAPI dependency. It provides a SQLAlchemy session with proper lifecycle management (open, rollback on error, and close). Example: from fastapi import Depends, APIRouter from sqlalchemy.orm import Session from aniachifast.db.session import get_db router = APIRouter() @router.get('/users') def list_users(db: Session = Depends(get_db)): return db.query(User).all()","title":"FastAPI dependency usage"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection--threadpoolexecutor-usage","text":"The get_sync_db_session() context manager is designed for use in ThreadPoolExecutor tasks where FastAPI dependencies are not available. Example: from aniachifast.db.session import get_sync_db_session def background_task(): with get_sync_db_session() as db: user = db.query(User).first() db.commit() Key characteristics: - One engine per application instance - One session per request (FastAPI) - One session per thread (ThreadPoolExecutor) - Automatic rollback on exceptions - Safe connection reuse via connection pooling This pattern follows SQLAlchemy + FastAPI best practices and ensures robust resource management under high concurrency.","title":"ThreadPoolExecutor usage"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.Base","text":"Base = declarative_base ()","title":"Base"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.SessionLocal","text":"SessionLocal = sessionmaker ( bind = engine , autoflush = False , expire_on_commit = False )","title":"SessionLocal"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.__DEBUG_DB_QUERIES","text":"__DEBUG_DB_QUERIES = DEBUG_DB_QUERIES","title":"__DEBUG_DB_QUERIES"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.__POOL_OVERFLOW","text":"__POOL_OVERFLOW = POOL_OVERFLOW","title":"__POOL_OVERFLOW"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.__POOL_SIZE","text":"__POOL_SIZE = POOL_SIZE","title":"__POOL_SIZE"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.__POSTGRES_URL","text":"__POSTGRES_URL = ( _AWS_RDS if _AWS_RDS is not None else DATABASE_URL )","title":"__POSTGRES_URL"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.engine","text":"engine = create_engine ( __POSTGRES_URL , pool_size = __POOL_SIZE , max_overflow = __POOL_OVERFLOW , echo = __DEBUG_DB_QUERIES , pool_timeout = 5 , pool_pre_ping = True , )","title":"engine"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.get_db","text":"get_db () -> Generator [ Session , None , None ] FastAPI dependency that provides a database session. This generator yields a SQLAlchemy session tied to the current request. The session lifecycle is fully managed: - A new session is created per request - Transactions are rolled back if an exception occurs - The session is always closed at the end of the request Intended usage is via FastAPI's dependency injection system. Example: from fastapi import Depends from sqlalchemy.orm import Session def endpoint(db: Session = Depends(get_db)): ... Yields: Session \u2013 sqlalchemy.orm.Session: An active database session.","title":"get_db"},{"location":"core/databases/rds-connection/#aniachifast.core.databases.rds.connection.get_sync_db_session","text":"get_sync_db_session () -> Generator [ Session , None , None ] Context manager that provides a synchronous database session. This context manager is designed for use in ThreadPoolExecutor tasks where FastAPI's dependency injection is not available. It provides the same lifecycle guarantees as get_db(): - A new session is created - Transactions are rolled back if an exception occurs - The session is always closed at the end IMPORTANT: Use this ONLY in synchronous contexts (ThreadPoolExecutor). For FastAPI routes, use get_db() instead. Example usage in ThreadPoolExecutor: from aniachifast.db.session import get_sync_db_session def background_upload_task(payload): with get_sync_db_session() as db: user_file = UserFile(...) db.add(user_file) db.commit() # In queue: executor.submit(background_upload_task, payload) Yields: Session \u2013 sqlalchemy.orm.Session: An active database session. Note Each thread gets its own session, ensuring thread-safety. The session uses the same engine and connection pool as FastAPI routes.","title":"get_sync_db_session"},{"location":"core/databases/rds-helper/","text":"RDS Helper aniachifast.core.databases.rds.helper Database Helper Module This module provides utilities to manage and verify database connections and synchronize SQLAlchemy models with a PostgreSQL (or any SQLAlchemy-supported) database. Key functionalities: 1. test_connection() : - Tries to connect to the database up to a configurable number of attempts. - Waits a configurable delay between attempts. - Logs progress to both the console and the configured logger. - Terminates the process if all attempts fail. 2. sync_db() : - Dynamically imports models specified in settings.MODELS_TO_SYNC . - Registers them with SQLAlchemy's declarative base. - Creates database tables if they do not exist. - Ensures that synchronization only runs once per process execution. Both functions emit console print() messages and log messages for observability. Settings: - ENABLE_DATABASE : Enable or disable database-related operations. - TEST_DB_CONNECTION_ON_START : Automatically test DB connection on startup. - SYNC_MODELS_ON_START : Automatically sync models on startup. - TEST_CONNECTION_MAX_RETRIES : Maximum number of DB connection attempts. - TEST_CONNECTION_DELAY_SECONDS : Delay (in seconds) between DB connection attempts. - MODELS_TO_SYNC : List of fully qualified model class paths as strings. Example usage with FastAPI lifespan: from fastapi import FastAPI from aniachifast.core.config import get_settings settings = get_settings() async def lifespan(app: FastAPI): print(\"\u2705 Starting and warming up...\") if settings.ENABLE_DATABASE and settings.TEST_DB_CONNECTION_ON_START: from aniachifast.core.databases.rds.helper import test_connection test_connection() if settings.ENABLE_DATABASE and settings.SYNC_MODELS_ON_START: from aniachifast.core.databases.rds.helper import sync_db sync_db() app = FastAPI(lifespan=lifespan) Flow diagram: +----------------------+ | FastAPI Lifespan | | (app startup) | +----------+-----------+ | v +-------------------------+ | ENABLE_DATABASE? | +-----------+-------------+ | +------------+------------+ | | Yes No | | v v +---------------------+ +------------------+ | TEST_DB_CONNECTION_ | | Skip DB | | ON_START? | | initialization | +----------+----------+ +------------------+ | Yes | v +---------------------+ | test_connection() | | - Try DB up to N | | - Delay between | | attempts | | - Abort loop on | | success | | - Exit on failure | +----------+----------+ | v +---------------------+ | SYNC_MODELS_ON_START?| +----------+----------+ | Yes | v +---------------------+ | sync_db() | | - Import models | | - Register Base | | - Create tables | | - Print/log status | +---------------------+ | v +---------------------+ | Application Ready | +---------------------+ logger module-attribute logger = getLogger ( 'aniachifast' ) settings module-attribute settings = get_settings () sync_db sync_db () -> None Sync all database models with the database engine. This function: - Imports models dynamically from the strings defined in settings.MODELS_TO_SYNC - Registers them with SQLAlchemy's declarative Base - Creates tables if they do not exist - Avoids re-running if already synced Both logger messages and prints are emitted for observability. test_connection test_connection () -> None Test the database connection by executing a simple query. This function attempts to connect to the database up to 3 times. Between each attempt, it waits 15 seconds. If a connection is successfully established, the loop is aborted. If all attempts fail, the process is terminated immediately. Raises: SystemExit \u2013 If the database connection cannot be established after all retries.","title":"RDS Helper"},{"location":"core/databases/rds-helper/#rds-helper","text":"","title":"RDS Helper"},{"location":"core/databases/rds-helper/#aniachifast.core.databases.rds.helper","text":"Database Helper Module This module provides utilities to manage and verify database connections and synchronize SQLAlchemy models with a PostgreSQL (or any SQLAlchemy-supported) database. Key functionalities: 1. test_connection() : - Tries to connect to the database up to a configurable number of attempts. - Waits a configurable delay between attempts. - Logs progress to both the console and the configured logger. - Terminates the process if all attempts fail. 2. sync_db() : - Dynamically imports models specified in settings.MODELS_TO_SYNC . - Registers them with SQLAlchemy's declarative base. - Creates database tables if they do not exist. - Ensures that synchronization only runs once per process execution. Both functions emit console print() messages and log messages for observability. Settings: - ENABLE_DATABASE : Enable or disable database-related operations. - TEST_DB_CONNECTION_ON_START : Automatically test DB connection on startup. - SYNC_MODELS_ON_START : Automatically sync models on startup. - TEST_CONNECTION_MAX_RETRIES : Maximum number of DB connection attempts. - TEST_CONNECTION_DELAY_SECONDS : Delay (in seconds) between DB connection attempts. - MODELS_TO_SYNC : List of fully qualified model class paths as strings. Example usage with FastAPI lifespan: from fastapi import FastAPI from aniachifast.core.config import get_settings settings = get_settings() async def lifespan(app: FastAPI): print(\"\u2705 Starting and warming up...\") if settings.ENABLE_DATABASE and settings.TEST_DB_CONNECTION_ON_START: from aniachifast.core.databases.rds.helper import test_connection test_connection() if settings.ENABLE_DATABASE and settings.SYNC_MODELS_ON_START: from aniachifast.core.databases.rds.helper import sync_db sync_db() app = FastAPI(lifespan=lifespan) Flow diagram: +----------------------+ | FastAPI Lifespan | | (app startup) | +----------+-----------+ | v +-------------------------+ | ENABLE_DATABASE? | +-----------+-------------+ | +------------+------------+ | | Yes No | | v v +---------------------+ +------------------+ | TEST_DB_CONNECTION_ | | Skip DB | | ON_START? | | initialization | +----------+----------+ +------------------+ | Yes | v +---------------------+ | test_connection() | | - Try DB up to N | | - Delay between | | attempts | | - Abort loop on | | success | | - Exit on failure | +----------+----------+ | v +---------------------+ | SYNC_MODELS_ON_START?| +----------+----------+ | Yes | v +---------------------+ | sync_db() | | - Import models | | - Register Base | | - Create tables | | - Print/log status | +---------------------+ | v +---------------------+ | Application Ready | +---------------------+","title":"helper"},{"location":"core/databases/rds-helper/#aniachifast.core.databases.rds.helper.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/databases/rds-helper/#aniachifast.core.databases.rds.helper.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/databases/rds-helper/#aniachifast.core.databases.rds.helper.sync_db","text":"sync_db () -> None Sync all database models with the database engine. This function: - Imports models dynamically from the strings defined in settings.MODELS_TO_SYNC - Registers them with SQLAlchemy's declarative Base - Creates tables if they do not exist - Avoids re-running if already synced Both logger messages and prints are emitted for observability.","title":"sync_db"},{"location":"core/databases/rds-helper/#aniachifast.core.databases.rds.helper.test_connection","text":"test_connection () -> None Test the database connection by executing a simple query. This function attempts to connect to the database up to 3 times. Between each attempt, it waits 15 seconds. If a connection is successfully established, the loop is aborted. If all attempts fail, the process is terminated immediately. Raises: SystemExit \u2013 If the database connection cannot be established after all retries.","title":"test_connection"},{"location":"core/databases/mongo/overview/","text":"Core Databases Mongo Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Databases Mongo"},{"location":"core/databases/mongo/overview/#core-databases-mongo","text":"","title":"Core Databases Mongo"},{"location":"core/databases/mongo/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/databases/mongo/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/databases/mongo/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/databases/rds/queries/base_impl/","text":"Core Databases Rds Queries Base Impl aniachifast.core.databases.rds.queries.base_impl MySQL database administrative query implementation. This module provides a MySQL-specific implementation of the abstract DBAdminQueryInterface. All methods are currently stubs that raise NotImplementedError. The docstrings for each method mirror those of the interface to preserve documentation consistency and clarity. Developers can extend this base implementation to provide concrete database-specific SQL queries as needed. Examples of such extensions include PostgresSqlImpl and MySqlImpl. class PostgresSqlImpl(BaselImpl): BaselImpl Bases: DBAdminQueryInterface Base implementation of the DBAdminQueryInterface. All methods are currently placeholders raising NotImplementedError. Each method inherits the contract and documentation of the parent interface, specifying the SQL query that should be returned. get_query_all_available_database_users get_query_all_available_database_users () -> str Return SQL query listing all available database users. get_query_all_database_sizes get_query_all_database_sizes () -> str Return SQL query retrieving sizes of all databases. get_query_database_size get_query_database_size () -> str Return SQL query retrieving size of the current database. get_query_db_roles get_query_db_roles () -> str Return SQL query retrieving database roles and privileges. get_query_db_uptime get_query_db_uptime () -> str Return SQL query retrieving database uptime information. get_query_extensions_all get_query_extensions_all () -> str Return SQL query listing all available database extensions. get_query_extensions_only_installed get_query_extensions_only_installed () -> str Return SQL query listing only installed database extensions. get_query_get_all_active_connection get_query_get_all_active_connection () -> str Return SQL query for retrieving all active database connections. get_query_get_all_table_size get_query_get_all_table_size () -> str Return SQL query providing size metrics for all tables. get_query_get_all_tables get_query_get_all_tables () -> str Return SQL query listing all user-accessible tables. get_query_get_database_statistics get_query_get_database_statistics () -> str Return SQL query retrieving database-level statistics. get_query_get_database_time get_query_get_database_time () -> str Return SQL query retrieving current database server time. get_query_get_db_settings get_query_get_db_settings () -> str Return SQL query retrieving database configuration settings. get_query_get_db_version get_query_get_db_version () -> str Return SQL query providing detailed database version information. get_query_get_db_version_simple get_query_get_db_version_simple () -> str Return a simplified SQL query for database version information. get_query_get_tables_statistics get_query_get_tables_statistics () -> str Return SQL query retrieving per-table statistics. get_query_get_tables_structure get_query_get_tables_structure ( table_name : str | List [ str ], ) -> str Return SQL query describing table structure and column metadata. Parameters: table_name ( str | List [ str ] ) \u2013 Table name or list of table names to inspect. get_query_last_queries get_query_last_queries () -> str Return SQL query retrieving recently executed or expensive queries. get_query_last_reset_time get_query_last_reset_time () -> str Return SQL query retrieving last statistics reset timestamp. get_query_limits get_query_limits () -> str Return SQL query retrieving configured database limits. get_query_schema_owners get_query_schema_owners () -> str Return SQL query retrieving schema owners. get_query_single_schema_owner get_query_single_schema_owner () -> str Return SQL query retrieving owner of a single schema. get_query_tables_grants get_query_tables_grants () -> str Return SQL query retrieving table-level access grants. get_query_to_reset_all_db_stats get_query_to_reset_all_db_stats () -> str Return SQL query to reset all database statistics. get_query_to_reset_db_statistics get_query_to_reset_db_statistics () -> str Return SQL query to reset database-level statistics. get_query_to_reset_statements_statistics get_query_to_reset_statements_statistics () -> str Return SQL query to reset statement-level statistics.","title":"Base Impl"},{"location":"core/databases/rds/queries/base_impl/#core-databases-rds-queries-base-impl","text":"","title":"Core Databases Rds Queries Base Impl"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl","text":"MySQL database administrative query implementation. This module provides a MySQL-specific implementation of the abstract DBAdminQueryInterface. All methods are currently stubs that raise NotImplementedError. The docstrings for each method mirror those of the interface to preserve documentation consistency and clarity. Developers can extend this base implementation to provide concrete database-specific SQL queries as needed. Examples of such extensions include PostgresSqlImpl and MySqlImpl. class PostgresSqlImpl(BaselImpl):","title":"base_impl"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl","text":"Bases: DBAdminQueryInterface Base implementation of the DBAdminQueryInterface. All methods are currently placeholders raising NotImplementedError. Each method inherits the contract and documentation of the parent interface, specifying the SQL query that should be returned.","title":"BaselImpl"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_all_available_database_users","text":"get_query_all_available_database_users () -> str Return SQL query listing all available database users.","title":"get_query_all_available_database_users"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_all_database_sizes","text":"get_query_all_database_sizes () -> str Return SQL query retrieving sizes of all databases.","title":"get_query_all_database_sizes"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_database_size","text":"get_query_database_size () -> str Return SQL query retrieving size of the current database.","title":"get_query_database_size"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_db_roles","text":"get_query_db_roles () -> str Return SQL query retrieving database roles and privileges.","title":"get_query_db_roles"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_db_uptime","text":"get_query_db_uptime () -> str Return SQL query retrieving database uptime information.","title":"get_query_db_uptime"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_extensions_all","text":"get_query_extensions_all () -> str Return SQL query listing all available database extensions.","title":"get_query_extensions_all"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_extensions_only_installed","text":"get_query_extensions_only_installed () -> str Return SQL query listing only installed database extensions.","title":"get_query_extensions_only_installed"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_all_active_connection","text":"get_query_get_all_active_connection () -> str Return SQL query for retrieving all active database connections.","title":"get_query_get_all_active_connection"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_all_table_size","text":"get_query_get_all_table_size () -> str Return SQL query providing size metrics for all tables.","title":"get_query_get_all_table_size"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_all_tables","text":"get_query_get_all_tables () -> str Return SQL query listing all user-accessible tables.","title":"get_query_get_all_tables"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_database_statistics","text":"get_query_get_database_statistics () -> str Return SQL query retrieving database-level statistics.","title":"get_query_get_database_statistics"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_database_time","text":"get_query_get_database_time () -> str Return SQL query retrieving current database server time.","title":"get_query_get_database_time"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_db_settings","text":"get_query_get_db_settings () -> str Return SQL query retrieving database configuration settings.","title":"get_query_get_db_settings"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_db_version","text":"get_query_get_db_version () -> str Return SQL query providing detailed database version information.","title":"get_query_get_db_version"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_db_version_simple","text":"get_query_get_db_version_simple () -> str Return a simplified SQL query for database version information.","title":"get_query_get_db_version_simple"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_tables_statistics","text":"get_query_get_tables_statistics () -> str Return SQL query retrieving per-table statistics.","title":"get_query_get_tables_statistics"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_get_tables_structure","text":"get_query_get_tables_structure ( table_name : str | List [ str ], ) -> str Return SQL query describing table structure and column metadata. Parameters: table_name ( str | List [ str ] ) \u2013 Table name or list of table names to inspect.","title":"get_query_get_tables_structure"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_last_queries","text":"get_query_last_queries () -> str Return SQL query retrieving recently executed or expensive queries.","title":"get_query_last_queries"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_last_reset_time","text":"get_query_last_reset_time () -> str Return SQL query retrieving last statistics reset timestamp.","title":"get_query_last_reset_time"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_limits","text":"get_query_limits () -> str Return SQL query retrieving configured database limits.","title":"get_query_limits"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_schema_owners","text":"get_query_schema_owners () -> str Return SQL query retrieving schema owners.","title":"get_query_schema_owners"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_single_schema_owner","text":"get_query_single_schema_owner () -> str Return SQL query retrieving owner of a single schema.","title":"get_query_single_schema_owner"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_tables_grants","text":"get_query_tables_grants () -> str Return SQL query retrieving table-level access grants.","title":"get_query_tables_grants"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_to_reset_all_db_stats","text":"get_query_to_reset_all_db_stats () -> str Return SQL query to reset all database statistics.","title":"get_query_to_reset_all_db_stats"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_to_reset_db_statistics","text":"get_query_to_reset_db_statistics () -> str Return SQL query to reset database-level statistics.","title":"get_query_to_reset_db_statistics"},{"location":"core/databases/rds/queries/base_impl/#aniachifast.core.databases.rds.queries.base_impl.BaselImpl.get_query_to_reset_statements_statistics","text":"get_query_to_reset_statements_statistics () -> str Return SQL query to reset statement-level statistics.","title":"get_query_to_reset_statements_statistics"},{"location":"core/databases/rds/queries/db_factory/","text":"Core Databases Rds Queries Db Factory aniachifast.core.databases.rds.queries.db_factory Database query factory module. This module implements a simple factory pattern used to instantiate database-specific query implementations based on the configured database engine. The factory centralizes the selection logic for supported databases (PostgreSQL and MySQL), allowing the rest of the application to remain agnostic to the underlying database implementation. This design enables: - Easy switching between database engines - Clear separation of database-specific logic - A single entry point for query implementation resolution Currently supported engines: - PostgreSQL - MySQL DbQueryFactory Factory class responsible for creating database query implementations. This class follows the Factory Pattern and is not intended to be instantiated. Instead, it exposes a static method that returns the appropriate database query implementation based on the configured database engine. Instantiation of this class is explicitly disallowed to enforce its usage as a pure factory. __init__ __init__ () build_queries staticmethod build_queries () -> DBAdminQueryInterface Build and return a database-specific query implementation. This method inspects the configured database engine and returns an instance of the corresponding query implementation class. Supported engines: - postgresql \u2192 PostgresSqlImpl - mysql \u2192 MySqlImpl Raises: KeyError \u2013 If the database engine setting is not defined. ValueError \u2013 If the configured database engine is not supported. Returns: DBAdminQueryInterface \u2013 An instance of a database-specific query implementation.","title":"Db Factory"},{"location":"core/databases/rds/queries/db_factory/#core-databases-rds-queries-db-factory","text":"","title":"Core Databases Rds Queries Db Factory"},{"location":"core/databases/rds/queries/db_factory/#aniachifast.core.databases.rds.queries.db_factory","text":"Database query factory module. This module implements a simple factory pattern used to instantiate database-specific query implementations based on the configured database engine. The factory centralizes the selection logic for supported databases (PostgreSQL and MySQL), allowing the rest of the application to remain agnostic to the underlying database implementation. This design enables: - Easy switching between database engines - Clear separation of database-specific logic - A single entry point for query implementation resolution Currently supported engines: - PostgreSQL - MySQL","title":"db_factory"},{"location":"core/databases/rds/queries/db_factory/#aniachifast.core.databases.rds.queries.db_factory.DbQueryFactory","text":"Factory class responsible for creating database query implementations. This class follows the Factory Pattern and is not intended to be instantiated. Instead, it exposes a static method that returns the appropriate database query implementation based on the configured database engine. Instantiation of this class is explicitly disallowed to enforce its usage as a pure factory.","title":"DbQueryFactory"},{"location":"core/databases/rds/queries/db_factory/#aniachifast.core.databases.rds.queries.db_factory.DbQueryFactory.__init__","text":"__init__ ()","title":"__init__"},{"location":"core/databases/rds/queries/db_factory/#aniachifast.core.databases.rds.queries.db_factory.DbQueryFactory.build_queries","text":"build_queries () -> DBAdminQueryInterface Build and return a database-specific query implementation. This method inspects the configured database engine and returns an instance of the corresponding query implementation class. Supported engines: - postgresql \u2192 PostgresSqlImpl - mysql \u2192 MySqlImpl Raises: KeyError \u2013 If the database engine setting is not defined. ValueError \u2013 If the configured database engine is not supported. Returns: DBAdminQueryInterface \u2013 An instance of a database-specific query implementation.","title":"build_queries"},{"location":"core/databases/rds/queries/db_interface/","text":"Core Databases Rds Queries Db Interface aniachifast.core.databases.rds.queries.db_interface Administrative database query interface. This module defines the abstract interface for database administrative and monitoring queries. It establishes a common contract that must be implemented by all database-specific backends (e.g. PostgreSQL, MySQL). The interface is intentionally read-only and focused on: - Database introspection - Operational monitoring - Statistics and metadata retrieval - Administrative diagnostics Implementations of this interface are expected to return SQL query strings only , without executing them directly. Execution is delegated to higher-level services or repositories. This design enables: - Database-agnostic query orchestration - Clean separation between SQL generation and execution - Pluggable database engines via factory patterns DBAdminQueryInterface Abstract base interface for administrative database queries. This interface defines the full set of SQL queries required for database monitoring, diagnostics, metadata inspection, and operational visibility. Concrete implementations must provide database-specific SQL statements while preserving the intent and structure of each query method. All methods must return a string containing a valid SQL query . __version__ class-attribute instance-attribute __version__ = '2.0.0' get_query_all_available_database_users abstractmethod get_query_all_available_database_users () -> str Return SQL query listing all available database users. get_query_all_database_sizes abstractmethod get_query_all_database_sizes () -> str Return SQL query retrieving sizes of all databases. get_query_database_size abstractmethod get_query_database_size () -> str Return SQL query retrieving size of the current database. get_query_db_roles abstractmethod get_query_db_roles () -> str Return SQL query retrieving database roles and privileges. get_query_db_uptime abstractmethod get_query_db_uptime () -> str Return SQL query retrieving database uptime information. get_query_extensions_all abstractmethod get_query_extensions_all () -> str Return SQL query listing all available database extensions. get_query_extensions_only_installed abstractmethod get_query_extensions_only_installed () -> str Return SQL query listing only installed database extensions. get_query_get_all_active_connection abstractmethod get_query_get_all_active_connection () -> str Return SQL query for retrieving all active database connections. get_query_get_all_table_size abstractmethod get_query_get_all_table_size () -> str Return SQL query providing size metrics for all tables. get_query_get_all_tables abstractmethod get_query_get_all_tables () -> str Return SQL query listing all user-accessible tables. get_query_get_database_statistics abstractmethod get_query_get_database_statistics () -> str Return SQL query retrieving database-level statistics. get_query_get_database_time abstractmethod get_query_get_database_time () -> str Return SQL query retrieving current database server time. get_query_get_db_settings abstractmethod get_query_get_db_settings () -> str Return SQL query retrieving database configuration settings. get_query_get_db_version abstractmethod get_query_get_db_version () -> str Return SQL query providing detailed database version information. get_query_get_db_version_simple abstractmethod get_query_get_db_version_simple () -> str Return a simplified SQL query for database version information. The query should provide basic version, database name, server address, and timezone details. get_query_get_tables_statistics abstractmethod get_query_get_tables_statistics () -> str Return SQL query retrieving per-table statistics. get_query_get_tables_structure abstractmethod get_query_get_tables_structure ( table_name : str | list [ str ], ) -> str Return SQL query describing table structure and column metadata. Parameters: table_name ( str | list [ str ] ) \u2013 Table name or list of table names to inspect. get_query_last_queries abstractmethod get_query_last_queries () -> str Return SQL query retrieving recently executed or expensive queries. get_query_last_reset_time abstractmethod get_query_last_reset_time () -> str Return SQL query retrieving last statistics reset timestamp. get_query_limits abstractmethod get_query_limits () -> str Return SQL query retrieving configured database limits. get_query_schema_owners abstractmethod get_query_schema_owners () -> str Return SQL query retrieving schema owners. get_query_single_schema_owner abstractmethod get_query_single_schema_owner () -> str Return SQL query retrieving owner of a single schema. get_query_tables_grants abstractmethod get_query_tables_grants () -> str Return SQL query retrieving table-level access grants. get_query_to_reset_all_db_stats abstractmethod get_query_to_reset_all_db_stats () -> str Return SQL query to reset all database statistics. get_query_to_reset_db_statistics abstractmethod get_query_to_reset_db_statistics () -> str Return SQL query to reset database-level statistics. get_query_to_reset_statements_statistics abstractmethod get_query_to_reset_statements_statistics () -> str Return SQL query to reset statement-level statistics.","title":"Db Interface"},{"location":"core/databases/rds/queries/db_interface/#core-databases-rds-queries-db-interface","text":"","title":"Core Databases Rds Queries Db Interface"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface","text":"Administrative database query interface. This module defines the abstract interface for database administrative and monitoring queries. It establishes a common contract that must be implemented by all database-specific backends (e.g. PostgreSQL, MySQL). The interface is intentionally read-only and focused on: - Database introspection - Operational monitoring - Statistics and metadata retrieval - Administrative diagnostics Implementations of this interface are expected to return SQL query strings only , without executing them directly. Execution is delegated to higher-level services or repositories. This design enables: - Database-agnostic query orchestration - Clean separation between SQL generation and execution - Pluggable database engines via factory patterns","title":"db_interface"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface","text":"Abstract base interface for administrative database queries. This interface defines the full set of SQL queries required for database monitoring, diagnostics, metadata inspection, and operational visibility. Concrete implementations must provide database-specific SQL statements while preserving the intent and structure of each query method. All methods must return a string containing a valid SQL query .","title":"DBAdminQueryInterface"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.__version__","text":"__version__ = '2.0.0'","title":"__version__"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_all_available_database_users","text":"get_query_all_available_database_users () -> str Return SQL query listing all available database users.","title":"get_query_all_available_database_users"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_all_database_sizes","text":"get_query_all_database_sizes () -> str Return SQL query retrieving sizes of all databases.","title":"get_query_all_database_sizes"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_database_size","text":"get_query_database_size () -> str Return SQL query retrieving size of the current database.","title":"get_query_database_size"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_db_roles","text":"get_query_db_roles () -> str Return SQL query retrieving database roles and privileges.","title":"get_query_db_roles"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_db_uptime","text":"get_query_db_uptime () -> str Return SQL query retrieving database uptime information.","title":"get_query_db_uptime"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_extensions_all","text":"get_query_extensions_all () -> str Return SQL query listing all available database extensions.","title":"get_query_extensions_all"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_extensions_only_installed","text":"get_query_extensions_only_installed () -> str Return SQL query listing only installed database extensions.","title":"get_query_extensions_only_installed"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_all_active_connection","text":"get_query_get_all_active_connection () -> str Return SQL query for retrieving all active database connections.","title":"get_query_get_all_active_connection"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_all_table_size","text":"get_query_get_all_table_size () -> str Return SQL query providing size metrics for all tables.","title":"get_query_get_all_table_size"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_all_tables","text":"get_query_get_all_tables () -> str Return SQL query listing all user-accessible tables.","title":"get_query_get_all_tables"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_database_statistics","text":"get_query_get_database_statistics () -> str Return SQL query retrieving database-level statistics.","title":"get_query_get_database_statistics"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_database_time","text":"get_query_get_database_time () -> str Return SQL query retrieving current database server time.","title":"get_query_get_database_time"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_db_settings","text":"get_query_get_db_settings () -> str Return SQL query retrieving database configuration settings.","title":"get_query_get_db_settings"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_db_version","text":"get_query_get_db_version () -> str Return SQL query providing detailed database version information.","title":"get_query_get_db_version"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_db_version_simple","text":"get_query_get_db_version_simple () -> str Return a simplified SQL query for database version information. The query should provide basic version, database name, server address, and timezone details.","title":"get_query_get_db_version_simple"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_tables_statistics","text":"get_query_get_tables_statistics () -> str Return SQL query retrieving per-table statistics.","title":"get_query_get_tables_statistics"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_get_tables_structure","text":"get_query_get_tables_structure ( table_name : str | list [ str ], ) -> str Return SQL query describing table structure and column metadata. Parameters: table_name ( str | list [ str ] ) \u2013 Table name or list of table names to inspect.","title":"get_query_get_tables_structure"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_last_queries","text":"get_query_last_queries () -> str Return SQL query retrieving recently executed or expensive queries.","title":"get_query_last_queries"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_last_reset_time","text":"get_query_last_reset_time () -> str Return SQL query retrieving last statistics reset timestamp.","title":"get_query_last_reset_time"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_limits","text":"get_query_limits () -> str Return SQL query retrieving configured database limits.","title":"get_query_limits"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_schema_owners","text":"get_query_schema_owners () -> str Return SQL query retrieving schema owners.","title":"get_query_schema_owners"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_single_schema_owner","text":"get_query_single_schema_owner () -> str Return SQL query retrieving owner of a single schema.","title":"get_query_single_schema_owner"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_tables_grants","text":"get_query_tables_grants () -> str Return SQL query retrieving table-level access grants.","title":"get_query_tables_grants"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_to_reset_all_db_stats","text":"get_query_to_reset_all_db_stats () -> str Return SQL query to reset all database statistics.","title":"get_query_to_reset_all_db_stats"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_to_reset_db_statistics","text":"get_query_to_reset_db_statistics () -> str Return SQL query to reset database-level statistics.","title":"get_query_to_reset_db_statistics"},{"location":"core/databases/rds/queries/db_interface/#aniachifast.core.databases.rds.queries.db_interface.DBAdminQueryInterface.get_query_to_reset_statements_statistics","text":"get_query_to_reset_statements_statistics () -> str Return SQL query to reset statement-level statistics.","title":"get_query_to_reset_statements_statistics"},{"location":"core/databases/rds/queries/mysql_impl/","text":"Core Databases Rds Queries Mysql Impl aniachifast.core.databases.rds.queries.mysql_impl MySQL database administrative query implementation. This module provides a MySQL-specific implementation of the abstract DBAdminQueryInterface. All methods are currently stubs that raise NotImplementedError. The docstrings for each method mirror those of the interface to preserve documentation consistency and clarity. Developers can implement these methods with actual MySQL queries. MySqlImpl Bases: BaselImpl MySQL implementation of the DBAdminQueryInterface. All methods are currently placeholders raising NotImplementedError. Each method inherits the contract and documentation of the parent interface, specifying the SQL query that should be returned.","title":"Mysql Impl"},{"location":"core/databases/rds/queries/mysql_impl/#core-databases-rds-queries-mysql-impl","text":"","title":"Core Databases Rds Queries Mysql Impl"},{"location":"core/databases/rds/queries/mysql_impl/#aniachifast.core.databases.rds.queries.mysql_impl","text":"MySQL database administrative query implementation. This module provides a MySQL-specific implementation of the abstract DBAdminQueryInterface. All methods are currently stubs that raise NotImplementedError. The docstrings for each method mirror those of the interface to preserve documentation consistency and clarity. Developers can implement these methods with actual MySQL queries.","title":"mysql_impl"},{"location":"core/databases/rds/queries/mysql_impl/#aniachifast.core.databases.rds.queries.mysql_impl.MySqlImpl","text":"Bases: BaselImpl MySQL implementation of the DBAdminQueryInterface. All methods are currently placeholders raising NotImplementedError. Each method inherits the contract and documentation of the parent interface, specifying the SQL query that should be returned.","title":"MySqlImpl"},{"location":"core/databases/rds/queries/overview/","text":"Core Databases Rds Queries Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Databases Rds Queries"},{"location":"core/databases/rds/queries/overview/#core-databases-rds-queries","text":"","title":"Core Databases Rds Queries"},{"location":"core/databases/rds/queries/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/databases/rds/queries/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/databases/rds/queries/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/databases/rds/queries/posgresql_impl/","text":"Core Databases Rds Queries Posgresql Impl aniachifast.core.databases.rds.queries.posgresql_impl PostgreSQL administrative query implementation. This module provides a singleton-based implementation of DBAdminQueryInterface for PostgreSQL. It exposes read-only SQL queries for monitoring, inspection, and administrative tasks. All methods return SQL query strings only; execution must be done via a repository or service layer. Method names match the interface. logger module-attribute logger = getLogger ( 'aniachifast' ) settings module-attribute settings = get_settings () PostgresSqlImpl Bases: BaselImpl PostgreSQL implementation of DBAdminQueryInterface. Provides SQL statements for retrieving metadata, statistics, configuration, and operational information from PostgreSQL. database_name instance-attribute database_name = POSGRESQL_DATABASE_NAME user instance-attribute user = POSTGRESQL_USER __init__ __init__ () -> None If settings are missing or invalid, user and database name will be set to None. get_query_get_all_active_connection get_query_get_all_active_connection () -> str Return SQL query for all active database connections. get_query_get_all_table_size get_query_get_all_table_size () -> str Return SQL query providing size metrics for all tables. get_query_get_all_tables get_query_get_all_tables () -> str Return SQL query listing all user-accessible tables. get_query_get_database_statistics get_query_get_database_statistics () -> str Return SQL query retrieving database-level statistics. get_query_get_db_version get_query_get_db_version () -> str Return SQL query providing detailed database version information. get_query_get_db_version_simple get_query_get_db_version_simple () -> str Return a simplified SQL query for database version information. get_query_get_tables_structure get_query_get_tables_structure ( table_name : str | list [ str ], ) -> str Return SQL query describing table structure and column metadata. Parameters: table_name ( str | list [ str ] ) \u2013 Table name or list of table names to inspect. get_query_last_queries get_query_last_queries () -> str Return SQL query for recently executed or expensive queries.","title":"Posgresql Impl"},{"location":"core/databases/rds/queries/posgresql_impl/#core-databases-rds-queries-posgresql-impl","text":"","title":"Core Databases Rds Queries Posgresql Impl"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl","text":"PostgreSQL administrative query implementation. This module provides a singleton-based implementation of DBAdminQueryInterface for PostgreSQL. It exposes read-only SQL queries for monitoring, inspection, and administrative tasks. All methods return SQL query strings only; execution must be done via a repository or service layer. Method names match the interface.","title":"posgresql_impl"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl","text":"Bases: BaselImpl PostgreSQL implementation of DBAdminQueryInterface. Provides SQL statements for retrieving metadata, statistics, configuration, and operational information from PostgreSQL.","title":"PostgresSqlImpl"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.database_name","text":"database_name = POSGRESQL_DATABASE_NAME","title":"database_name"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.user","text":"user = POSTGRESQL_USER","title":"user"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.__init__","text":"__init__ () -> None If settings are missing or invalid, user and database name will be set to None.","title":"__init__"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_get_all_active_connection","text":"get_query_get_all_active_connection () -> str Return SQL query for all active database connections.","title":"get_query_get_all_active_connection"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_get_all_table_size","text":"get_query_get_all_table_size () -> str Return SQL query providing size metrics for all tables.","title":"get_query_get_all_table_size"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_get_all_tables","text":"get_query_get_all_tables () -> str Return SQL query listing all user-accessible tables.","title":"get_query_get_all_tables"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_get_database_statistics","text":"get_query_get_database_statistics () -> str Return SQL query retrieving database-level statistics.","title":"get_query_get_database_statistics"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_get_db_version","text":"get_query_get_db_version () -> str Return SQL query providing detailed database version information.","title":"get_query_get_db_version"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_get_db_version_simple","text":"get_query_get_db_version_simple () -> str Return a simplified SQL query for database version information.","title":"get_query_get_db_version_simple"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_get_tables_structure","text":"get_query_get_tables_structure ( table_name : str | list [ str ], ) -> str Return SQL query describing table structure and column metadata. Parameters: table_name ( str | list [ str ] ) \u2013 Table name or list of table names to inspect.","title":"get_query_get_tables_structure"},{"location":"core/databases/rds/queries/posgresql_impl/#aniachifast.core.databases.rds.queries.posgresql_impl.PostgresSqlImpl.get_query_last_queries","text":"get_query_last_queries () -> str Return SQL query for recently executed or expensive queries.","title":"get_query_last_queries"},{"location":"core/databases/rds/queries/base_impl/overview/","text":"Core Databases Rds Queries Base Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Databases Rds Queries Base Impl"},{"location":"core/databases/rds/queries/base_impl/overview/#core-databases-rds-queries-base-impl","text":"","title":"Core Databases Rds Queries Base Impl"},{"location":"core/databases/rds/queries/base_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/databases/rds/queries/base_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/databases/rds/queries/base_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/databases/rds/queries/db_factory/overview/","text":"Core Databases Rds Queries Db Factory Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Databases Rds Queries Db Factory"},{"location":"core/databases/rds/queries/db_factory/overview/#core-databases-rds-queries-db-factory","text":"","title":"Core Databases Rds Queries Db Factory"},{"location":"core/databases/rds/queries/db_factory/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/databases/rds/queries/db_factory/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/databases/rds/queries/db_factory/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/databases/rds/queries/db_interface/overview/","text":"Core Databases Rds Queries Db Interface Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Databases Rds Queries Db Interface"},{"location":"core/databases/rds/queries/db_interface/overview/#core-databases-rds-queries-db-interface","text":"","title":"Core Databases Rds Queries Db Interface"},{"location":"core/databases/rds/queries/db_interface/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/databases/rds/queries/db_interface/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/databases/rds/queries/db_interface/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/databases/rds/queries/mysql_impl/overview/","text":"Core Databases Rds Queries Mysql Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Databases Rds Queries Mysql Impl"},{"location":"core/databases/rds/queries/mysql_impl/overview/#core-databases-rds-queries-mysql-impl","text":"","title":"Core Databases Rds Queries Mysql Impl"},{"location":"core/databases/rds/queries/mysql_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/databases/rds/queries/mysql_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/databases/rds/queries/mysql_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/databases/rds/queries/posgresql_impl/overview/","text":"Core Databases Rds Queries Posgresql Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Databases Rds Queries Posgresql Impl"},{"location":"core/databases/rds/queries/posgresql_impl/overview/#core-databases-rds-queries-posgresql-impl","text":"","title":"Core Databases Rds Queries Posgresql Impl"},{"location":"core/databases/rds/queries/posgresql_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/databases/rds/queries/posgresql_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/databases/rds/queries/posgresql_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/http/errors/","text":"HTTP Error Handling aniachifast.core.http.errors.helper Centralized exception handler registration for FastAPI applications. This module defines a helper function that attaches a standard set of HTTP and validation exception handlers to a FastAPI application instance. It ensures consistent error responses across the API by mapping common HTTP status codes and FastAPI/Starlette exceptions to custom response handlers. The handlers registered here cover: - Standard HTTP errors (400, 401, 403, 404, 405, 406, 409, 429) - Request and response validation errors - Unhandled exceptions (500) All responses are delegated to custom handler functions defined in the responses module. logger module-attribute logger = getLogger () set_exceptions_handlers set_exceptions_handlers ( app : FastAPI ) -> None Register default exception handlers on a FastAPI application. This function configures a FastAPI application with a predefined set of exception handlers for common HTTP errors, validation errors, and unexpected server failures. The goal is to provide consistent and predictable error responses across all endpoints. The following handlers are registered: HTTP status code based handlers: 400: Bad Request 401: Unauthorized 403: Forbidden 404: Not Found 405: Method Not Allowed 406: Not Acceptable (e.g. invalid headers) 409: Conflict 413: Request Entity Too Large 415: Unsupported Media Type 429: Too Many Requests Exception type based handlers: RequestValidationError \u2192 422 Unprocessable Entity ResponseValidationError \u2192 422 Unprocessable Entity StarletteHTTPException \u2192 500 Internal Server Error Exception \u2192 500 Internal Server Error All handlers delegate the response generation to the corresponding functions in the responses module. Parameters: app ( FastAPI ) \u2013 The FastAPI application instance where the exception handlers will be registered. Returns: None \u2013 None","title":"Error Handling"},{"location":"core/http/errors/#http-error-handling","text":"","title":"HTTP Error Handling"},{"location":"core/http/errors/#aniachifast.core.http.errors.helper","text":"Centralized exception handler registration for FastAPI applications. This module defines a helper function that attaches a standard set of HTTP and validation exception handlers to a FastAPI application instance. It ensures consistent error responses across the API by mapping common HTTP status codes and FastAPI/Starlette exceptions to custom response handlers. The handlers registered here cover: - Standard HTTP errors (400, 401, 403, 404, 405, 406, 409, 429) - Request and response validation errors - Unhandled exceptions (500) All responses are delegated to custom handler functions defined in the responses module.","title":"helper"},{"location":"core/http/errors/#aniachifast.core.http.errors.helper.logger","text":"logger = getLogger ()","title":"logger"},{"location":"core/http/errors/#aniachifast.core.http.errors.helper.set_exceptions_handlers","text":"set_exceptions_handlers ( app : FastAPI ) -> None Register default exception handlers on a FastAPI application. This function configures a FastAPI application with a predefined set of exception handlers for common HTTP errors, validation errors, and unexpected server failures. The goal is to provide consistent and predictable error responses across all endpoints. The following handlers are registered: HTTP status code based handlers: 400: Bad Request 401: Unauthorized 403: Forbidden 404: Not Found 405: Method Not Allowed 406: Not Acceptable (e.g. invalid headers) 409: Conflict 413: Request Entity Too Large 415: Unsupported Media Type 429: Too Many Requests Exception type based handlers: RequestValidationError \u2192 422 Unprocessable Entity ResponseValidationError \u2192 422 Unprocessable Entity StarletteHTTPException \u2192 500 Internal Server Error Exception \u2192 500 Internal Server Error All handlers delegate the response generation to the corresponding functions in the responses module. Parameters: app ( FastAPI ) \u2013 The FastAPI application instance where the exception handlers will be registered. Returns: None \u2013 None","title":"set_exceptions_handlers"},{"location":"core/http/overview/","text":"Core Http Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Http"},{"location":"core/http/overview/#core-http","text":"","title":"Core Http"},{"location":"core/http/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/http/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/http/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/http/responses/","text":"HTTP Response Envelopes","title":"Response Envelopes"},{"location":"core/http/responses/#http-response-envelopes","text":"","title":"HTTP Response Envelopes"},{"location":"core/http/errors/overview/","text":"Core Http Errors Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Http Errors"},{"location":"core/http/errors/overview/#core-http-errors","text":"","title":"Core Http Errors"},{"location":"core/http/errors/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/http/errors/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/http/errors/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/http/responses/api_envelope_abc/","text":"Core Http Responses Api Envelope Abc aniachifast.core.http.responses.api_envelope_abc Abstract base definitions for versioned API response envelopes. This module defines the base contract that all API response envelope implementations (v1, v2, v3, ...) MUST follow. The goal is to enforce: - A consistent public API - Strong typing - Explicit, keyword-only builders - Versioned response evolution without breaking consumers - Code reuse through common functionality Classes: Name Description BaseAPIResponse Abstract base class for all API response envelopes. Example Creating a new envelope version:: from aniachifast.core.http.responses.api_envelope_abc import BaseAPIResponse class APIResponseV3(BaseAPIResponse[T]): # Define version-specific fields custom_field: str @classmethod def build(cls, *, data, api_version, status, request, ctx=None): common_data = cls._build_common_data( data=data, api_version=api_version, status=status, request=request, ) return cls(**common_data, custom_field=\"v3_specific\") def _get_context_field_name(self) -> str: return \"metadata\" def to_response(self) -> JSONResponse: return JSONResponse( status_code=self.status, content=self.model_dump(mode='json'), ) T module-attribute T = TypeVar ( 'T' ) BaseAPIResponse Bases: BaseModel , ABC , Generic [ T ] Abstract base contract for API response envelopes. This class defines the REQUIRED public interface for all API response envelope versions (v1, v2, v3, ...). Attributes: api_version ( str ) \u2013 API version identifier (e.g., \"v1\", \"v2\"). status ( int ) \u2013 HTTP status code. Notes All concrete versions must be fully serializable Pydantic models. api_version is part of the public API contract and MUST be provided by the caller. Common functionality is provided through helper methods. Example Subclassing BaseAPIResponse:: class MyAPIResponse(BaseAPIResponse[dict]): data: dict @classmethod def build(cls, *, data, api_version, status, request, ctx=None): common_data = cls._build_common_data( data=data, api_version=api_version, status=status, request=request ) return cls(**common_data) api_version instance-attribute api_version : str status instance-attribute status : int build abstractmethod classmethod build ( * , data : T , api_version : str , status : int , request : Request , ctx : dict [ str , Any ] | None = None ) -> BaseAPIResponse [ T ] Build a fully populated API response envelope. All versions MUST implement this method with the same signature. Parameters: data ( T ) \u2013 Response payload. api_version ( str ) \u2013 API version string (e.g. \"v1\", \"v2\"). status ( int ) \u2013 HTTP status code. request ( Request ) \u2013 FastAPI request object (required for extracting context). ctx ( dict [ str , Any ] | None , default: None ) \u2013 Optional best-effort metadata (NOT signed). Returns: BaseAPIResponse [ T ] \u2013 BaseAPIResponse[T] to_response abstractmethod to_response () -> JSONResponse Convert the envelope into a FastAPI JSONResponse.","title":"Api Envelope Abc"},{"location":"core/http/responses/api_envelope_abc/#core-http-responses-api-envelope-abc","text":"","title":"Core Http Responses Api Envelope Abc"},{"location":"core/http/responses/api_envelope_abc/#aniachifast.core.http.responses.api_envelope_abc","text":"Abstract base definitions for versioned API response envelopes. This module defines the base contract that all API response envelope implementations (v1, v2, v3, ...) MUST follow. The goal is to enforce: - A consistent public API - Strong typing - Explicit, keyword-only builders - Versioned response evolution without breaking consumers - Code reuse through common functionality Classes: Name Description BaseAPIResponse Abstract base class for all API response envelopes. Example Creating a new envelope version:: from aniachifast.core.http.responses.api_envelope_abc import BaseAPIResponse class APIResponseV3(BaseAPIResponse[T]): # Define version-specific fields custom_field: str @classmethod def build(cls, *, data, api_version, status, request, ctx=None): common_data = cls._build_common_data( data=data, api_version=api_version, status=status, request=request, ) return cls(**common_data, custom_field=\"v3_specific\") def _get_context_field_name(self) -> str: return \"metadata\" def to_response(self) -> JSONResponse: return JSONResponse( status_code=self.status, content=self.model_dump(mode='json'), )","title":"api_envelope_abc"},{"location":"core/http/responses/api_envelope_abc/#aniachifast.core.http.responses.api_envelope_abc.T","text":"T = TypeVar ( 'T' )","title":"T"},{"location":"core/http/responses/api_envelope_abc/#aniachifast.core.http.responses.api_envelope_abc.BaseAPIResponse","text":"Bases: BaseModel , ABC , Generic [ T ] Abstract base contract for API response envelopes. This class defines the REQUIRED public interface for all API response envelope versions (v1, v2, v3, ...). Attributes: api_version ( str ) \u2013 API version identifier (e.g., \"v1\", \"v2\"). status ( int ) \u2013 HTTP status code. Notes All concrete versions must be fully serializable Pydantic models. api_version is part of the public API contract and MUST be provided by the caller. Common functionality is provided through helper methods. Example Subclassing BaseAPIResponse:: class MyAPIResponse(BaseAPIResponse[dict]): data: dict @classmethod def build(cls, *, data, api_version, status, request, ctx=None): common_data = cls._build_common_data( data=data, api_version=api_version, status=status, request=request ) return cls(**common_data)","title":"BaseAPIResponse"},{"location":"core/http/responses/api_envelope_abc/#aniachifast.core.http.responses.api_envelope_abc.BaseAPIResponse.api_version","text":"api_version : str","title":"api_version"},{"location":"core/http/responses/api_envelope_abc/#aniachifast.core.http.responses.api_envelope_abc.BaseAPIResponse.status","text":"status : int","title":"status"},{"location":"core/http/responses/api_envelope_abc/#aniachifast.core.http.responses.api_envelope_abc.BaseAPIResponse.build","text":"build ( * , data : T , api_version : str , status : int , request : Request , ctx : dict [ str , Any ] | None = None ) -> BaseAPIResponse [ T ] Build a fully populated API response envelope. All versions MUST implement this method with the same signature. Parameters: data ( T ) \u2013 Response payload. api_version ( str ) \u2013 API version string (e.g. \"v1\", \"v2\"). status ( int ) \u2013 HTTP status code. request ( Request ) \u2013 FastAPI request object (required for extracting context). ctx ( dict [ str , Any ] | None , default: None ) \u2013 Optional best-effort metadata (NOT signed). Returns: BaseAPIResponse [ T ] \u2013 BaseAPIResponse[T]","title":"build"},{"location":"core/http/responses/api_envelope_abc/#aniachifast.core.http.responses.api_envelope_abc.BaseAPIResponse.to_response","text":"to_response () -> JSONResponse Convert the envelope into a FastAPI JSONResponse.","title":"to_response"},{"location":"core/http/responses/api_envelope_v1/","text":"Core Http Responses Api Envelope V1 aniachifast.core.http.responses.api_envelope_v1 API response envelope implementation (Version 1). This module provides the V1 implementation of the API response envelope used to standardize HTTP responses across the platform. Key features: - Explicit API versioning - Request traceability via request IDs - Execution timing metrics - Deterministic payload hashing (SHA256) - Payload signing using HMAC-SHA256 - Simple context metadata field (\"ctx\") Design principles: - Responses are immutable once built - Cryptographic integrity is guaranteed for the payload - Context metadata is NOT part of the signature - Compatible with FastAPI while remaining test-friendly - Inherits common functionality from BaseAPIResponse Classes: Name Description APIResponseV1 Version 1 API response envelope implementation. Example Basic usage:: from fastapi import Request from aniachifast.core.http.responses.api_envelope_v1 import APIResponseV1 # In a FastAPI route handler @app.get(\"/api/v1/users\") async def get_users(request: Request): users_data = {\"users\": [\"alice\", \"bob\"]} response = APIResponseV1.build( data=users_data, api_version=\"v1\", status=200, request=request, ctx={\"source\": \"database\", \"cached\": False} ) return response.to_response() Advanced usage with custom context:: # Custom context for debugging debug_ctx = { \"debug_mode\": True, \"query_count\": 3, \"cache_hits\": 2 } response = APIResponseV1.build( data={\"result\": \"success\"}, api_version=\"v1\", status=200, request=request, ctx=debug_ctx ) T module-attribute T = TypeVar ( 'T' ) APIResponseV1 Bases: BaseAPIResponse [ T ] , Generic [ T ] API response envelope \u2013 Version 1. This version provides a standardized HTTP response structure with cryptographic integrity and request traceability. Attributes: timestamp ( int ) \u2013 Epoch timestamp when the response was generated. request_id ( str ) \u2013 Unique request identifier for tracing. execution_time_ms ( float ) \u2013 Request execution time in milliseconds. checksum ( str ) \u2013 SHA256 checksum of the response payload. signature ( str ) \u2013 HMAC-SHA256 signature of the checksum. data ( T ) \u2013 Response payload of generic type T. ctx ( dict [ str , Any ] | None ) \u2013 Optional context metadata (not signed). Example Creating a V1 response:: response = APIResponseV1.build( data={\"message\": \"Hello World\"}, api_version=\"v1\", status=200, request=request, ctx={\"user_id\": \"123\"} ) # Response structure: # { # \"api_version\": \"v1\", # \"status\": 200, # \"timestamp\": 1640995200, # \"request_id\": \"req_abc123\", # \"execution_time_ms\": 12.345, # \"checksum\": \"sha256_hash...\", # \"signature\": \"hmac_signature...\", # \"data\": {\"message\": \"Hello World\"}, # \"ctx\": {\"user_id\": \"123\"} # } checksum class-attribute instance-attribute checksum : str = Field ( description = \"SHA256 checksum of the response payload\" ) ctx class-attribute instance-attribute ctx : dict [ str , Any ] | None = Field ( default = None , description = \"Best-effort request metadata (NOT signed)\" , ) data class-attribute instance-attribute data : T = Field ( description = 'Response payload' ) execution_time_ms class-attribute instance-attribute execution_time_ms : float = Field ( description = \"Request execution time in milliseconds\" , examples = [ 12.45 ], ) request_id class-attribute instance-attribute request_id : str = Field ( description = \"Unique request identifier\" , examples = [ \"req_8f3c1a2b\" ], ) signature class-attribute instance-attribute signature : str = Field ( description = \"HMAC-SHA256 signature of the checksum\" ) timestamp class-attribute instance-attribute timestamp : int = Field ( description = \"Epoch timestamp when the response was generated\" ) build classmethod build ( * , data : T , api_version : str , status : int , request : Request , ctx : dict [ str , Any ] | None = None ) -> APIResponseV1 [ T ] Build a signed APIResponseV1 envelope. This method creates a complete V1 response envelope with all required fields populated, including cryptographic signatures. Parameters: data ( T ) \u2013 Response payload of any type. api_version ( str ) \u2013 API version identifier (typically \"v1\"). status ( int ) \u2013 HTTP status code (e.g., 200, 404, 500). request ( Request ) \u2013 FastAPI request object for context extraction. ctx ( dict [ str , Any ] | None , default: None ) \u2013 Additional context metadata. This data is included in the response but NOT in the signature. Returns: APIResponseV1 [ T ] \u2013 APIResponseV1[T]: Fully populated and signed response envelope. Example Basic success response:: response = APIResponseV1.build( data={\"users\": [\"alice\", \"bob\"]}, api_version=\"v1\", status=200, request=request ) Error response with context:: response = APIResponseV1.build( data={\"error\": \"User not found\"}, api_version=\"v1\", status=404, request=request, ctx={\"attempted_user_id\": \"999\"} ) to_response to_response () -> JSONResponse Convert the envelope into a FastAPI JSONResponse. Creates a FastAPI-compatible JSON response with the appropriate status code and serialized envelope content. Returns: JSONResponse ( JSONResponse ) \u2013 HTTP response ready for FastAPI to return. Note The \"ctx\" field is excluded from the response content to maintain backward compatibility and reduce response size. Example Converting to HTTP response:: response = APIResponseV1.build( data={\"message\": \"success\"}, api_version=\"v1\", status=200, request=request ) http_response = response.to_response() # Returns JSONResponse with status_code=200 and JSON content","title":"Api Envelope V1"},{"location":"core/http/responses/api_envelope_v1/#core-http-responses-api-envelope-v1","text":"","title":"Core Http Responses Api Envelope V1"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1","text":"API response envelope implementation (Version 1). This module provides the V1 implementation of the API response envelope used to standardize HTTP responses across the platform. Key features: - Explicit API versioning - Request traceability via request IDs - Execution timing metrics - Deterministic payload hashing (SHA256) - Payload signing using HMAC-SHA256 - Simple context metadata field (\"ctx\") Design principles: - Responses are immutable once built - Cryptographic integrity is guaranteed for the payload - Context metadata is NOT part of the signature - Compatible with FastAPI while remaining test-friendly - Inherits common functionality from BaseAPIResponse Classes: Name Description APIResponseV1 Version 1 API response envelope implementation. Example Basic usage:: from fastapi import Request from aniachifast.core.http.responses.api_envelope_v1 import APIResponseV1 # In a FastAPI route handler @app.get(\"/api/v1/users\") async def get_users(request: Request): users_data = {\"users\": [\"alice\", \"bob\"]} response = APIResponseV1.build( data=users_data, api_version=\"v1\", status=200, request=request, ctx={\"source\": \"database\", \"cached\": False} ) return response.to_response() Advanced usage with custom context:: # Custom context for debugging debug_ctx = { \"debug_mode\": True, \"query_count\": 3, \"cache_hits\": 2 } response = APIResponseV1.build( data={\"result\": \"success\"}, api_version=\"v1\", status=200, request=request, ctx=debug_ctx )","title":"api_envelope_v1"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.T","text":"T = TypeVar ( 'T' )","title":"T"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1","text":"Bases: BaseAPIResponse [ T ] , Generic [ T ] API response envelope \u2013 Version 1. This version provides a standardized HTTP response structure with cryptographic integrity and request traceability. Attributes: timestamp ( int ) \u2013 Epoch timestamp when the response was generated. request_id ( str ) \u2013 Unique request identifier for tracing. execution_time_ms ( float ) \u2013 Request execution time in milliseconds. checksum ( str ) \u2013 SHA256 checksum of the response payload. signature ( str ) \u2013 HMAC-SHA256 signature of the checksum. data ( T ) \u2013 Response payload of generic type T. ctx ( dict [ str , Any ] | None ) \u2013 Optional context metadata (not signed). Example Creating a V1 response:: response = APIResponseV1.build( data={\"message\": \"Hello World\"}, api_version=\"v1\", status=200, request=request, ctx={\"user_id\": \"123\"} ) # Response structure: # { # \"api_version\": \"v1\", # \"status\": 200, # \"timestamp\": 1640995200, # \"request_id\": \"req_abc123\", # \"execution_time_ms\": 12.345, # \"checksum\": \"sha256_hash...\", # \"signature\": \"hmac_signature...\", # \"data\": {\"message\": \"Hello World\"}, # \"ctx\": {\"user_id\": \"123\"} # }","title":"APIResponseV1"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.checksum","text":"checksum : str = Field ( description = \"SHA256 checksum of the response payload\" )","title":"checksum"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.ctx","text":"ctx : dict [ str , Any ] | None = Field ( default = None , description = \"Best-effort request metadata (NOT signed)\" , )","title":"ctx"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.data","text":"data : T = Field ( description = 'Response payload' )","title":"data"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.execution_time_ms","text":"execution_time_ms : float = Field ( description = \"Request execution time in milliseconds\" , examples = [ 12.45 ], )","title":"execution_time_ms"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.request_id","text":"request_id : str = Field ( description = \"Unique request identifier\" , examples = [ \"req_8f3c1a2b\" ], )","title":"request_id"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.signature","text":"signature : str = Field ( description = \"HMAC-SHA256 signature of the checksum\" )","title":"signature"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.timestamp","text":"timestamp : int = Field ( description = \"Epoch timestamp when the response was generated\" )","title":"timestamp"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.build","text":"build ( * , data : T , api_version : str , status : int , request : Request , ctx : dict [ str , Any ] | None = None ) -> APIResponseV1 [ T ] Build a signed APIResponseV1 envelope. This method creates a complete V1 response envelope with all required fields populated, including cryptographic signatures. Parameters: data ( T ) \u2013 Response payload of any type. api_version ( str ) \u2013 API version identifier (typically \"v1\"). status ( int ) \u2013 HTTP status code (e.g., 200, 404, 500). request ( Request ) \u2013 FastAPI request object for context extraction. ctx ( dict [ str , Any ] | None , default: None ) \u2013 Additional context metadata. This data is included in the response but NOT in the signature. Returns: APIResponseV1 [ T ] \u2013 APIResponseV1[T]: Fully populated and signed response envelope. Example Basic success response:: response = APIResponseV1.build( data={\"users\": [\"alice\", \"bob\"]}, api_version=\"v1\", status=200, request=request ) Error response with context:: response = APIResponseV1.build( data={\"error\": \"User not found\"}, api_version=\"v1\", status=404, request=request, ctx={\"attempted_user_id\": \"999\"} )","title":"build"},{"location":"core/http/responses/api_envelope_v1/#aniachifast.core.http.responses.api_envelope_v1.APIResponseV1.to_response","text":"to_response () -> JSONResponse Convert the envelope into a FastAPI JSONResponse. Creates a FastAPI-compatible JSON response with the appropriate status code and serialized envelope content. Returns: JSONResponse ( JSONResponse ) \u2013 HTTP response ready for FastAPI to return. Note The \"ctx\" field is excluded from the response content to maintain backward compatibility and reduce response size. Example Converting to HTTP response:: response = APIResponseV1.build( data={\"message\": \"success\"}, api_version=\"v1\", status=200, request=request ) http_response = response.to_response() # Returns JSONResponse with status_code=200 and JSON content","title":"to_response"},{"location":"core/http/responses/api_envelope_v2/","text":"Core Http Responses Api Envelope V2 aniachifast.core.http.responses.api_envelope_v2 API response envelope implementation (Version 2). This module defines the V2 API response envelope used to standardize HTTP responses across the platform. Key features: - Explicit API versioning - Request traceability via request IDs - Execution timing metrics - Deterministic payload hashing (SHA256) - Payload signing using HMAC-SHA256 - Optional best-effort request context metadata Design principles: - Responses are immutable once built. - Cryptographic integrity is guaranteed for the payload. - Context metadata is NOT part of the signature. - Compatible with FastAPI while remaining test-friendly. Typical usage response = APIResponseV2.build( ... data={\"status\": \"ok\"}, ... api_version=\"v2\", ... status=200, ... request_id=\"req_123\", ... start_time=start_time, ... request=request, ... ) return response.to_response() T module-attribute T = TypeVar ( 'T' ) APIResponseV2 Bases: BaseAPIResponse [ T ] , Generic [ T ] API response envelope \u2013 Version 2. This envelope represents the enhanced HTTP response structure for API version 2 with advanced context generation and configuration options. Attributes: timestamp ( int ) \u2013 Epoch timestamp when the response was generated. request_id ( str ) \u2013 Unique request identifier for tracing. execution_time_ms ( float ) \u2013 Request execution time in milliseconds rounded to 3. checksum ( str ) \u2013 SHA256 checksum of the response payload. signature ( str ) \u2013 HMAC-SHA256 signature of the checksum. data ( T ) \u2013 Response payload of generic type T. context ( dict [ str , Any ] | None ) \u2013 Rich context metadata with client info. Key improvements over V1 Automatic context generation with client IP, user agent, geo-location Configurable context inclusion/exclusion Enhanced metadata with support information Pod/container identification for distributed systems Example Basic V2 response:: response = APIResponseV2.build( data={\"products\": [\"laptop\", \"mouse\"]}, api_version=\"v2\", status=200, request=request ) # Response structure with auto-generated context: # { # \"api_version\": \"v2\", # \"status\": 200, # \"timestamp\": 1640995200, # \"request_id\": \"req_xyz789\", # \"execution_time_ms\": 15.234, # \"checksum\": \"sha256_hash...\", # \"signature\": \"hmac_signature...\", # \"data\": {\"products\": [\"laptop\", \"mouse\"]}, # \"context\": { # \"_classification\": \"public\", # \"pod\": \"api-server-1\", # \"client_ip\": \"192.168.1.***\", # \"agent\": \"Mozilla/5.0...\", # \"client_region\": \"US-East\", # \"support\": { # \"contact\": \"support@example.com\", # \"url\": \"https://support.example.com\" # } # } # } Custom context override:: custom_ctx = { \"operation\": \"bulk_update\", \"affected_records\": 150, \"batch_id\": \"batch_001\" } response = APIResponseV2.build( data={\"updated\": 150}, api_version=\"v2\", status=200, request=request, ctx=custom_ctx ) checksum class-attribute instance-attribute checksum : str = Field ( description = \"SHA256 checksum of the response payload\" ) context class-attribute instance-attribute context : dict [ str , Any ] | None = Field ( default = None , description = \"Best-effort request metadata (NOT signed)\" , ) data class-attribute instance-attribute data : T = Field ( description = 'Response payload' ) execution_time_ms class-attribute instance-attribute execution_time_ms : float = Field ( description = \"Request execution time in milliseconds\" , examples = [ 12.45 ], ) request_id class-attribute instance-attribute request_id : str = Field ( description = \"Unique request identifier\" , examples = [ \"req_8f3c1a2b\" ], ) signature class-attribute instance-attribute signature : str = Field ( description = \"HMAC-SHA256 signature of the checksum\" ) timestamp class-attribute instance-attribute timestamp : int = Field ( description = \"Epoch timestamp when the response was generated\" ) build classmethod build ( * , data : T , api_version : str , status : int , request : Request , ctx : dict [ str , Any ] | None | object = _UNSET ) -> APIResponseV2 [ T ] Build a fully populated and signed API response envelope (V2). This method constructs an immutable API response envelope with cryptographic integrity guarantees and optional request context metadata. Parameters: data ( T ) \u2013 Response payload of any type. api_version ( str ) \u2013 API version identifier (typically \"v2\"). status ( int ) \u2013 HTTP status code (e.g., 200, 404, 500). request ( Request ) \u2013 FastAPI request object used for metadata extraction when context auto-generation is enabled. ctx ( dict [ str , Any ] | None | _UNSET , default: _UNSET ) \u2013 Controls how response context is handled. Semantics: - _UNSET (default): Automatically generate a best-effort request context using client, environment, and configuration metadata. - None: Explicitly disable context inclusion in the response payload. - dict: Use the provided dictionary as custom context metadata without modification. Notes: - Context metadata is NOT part of the cryptographic signature. - Context generation may be globally disabled via the CTX_EXCLUDE_FROM_RESPONSE configuration setting. Returns: APIResponseV2 [ T ] \u2013 APIResponseV2[T]: Fully populated response envelope ready for serialization and delivery. Examples: Auto-generated context (default): response = APIResponseV2.build( data={\"status\": \"healthy\"}, api_version=\"v2\", status=200, request=request, ) Explicitly disabled context: response = APIResponseV2.build( data={\"status\": \"healthy\"}, api_version=\"v2\", status=200, request=request, ctx=None, ) Custom context: response = APIResponseV2.build( data={\"updated\": 150}, api_version=\"v2\", status=200, request=request, ctx={ \"operation\": \"bulk_update\", \"batch_id\": \"batch_001\", }, ) to_response to_response () -> JSONResponse Convert the envelope into a FastAPI JSONResponse. The response content respects runtime configuration regarding context inclusion based on the CTX_EXCLUDE_FROM_RESPONSE setting. Returns: JSONResponse ( JSONResponse ) \u2013 HTTP response ready for FastAPI with appropriate status code and serialized content. Configuration Behavior When CTX_EXCLUDE_FROM_RESPONSE=True: Excludes \"context\" field When CTX_EXCLUDE_FROM_RESPONSE=False: Includes all fields Example Standard response conversion:: response = APIResponseV2.build( data={\"message\": \"success\"}, api_version=\"v2\", status=201, request=request ) http_response = response.to_response() # Returns JSONResponse with status_code=201 Response with context excluded (via config):: # When settings.CTX_EXCLUDE_FROM_RESPONSE = True http_response = response.to_response() # Returns JSONResponse without \"context\" field Response with context included:: # When settings.CTX_EXCLUDE_FROM_RESPONSE = False http_response = response.to_response() # Returns JSONResponse with full \"context\" field","title":"Api Envelope V2"},{"location":"core/http/responses/api_envelope_v2/#core-http-responses-api-envelope-v2","text":"","title":"Core Http Responses Api Envelope V2"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2","text":"API response envelope implementation (Version 2). This module defines the V2 API response envelope used to standardize HTTP responses across the platform. Key features: - Explicit API versioning - Request traceability via request IDs - Execution timing metrics - Deterministic payload hashing (SHA256) - Payload signing using HMAC-SHA256 - Optional best-effort request context metadata Design principles: - Responses are immutable once built. - Cryptographic integrity is guaranteed for the payload. - Context metadata is NOT part of the signature. - Compatible with FastAPI while remaining test-friendly. Typical usage response = APIResponseV2.build( ... data={\"status\": \"ok\"}, ... api_version=\"v2\", ... status=200, ... request_id=\"req_123\", ... start_time=start_time, ... request=request, ... ) return response.to_response()","title":"api_envelope_v2"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.T","text":"T = TypeVar ( 'T' )","title":"T"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2","text":"Bases: BaseAPIResponse [ T ] , Generic [ T ] API response envelope \u2013 Version 2. This envelope represents the enhanced HTTP response structure for API version 2 with advanced context generation and configuration options. Attributes: timestamp ( int ) \u2013 Epoch timestamp when the response was generated. request_id ( str ) \u2013 Unique request identifier for tracing. execution_time_ms ( float ) \u2013 Request execution time in milliseconds rounded to 3. checksum ( str ) \u2013 SHA256 checksum of the response payload. signature ( str ) \u2013 HMAC-SHA256 signature of the checksum. data ( T ) \u2013 Response payload of generic type T. context ( dict [ str , Any ] | None ) \u2013 Rich context metadata with client info. Key improvements over V1 Automatic context generation with client IP, user agent, geo-location Configurable context inclusion/exclusion Enhanced metadata with support information Pod/container identification for distributed systems Example Basic V2 response:: response = APIResponseV2.build( data={\"products\": [\"laptop\", \"mouse\"]}, api_version=\"v2\", status=200, request=request ) # Response structure with auto-generated context: # { # \"api_version\": \"v2\", # \"status\": 200, # \"timestamp\": 1640995200, # \"request_id\": \"req_xyz789\", # \"execution_time_ms\": 15.234, # \"checksum\": \"sha256_hash...\", # \"signature\": \"hmac_signature...\", # \"data\": {\"products\": [\"laptop\", \"mouse\"]}, # \"context\": { # \"_classification\": \"public\", # \"pod\": \"api-server-1\", # \"client_ip\": \"192.168.1.***\", # \"agent\": \"Mozilla/5.0...\", # \"client_region\": \"US-East\", # \"support\": { # \"contact\": \"support@example.com\", # \"url\": \"https://support.example.com\" # } # } # } Custom context override:: custom_ctx = { \"operation\": \"bulk_update\", \"affected_records\": 150, \"batch_id\": \"batch_001\" } response = APIResponseV2.build( data={\"updated\": 150}, api_version=\"v2\", status=200, request=request, ctx=custom_ctx )","title":"APIResponseV2"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.checksum","text":"checksum : str = Field ( description = \"SHA256 checksum of the response payload\" )","title":"checksum"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.context","text":"context : dict [ str , Any ] | None = Field ( default = None , description = \"Best-effort request metadata (NOT signed)\" , )","title":"context"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.data","text":"data : T = Field ( description = 'Response payload' )","title":"data"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.execution_time_ms","text":"execution_time_ms : float = Field ( description = \"Request execution time in milliseconds\" , examples = [ 12.45 ], )","title":"execution_time_ms"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.request_id","text":"request_id : str = Field ( description = \"Unique request identifier\" , examples = [ \"req_8f3c1a2b\" ], )","title":"request_id"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.signature","text":"signature : str = Field ( description = \"HMAC-SHA256 signature of the checksum\" )","title":"signature"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.timestamp","text":"timestamp : int = Field ( description = \"Epoch timestamp when the response was generated\" )","title":"timestamp"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.build","text":"build ( * , data : T , api_version : str , status : int , request : Request , ctx : dict [ str , Any ] | None | object = _UNSET ) -> APIResponseV2 [ T ] Build a fully populated and signed API response envelope (V2). This method constructs an immutable API response envelope with cryptographic integrity guarantees and optional request context metadata. Parameters: data ( T ) \u2013 Response payload of any type. api_version ( str ) \u2013 API version identifier (typically \"v2\"). status ( int ) \u2013 HTTP status code (e.g., 200, 404, 500). request ( Request ) \u2013 FastAPI request object used for metadata extraction when context auto-generation is enabled. ctx ( dict [ str , Any ] | None | _UNSET , default: _UNSET ) \u2013 Controls how response context is handled. Semantics: - _UNSET (default): Automatically generate a best-effort request context using client, environment, and configuration metadata. - None: Explicitly disable context inclusion in the response payload. - dict: Use the provided dictionary as custom context metadata without modification. Notes: - Context metadata is NOT part of the cryptographic signature. - Context generation may be globally disabled via the CTX_EXCLUDE_FROM_RESPONSE configuration setting. Returns: APIResponseV2 [ T ] \u2013 APIResponseV2[T]: Fully populated response envelope ready for serialization and delivery. Examples: Auto-generated context (default): response = APIResponseV2.build( data={\"status\": \"healthy\"}, api_version=\"v2\", status=200, request=request, ) Explicitly disabled context: response = APIResponseV2.build( data={\"status\": \"healthy\"}, api_version=\"v2\", status=200, request=request, ctx=None, ) Custom context: response = APIResponseV2.build( data={\"updated\": 150}, api_version=\"v2\", status=200, request=request, ctx={ \"operation\": \"bulk_update\", \"batch_id\": \"batch_001\", }, )","title":"build"},{"location":"core/http/responses/api_envelope_v2/#aniachifast.core.http.responses.api_envelope_v2.APIResponseV2.to_response","text":"to_response () -> JSONResponse Convert the envelope into a FastAPI JSONResponse. The response content respects runtime configuration regarding context inclusion based on the CTX_EXCLUDE_FROM_RESPONSE setting. Returns: JSONResponse ( JSONResponse ) \u2013 HTTP response ready for FastAPI with appropriate status code and serialized content. Configuration Behavior When CTX_EXCLUDE_FROM_RESPONSE=True: Excludes \"context\" field When CTX_EXCLUDE_FROM_RESPONSE=False: Includes all fields Example Standard response conversion:: response = APIResponseV2.build( data={\"message\": \"success\"}, api_version=\"v2\", status=201, request=request ) http_response = response.to_response() # Returns JSONResponse with status_code=201 Response with context excluded (via config):: # When settings.CTX_EXCLUDE_FROM_RESPONSE = True http_response = response.to_response() # Returns JSONResponse without \"context\" field Response with context included:: # When settings.CTX_EXCLUDE_FROM_RESPONSE = False http_response = response.to_response() # Returns JSONResponse with full \"context\" field","title":"to_response"},{"location":"core/http/responses/default_error_responses/","text":"Core Http Responses Default Error Responses aniachifast.core.http.responses.default_error_responses HTTP error handlers for FastAPI / Starlette applications. This module centralizes all HTTP exception handlers used by the application. Each handler is responsible for transforming framework or application-level exceptions into consistent JSON or plain-text responses. The responses include metadata such as timestamps, node information, request path, HTTP method, and support contact details to facilitate debugging and observability. logger module-attribute logger = getLogger ( 'aniachifast' ) settings module-attribute settings = get_settings () __generate_error_response __generate_error_response ( status_code : int , request : Request , detail : Optional [ str ] = \"Unknown\" , error_type : str = \"client\" , handled : bool = False , message : str = \"Unknown\" , ) -> dict Generate a standardized error response payload. Parameters: status_code ( int ) \u2013 HTTP status code. request ( Request ) \u2013 The incoming request object, used to derive path, method, and other context. detail ( Optional [ str ] , default: 'Unknown' ) \u2013 Detailed error description. error_type ( str , default: 'client' ) \u2013 Error origin (client, server, implementation). handled ( bool , default: False ) \u2013 Whether the error was explicitly handled. message ( str , default: 'Unknown' ) \u2013 Short error message. Returns: dict \u2013 Dictionary representing a structured error response. bad_request_error async bad_request_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 400 (Bad Request) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception containing request details. Returns: JSONResponse \u2013 JSONResponse describing the malformed request. conflict_error async conflict_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 409 (Conflict) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the conflict. forbidden_response async forbidden_response ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 403 (Forbidden) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception containing authorization details. Returns: JSONResponse \u2013 JSONResponse describing the forbidden access. header_not_acceptable async header_not_acceptable ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 406 (Not Acceptable) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing unacceptable request headers. internal_server_error async internal_server_error ( request : Request , exc : HTTPException ) -> JSONResponse Handle unexpected server-side errors (5xx). This handler differentiates between gateway errors, internal server errors, and implementation-level errors such as NameError, returning structured JSON responses accordingly. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( HTTPException ) \u2013 Raised exception. Returns: JSONResponse \u2013 JSONResponse describing the server error. method_not_allowed async method_not_allowed ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 405 (Method Not Allowed) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the invalid HTTP method usage. not_found_error not_found_error ( request : Request , exc : HTTPException ) -> Union [ JSONResponse , PlainTextResponse ] Handle HTTP 404 (Not Found) errors. Depending on configuration and request context, this handler can return either a friendly plain-text ASCII response for GET requests or a standard JSON error response. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( HTTPException ) \u2013 Raised HTTPException. Returns: Union [ JSONResponse , PlainTextResponse ] \u2013 A PlainTextResponse with a friendly message or a JSONResponse Union [ JSONResponse , PlainTextResponse ] \u2013 describing the error. request_entity_too_large async request_entity_too_large ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 413 (Request Entity Too Large) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the conflict. too_many_requests_error async too_many_requests_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 429 (Too Many Requests) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the rate-limit violation. unauthorized_error async unauthorized_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 401 (Unauthorized) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the authentication failure. unprocessable_entity async unprocessable_entity ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 422 (Unprocessable Entity) errors. This handler differentiates between client-side validation errors and server-side response validation errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised validation exception. Returns: JSONResponse \u2013 JSONResponse describing the validation error. unsupported_media async unsupported_media ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 415 (Unsupported Media Type) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the conflict.","title":"Default Error Responses"},{"location":"core/http/responses/default_error_responses/#core-http-responses-default-error-responses","text":"","title":"Core Http Responses Default Error Responses"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses","text":"HTTP error handlers for FastAPI / Starlette applications. This module centralizes all HTTP exception handlers used by the application. Each handler is responsible for transforming framework or application-level exceptions into consistent JSON or plain-text responses. The responses include metadata such as timestamps, node information, request path, HTTP method, and support contact details to facilitate debugging and observability.","title":"default_error_responses"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.__generate_error_response","text":"__generate_error_response ( status_code : int , request : Request , detail : Optional [ str ] = \"Unknown\" , error_type : str = \"client\" , handled : bool = False , message : str = \"Unknown\" , ) -> dict Generate a standardized error response payload. Parameters: status_code ( int ) \u2013 HTTP status code. request ( Request ) \u2013 The incoming request object, used to derive path, method, and other context. detail ( Optional [ str ] , default: 'Unknown' ) \u2013 Detailed error description. error_type ( str , default: 'client' ) \u2013 Error origin (client, server, implementation). handled ( bool , default: False ) \u2013 Whether the error was explicitly handled. message ( str , default: 'Unknown' ) \u2013 Short error message. Returns: dict \u2013 Dictionary representing a structured error response.","title":"__generate_error_response"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.bad_request_error","text":"bad_request_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 400 (Bad Request) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception containing request details. Returns: JSONResponse \u2013 JSONResponse describing the malformed request.","title":"bad_request_error"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.conflict_error","text":"conflict_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 409 (Conflict) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the conflict.","title":"conflict_error"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.forbidden_response","text":"forbidden_response ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 403 (Forbidden) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception containing authorization details. Returns: JSONResponse \u2013 JSONResponse describing the forbidden access.","title":"forbidden_response"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.header_not_acceptable","text":"header_not_acceptable ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 406 (Not Acceptable) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing unacceptable request headers.","title":"header_not_acceptable"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.internal_server_error","text":"internal_server_error ( request : Request , exc : HTTPException ) -> JSONResponse Handle unexpected server-side errors (5xx). This handler differentiates between gateway errors, internal server errors, and implementation-level errors such as NameError, returning structured JSON responses accordingly. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( HTTPException ) \u2013 Raised exception. Returns: JSONResponse \u2013 JSONResponse describing the server error.","title":"internal_server_error"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.method_not_allowed","text":"method_not_allowed ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 405 (Method Not Allowed) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the invalid HTTP method usage.","title":"method_not_allowed"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.not_found_error","text":"not_found_error ( request : Request , exc : HTTPException ) -> Union [ JSONResponse , PlainTextResponse ] Handle HTTP 404 (Not Found) errors. Depending on configuration and request context, this handler can return either a friendly plain-text ASCII response for GET requests or a standard JSON error response. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( HTTPException ) \u2013 Raised HTTPException. Returns: Union [ JSONResponse , PlainTextResponse ] \u2013 A PlainTextResponse with a friendly message or a JSONResponse Union [ JSONResponse , PlainTextResponse ] \u2013 describing the error.","title":"not_found_error"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.request_entity_too_large","text":"request_entity_too_large ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 413 (Request Entity Too Large) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the conflict.","title":"request_entity_too_large"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.too_many_requests_error","text":"too_many_requests_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 429 (Too Many Requests) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the rate-limit violation.","title":"too_many_requests_error"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.unauthorized_error","text":"unauthorized_error ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 401 (Unauthorized) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the authentication failure.","title":"unauthorized_error"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.unprocessable_entity","text":"unprocessable_entity ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 422 (Unprocessable Entity) errors. This handler differentiates between client-side validation errors and server-side response validation errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised validation exception. Returns: JSONResponse \u2013 JSONResponse describing the validation error.","title":"unprocessable_entity"},{"location":"core/http/responses/default_error_responses/#aniachifast.core.http.responses.default_error_responses.unsupported_media","text":"unsupported_media ( request : Request , exc : Exception ) -> JSONResponse Handle HTTP 415 (Unsupported Media Type) errors. Parameters: request ( Request ) \u2013 Incoming HTTP request. exc ( Exception ) \u2013 Raised exception (unused). Returns: JSONResponse \u2013 JSONResponse describing the conflict.","title":"unsupported_media"},{"location":"core/http/responses/api_envelope_abc/overview/","text":"Core Http Responses Api Envelope Abc Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Http Responses Api Envelope Abc"},{"location":"core/http/responses/api_envelope_abc/overview/#core-http-responses-api-envelope-abc","text":"","title":"Core Http Responses Api Envelope Abc"},{"location":"core/http/responses/api_envelope_abc/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/http/responses/api_envelope_abc/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/http/responses/api_envelope_abc/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/http/responses/api_envelope_v1/overview/","text":"Core Http Responses Api Envelope V1 Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Http Responses Api Envelope V1"},{"location":"core/http/responses/api_envelope_v1/overview/#core-http-responses-api-envelope-v1","text":"","title":"Core Http Responses Api Envelope V1"},{"location":"core/http/responses/api_envelope_v1/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/http/responses/api_envelope_v1/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/http/responses/api_envelope_v1/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/http/responses/api_envelope_v2/overview/","text":"Core Http Responses Api Envelope V2 Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Http Responses Api Envelope V2"},{"location":"core/http/responses/api_envelope_v2/overview/#core-http-responses-api-envelope-v2","text":"","title":"Core Http Responses Api Envelope V2"},{"location":"core/http/responses/api_envelope_v2/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/http/responses/api_envelope_v2/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/http/responses/api_envelope_v2/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/http/responses/default_error_responses/overview/","text":"Core Http Responses Default Error Responses Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Http Responses Default Error Responses"},{"location":"core/http/responses/default_error_responses/overview/#core-http-responses-default-error-responses","text":"","title":"Core Http Responses Default Error Responses"},{"location":"core/http/responses/default_error_responses/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/http/responses/default_error_responses/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/http/responses/default_error_responses/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/ledgers/overview/","text":"Core Ledgers Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Ledgers"},{"location":"core/ledgers/overview/#core-ledgers","text":"","title":"Core Ledgers"},{"location":"core/ledgers/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/ledgers/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/ledgers/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/ledgers/backends/dynamo_single_impl/","text":"Core Ledgers Backends Dynamo Single Impl aniachifast.core.ledgers.backends.dynamo_single_impl logger module-attribute logger = getLogger ( 'aniachifast' ) ActivityLedger DynamoDB-backed activity ledger. Stores immutable activity events using a single-table design optimized for: Query by company (PK) Query by user via GSI Time-ordered reads Primary index pk = COMPANY#{company_id | ANON} sk = {ISO_TIMESTAMP}#USER#{user_id | ANON} GSI1 (user index): gsi1_pk = USER#{user_id} gsi1_sk = {ISO_TIMESTAMP} __init__ __init__ () -> None get_client cached staticmethod get_client () -> BaseClient Return a cached DynamoDB client. The client is lazily initialized and reused to avoid recreating connections and reloading credentials. insert staticmethod insert ( payload : ActivityPayload ) -> None Insert an activity event into the DynamoDB ledger. Parameters: payload ( ActivityPayload ) \u2013 Validated and immutable ActivityPayload. Raises: ClientError \u2013 On DynamoDB failure.","title":"Dynamo Single Impl"},{"location":"core/ledgers/backends/dynamo_single_impl/#core-ledgers-backends-dynamo-single-impl","text":"","title":"Core Ledgers Backends Dynamo Single Impl"},{"location":"core/ledgers/backends/dynamo_single_impl/#aniachifast.core.ledgers.backends.dynamo_single_impl","text":"","title":"dynamo_single_impl"},{"location":"core/ledgers/backends/dynamo_single_impl/#aniachifast.core.ledgers.backends.dynamo_single_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/ledgers/backends/dynamo_single_impl/#aniachifast.core.ledgers.backends.dynamo_single_impl.ActivityLedger","text":"DynamoDB-backed activity ledger. Stores immutable activity events using a single-table design optimized for: Query by company (PK) Query by user via GSI Time-ordered reads Primary index pk = COMPANY#{company_id | ANON} sk = {ISO_TIMESTAMP}#USER#{user_id | ANON} GSI1 (user index): gsi1_pk = USER#{user_id} gsi1_sk = {ISO_TIMESTAMP}","title":"ActivityLedger"},{"location":"core/ledgers/backends/dynamo_single_impl/#aniachifast.core.ledgers.backends.dynamo_single_impl.ActivityLedger.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/ledgers/backends/dynamo_single_impl/#aniachifast.core.ledgers.backends.dynamo_single_impl.ActivityLedger.get_client","text":"get_client () -> BaseClient Return a cached DynamoDB client. The client is lazily initialized and reused to avoid recreating connections and reloading credentials.","title":"get_client"},{"location":"core/ledgers/backends/dynamo_single_impl/#aniachifast.core.ledgers.backends.dynamo_single_impl.ActivityLedger.insert","text":"insert ( payload : ActivityPayload ) -> None Insert an activity event into the DynamoDB ledger. Parameters: payload ( ActivityPayload ) \u2013 Validated and immutable ActivityPayload. Raises: ClientError \u2013 On DynamoDB failure.","title":"insert"},{"location":"core/ledgers/backends/overview/","text":"Core Ledgers Backends Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Ledgers Backends"},{"location":"core/ledgers/backends/overview/#core-ledgers-backends","text":"","title":"Core Ledgers Backends"},{"location":"core/ledgers/backends/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/ledgers/backends/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/ledgers/backends/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/ledgers/backends/postgresql_single_impl/","text":"Core Ledgers Backends Postgresql Single Impl aniachifast.core.ledgers.backends.postgresql_single_impl PostgreSQL-backed Activity Ledger implementation. This module provides a PostgreSQL persistence layer for activity events. It mirrors the DynamoDB-backed ledger implementation and accepts the same ActivityPayload to ensure backend interchangeability. This ledger operates in a fire-and-forget mode: - The insert operation owns the transaction lifecycle - The session is committed internally - Errors trigger a rollback logger module-attribute logger = getLogger ( 'aniachifast' ) ActivityLedgerPostgres PostgreSQL-backed Activity Ledger. This class MUST NOT be instantiated. All interactions are performed via static methods and are transactionally self-contained (fire-and-forget). __init__ __init__ () -> None Raises TypeError Always raised to enforce static-only usage. insert staticmethod insert ( payload : ActivityPayload ) -> None Insert an activity event into PostgreSQL. This method persists the activity payload exactly as received and commits the transaction immediately. Designed for fire-and-forget usage where activity logging must not affect the main request flow. Parameters session : Session Active SQLAlchemy session. payload : ActivityPayload Validated and immutable activity payload. Raises sqlalchemy.exc.SQLAlchemyError If the database operation fails. Example ActivityLedgerPostgres.insert( ... session=db, ... payload=activity_payload, ... )","title":"Postgresql Single Impl"},{"location":"core/ledgers/backends/postgresql_single_impl/#core-ledgers-backends-postgresql-single-impl","text":"","title":"Core Ledgers Backends Postgresql Single Impl"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl","text":"PostgreSQL-backed Activity Ledger implementation. This module provides a PostgreSQL persistence layer for activity events. It mirrors the DynamoDB-backed ledger implementation and accepts the same ActivityPayload to ensure backend interchangeability. This ledger operates in a fire-and-forget mode: - The insert operation owns the transaction lifecycle - The session is committed internally - Errors trigger a rollback","title":"postgresql_single_impl"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.ActivityLedgerPostgres","text":"PostgreSQL-backed Activity Ledger. This class MUST NOT be instantiated. All interactions are performed via static methods and are transactionally self-contained (fire-and-forget).","title":"ActivityLedgerPostgres"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.ActivityLedgerPostgres.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.ActivityLedgerPostgres.__init__--raises","text":"TypeError Always raised to enforce static-only usage.","title":"Raises"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.ActivityLedgerPostgres.insert","text":"insert ( payload : ActivityPayload ) -> None Insert an activity event into PostgreSQL. This method persists the activity payload exactly as received and commits the transaction immediately. Designed for fire-and-forget usage where activity logging must not affect the main request flow.","title":"insert"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.ActivityLedgerPostgres.insert--parameters","text":"session : Session Active SQLAlchemy session. payload : ActivityPayload Validated and immutable activity payload.","title":"Parameters"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.ActivityLedgerPostgres.insert--raises","text":"sqlalchemy.exc.SQLAlchemyError If the database operation fails.","title":"Raises"},{"location":"core/ledgers/backends/postgresql_single_impl/#aniachifast.core.ledgers.backends.postgresql_single_impl.ActivityLedgerPostgres.insert--example","text":"ActivityLedgerPostgres.insert( ... session=db, ... payload=activity_payload, ... )","title":"Example"},{"location":"core/ledgers/backends/dynamo_single_impl/overview/","text":"Core Ledgers Backends Dynamo Single Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Ledgers Backends Dynamo Single Impl"},{"location":"core/ledgers/backends/dynamo_single_impl/overview/#core-ledgers-backends-dynamo-single-impl","text":"","title":"Core Ledgers Backends Dynamo Single Impl"},{"location":"core/ledgers/backends/dynamo_single_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/ledgers/backends/dynamo_single_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/ledgers/backends/dynamo_single_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/ledgers/backends/postgresql_single_impl/overview/","text":"Core Ledgers Backends Postgresql Single Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Ledgers Backends Postgresql Single Impl"},{"location":"core/ledgers/backends/postgresql_single_impl/overview/#core-ledgers-backends-postgresql-single-impl","text":"","title":"Core Ledgers Backends Postgresql Single Impl"},{"location":"core/ledgers/backends/postgresql_single_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/ledgers/backends/postgresql_single_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/ledgers/backends/postgresql_single_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/mail/overview/","text":"Core Mail Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Mail"},{"location":"core/mail/overview/#core-mail","text":"","title":"Core Mail"},{"location":"core/mail/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/mail/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/mail/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/mail/backends/gmail_impl/","text":"Core Mail Backends Gmail Impl aniachifast.core.mail.backends.gmail_impl Gmail SMTP email backend. This module provides a production-ready email delivery implementation using Gmail's SMTP servers with STARTTLS encryption. It is designed as an infrastructure-layer component responsible for sending transactional emails (e.g. notifications, confirmations, alerts) using Python's standard library only. Key characteristics: - Stateless, static-only service (non-instantiable) - STARTTLS-secured SMTP connections - Configuration-driven via application settings - Cached validation of SMTP configuration - Explicit error handling and logging This module is intended to be dynamically loaded via configuration (e.g. using a dotted path loader) and invoked as a callable backend. Example backend configuration:: EMAIL_BACKEND = ( \"aniachifast.core.mail.backends.gmail_impl.\" \"EmailService.send_email\" ) logger module-attribute logger = getLogger ( 'aniachifast' ) EmailService Gmail SMTP email service. This class implements an SMTP-based email delivery backend using Gmail's SMTP servers and STARTTLS encryption. Design notes: - This class MUST NOT be instantiated. - All behavior is exposed via static methods. - Configuration validation is cached to avoid repeated checks. - Intended for use as a dynamically-loaded callable backend. The class acts as a namespace rather than a traditional object. __init__ __init__ () -> None This service is designed to be used statically. Instantiating it would indicate a misuse of the API and is therefore blocked explicitly. __validate_email_smtp_settings cached staticmethod __validate_email_smtp_settings () -> None Validate required SMTP configuration settings. This method ensures that all required email-related settings are present and non-empty before attempting to send any email. The result of this validation is cached to guarantee: - Validation occurs only once per process lifecycle - Reduced overhead during high email throughput - Fail-fast behavior during application startup or first use Raises RuntimeError If any required SMTP configuration value is missing. send_email staticmethod send_email ( payload : EmailPayload ) -> None Send an email using Gmail SMTP with STARTTLS encryption. This method: - Validates SMTP configuration (cached) - Constructs a MIME-compliant email message - Establishes a secure SMTP connection - Authenticates using configured credentials - Sends the email to the recipient The operation is synchronous at the SMTP level but is typically invoked from a background worker or executor. Parameters payload : EmailPayload A validated email payload containing: - recipient address - subject - content - content type (text or html) - optional sender address Raises RuntimeError If SMTP connection, authentication, or delivery fails. Notes HTML emails are sent using multipart/alternative format. Plain-text fallback content is automatically included. This method does not return a delivery status.","title":"Gmail Impl"},{"location":"core/mail/backends/gmail_impl/#core-mail-backends-gmail-impl","text":"","title":"Core Mail Backends Gmail Impl"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl","text":"Gmail SMTP email backend. This module provides a production-ready email delivery implementation using Gmail's SMTP servers with STARTTLS encryption. It is designed as an infrastructure-layer component responsible for sending transactional emails (e.g. notifications, confirmations, alerts) using Python's standard library only. Key characteristics: - Stateless, static-only service (non-instantiable) - STARTTLS-secured SMTP connections - Configuration-driven via application settings - Cached validation of SMTP configuration - Explicit error handling and logging This module is intended to be dynamically loaded via configuration (e.g. using a dotted path loader) and invoked as a callable backend. Example backend configuration:: EMAIL_BACKEND = ( \"aniachifast.core.mail.backends.gmail_impl.\" \"EmailService.send_email\" )","title":"gmail_impl"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService","text":"Gmail SMTP email service. This class implements an SMTP-based email delivery backend using Gmail's SMTP servers and STARTTLS encryption. Design notes: - This class MUST NOT be instantiated. - All behavior is exposed via static methods. - Configuration validation is cached to avoid repeated checks. - Intended for use as a dynamically-loaded callable backend. The class acts as a namespace rather than a traditional object.","title":"EmailService"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService.__init__","text":"__init__ () -> None This service is designed to be used statically. Instantiating it would indicate a misuse of the API and is therefore blocked explicitly.","title":"__init__"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService.__validate_email_smtp_settings","text":"__validate_email_smtp_settings () -> None Validate required SMTP configuration settings. This method ensures that all required email-related settings are present and non-empty before attempting to send any email. The result of this validation is cached to guarantee: - Validation occurs only once per process lifecycle - Reduced overhead during high email throughput - Fail-fast behavior during application startup or first use","title":"__validate_email_smtp_settings"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService.__validate_email_smtp_settings--raises","text":"RuntimeError If any required SMTP configuration value is missing.","title":"Raises"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService.send_email","text":"send_email ( payload : EmailPayload ) -> None Send an email using Gmail SMTP with STARTTLS encryption. This method: - Validates SMTP configuration (cached) - Constructs a MIME-compliant email message - Establishes a secure SMTP connection - Authenticates using configured credentials - Sends the email to the recipient The operation is synchronous at the SMTP level but is typically invoked from a background worker or executor.","title":"send_email"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService.send_email--parameters","text":"payload : EmailPayload A validated email payload containing: - recipient address - subject - content - content type (text or html) - optional sender address","title":"Parameters"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService.send_email--raises","text":"RuntimeError If SMTP connection, authentication, or delivery fails.","title":"Raises"},{"location":"core/mail/backends/gmail_impl/#aniachifast.core.mail.backends.gmail_impl.EmailService.send_email--notes","text":"HTML emails are sent using multipart/alternative format. Plain-text fallback content is automatically included. This method does not return a delivery status.","title":"Notes"},{"location":"core/mail/backends/overview/","text":"Core Mail Backends Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Mail Backends"},{"location":"core/mail/backends/overview/#core-mail-backends","text":"","title":"Core Mail Backends"},{"location":"core/mail/backends/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/mail/backends/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/mail/backends/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/mail/backends/gmail_impl/overview/","text":"Core Mail Backends Gmail Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Mail Backends Gmail Impl"},{"location":"core/mail/backends/gmail_impl/overview/#core-mail-backends-gmail-impl","text":"","title":"Core Mail Backends Gmail Impl"},{"location":"core/mail/backends/gmail_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/mail/backends/gmail_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/mail/backends/gmail_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/models/activity_types_helper/","text":"Core Models Activity Types Helper aniachifast.core.models.activity_types_helper Dynamic activity types enum generator. This module provides functionality to create activity type enums dynamically from configuration settings. This allows for flexible activity type definitions without hardcoding them in the application. The enum is generated from a comma-separated string in the configuration, making it easy to modify activity types without code changes. __get_activity_types_enum cached __get_activity_types_enum () -> Type [ Enum ] Generate and cache the ActivityTypes enum from configuration. This function creates a dynamic enum based on the LEDGER_ACTIVITY_TYPES configuration setting. The enum is cached to avoid recreation on every call. Returns: Type [ Enum ] \u2013 Type[Enum]: A dynamically created enum class with activity types. Example ActivityTypes = get_activity_types_enum() ActivityTypes.LOGIN_ATTEMPT list(ActivityTypes) [ , ...] get_valid_activity_types cached get_valid_activity_types () -> list [ str ] Get a list of all valid activity types. Returns: list [ str ] \u2013 list[str]: List of valid activity type strings. Empty list if LEDGER_ACTIVITY_TYPES is not configured. Example get_valid_activity_types() ['login_attempt', 'login_success', 'user_registration', ...] validate_activity_type validate_activity_type ( activity : str , raise_exception : bool = False ) -> bool Validate if an activity type is allowed. Parameters: activity ( str ) \u2013 The activity string to validate. raise_exception ( bool , default: False ) \u2013 If True, raises ValueError for invalid activities. If False, returns boolean result. Returns: bool ( bool ) \u2013 True if the activity is valid, False otherwise. If LEDGER_ACTIVITY_TYPES is not configured, returns True (allows all). Raises: ValueError \u2013 If raise_exception=True and activity is invalid. Example validate_activity_type('login_attempt') True validate_activity_type('invalid_activity') False validate_activity_type('invalid_activity', raise_exception=True) ValueError: Activity type \"invalid_activity\" is not valid...","title":"Activity Types Helper"},{"location":"core/models/activity_types_helper/#core-models-activity-types-helper","text":"","title":"Core Models Activity Types Helper"},{"location":"core/models/activity_types_helper/#aniachifast.core.models.activity_types_helper","text":"Dynamic activity types enum generator. This module provides functionality to create activity type enums dynamically from configuration settings. This allows for flexible activity type definitions without hardcoding them in the application. The enum is generated from a comma-separated string in the configuration, making it easy to modify activity types without code changes.","title":"activity_types_helper"},{"location":"core/models/activity_types_helper/#aniachifast.core.models.activity_types_helper.__get_activity_types_enum","text":"__get_activity_types_enum () -> Type [ Enum ] Generate and cache the ActivityTypes enum from configuration. This function creates a dynamic enum based on the LEDGER_ACTIVITY_TYPES configuration setting. The enum is cached to avoid recreation on every call. Returns: Type [ Enum ] \u2013 Type[Enum]: A dynamically created enum class with activity types. Example ActivityTypes = get_activity_types_enum() ActivityTypes.LOGIN_ATTEMPT list(ActivityTypes) [ , ...]","title":"__get_activity_types_enum"},{"location":"core/models/activity_types_helper/#aniachifast.core.models.activity_types_helper.get_valid_activity_types","text":"get_valid_activity_types () -> list [ str ] Get a list of all valid activity types. Returns: list [ str ] \u2013 list[str]: List of valid activity type strings. Empty list if LEDGER_ACTIVITY_TYPES is not configured. Example get_valid_activity_types() ['login_attempt', 'login_success', 'user_registration', ...]","title":"get_valid_activity_types"},{"location":"core/models/activity_types_helper/#aniachifast.core.models.activity_types_helper.validate_activity_type","text":"validate_activity_type ( activity : str , raise_exception : bool = False ) -> bool Validate if an activity type is allowed. Parameters: activity ( str ) \u2013 The activity string to validate. raise_exception ( bool , default: False ) \u2013 If True, raises ValueError for invalid activities. If False, returns boolean result. Returns: bool ( bool ) \u2013 True if the activity is valid, False otherwise. If LEDGER_ACTIVITY_TYPES is not configured, returns True (allows all). Raises: ValueError \u2013 If raise_exception=True and activity is invalid. Example validate_activity_type('login_attempt') True validate_activity_type('invalid_activity') False validate_activity_type('invalid_activity', raise_exception=True) ValueError: Activity type \"invalid_activity\" is not valid...","title":"validate_activity_type"},{"location":"core/models/admin/","text":"Admin Models aniachifast.core.models.admin Administrative Pydantic Models This module defines Pydantic models used for administrative operations, including comprehensive user information with sensitive data masking. These models are intended for administrative use only and should be protected by appropriate access controls. AdminUserListResponse Bases: BaseModel Model for paginated list of users in admin APIs. Attributes: users ( list [ AdminUserResponse ] ) \u2013 List of user records. total_count ( int ) \u2013 Total number of users in database. page ( int ) \u2013 Current page number (1-based). page_size ( int ) \u2013 Number of users per page. total_pages ( int ) \u2013 Total number of pages. has_next ( bool ) \u2013 Whether there are more pages. has_previous ( bool ) \u2013 Whether there are previous pages. has_next class-attribute instance-attribute has_next : bool = Field ( description = \"Whether there are more pages\" ) has_previous class-attribute instance-attribute has_previous : bool = Field ( description = \"Whether there are previous pages\" ) page class-attribute instance-attribute page : int = Field ( ge = 1 , description = \"Current page number (1-based)\" ) page_size class-attribute instance-attribute page_size : int = Field ( ge = 1 , le = 100 , description = \"Number of users per page\" ) total_count class-attribute instance-attribute total_count : int = Field ( description = \"Total number of users in database\" ) total_pages class-attribute instance-attribute total_pages : int = Field ( description = \"Total number of pages\" ) users class-attribute instance-attribute users : list [ AdminUserResponse ] = Field ( description = \"List of user records\" ) AdminUserResponse Bases: UserResponse Extended model for returning complete user information in admin APIs. This model extends UserResponse with additional administrative fields including sensitive data that is automatically masked for security. Sensitive fields (creditcard, ssn) are automatically masked using field validators to ensure data protection even in admin contexts. Attributes: # ( Inherited from UserResponse ) \u2013 id ( int ) \u2013 User's unique identifier. uuid ( UUID ) \u2013 User's universally unique identifier. email ( str ) \u2013 User's email address. username ( str ) \u2013 User's username. is_active ( bool ) \u2013 Whether the user account is active. is_verified ( bool ) \u2013 Whether the user account is verified. is_admin ( bool ) \u2013 Whether the user has admin privileges. is_staff ( bool ) \u2013 Whether the user is staff. is_disabled ( bool ) \u2013 Whether the user account is disabled. is_superuser ( bool ) \u2013 Whether the user is a superuser. created_at ( datetime ) \u2013 When the user was created. last_update ( datetime ) \u2013 When the user was last updated. # ( Additional admin fields ) \u2013 name ( Optional [ str ] ) \u2013 User's full name. max_tokens ( int ) \u2013 Maximum number of active tokens allowed. max_requests_per_token ( int ) \u2013 Maximum requests per token. is_blocked ( bool ) \u2013 Whether the user account is blocked. login_attempts ( int ) \u2013 Number of failed login attempts. blocked_time ( Optional [ datetime ] ) \u2013 When the account was blocked. login_attempt_time ( Optional [ datetime ] ) \u2013 Last failed login attempt time. activation_code ( Optional [ str ] ) \u2013 Account activation code. activation_code_expires_at ( Optional [ datetime ] ) \u2013 Activation code expiration. activated_at ( Optional [ datetime ] ) \u2013 When the account was activated. reset_code ( Optional [ str ] ) \u2013 Password reset code. reset_code_expires_at ( Optional [ datetime ] ) \u2013 Reset code expiration. birthdate ( Optional [ date ] ) \u2013 User's birth date. gender ( Optional [ str ] ) \u2013 User's gender. country ( Optional [ str ] ) \u2013 User's country. postalcode ( Optional [ str ] ) \u2013 User's postal code. phone ( Optional [ str ] ) \u2013 User's phone number. extension ( Optional [ str ] ) \u2013 User's phone extension. creditcard ( Optional [ str ] ) \u2013 Masked credit card number. ssn ( Optional [ str ] ) \u2013 Masked social security number. last_login ( Optional [ datetime ] ) \u2013 Last successful login time. activated_at class-attribute instance-attribute activated_at : Optional [ datetime ] = Field ( None , description = \"When the account was activated\" ) activation_code class-attribute instance-attribute activation_code : Optional [ str ] = Field ( None , description = \"Account activation code\" ) activation_code_expires_at class-attribute instance-attribute activation_code_expires_at : Optional [ datetime ] = Field ( None , description = \"Activation code expiration\" ) birthdate class-attribute instance-attribute birthdate : Optional [ date ] = Field ( None , description = \"User's birth date\" ) blocked_time class-attribute instance-attribute blocked_time : Optional [ datetime ] = Field ( None , description = \"When the account was blocked\" ) company_uuid class-attribute instance-attribute company_uuid : Optional [ UUID ] = Field ( None , description = \"Company id\" ) country class-attribute instance-attribute country : Optional [ str ] = Field ( None , description = \"User's country\" ) creditcard class-attribute instance-attribute creditcard : Optional [ str ] = Field ( None , description = \"Masked credit card number\" ) extension class-attribute instance-attribute extension : Optional [ str ] = Field ( None , description = \"User's phone extension\" ) gender class-attribute instance-attribute gender : Optional [ str ] = Field ( None , description = \"User's gender\" ) is_blocked class-attribute instance-attribute is_blocked : bool = Field ( False , description = \"Whether the user account is blocked\" ) last_login class-attribute instance-attribute last_login : Optional [ datetime ] = Field ( None , description = \"Last successful login time\" ) login_attempt_time class-attribute instance-attribute login_attempt_time : Optional [ datetime ] = Field ( None , description = \"Last failed login attempt time\" ) login_attempts class-attribute instance-attribute login_attempts : int = Field ( 0 , description = \"Number of failed login attempts\" ) max_requests_per_token class-attribute instance-attribute max_requests_per_token : int = Field ( 1000 , description = \"Maximum requests per token\" ) max_tokens class-attribute instance-attribute max_tokens : int = Field ( 5 , description = \"Maximum number of active tokens allowed\" ) model_config class-attribute instance-attribute model_config = ConfigDict ( from_attributes = True , str_strip_whitespace = True , validate_assignment = True , ) name class-attribute instance-attribute name : Optional [ str ] = Field ( None , description = \"User's full name\" ) phone class-attribute instance-attribute phone : Optional [ str ] = Field ( None , description = \"User's phone number\" ) postalcode class-attribute instance-attribute postalcode : Optional [ str ] = Field ( None , description = \"User's postal code\" ) reset_code class-attribute instance-attribute reset_code : Optional [ str ] = Field ( None , description = \"Password reset code\" ) reset_code_expires_at class-attribute instance-attribute reset_code_expires_at : Optional [ datetime ] = Field ( None , description = \"Reset code expiration\" ) ssn class-attribute instance-attribute ssn : Optional [ str ] = Field ( None , description = \"Masked social security number\" ) mask_creditcard classmethod mask_creditcard ( v : Optional [ str ]) -> Optional [ str ] Automatically mask credit card numbers for security. Shows only the last 4 digits in format: *- - ***-1234 Parameters: v ( Optional [ str ] ) \u2013 Raw credit card number from database Returns: Optional [ str ] \u2013 Masked credit card string or None if no card mask_ssn classmethod mask_ssn ( v : Optional [ str ]) -> Optional [ str ] Automatically mask social security numbers for security. Shows only the last 4 digits in format: *- -1234 Parameters: v ( Optional [ str ] ) \u2013 Raw SSN from database Returns: Optional [ str ] \u2013 Masked SSN string or None if no SSN serialize_date serialize_date ( value : Optional [ date ]) -> Optional [ str ] Serialize date fields to ISO format strings. Parameters: value ( Optional [ date ] ) \u2013 Date object from database Returns: Optional [ str ] \u2013 ISO format string or None if no date serialize_datetime serialize_datetime ( value : Optional [ datetime ], ) -> Optional [ str ] Serialize datetime fields to ISO format strings. Parameters: value ( Optional [ datetime ] ) \u2013 Datetime object from database Returns: Optional [ str ] \u2013 ISO format string or None if no datetime serialize_uuid serialize_uuid ( value : UUID ) -> str Serialize UUID to string for JSON output. Parameters: value ( UUID ) \u2013 UUID object from database Returns: str \u2013 String representation of UUID AdminUserStatsResponse Bases: BaseModel Model for user statistics in admin APIs. Attributes: total_users ( int ) \u2013 Total number of registered users. active_users ( int ) \u2013 Number of active users. verified_users ( int ) \u2013 Number of verified users. blocked_users ( int ) \u2013 Number of blocked users. disabled_users ( int ) \u2013 Number of disabled users. admin_users ( int ) \u2013 Number of admin users. staff_users ( int ) \u2013 Number of staff users. superusers ( int ) \u2013 Number of superusers. users_created_today ( int ) \u2013 Number of users created today. users_created_this_week ( int ) \u2013 Number of users created this week. users_created_this_month ( int ) \u2013 Number of users created this month. active_users class-attribute instance-attribute active_users : int = Field ( description = \"Number of active users\" ) admin_users class-attribute instance-attribute admin_users : int = Field ( description = \"Number of admin users\" ) blocked_users class-attribute instance-attribute blocked_users : int = Field ( description = \"Number of blocked users\" ) disabled_users class-attribute instance-attribute disabled_users : int = Field ( description = \"Number of disabled users\" ) staff_users class-attribute instance-attribute staff_users : int = Field ( description = \"Number of staff users\" ) superusers class-attribute instance-attribute superusers : int = Field ( description = 'Number of superusers' ) total_users class-attribute instance-attribute total_users : int = Field ( description = \"Total number of registered users\" ) users_created_this_month class-attribute instance-attribute users_created_this_month : int = Field ( description = \"Number of users created this month\" ) users_created_this_week class-attribute instance-attribute users_created_this_week : int = Field ( description = \"Number of users created this week\" ) users_created_today class-attribute instance-attribute users_created_today : int = Field ( description = \"Number of users created today\" ) verified_users class-attribute instance-attribute verified_users : int = Field ( description = \"Number of verified users\" )","title":"Admin Models"},{"location":"core/models/admin/#admin-models","text":"","title":"Admin Models"},{"location":"core/models/admin/#aniachifast.core.models.admin","text":"","title":"admin"},{"location":"core/models/admin/#aniachifast.core.models.admin--administrative-pydantic-models","text":"This module defines Pydantic models used for administrative operations, including comprehensive user information with sensitive data masking. These models are intended for administrative use only and should be protected by appropriate access controls.","title":"Administrative Pydantic Models"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse","text":"Bases: BaseModel Model for paginated list of users in admin APIs. Attributes: users ( list [ AdminUserResponse ] ) \u2013 List of user records. total_count ( int ) \u2013 Total number of users in database. page ( int ) \u2013 Current page number (1-based). page_size ( int ) \u2013 Number of users per page. total_pages ( int ) \u2013 Total number of pages. has_next ( bool ) \u2013 Whether there are more pages. has_previous ( bool ) \u2013 Whether there are previous pages.","title":"AdminUserListResponse"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse.has_next","text":"has_next : bool = Field ( description = \"Whether there are more pages\" )","title":"has_next"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse.has_previous","text":"has_previous : bool = Field ( description = \"Whether there are previous pages\" )","title":"has_previous"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse.page","text":"page : int = Field ( ge = 1 , description = \"Current page number (1-based)\" )","title":"page"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse.page_size","text":"page_size : int = Field ( ge = 1 , le = 100 , description = \"Number of users per page\" )","title":"page_size"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse.total_count","text":"total_count : int = Field ( description = \"Total number of users in database\" )","title":"total_count"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse.total_pages","text":"total_pages : int = Field ( description = \"Total number of pages\" )","title":"total_pages"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserListResponse.users","text":"users : list [ AdminUserResponse ] = Field ( description = \"List of user records\" )","title":"users"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse","text":"Bases: UserResponse Extended model for returning complete user information in admin APIs. This model extends UserResponse with additional administrative fields including sensitive data that is automatically masked for security. Sensitive fields (creditcard, ssn) are automatically masked using field validators to ensure data protection even in admin contexts. Attributes: # ( Inherited from UserResponse ) \u2013 id ( int ) \u2013 User's unique identifier. uuid ( UUID ) \u2013 User's universally unique identifier. email ( str ) \u2013 User's email address. username ( str ) \u2013 User's username. is_active ( bool ) \u2013 Whether the user account is active. is_verified ( bool ) \u2013 Whether the user account is verified. is_admin ( bool ) \u2013 Whether the user has admin privileges. is_staff ( bool ) \u2013 Whether the user is staff. is_disabled ( bool ) \u2013 Whether the user account is disabled. is_superuser ( bool ) \u2013 Whether the user is a superuser. created_at ( datetime ) \u2013 When the user was created. last_update ( datetime ) \u2013 When the user was last updated. # ( Additional admin fields ) \u2013 name ( Optional [ str ] ) \u2013 User's full name. max_tokens ( int ) \u2013 Maximum number of active tokens allowed. max_requests_per_token ( int ) \u2013 Maximum requests per token. is_blocked ( bool ) \u2013 Whether the user account is blocked. login_attempts ( int ) \u2013 Number of failed login attempts. blocked_time ( Optional [ datetime ] ) \u2013 When the account was blocked. login_attempt_time ( Optional [ datetime ] ) \u2013 Last failed login attempt time. activation_code ( Optional [ str ] ) \u2013 Account activation code. activation_code_expires_at ( Optional [ datetime ] ) \u2013 Activation code expiration. activated_at ( Optional [ datetime ] ) \u2013 When the account was activated. reset_code ( Optional [ str ] ) \u2013 Password reset code. reset_code_expires_at ( Optional [ datetime ] ) \u2013 Reset code expiration. birthdate ( Optional [ date ] ) \u2013 User's birth date. gender ( Optional [ str ] ) \u2013 User's gender. country ( Optional [ str ] ) \u2013 User's country. postalcode ( Optional [ str ] ) \u2013 User's postal code. phone ( Optional [ str ] ) \u2013 User's phone number. extension ( Optional [ str ] ) \u2013 User's phone extension. creditcard ( Optional [ str ] ) \u2013 Masked credit card number. ssn ( Optional [ str ] ) \u2013 Masked social security number. last_login ( Optional [ datetime ] ) \u2013 Last successful login time.","title":"AdminUserResponse"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.activated_at","text":"activated_at : Optional [ datetime ] = Field ( None , description = \"When the account was activated\" )","title":"activated_at"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.activation_code","text":"activation_code : Optional [ str ] = Field ( None , description = \"Account activation code\" )","title":"activation_code"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.activation_code_expires_at","text":"activation_code_expires_at : Optional [ datetime ] = Field ( None , description = \"Activation code expiration\" )","title":"activation_code_expires_at"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.birthdate","text":"birthdate : Optional [ date ] = Field ( None , description = \"User's birth date\" )","title":"birthdate"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.blocked_time","text":"blocked_time : Optional [ datetime ] = Field ( None , description = \"When the account was blocked\" )","title":"blocked_time"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.company_uuid","text":"company_uuid : Optional [ UUID ] = Field ( None , description = \"Company id\" )","title":"company_uuid"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.country","text":"country : Optional [ str ] = Field ( None , description = \"User's country\" )","title":"country"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.creditcard","text":"creditcard : Optional [ str ] = Field ( None , description = \"Masked credit card number\" )","title":"creditcard"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.extension","text":"extension : Optional [ str ] = Field ( None , description = \"User's phone extension\" )","title":"extension"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.gender","text":"gender : Optional [ str ] = Field ( None , description = \"User's gender\" )","title":"gender"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.is_blocked","text":"is_blocked : bool = Field ( False , description = \"Whether the user account is blocked\" )","title":"is_blocked"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.last_login","text":"last_login : Optional [ datetime ] = Field ( None , description = \"Last successful login time\" )","title":"last_login"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.login_attempt_time","text":"login_attempt_time : Optional [ datetime ] = Field ( None , description = \"Last failed login attempt time\" )","title":"login_attempt_time"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.login_attempts","text":"login_attempts : int = Field ( 0 , description = \"Number of failed login attempts\" )","title":"login_attempts"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.max_requests_per_token","text":"max_requests_per_token : int = Field ( 1000 , description = \"Maximum requests per token\" )","title":"max_requests_per_token"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.max_tokens","text":"max_tokens : int = Field ( 5 , description = \"Maximum number of active tokens allowed\" )","title":"max_tokens"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.model_config","text":"model_config = ConfigDict ( from_attributes = True , str_strip_whitespace = True , validate_assignment = True , )","title":"model_config"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.name","text":"name : Optional [ str ] = Field ( None , description = \"User's full name\" )","title":"name"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.phone","text":"phone : Optional [ str ] = Field ( None , description = \"User's phone number\" )","title":"phone"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.postalcode","text":"postalcode : Optional [ str ] = Field ( None , description = \"User's postal code\" )","title":"postalcode"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.reset_code","text":"reset_code : Optional [ str ] = Field ( None , description = \"Password reset code\" )","title":"reset_code"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.reset_code_expires_at","text":"reset_code_expires_at : Optional [ datetime ] = Field ( None , description = \"Reset code expiration\" )","title":"reset_code_expires_at"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.ssn","text":"ssn : Optional [ str ] = Field ( None , description = \"Masked social security number\" )","title":"ssn"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.mask_creditcard","text":"mask_creditcard ( v : Optional [ str ]) -> Optional [ str ] Automatically mask credit card numbers for security. Shows only the last 4 digits in format: *- - ***-1234 Parameters: v ( Optional [ str ] ) \u2013 Raw credit card number from database Returns: Optional [ str ] \u2013 Masked credit card string or None if no card","title":"mask_creditcard"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.mask_ssn","text":"mask_ssn ( v : Optional [ str ]) -> Optional [ str ] Automatically mask social security numbers for security. Shows only the last 4 digits in format: *- -1234 Parameters: v ( Optional [ str ] ) \u2013 Raw SSN from database Returns: Optional [ str ] \u2013 Masked SSN string or None if no SSN","title":"mask_ssn"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.serialize_date","text":"serialize_date ( value : Optional [ date ]) -> Optional [ str ] Serialize date fields to ISO format strings. Parameters: value ( Optional [ date ] ) \u2013 Date object from database Returns: Optional [ str ] \u2013 ISO format string or None if no date","title":"serialize_date"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.serialize_datetime","text":"serialize_datetime ( value : Optional [ datetime ], ) -> Optional [ str ] Serialize datetime fields to ISO format strings. Parameters: value ( Optional [ datetime ] ) \u2013 Datetime object from database Returns: Optional [ str ] \u2013 ISO format string or None if no datetime","title":"serialize_datetime"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserResponse.serialize_uuid","text":"serialize_uuid ( value : UUID ) -> str Serialize UUID to string for JSON output. Parameters: value ( UUID ) \u2013 UUID object from database Returns: str \u2013 String representation of UUID","title":"serialize_uuid"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse","text":"Bases: BaseModel Model for user statistics in admin APIs. Attributes: total_users ( int ) \u2013 Total number of registered users. active_users ( int ) \u2013 Number of active users. verified_users ( int ) \u2013 Number of verified users. blocked_users ( int ) \u2013 Number of blocked users. disabled_users ( int ) \u2013 Number of disabled users. admin_users ( int ) \u2013 Number of admin users. staff_users ( int ) \u2013 Number of staff users. superusers ( int ) \u2013 Number of superusers. users_created_today ( int ) \u2013 Number of users created today. users_created_this_week ( int ) \u2013 Number of users created this week. users_created_this_month ( int ) \u2013 Number of users created this month.","title":"AdminUserStatsResponse"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.active_users","text":"active_users : int = Field ( description = \"Number of active users\" )","title":"active_users"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.admin_users","text":"admin_users : int = Field ( description = \"Number of admin users\" )","title":"admin_users"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.blocked_users","text":"blocked_users : int = Field ( description = \"Number of blocked users\" )","title":"blocked_users"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.disabled_users","text":"disabled_users : int = Field ( description = \"Number of disabled users\" )","title":"disabled_users"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.staff_users","text":"staff_users : int = Field ( description = \"Number of staff users\" )","title":"staff_users"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.superusers","text":"superusers : int = Field ( description = 'Number of superusers' )","title":"superusers"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.total_users","text":"total_users : int = Field ( description = \"Total number of registered users\" )","title":"total_users"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.users_created_this_month","text":"users_created_this_month : int = Field ( description = \"Number of users created this month\" )","title":"users_created_this_month"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.users_created_this_week","text":"users_created_this_week : int = Field ( description = \"Number of users created this week\" )","title":"users_created_this_week"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.users_created_today","text":"users_created_today : int = Field ( description = \"Number of users created today\" )","title":"users_created_today"},{"location":"core/models/admin/#aniachifast.core.models.admin.AdminUserStatsResponse.verified_users","text":"verified_users : int = Field ( description = \"Number of verified users\" )","title":"verified_users"},{"location":"core/models/auth/","text":"Authentication Models aniachifast.core.models.auth Authentication Pydantic Models This module defines Pydantic models used for authentication operations, including user registration, login, token management, and response schemas. Token Bases: BaseModel Model representing a JWT access token. Attributes: access_token ( str ) \u2013 JWT access token string. token_type ( str ) \u2013 Token type, usually \"bearer\". access_token instance-attribute access_token : str token_type instance-attribute token_type : str TokenData Bases: BaseModel Model for data extracted from a JWT token. Attributes: username ( str | None ) \u2013 Optional username extracted from token. username class-attribute instance-attribute username : str | None = None UserCreate Bases: BaseModel Model for creating a new user. Attributes: email ( EmailStr ) \u2013 User's email address (must be valid format). username ( str ) \u2013 Unique username for the user. password ( str ) \u2013 User's password (hashed internally before storage). email instance-attribute email : EmailStr password instance-attribute password : str username instance-attribute username : str UserLogin Bases: BaseModel Model for user login credentials. Attributes: username ( str ) \u2013 User's username. password ( str ) \u2013 User's password. password instance-attribute password : str username instance-attribute username : str UserRegisterResponse Bases: BaseModel API envelope response model for user registration. Combines APIResponseV2 structure with UserResponse data. api_version class-attribute instance-attribute api_version : str = Field ( description = \"API version identifier\" ) checksum class-attribute instance-attribute checksum : str = Field ( description = \"SHA256 checksum of the response payload\" ) context class-attribute instance-attribute context : dict [ str , Any ] | None = Field ( default = None , description = \"metadata\" ) data class-attribute instance-attribute data : UserResponse = Field ( description = \"User registration data\" ) execution_time_ms class-attribute instance-attribute execution_time_ms : float = Field ( description = \"Execution time in milseconds\" ) request_id class-attribute instance-attribute request_id : str = Field ( description = \"Unique request identifier\" ) signature class-attribute instance-attribute signature : str = Field ( description = \"HMAC-SHA256 signature of the checksum\" ) status class-attribute instance-attribute status : int = Field ( description = 'HTTP status code' ) timestamp class-attribute instance-attribute timestamp : int = Field ( description = \"Epoch timestamp when response was generated\" ) UserResponse Bases: BaseModel Model for returning user information in API responses. Attributes: id ( int ) \u2013 User's unique identifier. uuid ( UUID ) \u2013 User's universally unique identifier. email ( str ) \u2013 User's email address. username ( str ) \u2013 User's username. company_uuid ( UUID ) \u2013 User's company universally unique identifier. is_active ( bool ) \u2013 Whether the user account is active. is_verified ( bool ) \u2013 Whether the user account is verified. is_admin ( bool ) \u2013 Whether the user has admin privileges. is_staff ( bool ) \u2013 Whether the user is staff. is_disabled ( bool ) \u2013 Whether the user account is disabled. is_superuser ( bool ) \u2013 Whether the user is a superuser. roles ( list [ str ] ) \u2013 List of role names assigned to the user. created_at ( Any ) \u2013 When the user was created. last_update ( Any ) \u2013 When the user was last updated. company_uuid class-attribute instance-attribute company_uuid : UUID | None = None created_at instance-attribute created_at : Any email instance-attribute email : str id instance-attribute id : int is_active instance-attribute is_active : bool is_admin class-attribute instance-attribute is_admin : bool = False is_disabled class-attribute instance-attribute is_disabled : bool = False is_staff class-attribute instance-attribute is_staff : bool = False is_superuser class-attribute instance-attribute is_superuser : bool = False is_verified class-attribute instance-attribute is_verified : bool = False last_update instance-attribute last_update : Any model_config class-attribute instance-attribute model_config = ConfigDict ( from_attributes = True ) roles class-attribute instance-attribute roles : list [ str ] = [] username instance-attribute username : str uuid instance-attribute uuid : UUID","title":"Auth Models"},{"location":"core/models/auth/#authentication-models","text":"","title":"Authentication Models"},{"location":"core/models/auth/#aniachifast.core.models.auth","text":"","title":"auth"},{"location":"core/models/auth/#aniachifast.core.models.auth--authentication-pydantic-models","text":"This module defines Pydantic models used for authentication operations, including user registration, login, token management, and response schemas.","title":"Authentication Pydantic Models"},{"location":"core/models/auth/#aniachifast.core.models.auth.Token","text":"Bases: BaseModel Model representing a JWT access token. Attributes: access_token ( str ) \u2013 JWT access token string. token_type ( str ) \u2013 Token type, usually \"bearer\".","title":"Token"},{"location":"core/models/auth/#aniachifast.core.models.auth.Token.access_token","text":"access_token : str","title":"access_token"},{"location":"core/models/auth/#aniachifast.core.models.auth.Token.token_type","text":"token_type : str","title":"token_type"},{"location":"core/models/auth/#aniachifast.core.models.auth.TokenData","text":"Bases: BaseModel Model for data extracted from a JWT token. Attributes: username ( str | None ) \u2013 Optional username extracted from token.","title":"TokenData"},{"location":"core/models/auth/#aniachifast.core.models.auth.TokenData.username","text":"username : str | None = None","title":"username"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserCreate","text":"Bases: BaseModel Model for creating a new user. Attributes: email ( EmailStr ) \u2013 User's email address (must be valid format). username ( str ) \u2013 Unique username for the user. password ( str ) \u2013 User's password (hashed internally before storage).","title":"UserCreate"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserCreate.email","text":"email : EmailStr","title":"email"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserCreate.password","text":"password : str","title":"password"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserCreate.username","text":"username : str","title":"username"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserLogin","text":"Bases: BaseModel Model for user login credentials. Attributes: username ( str ) \u2013 User's username. password ( str ) \u2013 User's password.","title":"UserLogin"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserLogin.password","text":"password : str","title":"password"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserLogin.username","text":"username : str","title":"username"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse","text":"Bases: BaseModel API envelope response model for user registration. Combines APIResponseV2 structure with UserResponse data.","title":"UserRegisterResponse"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.api_version","text":"api_version : str = Field ( description = \"API version identifier\" )","title":"api_version"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.checksum","text":"checksum : str = Field ( description = \"SHA256 checksum of the response payload\" )","title":"checksum"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.context","text":"context : dict [ str , Any ] | None = Field ( default = None , description = \"metadata\" )","title":"context"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.data","text":"data : UserResponse = Field ( description = \"User registration data\" )","title":"data"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.execution_time_ms","text":"execution_time_ms : float = Field ( description = \"Execution time in milseconds\" )","title":"execution_time_ms"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.request_id","text":"request_id : str = Field ( description = \"Unique request identifier\" )","title":"request_id"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.signature","text":"signature : str = Field ( description = \"HMAC-SHA256 signature of the checksum\" )","title":"signature"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.status","text":"status : int = Field ( description = 'HTTP status code' )","title":"status"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserRegisterResponse.timestamp","text":"timestamp : int = Field ( description = \"Epoch timestamp when response was generated\" )","title":"timestamp"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse","text":"Bases: BaseModel Model for returning user information in API responses. Attributes: id ( int ) \u2013 User's unique identifier. uuid ( UUID ) \u2013 User's universally unique identifier. email ( str ) \u2013 User's email address. username ( str ) \u2013 User's username. company_uuid ( UUID ) \u2013 User's company universally unique identifier. is_active ( bool ) \u2013 Whether the user account is active. is_verified ( bool ) \u2013 Whether the user account is verified. is_admin ( bool ) \u2013 Whether the user has admin privileges. is_staff ( bool ) \u2013 Whether the user is staff. is_disabled ( bool ) \u2013 Whether the user account is disabled. is_superuser ( bool ) \u2013 Whether the user is a superuser. roles ( list [ str ] ) \u2013 List of role names assigned to the user. created_at ( Any ) \u2013 When the user was created. last_update ( Any ) \u2013 When the user was last updated.","title":"UserResponse"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.company_uuid","text":"company_uuid : UUID | None = None","title":"company_uuid"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.created_at","text":"created_at : Any","title":"created_at"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.email","text":"email : str","title":"email"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.id","text":"id : int","title":"id"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.is_active","text":"is_active : bool","title":"is_active"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.is_admin","text":"is_admin : bool = False","title":"is_admin"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.is_disabled","text":"is_disabled : bool = False","title":"is_disabled"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.is_staff","text":"is_staff : bool = False","title":"is_staff"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.is_superuser","text":"is_superuser : bool = False","title":"is_superuser"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.is_verified","text":"is_verified : bool = False","title":"is_verified"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.last_update","text":"last_update : Any","title":"last_update"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.model_config","text":"model_config = ConfigDict ( from_attributes = True )","title":"model_config"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.roles","text":"roles : list [ str ] = []","title":"roles"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.username","text":"username : str","title":"username"},{"location":"core/models/auth/#aniachifast.core.models.auth.UserResponse.uuid","text":"uuid : UUID","title":"uuid"},{"location":"core/models/cloud_files/","text":"Core Models Cloud Files aniachifast.core.models.cloud_files Validated file domain model. This module defines the ValidatedFile Pydantic model, which represents a fully validated, normalized, and optionally persisted uploaded file. The model encapsulates: - Immutable file metadata derived from the upload request - Binary and decoded textual content - Cryptographic integrity hashes - Optional storage information (local filesystem or object storage) - Upload lifecycle status and error context - Optional ownership and tenancy context (client, user, company) - Immutable creation timestamp This model is primarily produced by upload validation dependencies and is intended to be used as an internal domain object. A response-safe representation should be generated explicitly when exposing data via HTTP APIs. Design principles: - Explicit immutability for upload-derived fields - Strong typing and validation via Pydantic - Deterministic equality and hashing semantics - No implicit serialization side effects - Clear separation between internal state and API exposure UploadStatus Bases: str , Enum FAILED class-attribute instance-attribute FAILED = 'failed' INIT class-attribute instance-attribute INIT = 'init' SUCCESS class-attribute instance-attribute SUCCESS = 'success' ValidatedFile Bases: BaseModel Represents a validated and normalized uploaded file. This model is produced by upload validation dependencies and contains: - Immutable metadata derived from the original upload - File content (binary and/or decoded text) - Integrity hashes - Optional persistence metadata (local or bucket storage) Notes filename , content_type , size_bytes , and created_at are immutable once the instance is created. Binary content is excluded from API responses by default. bucket_path class-attribute instance-attribute bucket_path : Optional [ str ] = Field ( None , description = \"Object storage path (S3/GCS/etc) if uploaded to a bucket\" , examples = [ \"uploads/2026/01/report.pdf\" ], ) client_id class-attribute instance-attribute client_id : Optional [ UUID ] = Field ( None , description = \"Client identifier associated with the upload\" , examples = [ \"8f3a1c2e-5c6b-4b3e-9f01-8b9d0a123456\" ], ) company_id class-attribute instance-attribute company_id : Optional [ UUID ] = Field ( None , description = \"Company or tenant identifier associated with the upload\" , examples = [ \"a1b2c3d4-e5f6-7890-abcd-ef0123456789\" ], ) content class-attribute instance-attribute content : bytes = Field ( ... , description = \"Raw binary content of the file\" , repr = False , ) content_text class-attribute instance-attribute content_text : Optional [ str ] = Field ( None , description = \"Decoded text content (only for text-based files)\" , examples = [ \"Hello world\" ], ) content_type class-attribute instance-attribute content_type : str = Field ( ... , frozen = True , description = \"MIME type of the uploaded file\" , examples = [ \"application/pdf\" ], ) created_at class-attribute instance-attribute created_at : datetime = Field ( default_factory = lambda : now ( utc ), frozen = True , description = \"UTC timestamp when the file model was created\" , examples = [ \"2026-01-20T14:32:10Z\" ], ) error_message class-attribute instance-attribute error_message : Optional [ str ] = Field ( None , description = \"Error message if the upload failed\" , examples = [ \"File type not allowed\" , \"Upload timeout\" ], ) error_type class-attribute instance-attribute error_type : Optional [ int ] = Field ( None , description = \"Error type if the upload failed\" , examples = [ 400 , 404 , 500 ], ) filename class-attribute instance-attribute filename : str = Field ( ... , frozen = True , description = \"Original filename as provided by the client\" , examples = [ \"report.pdf\" ], ) local_path class-attribute instance-attribute local_path : Optional [ str ] = Field ( None , description = \"Local filesystem path where the file was saved\" , examples = [ \"/tmp/uploads/report.pdf\" ], ) md5_hash class-attribute instance-attribute md5_hash : str = Field ( default = \"\" , min_length = 32 , max_length = 32 , description = \"MD5 hash of the file content\" , examples = [ \"d41d8cd98f00b204e9800998ecf8427e\" ], ) metadata class-attribute instance-attribute metadata : Optional [ Dict [ str , Any ]] = Field ( None , description = \"Arbitrary metadata associated with the upload\" , examples = [{ \"source\" : \"api\" , \"pipeline\" : \"ingestion\" }], ) sha256_hash class-attribute instance-attribute sha256_hash : str = Field ( default = \"\" , min_length = 64 , max_length = 64 , description = \"SHA-256 hash of the file content\" , examples = [ \"e3b0c44298fc1c149afbf4c8996f4ca495991b7852b855\" ], ) size class-attribute instance-attribute size : Optional [ str ] = Field ( None , description = \"Human-readable file size\" , examples = [ \"100 KB\" ], ) size_bytes class-attribute instance-attribute size_bytes : int = Field ( ... , ge = 0 , frozen = True , description = \"File size in bytes\" , examples = [ 102400 ], ) status class-attribute instance-attribute status : UploadStatus = Field ( INIT , description = \"File upload status\" , examples = [ \"success\" , \"failed\" ], ) user_id class-attribute instance-attribute user_id : Optional [ UUID ] = Field ( None , description = \"User identifier who initiated the upload\" , examples = [ \"2c9b1f70-9d43-4f55-bf7e-123456789abc\" ], ) __eq__ __eq__ ( other : object ) -> bool Equality is defined by user identity and file content hash. __hash__ __hash__ () -> int Hash is derived from user identity and file content hash. This allows safe usage in sets and as dictionary keys. __repr__ __repr__ () -> str Debug-oriented representation. __str__ __str__ () -> str Human-readable string representation. compute_hashes compute_hashes () -> ValidatedFile Compute SHA-256 and MD5 hashes from binary content if they were not explicitly provided. save_to_disk save_to_disk ( path : str ) -> None Persist the file content to disk. Parameters path : str Destination filesystem path. to_response_dict to_response_dict () -> dict Convert the model into a response-safe dictionary. Binary content is excluded to avoid large payloads.","title":"Cloud Files"},{"location":"core/models/cloud_files/#core-models-cloud-files","text":"","title":"Core Models Cloud Files"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files","text":"Validated file domain model. This module defines the ValidatedFile Pydantic model, which represents a fully validated, normalized, and optionally persisted uploaded file. The model encapsulates: - Immutable file metadata derived from the upload request - Binary and decoded textual content - Cryptographic integrity hashes - Optional storage information (local filesystem or object storage) - Upload lifecycle status and error context - Optional ownership and tenancy context (client, user, company) - Immutable creation timestamp This model is primarily produced by upload validation dependencies and is intended to be used as an internal domain object. A response-safe representation should be generated explicitly when exposing data via HTTP APIs. Design principles: - Explicit immutability for upload-derived fields - Strong typing and validation via Pydantic - Deterministic equality and hashing semantics - No implicit serialization side effects - Clear separation between internal state and API exposure","title":"cloud_files"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.UploadStatus","text":"Bases: str , Enum","title":"UploadStatus"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.UploadStatus.FAILED","text":"FAILED = 'failed'","title":"FAILED"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.UploadStatus.INIT","text":"INIT = 'init'","title":"INIT"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.UploadStatus.SUCCESS","text":"SUCCESS = 'success'","title":"SUCCESS"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile","text":"Bases: BaseModel Represents a validated and normalized uploaded file. This model is produced by upload validation dependencies and contains: - Immutable metadata derived from the original upload - File content (binary and/or decoded text) - Integrity hashes - Optional persistence metadata (local or bucket storage)","title":"ValidatedFile"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile--notes","text":"filename , content_type , size_bytes , and created_at are immutable once the instance is created. Binary content is excluded from API responses by default.","title":"Notes"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.bucket_path","text":"bucket_path : Optional [ str ] = Field ( None , description = \"Object storage path (S3/GCS/etc) if uploaded to a bucket\" , examples = [ \"uploads/2026/01/report.pdf\" ], )","title":"bucket_path"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.client_id","text":"client_id : Optional [ UUID ] = Field ( None , description = \"Client identifier associated with the upload\" , examples = [ \"8f3a1c2e-5c6b-4b3e-9f01-8b9d0a123456\" ], )","title":"client_id"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.company_id","text":"company_id : Optional [ UUID ] = Field ( None , description = \"Company or tenant identifier associated with the upload\" , examples = [ \"a1b2c3d4-e5f6-7890-abcd-ef0123456789\" ], )","title":"company_id"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.content","text":"content : bytes = Field ( ... , description = \"Raw binary content of the file\" , repr = False , )","title":"content"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.content_text","text":"content_text : Optional [ str ] = Field ( None , description = \"Decoded text content (only for text-based files)\" , examples = [ \"Hello world\" ], )","title":"content_text"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.content_type","text":"content_type : str = Field ( ... , frozen = True , description = \"MIME type of the uploaded file\" , examples = [ \"application/pdf\" ], )","title":"content_type"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.created_at","text":"created_at : datetime = Field ( default_factory = lambda : now ( utc ), frozen = True , description = \"UTC timestamp when the file model was created\" , examples = [ \"2026-01-20T14:32:10Z\" ], )","title":"created_at"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.error_message","text":"error_message : Optional [ str ] = Field ( None , description = \"Error message if the upload failed\" , examples = [ \"File type not allowed\" , \"Upload timeout\" ], )","title":"error_message"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.error_type","text":"error_type : Optional [ int ] = Field ( None , description = \"Error type if the upload failed\" , examples = [ 400 , 404 , 500 ], )","title":"error_type"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.filename","text":"filename : str = Field ( ... , frozen = True , description = \"Original filename as provided by the client\" , examples = [ \"report.pdf\" ], )","title":"filename"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.local_path","text":"local_path : Optional [ str ] = Field ( None , description = \"Local filesystem path where the file was saved\" , examples = [ \"/tmp/uploads/report.pdf\" ], )","title":"local_path"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.md5_hash","text":"md5_hash : str = Field ( default = \"\" , min_length = 32 , max_length = 32 , description = \"MD5 hash of the file content\" , examples = [ \"d41d8cd98f00b204e9800998ecf8427e\" ], )","title":"md5_hash"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.metadata","text":"metadata : Optional [ Dict [ str , Any ]] = Field ( None , description = \"Arbitrary metadata associated with the upload\" , examples = [{ \"source\" : \"api\" , \"pipeline\" : \"ingestion\" }], )","title":"metadata"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.sha256_hash","text":"sha256_hash : str = Field ( default = \"\" , min_length = 64 , max_length = 64 , description = \"SHA-256 hash of the file content\" , examples = [ \"e3b0c44298fc1c149afbf4c8996f4ca495991b7852b855\" ], )","title":"sha256_hash"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.size","text":"size : Optional [ str ] = Field ( None , description = \"Human-readable file size\" , examples = [ \"100 KB\" ], )","title":"size"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.size_bytes","text":"size_bytes : int = Field ( ... , ge = 0 , frozen = True , description = \"File size in bytes\" , examples = [ 102400 ], )","title":"size_bytes"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.status","text":"status : UploadStatus = Field ( INIT , description = \"File upload status\" , examples = [ \"success\" , \"failed\" ], )","title":"status"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.user_id","text":"user_id : Optional [ UUID ] = Field ( None , description = \"User identifier who initiated the upload\" , examples = [ \"2c9b1f70-9d43-4f55-bf7e-123456789abc\" ], )","title":"user_id"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.__eq__","text":"__eq__ ( other : object ) -> bool Equality is defined by user identity and file content hash.","title":"__eq__"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.__hash__","text":"__hash__ () -> int Hash is derived from user identity and file content hash. This allows safe usage in sets and as dictionary keys.","title":"__hash__"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.__repr__","text":"__repr__ () -> str Debug-oriented representation.","title":"__repr__"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.__str__","text":"__str__ () -> str Human-readable string representation.","title":"__str__"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.compute_hashes","text":"compute_hashes () -> ValidatedFile Compute SHA-256 and MD5 hashes from binary content if they were not explicitly provided.","title":"compute_hashes"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.save_to_disk","text":"save_to_disk ( path : str ) -> None Persist the file content to disk.","title":"save_to_disk"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.save_to_disk--parameters","text":"path : str Destination filesystem path.","title":"Parameters"},{"location":"core/models/cloud_files/#aniachifast.core.models.cloud_files.ValidatedFile.to_response_dict","text":"to_response_dict () -> dict Convert the model into a response-safe dictionary. Binary content is excluded to avoid large payloads.","title":"to_response_dict"},{"location":"core/models/database/","text":"Database Models aniachifast.core.models.database Database Models Module. This module defines the SQLAlchemy ORM models that map to tables in the PostgreSQL database. Each class represents a table and its columns, types, constraints, and defaults. These models are used throughout the application to interact with the database in a type-safe and structured way, supporting CRUD operations and migrations. UUID STRATEGY (IMPORTANT) This module intentionally separates Python UUID types from SQLAlchemy PostgreSQL UUID column types to avoid name collisions, typing ambiguity, and mypy errors. The following conventions are used consistently across ALL models: PyUUID -> uuid.UUID Python-level UUID type used in Mapped[...] annotations. SAUUID -> sqlalchemy.dialects.postgresql.UUID SQLAlchemy column type mapped to PostgreSQL UUID columns. uuid4 -> uuid.uuid4 UUID generator used as the default value for UUID columns. Why this matters: - Prevents confusion between Python UUIDs and database UUID columns. - Avoids mypy errors, especially with union types (e.g. UUID | None). - Ensures predictable typing behavior in SQLAlchemy 2.0 style models. ActivityLedgerModel Bases: Base PostgreSQL activity ledger table. Design principles: - Append-only event log - Time-ordered reads - Queryable by company and user - Backend-compatible with DynamoDB ledger __table_args__ class-attribute instance-attribute __table_args__ = ( Index ( \"ix_activity_ledger_company_ts\" , \"company_id\" , \"timestamp\" , ), Index ( \"ix_activity_ledger_user_ts\" , \"user_id\" , \"timestamp\" ), Index ( \"ix_activity_ledger_metadata_gin\" , \"metadata_json\" , postgresql_using = \"gin\" , ), ) __tablename__ class-attribute instance-attribute __tablename__ = 'activity_ledger' activity class-attribute instance-attribute activity : Mapped [ str ] = mapped_column ( String ( 100 ), nullable = False , doc = \"Activity type identifier\" , ) company_id class-attribute instance-attribute company_id : Mapped [ UUID | None ] = mapped_column ( UUID ( as_uuid = True ), nullable = True , index = True , doc = \"Company identifier (NULL for anonymous events)\" , ) created_at class-attribute instance-attribute created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False , server_default = now (), doc = \"Row creation timestamp\" , ) id class-attribute instance-attribute id : Mapped [ UUID ] = mapped_column ( UUID ( as_uuid = True ), primary_key = True , nullable = False ) ip_address class-attribute instance-attribute ip_address : Mapped [ str | None ] = mapped_column ( String ( 45 ), nullable = True , doc = \"Client IP address (IPv4 or IPv6)\" , ) last_updated class-attribute instance-attribute last_updated : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False , server_default = now (), server_onupdate = now (), doc = \"Last update timestamp (for administrative corrections)\" , ) metadata_json class-attribute instance-attribute metadata_json : Mapped [ dict [ str , Any ] | None ] = ( mapped_column ( JSONB , nullable = True , doc = \"Additional structured metadata for the activity (JSONB, searchable)\" , ) ) request_id class-attribute instance-attribute request_id : Mapped [ str | None ] = mapped_column ( String ( 255 ), nullable = True , index = True , doc = \"Unique identifier for the incoming request\" , ) timestamp class-attribute instance-attribute timestamp : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False , index = True , doc = \"When the activity occurred\" , ) user_agent class-attribute instance-attribute user_agent : Mapped [ str | None ] = mapped_column ( String ( 500 ), nullable = True , doc = \"Client user agent string\" , ) user_id class-attribute instance-attribute user_id : Mapped [ UUID | None ] = mapped_column ( UUID ( as_uuid = True ), nullable = True , index = True , doc = \"User identifier (NULL for unauthenticated events)\" , ) __repr__ __repr__ () -> str Return a detailed string representation for debugging. This representation is intended for developers and debugging sessions. It includes the most relevant identifying fields while avoiding any expensive or side-effect-prone operations. Returns str Debug-oriented representation of the activity ledger row. __str__ __str__ () -> str Return a concise, human-readable string representation. This string is safe for logging and printing: - Does not trigger lazy loading - Does not serialize ORM state - Does not depend on an active database session Returns str Human-readable activity ledger description. Company Bases: Base Represents a company in the system with basic information and audit timestamps. __tablename__ class-attribute instance-attribute __tablename__ = 'companies' address class-attribute instance-attribute address : Mapped [ str | None ] = mapped_column ( String ( 300 ), nullable = True ) city class-attribute instance-attribute city : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True ) created_at class-attribute instance-attribute created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , ) email class-attribute instance-attribute email : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True ) id class-attribute instance-attribute id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , ) last_update class-attribute instance-attribute last_update : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), server_onupdate = now (), nullable = False , ) name class-attribute instance-attribute name : Mapped [ str ] = mapped_column ( String ( 200 ), nullable = False ) phone class-attribute instance-attribute phone : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True ) postalcode class-attribute instance-attribute postalcode : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True ) state class-attribute instance-attribute state : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True ) users class-attribute instance-attribute users : Mapped [ list [ \"User\" ]] = relationship ( \"User\" , back_populates = \"company\" ) uuid class-attribute instance-attribute uuid : Mapped [ UUID ] = mapped_column ( UUID ( as_uuid = True ), unique = True , nullable = False , default = uuid4 , index = True , ) website class-attribute instance-attribute website : Mapped [ str | None ] = mapped_column ( String ( 200 ), nullable = True ) User Bases: Base Represents a user in the system with personal information, authentication details, and audit timestamps. __tablename__ class-attribute instance-attribute __tablename__ = 'users' activated_at class-attribute instance-attribute activated_at : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True ) activation_code class-attribute instance-attribute activation_code : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True ) activation_code_expires_at class-attribute instance-attribute activation_code_expires_at : Mapped [ datetime | None ] = ( mapped_column ( DateTime ( timezone = True ), nullable = True ) ) birthdate class-attribute instance-attribute birthdate : Mapped [ date | None ] = mapped_column ( Date , nullable = True ) blocked_time class-attribute instance-attribute blocked_time : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True , default = None ) company class-attribute instance-attribute company : Mapped [ \"Company\" ] = relationship ( \"Company\" , back_populates = \"users\" ) company_uuid class-attribute instance-attribute company_uuid : Mapped [ UUID | None ] = mapped_column ( UUID ( as_uuid = True ), ForeignKey ( \"companies.uuid\" ), nullable = True , index = True , ) country class-attribute instance-attribute country : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True ) created_at class-attribute instance-attribute created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , ) creditcard class-attribute instance-attribute creditcard : Mapped [ str | None ] = mapped_column ( String ( 25 ), nullable = True ) email class-attribute instance-attribute email : Mapped [ str ] = mapped_column ( String ( 100 ), unique = True , nullable = False ) extension class-attribute instance-attribute extension : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True ) gender class-attribute instance-attribute gender : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True ) hashed_password class-attribute instance-attribute hashed_password : Mapped [ str ] = mapped_column ( String ( 100 ), nullable = False ) id class-attribute instance-attribute id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , ) is_active class-attribute instance-attribute is_active : Mapped [ bool ] = mapped_column ( Boolean , default = False ) is_admin class-attribute instance-attribute is_admin : Mapped [ bool ] = mapped_column ( Boolean , default = False ) is_blocked class-attribute instance-attribute is_blocked : Mapped [ bool ] = mapped_column ( Boolean , default = False , nullable = False ) is_disabled class-attribute instance-attribute is_disabled : Mapped [ bool ] = mapped_column ( Boolean , default = False ) is_staff class-attribute instance-attribute is_staff : Mapped [ bool ] = mapped_column ( Boolean , default = False ) is_superuser class-attribute instance-attribute is_superuser : Mapped [ bool ] = mapped_column ( Boolean , default = False ) is_verified class-attribute instance-attribute is_verified : Mapped [ bool ] = mapped_column ( Boolean , default = False ) last_login class-attribute instance-attribute last_login : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True , default = None ) last_update class-attribute instance-attribute last_update : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), server_onupdate = now (), nullable = False , ) login_attempt_time class-attribute instance-attribute login_attempt_time : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True , default = None ) login_attempts class-attribute instance-attribute login_attempts : Mapped [ int ] = mapped_column ( Integer , default = 0 , nullable = False ) max_requests_per_token class-attribute instance-attribute max_requests_per_token : Mapped [ int ] = mapped_column ( Integer , default = 1000 , nullable = False ) max_tokens class-attribute instance-attribute max_tokens : Mapped [ int ] = mapped_column ( Integer , default = 5 , nullable = False ) name class-attribute instance-attribute name : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True ) phone class-attribute instance-attribute phone : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True ) postalcode class-attribute instance-attribute postalcode : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True ) reset_code class-attribute instance-attribute reset_code : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True ) reset_code_expires_at class-attribute instance-attribute reset_code_expires_at : Mapped [ datetime | None ] = ( mapped_column ( DateTime ( timezone = True ), nullable = True ) ) ssn class-attribute instance-attribute ssn : Mapped [ str | None ] = mapped_column ( String ( 11 ), unique = True , nullable = True ) username class-attribute instance-attribute username : Mapped [ str ] = mapped_column ( String ( 50 ), unique = True , nullable = False ) uuid class-attribute instance-attribute uuid : Mapped [ UUID ] = mapped_column ( UUID ( as_uuid = True ), unique = True , nullable = False , default = uuid4 , index = True , ) __repr__ __repr__ () -> str Return an unambiguous string representation of the User object, suitable for debugging and logging. __str__ __str__ () -> str Return a human-readable string representation of the User. UserToken Bases: Base Represents JWT tokens issued to users for tracking usage and management. __tablename__ class-attribute instance-attribute __tablename__ = 'user_tokens' created_at class-attribute instance-attribute created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , ) expires_at class-attribute instance-attribute expires_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False ) id class-attribute instance-attribute id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , ) is_active class-attribute instance-attribute is_active : Mapped [ bool ] = mapped_column ( Boolean , default = True , nullable = False ) last_used_at class-attribute instance-attribute last_used_at : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True ) token_hash class-attribute instance-attribute token_hash : Mapped [ str ] = mapped_column ( String ( 64 ), unique = True , nullable = False , index = True ) usage_count class-attribute instance-attribute usage_count : Mapped [ int ] = mapped_column ( Integer , default = 0 , nullable = False ) user class-attribute instance-attribute user = relationship ( 'User' , backref = 'tokens' ) user_id class-attribute instance-attribute user_id : Mapped [ int ] = mapped_column ( Integer , ForeignKey ( \"users.id\" ), nullable = False ) __repr__ __repr__ () -> str __str__ __str__ () -> str","title":"Database Models"},{"location":"core/models/database/#database-models","text":"","title":"Database Models"},{"location":"core/models/database/#aniachifast.core.models.database","text":"Database Models Module. This module defines the SQLAlchemy ORM models that map to tables in the PostgreSQL database. Each class represents a table and its columns, types, constraints, and defaults. These models are used throughout the application to interact with the database in a type-safe and structured way, supporting CRUD operations and migrations.","title":"database"},{"location":"core/models/database/#aniachifast.core.models.database--uuid-strategy-important","text":"This module intentionally separates Python UUID types from SQLAlchemy PostgreSQL UUID column types to avoid name collisions, typing ambiguity, and mypy errors. The following conventions are used consistently across ALL models: PyUUID -> uuid.UUID Python-level UUID type used in Mapped[...] annotations. SAUUID -> sqlalchemy.dialects.postgresql.UUID SQLAlchemy column type mapped to PostgreSQL UUID columns. uuid4 -> uuid.uuid4 UUID generator used as the default value for UUID columns. Why this matters: - Prevents confusion between Python UUIDs and database UUID columns. - Avoids mypy errors, especially with union types (e.g. UUID | None). - Ensures predictable typing behavior in SQLAlchemy 2.0 style models.","title":"UUID STRATEGY (IMPORTANT)"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel","text":"Bases: Base PostgreSQL activity ledger table. Design principles: - Append-only event log - Time-ordered reads - Queryable by company and user - Backend-compatible with DynamoDB ledger","title":"ActivityLedgerModel"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.__table_args__","text":"__table_args__ = ( Index ( \"ix_activity_ledger_company_ts\" , \"company_id\" , \"timestamp\" , ), Index ( \"ix_activity_ledger_user_ts\" , \"user_id\" , \"timestamp\" ), Index ( \"ix_activity_ledger_metadata_gin\" , \"metadata_json\" , postgresql_using = \"gin\" , ), )","title":"__table_args__"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.__tablename__","text":"__tablename__ = 'activity_ledger'","title":"__tablename__"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.activity","text":"activity : Mapped [ str ] = mapped_column ( String ( 100 ), nullable = False , doc = \"Activity type identifier\" , )","title":"activity"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.company_id","text":"company_id : Mapped [ UUID | None ] = mapped_column ( UUID ( as_uuid = True ), nullable = True , index = True , doc = \"Company identifier (NULL for anonymous events)\" , )","title":"company_id"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.created_at","text":"created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False , server_default = now (), doc = \"Row creation timestamp\" , )","title":"created_at"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.id","text":"id : Mapped [ UUID ] = mapped_column ( UUID ( as_uuid = True ), primary_key = True , nullable = False )","title":"id"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.ip_address","text":"ip_address : Mapped [ str | None ] = mapped_column ( String ( 45 ), nullable = True , doc = \"Client IP address (IPv4 or IPv6)\" , )","title":"ip_address"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.last_updated","text":"last_updated : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False , server_default = now (), server_onupdate = now (), doc = \"Last update timestamp (for administrative corrections)\" , )","title":"last_updated"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.metadata_json","text":"metadata_json : Mapped [ dict [ str , Any ] | None ] = ( mapped_column ( JSONB , nullable = True , doc = \"Additional structured metadata for the activity (JSONB, searchable)\" , ) )","title":"metadata_json"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.request_id","text":"request_id : Mapped [ str | None ] = mapped_column ( String ( 255 ), nullable = True , index = True , doc = \"Unique identifier for the incoming request\" , )","title":"request_id"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.timestamp","text":"timestamp : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False , index = True , doc = \"When the activity occurred\" , )","title":"timestamp"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.user_agent","text":"user_agent : Mapped [ str | None ] = mapped_column ( String ( 500 ), nullable = True , doc = \"Client user agent string\" , )","title":"user_agent"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.user_id","text":"user_id : Mapped [ UUID | None ] = mapped_column ( UUID ( as_uuid = True ), nullable = True , index = True , doc = \"User identifier (NULL for unauthenticated events)\" , )","title":"user_id"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.__repr__","text":"__repr__ () -> str Return a detailed string representation for debugging. This representation is intended for developers and debugging sessions. It includes the most relevant identifying fields while avoiding any expensive or side-effect-prone operations.","title":"__repr__"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.__repr__--returns","text":"str Debug-oriented representation of the activity ledger row.","title":"Returns"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.__str__","text":"__str__ () -> str Return a concise, human-readable string representation. This string is safe for logging and printing: - Does not trigger lazy loading - Does not serialize ORM state - Does not depend on an active database session","title":"__str__"},{"location":"core/models/database/#aniachifast.core.models.database.ActivityLedgerModel.__str__--returns","text":"str Human-readable activity ledger description.","title":"Returns"},{"location":"core/models/database/#aniachifast.core.models.database.Company","text":"Bases: Base Represents a company in the system with basic information and audit timestamps.","title":"Company"},{"location":"core/models/database/#aniachifast.core.models.database.Company.__tablename__","text":"__tablename__ = 'companies'","title":"__tablename__"},{"location":"core/models/database/#aniachifast.core.models.database.Company.address","text":"address : Mapped [ str | None ] = mapped_column ( String ( 300 ), nullable = True )","title":"address"},{"location":"core/models/database/#aniachifast.core.models.database.Company.city","text":"city : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True )","title":"city"},{"location":"core/models/database/#aniachifast.core.models.database.Company.created_at","text":"created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , )","title":"created_at"},{"location":"core/models/database/#aniachifast.core.models.database.Company.email","text":"email : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True )","title":"email"},{"location":"core/models/database/#aniachifast.core.models.database.Company.id","text":"id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , )","title":"id"},{"location":"core/models/database/#aniachifast.core.models.database.Company.last_update","text":"last_update : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), server_onupdate = now (), nullable = False , )","title":"last_update"},{"location":"core/models/database/#aniachifast.core.models.database.Company.name","text":"name : Mapped [ str ] = mapped_column ( String ( 200 ), nullable = False )","title":"name"},{"location":"core/models/database/#aniachifast.core.models.database.Company.phone","text":"phone : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True )","title":"phone"},{"location":"core/models/database/#aniachifast.core.models.database.Company.postalcode","text":"postalcode : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True )","title":"postalcode"},{"location":"core/models/database/#aniachifast.core.models.database.Company.state","text":"state : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True )","title":"state"},{"location":"core/models/database/#aniachifast.core.models.database.Company.users","text":"users : Mapped [ list [ \"User\" ]] = relationship ( \"User\" , back_populates = \"company\" )","title":"users"},{"location":"core/models/database/#aniachifast.core.models.database.Company.uuid","text":"uuid : Mapped [ UUID ] = mapped_column ( UUID ( as_uuid = True ), unique = True , nullable = False , default = uuid4 , index = True , )","title":"uuid"},{"location":"core/models/database/#aniachifast.core.models.database.Company.website","text":"website : Mapped [ str | None ] = mapped_column ( String ( 200 ), nullable = True )","title":"website"},{"location":"core/models/database/#aniachifast.core.models.database.User","text":"Bases: Base Represents a user in the system with personal information, authentication details, and audit timestamps.","title":"User"},{"location":"core/models/database/#aniachifast.core.models.database.User.__tablename__","text":"__tablename__ = 'users'","title":"__tablename__"},{"location":"core/models/database/#aniachifast.core.models.database.User.activated_at","text":"activated_at : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True )","title":"activated_at"},{"location":"core/models/database/#aniachifast.core.models.database.User.activation_code","text":"activation_code : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True )","title":"activation_code"},{"location":"core/models/database/#aniachifast.core.models.database.User.activation_code_expires_at","text":"activation_code_expires_at : Mapped [ datetime | None ] = ( mapped_column ( DateTime ( timezone = True ), nullable = True ) )","title":"activation_code_expires_at"},{"location":"core/models/database/#aniachifast.core.models.database.User.birthdate","text":"birthdate : Mapped [ date | None ] = mapped_column ( Date , nullable = True )","title":"birthdate"},{"location":"core/models/database/#aniachifast.core.models.database.User.blocked_time","text":"blocked_time : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True , default = None )","title":"blocked_time"},{"location":"core/models/database/#aniachifast.core.models.database.User.company","text":"company : Mapped [ \"Company\" ] = relationship ( \"Company\" , back_populates = \"users\" )","title":"company"},{"location":"core/models/database/#aniachifast.core.models.database.User.company_uuid","text":"company_uuid : Mapped [ UUID | None ] = mapped_column ( UUID ( as_uuid = True ), ForeignKey ( \"companies.uuid\" ), nullable = True , index = True , )","title":"company_uuid"},{"location":"core/models/database/#aniachifast.core.models.database.User.country","text":"country : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True )","title":"country"},{"location":"core/models/database/#aniachifast.core.models.database.User.created_at","text":"created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , )","title":"created_at"},{"location":"core/models/database/#aniachifast.core.models.database.User.creditcard","text":"creditcard : Mapped [ str | None ] = mapped_column ( String ( 25 ), nullable = True )","title":"creditcard"},{"location":"core/models/database/#aniachifast.core.models.database.User.email","text":"email : Mapped [ str ] = mapped_column ( String ( 100 ), unique = True , nullable = False )","title":"email"},{"location":"core/models/database/#aniachifast.core.models.database.User.extension","text":"extension : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True )","title":"extension"},{"location":"core/models/database/#aniachifast.core.models.database.User.gender","text":"gender : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True )","title":"gender"},{"location":"core/models/database/#aniachifast.core.models.database.User.hashed_password","text":"hashed_password : Mapped [ str ] = mapped_column ( String ( 100 ), nullable = False )","title":"hashed_password"},{"location":"core/models/database/#aniachifast.core.models.database.User.id","text":"id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , )","title":"id"},{"location":"core/models/database/#aniachifast.core.models.database.User.is_active","text":"is_active : Mapped [ bool ] = mapped_column ( Boolean , default = False )","title":"is_active"},{"location":"core/models/database/#aniachifast.core.models.database.User.is_admin","text":"is_admin : Mapped [ bool ] = mapped_column ( Boolean , default = False )","title":"is_admin"},{"location":"core/models/database/#aniachifast.core.models.database.User.is_blocked","text":"is_blocked : Mapped [ bool ] = mapped_column ( Boolean , default = False , nullable = False )","title":"is_blocked"},{"location":"core/models/database/#aniachifast.core.models.database.User.is_disabled","text":"is_disabled : Mapped [ bool ] = mapped_column ( Boolean , default = False )","title":"is_disabled"},{"location":"core/models/database/#aniachifast.core.models.database.User.is_staff","text":"is_staff : Mapped [ bool ] = mapped_column ( Boolean , default = False )","title":"is_staff"},{"location":"core/models/database/#aniachifast.core.models.database.User.is_superuser","text":"is_superuser : Mapped [ bool ] = mapped_column ( Boolean , default = False )","title":"is_superuser"},{"location":"core/models/database/#aniachifast.core.models.database.User.is_verified","text":"is_verified : Mapped [ bool ] = mapped_column ( Boolean , default = False )","title":"is_verified"},{"location":"core/models/database/#aniachifast.core.models.database.User.last_login","text":"last_login : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True , default = None )","title":"last_login"},{"location":"core/models/database/#aniachifast.core.models.database.User.last_update","text":"last_update : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), server_onupdate = now (), nullable = False , )","title":"last_update"},{"location":"core/models/database/#aniachifast.core.models.database.User.login_attempt_time","text":"login_attempt_time : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True , default = None )","title":"login_attempt_time"},{"location":"core/models/database/#aniachifast.core.models.database.User.login_attempts","text":"login_attempts : Mapped [ int ] = mapped_column ( Integer , default = 0 , nullable = False )","title":"login_attempts"},{"location":"core/models/database/#aniachifast.core.models.database.User.max_requests_per_token","text":"max_requests_per_token : Mapped [ int ] = mapped_column ( Integer , default = 1000 , nullable = False )","title":"max_requests_per_token"},{"location":"core/models/database/#aniachifast.core.models.database.User.max_tokens","text":"max_tokens : Mapped [ int ] = mapped_column ( Integer , default = 5 , nullable = False )","title":"max_tokens"},{"location":"core/models/database/#aniachifast.core.models.database.User.name","text":"name : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True )","title":"name"},{"location":"core/models/database/#aniachifast.core.models.database.User.phone","text":"phone : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True )","title":"phone"},{"location":"core/models/database/#aniachifast.core.models.database.User.postalcode","text":"postalcode : Mapped [ str | None ] = mapped_column ( String ( 20 ), nullable = True )","title":"postalcode"},{"location":"core/models/database/#aniachifast.core.models.database.User.reset_code","text":"reset_code : Mapped [ str | None ] = mapped_column ( String ( 100 ), nullable = True )","title":"reset_code"},{"location":"core/models/database/#aniachifast.core.models.database.User.reset_code_expires_at","text":"reset_code_expires_at : Mapped [ datetime | None ] = ( mapped_column ( DateTime ( timezone = True ), nullable = True ) )","title":"reset_code_expires_at"},{"location":"core/models/database/#aniachifast.core.models.database.User.ssn","text":"ssn : Mapped [ str | None ] = mapped_column ( String ( 11 ), unique = True , nullable = True )","title":"ssn"},{"location":"core/models/database/#aniachifast.core.models.database.User.username","text":"username : Mapped [ str ] = mapped_column ( String ( 50 ), unique = True , nullable = False )","title":"username"},{"location":"core/models/database/#aniachifast.core.models.database.User.uuid","text":"uuid : Mapped [ UUID ] = mapped_column ( UUID ( as_uuid = True ), unique = True , nullable = False , default = uuid4 , index = True , )","title":"uuid"},{"location":"core/models/database/#aniachifast.core.models.database.User.__repr__","text":"__repr__ () -> str Return an unambiguous string representation of the User object, suitable for debugging and logging.","title":"__repr__"},{"location":"core/models/database/#aniachifast.core.models.database.User.__str__","text":"__str__ () -> str Return a human-readable string representation of the User.","title":"__str__"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken","text":"Bases: Base Represents JWT tokens issued to users for tracking usage and management.","title":"UserToken"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.__tablename__","text":"__tablename__ = 'user_tokens'","title":"__tablename__"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.created_at","text":"created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , )","title":"created_at"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.expires_at","text":"expires_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), nullable = False )","title":"expires_at"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.id","text":"id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , )","title":"id"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.is_active","text":"is_active : Mapped [ bool ] = mapped_column ( Boolean , default = True , nullable = False )","title":"is_active"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.last_used_at","text":"last_used_at : Mapped [ datetime | None ] = mapped_column ( DateTime ( timezone = True ), nullable = True )","title":"last_used_at"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.token_hash","text":"token_hash : Mapped [ str ] = mapped_column ( String ( 64 ), unique = True , nullable = False , index = True )","title":"token_hash"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.usage_count","text":"usage_count : Mapped [ int ] = mapped_column ( Integer , default = 0 , nullable = False )","title":"usage_count"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.user","text":"user = relationship ( 'User' , backref = 'tokens' )","title":"user"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.user_id","text":"user_id : Mapped [ int ] = mapped_column ( Integer , ForeignKey ( \"users.id\" ), nullable = False )","title":"user_id"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.__repr__","text":"__repr__ () -> str","title":"__repr__"},{"location":"core/models/database/#aniachifast.core.models.database.UserToken.__str__","text":"__str__ () -> str","title":"__str__"},{"location":"core/models/email/","text":"Core Models Email aniachifast.core.models.email Email domain models. This module defines the canonical data structures used for email delivery across the application. These models are part of the domain layer and must remain stable regardless of the underlying email queue or transport implementation. The primary purpose of these models is to provide: - Strong validation - Explicit contracts - Safe serialization boundaries EmailPayload Bases: BaseModel Email payload model. This model represents a validated email request before it is serialized and sent to a queue backend (e.g. SQS, Redis, in-memory queue). It is intentionally immutable to prevent accidental mutation once created, making it safe to pass across threads or async boundaries. Attributes: to ( EmailStr ) \u2013 Recipient email address. subject ( str ) \u2013 Email subject line. content ( str ) \u2013 Email body content (plain text or HTML). content_type ( Literal ['text', 'html'] ) \u2013 Email content type. Defaults to \"text\" . from_email ( EmailStr ) \u2013 Sender email address. Defaults to the configured EMAIL_FROM_ADDRESS . content class-attribute instance-attribute content : str = Field ( ... , min_length = 1 , description = \"Email body content (plain text or HTML)\" , ) content_type class-attribute instance-attribute content_type : Literal [ \"text\" , \"html\" ] = Field ( \"text\" , description = \"Email content type\" ) from_email class-attribute instance-attribute from_email : EmailStr = Field ( default_factory = lambda : EMAIL_FROM_ADDRESS , description = \"Sender email address\" , ) model_config class-attribute instance-attribute model_config = ConfigDict ( frozen = True ) subject class-attribute instance-attribute subject : str = Field ( ... , min_length = 1 , max_length = 255 , description = \"Email subject line\" , examples = [ \"Welcome to Aniachi\" ], ) to class-attribute instance-attribute to : EmailStr = Field ( ... , description = \"Recipient email address\" , examples = [ \"user@example.com\" ], ) __repr__ __repr__ () -> str Developer-friendly representation. This representation is concise and safe for logs, avoiding the inclusion of the full email content. __str__ __str__ () -> str Human-readable string representation. Intended for logging and debugging purposes.","title":"Email"},{"location":"core/models/email/#core-models-email","text":"","title":"Core Models Email"},{"location":"core/models/email/#aniachifast.core.models.email","text":"Email domain models. This module defines the canonical data structures used for email delivery across the application. These models are part of the domain layer and must remain stable regardless of the underlying email queue or transport implementation. The primary purpose of these models is to provide: - Strong validation - Explicit contracts - Safe serialization boundaries","title":"email"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload","text":"Bases: BaseModel Email payload model. This model represents a validated email request before it is serialized and sent to a queue backend (e.g. SQS, Redis, in-memory queue). It is intentionally immutable to prevent accidental mutation once created, making it safe to pass across threads or async boundaries. Attributes: to ( EmailStr ) \u2013 Recipient email address. subject ( str ) \u2013 Email subject line. content ( str ) \u2013 Email body content (plain text or HTML). content_type ( Literal ['text', 'html'] ) \u2013 Email content type. Defaults to \"text\" . from_email ( EmailStr ) \u2013 Sender email address. Defaults to the configured EMAIL_FROM_ADDRESS .","title":"EmailPayload"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.content","text":"content : str = Field ( ... , min_length = 1 , description = \"Email body content (plain text or HTML)\" , )","title":"content"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.content_type","text":"content_type : Literal [ \"text\" , \"html\" ] = Field ( \"text\" , description = \"Email content type\" )","title":"content_type"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.from_email","text":"from_email : EmailStr = Field ( default_factory = lambda : EMAIL_FROM_ADDRESS , description = \"Sender email address\" , )","title":"from_email"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.model_config","text":"model_config = ConfigDict ( frozen = True )","title":"model_config"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.subject","text":"subject : str = Field ( ... , min_length = 1 , max_length = 255 , description = \"Email subject line\" , examples = [ \"Welcome to Aniachi\" ], )","title":"subject"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.to","text":"to : EmailStr = Field ( ... , description = \"Recipient email address\" , examples = [ \"user@example.com\" ], )","title":"to"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.__repr__","text":"__repr__ () -> str Developer-friendly representation. This representation is concise and safe for logs, avoiding the inclusion of the full email content.","title":"__repr__"},{"location":"core/models/email/#aniachifast.core.models.email.EmailPayload.__str__","text":"__str__ () -> str Human-readable string representation. Intended for logging and debugging purposes.","title":"__str__"},{"location":"core/models/ledger/","text":"Core Models Ledger aniachifast.core.models.ledger Ledger domain models. This module defines the canonical domain-level data structures used for user and system activity logging across the application. These models: - Are backend-agnostic (DynamoDB, PostgreSQL, queues, etc.) - Enforce strong validation and explicit contracts - Define safe serialization boundaries - Must remain stable regardless of infrastructure changes Activity types are validated dynamically via configuration, allowing new activities to be introduced without modifying application code. ActivityPayload Bases: BaseModel User activity payload. Represents a validated activity log entry before it is serialized and dispatched to a queue or persistence layer. This model is immutable to guarantee safety when passed across threads, async tasks, or message queues. Attributes user_id : Optional[UUID] User identifier. None indicates anonymous activity. company_id : Optional[UUID] Company identifier associated with the activity. activity : str Activity name validated against configured activity types. timestamp : datetime When the activity occurred (UTC, auto-generated). ip_address : Optional[str] Client IP address (IPv4 or IPv6). user_agent : Optional[str] Client user agent string. request_id : Optional[str] Unique identifier of the originating request. metadata : Optional[Dict[str, Any]] Arbitrary contextual metadata for the activity. activity class-attribute instance-attribute activity : str = Field ( ... , min_length = 1 , max_length = 100 , description = \"Activity name (must be a configured activity type).\" , examples = [ \"login_attempt\" , \"user_registration\" ], ) company_id class-attribute instance-attribute company_id : Optional [ UUID ] = Field ( None , description = \"Company identifier associated with the activity.\" , examples = [ \"48efc1f7-a87d-4b52-a282-630c0e34abc2\" ], ) ip_address class-attribute instance-attribute ip_address : Optional [ str ] = Field ( None , max_length = 45 , description = \"Client IP address (IPv4 or IPv6).\" , examples = [ \"192.168.1.1\" , \"2001:db8::1\" ], ) metadata class-attribute instance-attribute metadata : Optional [ Dict [ str , Any ]] = Field ( None , description = \"Additional contextual metadata for the activity.\" , ) model_config class-attribute instance-attribute model_config = ConfigDict ( frozen = True ) request_id class-attribute instance-attribute request_id : Optional [ str ] = Field ( None , max_length = 255 , description = \"Unique identifier for the incoming request.\" , ) timestamp class-attribute instance-attribute timestamp : datetime = Field ( default_factory = lambda : now ( utc ), description = \"UTC timestamp of when the activity occurred.\" , ) user_agent class-attribute instance-attribute user_agent : Optional [ str ] = Field ( None , max_length = 500 , description = \"Client user agent string.\" , ) user_id class-attribute instance-attribute user_id : Optional [ UUID ] = Field ( None , description = \"User identifier (None for anonymous activities).\" , examples = [ \"48efc1f7-a87d-4b52-a282-630c0e34abc2\" ], ) __repr__ __repr__ () -> str Developer-friendly representation. Safe for logs and debugging. __str__ __str__ () -> str Human-readable representation. Intended for structured logging. validate_activity classmethod validate_activity ( value : str ) -> str Validate that the activity is a configured activity type. Parameters value : str Activity identifier. Returns str Validated activity identifier. Raises ValueError If the activity type is not configured. LedgerEvent Bases: BaseModel Read-only ledger event. Represents a normalized activity record returned from any ledger backend (e.g., DynamoDB, PostgreSQL). This model is safe to construct directly from ORM objects. activity instance-attribute activity : str company_id instance-attribute company_id : Optional [ UUID ] ip_address instance-attribute ip_address : Optional [ str ] metadata class-attribute instance-attribute metadata : Optional [ Dict [ str , Any ]] = Field ( None , alias = \"metadata_json\" ) model_config class-attribute instance-attribute model_config = ConfigDict ( from_attributes = True , populate_by_name = True ) request_id class-attribute instance-attribute request_id : Optional [ str ] = None timestamp instance-attribute timestamp : datetime user_agent instance-attribute user_agent : Optional [ str ] user_id instance-attribute user_id : Optional [ UUID ] LedgerQueryResult Bases: BaseModel Paginated ledger query result. Attributes count : int Total number of matching events. items : List[LedgerEvent] Returned ledger events. last_evaluated_key : Optional[Dict[str, Any]] Pagination cursor (backend-specific). count instance-attribute count : int items instance-attribute items : List [ LedgerEvent ] last_evaluated_key class-attribute instance-attribute last_evaluated_key : Optional [ Dict [ str , Any ]] = None","title":"Ledger"},{"location":"core/models/ledger/#core-models-ledger","text":"","title":"Core Models Ledger"},{"location":"core/models/ledger/#aniachifast.core.models.ledger","text":"Ledger domain models. This module defines the canonical domain-level data structures used for user and system activity logging across the application. These models: - Are backend-agnostic (DynamoDB, PostgreSQL, queues, etc.) - Enforce strong validation and explicit contracts - Define safe serialization boundaries - Must remain stable regardless of infrastructure changes Activity types are validated dynamically via configuration, allowing new activities to be introduced without modifying application code.","title":"ledger"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload","text":"Bases: BaseModel User activity payload. Represents a validated activity log entry before it is serialized and dispatched to a queue or persistence layer. This model is immutable to guarantee safety when passed across threads, async tasks, or message queues.","title":"ActivityPayload"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload--attributes","text":"user_id : Optional[UUID] User identifier. None indicates anonymous activity. company_id : Optional[UUID] Company identifier associated with the activity. activity : str Activity name validated against configured activity types. timestamp : datetime When the activity occurred (UTC, auto-generated). ip_address : Optional[str] Client IP address (IPv4 or IPv6). user_agent : Optional[str] Client user agent string. request_id : Optional[str] Unique identifier of the originating request. metadata : Optional[Dict[str, Any]] Arbitrary contextual metadata for the activity.","title":"Attributes"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.activity","text":"activity : str = Field ( ... , min_length = 1 , max_length = 100 , description = \"Activity name (must be a configured activity type).\" , examples = [ \"login_attempt\" , \"user_registration\" ], )","title":"activity"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.company_id","text":"company_id : Optional [ UUID ] = Field ( None , description = \"Company identifier associated with the activity.\" , examples = [ \"48efc1f7-a87d-4b52-a282-630c0e34abc2\" ], )","title":"company_id"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.ip_address","text":"ip_address : Optional [ str ] = Field ( None , max_length = 45 , description = \"Client IP address (IPv4 or IPv6).\" , examples = [ \"192.168.1.1\" , \"2001:db8::1\" ], )","title":"ip_address"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.metadata","text":"metadata : Optional [ Dict [ str , Any ]] = Field ( None , description = \"Additional contextual metadata for the activity.\" , )","title":"metadata"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.model_config","text":"model_config = ConfigDict ( frozen = True )","title":"model_config"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.request_id","text":"request_id : Optional [ str ] = Field ( None , max_length = 255 , description = \"Unique identifier for the incoming request.\" , )","title":"request_id"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.timestamp","text":"timestamp : datetime = Field ( default_factory = lambda : now ( utc ), description = \"UTC timestamp of when the activity occurred.\" , )","title":"timestamp"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.user_agent","text":"user_agent : Optional [ str ] = Field ( None , max_length = 500 , description = \"Client user agent string.\" , )","title":"user_agent"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.user_id","text":"user_id : Optional [ UUID ] = Field ( None , description = \"User identifier (None for anonymous activities).\" , examples = [ \"48efc1f7-a87d-4b52-a282-630c0e34abc2\" ], )","title":"user_id"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.__repr__","text":"__repr__ () -> str Developer-friendly representation. Safe for logs and debugging.","title":"__repr__"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.__str__","text":"__str__ () -> str Human-readable representation. Intended for structured logging.","title":"__str__"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.validate_activity","text":"validate_activity ( value : str ) -> str Validate that the activity is a configured activity type.","title":"validate_activity"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.validate_activity--parameters","text":"value : str Activity identifier.","title":"Parameters"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.validate_activity--returns","text":"str Validated activity identifier.","title":"Returns"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.ActivityPayload.validate_activity--raises","text":"ValueError If the activity type is not configured.","title":"Raises"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent","text":"Bases: BaseModel Read-only ledger event. Represents a normalized activity record returned from any ledger backend (e.g., DynamoDB, PostgreSQL). This model is safe to construct directly from ORM objects.","title":"LedgerEvent"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.activity","text":"activity : str","title":"activity"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.company_id","text":"company_id : Optional [ UUID ]","title":"company_id"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.ip_address","text":"ip_address : Optional [ str ]","title":"ip_address"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.metadata","text":"metadata : Optional [ Dict [ str , Any ]] = Field ( None , alias = \"metadata_json\" )","title":"metadata"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.model_config","text":"model_config = ConfigDict ( from_attributes = True , populate_by_name = True )","title":"model_config"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.request_id","text":"request_id : Optional [ str ] = None","title":"request_id"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.timestamp","text":"timestamp : datetime","title":"timestamp"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.user_agent","text":"user_agent : Optional [ str ]","title":"user_agent"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerEvent.user_id","text":"user_id : Optional [ UUID ]","title":"user_id"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerQueryResult","text":"Bases: BaseModel Paginated ledger query result.","title":"LedgerQueryResult"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerQueryResult--attributes","text":"count : int Total number of matching events. items : List[LedgerEvent] Returned ledger events. last_evaluated_key : Optional[Dict[str, Any]] Pagination cursor (backend-specific).","title":"Attributes"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerQueryResult.count","text":"count : int","title":"count"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerQueryResult.items","text":"items : List [ LedgerEvent ]","title":"items"},{"location":"core/models/ledger/#aniachifast.core.models.ledger.LedgerQueryResult.last_evaluated_key","text":"last_evaluated_key : Optional [ Dict [ str , Any ]] = None","title":"last_evaluated_key"},{"location":"core/models/os_process/","text":"Core Models Os Process aniachifast.core.models.os_process OS Process Models Pydantic models for operating system process information, concurrency monitoring, and debug utilities. These models provide structured data contracts for: - Process information and system monitoring - Asyncio task tracking - Thread management - Executor monitoring - Cluster-wide concurrency analysis - Debug process inspection AsyncioInfoModel Bases: BaseModel Asyncio tasks summary information. running_tasks instance-attribute running_tasks : int tasks instance-attribute tasks : list [ AsyncioTaskModel ] total_tasks instance-attribute total_tasks : int AsyncioTaskLocationModel Bases: BaseModel Location information for an asyncio task. file instance-attribute file : str function instance-attribute function : str line instance-attribute line : int AsyncioTaskModel Bases: BaseModel Individual asyncio task information. cancelled instance-attribute cancelled : bool coroutine instance-attribute coroutine : str done instance-attribute done : bool id instance-attribute id : int location instance-attribute location : Optional [ AsyncioTaskLocationModel ] name instance-attribute name : str ClusterConcurrencyModel Bases: BaseModel Complete cluster-wide concurrency information. cluster_summary instance-attribute cluster_summary : dict [ str , Any ] current_worker_details instance-attribute current_worker_details : Optional [ dict [ str , Any ]] current_worker_pid instance-attribute current_worker_pid : int ledger_estimation instance-attribute ledger_estimation : list [ dict [ str , Any ]] main_uvicorn_pid instance-attribute main_uvicorn_pid : Optional [ int ] note instance-attribute note : str timestamp instance-attribute timestamp : float workers instance-attribute workers : list [ ClusterWorkerModel ] ClusterSummaryModel Bases: BaseModel Summary statistics for the entire cluster. estimated_total_ledger_threads instance-attribute estimated_total_ledger_threads : int main_process instance-attribute main_process : Optional [ dict [ str , Any ]] total_memory_all_workers_mb instance-attribute total_memory_all_workers_mb : float total_threads_all_workers instance-attribute total_threads_all_workers : int total_uvicorn_processes instance-attribute total_uvicorn_processes : int total_workers instance-attribute total_workers : int ClusterWorkerModel Bases: BaseModel Information about a worker in a cluster. cmdline instance-attribute cmdline : str cpu_percent instance-attribute cpu_percent : float create_time instance-attribute create_time : float is_current_worker instance-attribute is_current_worker : bool is_main_process instance-attribute is_main_process : bool memory_mb instance-attribute memory_mb : float name instance-attribute name : str num_threads instance-attribute num_threads : int pid instance-attribute pid : int ppid instance-attribute ppid : int status instance-attribute status : str DebugProcessModel Bases: BaseModel Basic process information for debugging. cmdline instance-attribute cmdline : str is_current instance-attribute is_current : bool name instance-attribute name : str pid instance-attribute pid : int ppid instance-attribute ppid : int DebugProcessesInfoModel Bases: BaseModel Complete debug information about system processes. current_pid instance-attribute current_pid : int note instance-attribute note : str python_processes instance-attribute python_processes : list [ PythonProcessModel ] python_processes_count instance-attribute python_processes_count : int total_processes instance-attribute total_processes : int uvicorn_processes instance-attribute uvicorn_processes : list [ PythonProcessModel ] uvicorn_processes_count instance-attribute uvicorn_processes_count : int ExecutorInfoModel Bases: BaseModel Executor information and status. error class-attribute instance-attribute error : Optional [ str ] = None max_workers class-attribute instance-attribute max_workers : Optional [ int ] = None name instance-attribute name : str shutdown class-attribute instance-attribute shutdown : Optional [ bool ] = None thread_name_prefix class-attribute instance-attribute thread_name_prefix : Optional [ str ] = None threads_count class-attribute instance-attribute threads_count : Optional [ int | str ] = None type class-attribute instance-attribute type : Optional [ str ] = None LedgerThreadEstimationModel Bases: BaseModel Estimation of ledger threads per worker. estimated_ledger_threads instance-attribute estimated_ledger_threads : int total_threads instance-attribute total_threads : int worker_pid instance-attribute worker_pid : int MemoryInfoModel Bases: BaseModel Memory usage information. rss instance-attribute rss : str vms instance-attribute vms : str OSProcessListModel Bases: BaseModel Collection of process information. processes instance-attribute processes : list [ ProcessInfoModel ] OrderBy Bases: str , Enum Allowed fields to order OS processes. cpu class-attribute instance-attribute cpu = 'cpu' pid class-attribute instance-attribute pid = 'pid' rss class-attribute instance-attribute rss = 'rss' vms class-attribute instance-attribute vms = 'vms' ProcessInfoModel Bases: BaseModel Individual process information. cpu_percent instance-attribute cpu_percent : float name instance-attribute name : str pid instance-attribute pid : int rss instance-attribute rss : str username instance-attribute username : Optional [ str ] vms instance-attribute vms : str ProcessRuntimeInfoModel Bases: BaseModel Runtime information for a single process. cpu_percent instance-attribute cpu_percent : float create_time instance-attribute create_time : float memory instance-attribute memory : MemoryInfoModel name instance-attribute name : str num_threads instance-attribute num_threads : int pid instance-attribute pid : int status instance-attribute status : str PythonProcessModel Bases: BaseModel Detailed Python process information. cmdline instance-attribute cmdline : str is_current instance-attribute is_current : bool memory_mb instance-attribute memory_mb : float name instance-attribute name : str num_threads instance-attribute num_threads : int pid instance-attribute pid : int ppid instance-attribute ppid : int status instance-attribute status : str SingleWorkerConcurrencyModel Bases: BaseModel Complete concurrency information for a single worker. asyncio instance-attribute asyncio : AsyncioInfoModel executors instance-attribute executors : list [ ExecutorInfoModel ] process instance-attribute process : ProcessRuntimeInfoModel summary instance-attribute summary : dict [ str , Any ] threads instance-attribute threads : ThreadsInfoModel timestamp instance-attribute timestamp : float ThreadModel Bases: BaseModel Individual thread information. alive instance-attribute alive : bool daemon instance-attribute daemon : bool id instance-attribute id : Optional [ int ] name instance-attribute name : str native_id instance-attribute native_id : Optional [ int ] ThreadsInfoModel Bases: BaseModel Threads summary information. threads instance-attribute threads : list [ ThreadModel ] total_threads instance-attribute total_threads : int","title":"Os Process"},{"location":"core/models/os_process/#core-models-os-process","text":"","title":"Core Models Os Process"},{"location":"core/models/os_process/#aniachifast.core.models.os_process","text":"OS Process Models Pydantic models for operating system process information, concurrency monitoring, and debug utilities. These models provide structured data contracts for: - Process information and system monitoring - Asyncio task tracking - Thread management - Executor monitoring - Cluster-wide concurrency analysis - Debug process inspection","title":"os_process"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioInfoModel","text":"Bases: BaseModel Asyncio tasks summary information.","title":"AsyncioInfoModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioInfoModel.running_tasks","text":"running_tasks : int","title":"running_tasks"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioInfoModel.tasks","text":"tasks : list [ AsyncioTaskModel ]","title":"tasks"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioInfoModel.total_tasks","text":"total_tasks : int","title":"total_tasks"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskLocationModel","text":"Bases: BaseModel Location information for an asyncio task.","title":"AsyncioTaskLocationModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskLocationModel.file","text":"file : str","title":"file"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskLocationModel.function","text":"function : str","title":"function"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskLocationModel.line","text":"line : int","title":"line"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskModel","text":"Bases: BaseModel Individual asyncio task information.","title":"AsyncioTaskModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskModel.cancelled","text":"cancelled : bool","title":"cancelled"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskModel.coroutine","text":"coroutine : str","title":"coroutine"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskModel.done","text":"done : bool","title":"done"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskModel.id","text":"id : int","title":"id"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskModel.location","text":"location : Optional [ AsyncioTaskLocationModel ]","title":"location"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.AsyncioTaskModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel","text":"Bases: BaseModel Complete cluster-wide concurrency information.","title":"ClusterConcurrencyModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.cluster_summary","text":"cluster_summary : dict [ str , Any ]","title":"cluster_summary"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.current_worker_details","text":"current_worker_details : Optional [ dict [ str , Any ]]","title":"current_worker_details"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.current_worker_pid","text":"current_worker_pid : int","title":"current_worker_pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.ledger_estimation","text":"ledger_estimation : list [ dict [ str , Any ]]","title":"ledger_estimation"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.main_uvicorn_pid","text":"main_uvicorn_pid : Optional [ int ]","title":"main_uvicorn_pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.note","text":"note : str","title":"note"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.timestamp","text":"timestamp : float","title":"timestamp"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterConcurrencyModel.workers","text":"workers : list [ ClusterWorkerModel ]","title":"workers"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterSummaryModel","text":"Bases: BaseModel Summary statistics for the entire cluster.","title":"ClusterSummaryModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterSummaryModel.estimated_total_ledger_threads","text":"estimated_total_ledger_threads : int","title":"estimated_total_ledger_threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterSummaryModel.main_process","text":"main_process : Optional [ dict [ str , Any ]]","title":"main_process"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterSummaryModel.total_memory_all_workers_mb","text":"total_memory_all_workers_mb : float","title":"total_memory_all_workers_mb"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterSummaryModel.total_threads_all_workers","text":"total_threads_all_workers : int","title":"total_threads_all_workers"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterSummaryModel.total_uvicorn_processes","text":"total_uvicorn_processes : int","title":"total_uvicorn_processes"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterSummaryModel.total_workers","text":"total_workers : int","title":"total_workers"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel","text":"Bases: BaseModel Information about a worker in a cluster.","title":"ClusterWorkerModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.cmdline","text":"cmdline : str","title":"cmdline"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.cpu_percent","text":"cpu_percent : float","title":"cpu_percent"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.create_time","text":"create_time : float","title":"create_time"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.is_current_worker","text":"is_current_worker : bool","title":"is_current_worker"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.is_main_process","text":"is_main_process : bool","title":"is_main_process"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.memory_mb","text":"memory_mb : float","title":"memory_mb"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.num_threads","text":"num_threads : int","title":"num_threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.pid","text":"pid : int","title":"pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.ppid","text":"ppid : int","title":"ppid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ClusterWorkerModel.status","text":"status : str","title":"status"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessModel","text":"Bases: BaseModel Basic process information for debugging.","title":"DebugProcessModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessModel.cmdline","text":"cmdline : str","title":"cmdline"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessModel.is_current","text":"is_current : bool","title":"is_current"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessModel.pid","text":"pid : int","title":"pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessModel.ppid","text":"ppid : int","title":"ppid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel","text":"Bases: BaseModel Complete debug information about system processes.","title":"DebugProcessesInfoModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel.current_pid","text":"current_pid : int","title":"current_pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel.note","text":"note : str","title":"note"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel.python_processes","text":"python_processes : list [ PythonProcessModel ]","title":"python_processes"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel.python_processes_count","text":"python_processes_count : int","title":"python_processes_count"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel.total_processes","text":"total_processes : int","title":"total_processes"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel.uvicorn_processes","text":"uvicorn_processes : list [ PythonProcessModel ]","title":"uvicorn_processes"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.DebugProcessesInfoModel.uvicorn_processes_count","text":"uvicorn_processes_count : int","title":"uvicorn_processes_count"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel","text":"Bases: BaseModel Executor information and status.","title":"ExecutorInfoModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel.error","text":"error : Optional [ str ] = None","title":"error"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel.max_workers","text":"max_workers : Optional [ int ] = None","title":"max_workers"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel.shutdown","text":"shutdown : Optional [ bool ] = None","title":"shutdown"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel.thread_name_prefix","text":"thread_name_prefix : Optional [ str ] = None","title":"thread_name_prefix"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel.threads_count","text":"threads_count : Optional [ int | str ] = None","title":"threads_count"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ExecutorInfoModel.type","text":"type : Optional [ str ] = None","title":"type"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.LedgerThreadEstimationModel","text":"Bases: BaseModel Estimation of ledger threads per worker.","title":"LedgerThreadEstimationModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.LedgerThreadEstimationModel.estimated_ledger_threads","text":"estimated_ledger_threads : int","title":"estimated_ledger_threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.LedgerThreadEstimationModel.total_threads","text":"total_threads : int","title":"total_threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.LedgerThreadEstimationModel.worker_pid","text":"worker_pid : int","title":"worker_pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.MemoryInfoModel","text":"Bases: BaseModel Memory usage information.","title":"MemoryInfoModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.MemoryInfoModel.rss","text":"rss : str","title":"rss"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.MemoryInfoModel.vms","text":"vms : str","title":"vms"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.OSProcessListModel","text":"Bases: BaseModel Collection of process information.","title":"OSProcessListModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.OSProcessListModel.processes","text":"processes : list [ ProcessInfoModel ]","title":"processes"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.OrderBy","text":"Bases: str , Enum Allowed fields to order OS processes.","title":"OrderBy"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.OrderBy.cpu","text":"cpu = 'cpu'","title":"cpu"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.OrderBy.pid","text":"pid = 'pid'","title":"pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.OrderBy.rss","text":"rss = 'rss'","title":"rss"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.OrderBy.vms","text":"vms = 'vms'","title":"vms"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessInfoModel","text":"Bases: BaseModel Individual process information.","title":"ProcessInfoModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessInfoModel.cpu_percent","text":"cpu_percent : float","title":"cpu_percent"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessInfoModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessInfoModel.pid","text":"pid : int","title":"pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessInfoModel.rss","text":"rss : str","title":"rss"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessInfoModel.username","text":"username : Optional [ str ]","title":"username"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessInfoModel.vms","text":"vms : str","title":"vms"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel","text":"Bases: BaseModel Runtime information for a single process.","title":"ProcessRuntimeInfoModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel.cpu_percent","text":"cpu_percent : float","title":"cpu_percent"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel.create_time","text":"create_time : float","title":"create_time"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel.memory","text":"memory : MemoryInfoModel","title":"memory"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel.num_threads","text":"num_threads : int","title":"num_threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel.pid","text":"pid : int","title":"pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ProcessRuntimeInfoModel.status","text":"status : str","title":"status"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel","text":"Bases: BaseModel Detailed Python process information.","title":"PythonProcessModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.cmdline","text":"cmdline : str","title":"cmdline"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.is_current","text":"is_current : bool","title":"is_current"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.memory_mb","text":"memory_mb : float","title":"memory_mb"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.num_threads","text":"num_threads : int","title":"num_threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.pid","text":"pid : int","title":"pid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.ppid","text":"ppid : int","title":"ppid"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.PythonProcessModel.status","text":"status : str","title":"status"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.SingleWorkerConcurrencyModel","text":"Bases: BaseModel Complete concurrency information for a single worker.","title":"SingleWorkerConcurrencyModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.SingleWorkerConcurrencyModel.asyncio","text":"asyncio : AsyncioInfoModel","title":"asyncio"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.SingleWorkerConcurrencyModel.executors","text":"executors : list [ ExecutorInfoModel ]","title":"executors"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.SingleWorkerConcurrencyModel.process","text":"process : ProcessRuntimeInfoModel","title":"process"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.SingleWorkerConcurrencyModel.summary","text":"summary : dict [ str , Any ]","title":"summary"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.SingleWorkerConcurrencyModel.threads","text":"threads : ThreadsInfoModel","title":"threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.SingleWorkerConcurrencyModel.timestamp","text":"timestamp : float","title":"timestamp"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadModel","text":"Bases: BaseModel Individual thread information.","title":"ThreadModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadModel.alive","text":"alive : bool","title":"alive"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadModel.daemon","text":"daemon : bool","title":"daemon"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadModel.id","text":"id : Optional [ int ]","title":"id"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadModel.name","text":"name : str","title":"name"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadModel.native_id","text":"native_id : Optional [ int ]","title":"native_id"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadsInfoModel","text":"Bases: BaseModel Threads summary information.","title":"ThreadsInfoModel"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadsInfoModel.threads","text":"threads : list [ ThreadModel ]","title":"threads"},{"location":"core/models/os_process/#aniachifast.core.models.os_process.ThreadsInfoModel.total_threads","text":"total_threads : int","title":"total_threads"},{"location":"core/models/requests/","text":"Request Models aniachifast.core.models.requests Request models for API endpoints. This module contains Pydantic request models used to validate and structure incoming payloads for the API. Each model is responsible for enforcing input constraints and performing field-level validation before request data reaches the endpoint logic. Validation logic may delegate to shared utility functions to ensure consistent behavior across the application. IPRequest Bases: BaseModel Request model for endpoints that receive an IP address in the payload. This model validates that the provided IP address is a valid IPv4 or IPv6 address using a shared validation utility. Invalid values result in a 422 validation error before reaching the endpoint logic. ip_address class-attribute instance-attribute ip_address : str = Field ( ... , description = \"IPv4 or IPv6 address to lookup\" , examples = [ \"8.8.8.8\" , \"2001:4860:4860::8888\" ], ) validate_ip_address classmethod validate_ip_address ( value : str ) -> str Validate that the provided string is a valid IP address. This validator ensures that the IP address conforms to either IPv4 or IPv6 format. Validation errors are raised in a FastAPI-compatible format, resulting in an HTTP 422 response. Parameters: value ( str ) \u2013 IP address provided in the request payload. Returns: str ( str ) \u2013 The validated IP address. Raises: RequestValidationError \u2013 If the IP address format is invalid.","title":"Request Models"},{"location":"core/models/requests/#request-models","text":"","title":"Request Models"},{"location":"core/models/requests/#aniachifast.core.models.requests","text":"Request models for API endpoints. This module contains Pydantic request models used to validate and structure incoming payloads for the API. Each model is responsible for enforcing input constraints and performing field-level validation before request data reaches the endpoint logic. Validation logic may delegate to shared utility functions to ensure consistent behavior across the application.","title":"requests"},{"location":"core/models/requests/#aniachifast.core.models.requests.IPRequest","text":"Bases: BaseModel Request model for endpoints that receive an IP address in the payload. This model validates that the provided IP address is a valid IPv4 or IPv6 address using a shared validation utility. Invalid values result in a 422 validation error before reaching the endpoint logic.","title":"IPRequest"},{"location":"core/models/requests/#aniachifast.core.models.requests.IPRequest.ip_address","text":"ip_address : str = Field ( ... , description = \"IPv4 or IPv6 address to lookup\" , examples = [ \"8.8.8.8\" , \"2001:4860:4860::8888\" ], )","title":"ip_address"},{"location":"core/models/requests/#aniachifast.core.models.requests.IPRequest.validate_ip_address","text":"validate_ip_address ( value : str ) -> str Validate that the provided string is a valid IP address. This validator ensures that the IP address conforms to either IPv4 or IPv6 format. Validation errors are raised in a FastAPI-compatible format, resulting in an HTTP 422 response. Parameters: value ( str ) \u2013 IP address provided in the request payload. Returns: str ( str ) \u2013 The validated IP address. Raises: RequestValidationError \u2013 If the IP address format is invalid.","title":"validate_ip_address"},{"location":"core/models/responses/","text":"Response Models aniachifast.core.models.responses Response models for FastAPI endpoints. This module defines all Pydantic response models exposed by the API. The models are used as response_model definitions in FastAPI routes to enforce response validation and to generate accurate OpenAPI (Swagger) documentation. The responses covered by this module include: - Application and system health checks - Server and runtime diagnostics - Asyncio task inspection - Database metadata - User profile information - IP geolocation lookup results All models are designed for production use in commercial-grade APIs. AsyncioTaskModel Bases: BaseModel Representation of an asyncio Task and its execution state. cancelled class-attribute instance-attribute cancelled : bool = Field ( description = \"Whether the task was cancelled\" ) coroutine class-attribute instance-attribute coroutine : str = Field ( description = \"Coroutine associated with the task\" ) done class-attribute instance-attribute done : bool = Field ( description = \"Whether the task has completed execution\" ) id class-attribute instance-attribute id : int = Field ( description = 'Unique task identifier' ) location class-attribute instance-attribute location : Optional [ TaskLocationModel ] = Field ( description = \"Execution location metadata, if available\" ) name class-attribute instance-attribute name : str = Field ( description = 'Task name' ) AsyncioTasksResponseModel Bases: BaseModel Asyncio task inspection response. Provides aggregated task counts and detailed task metadata. running class-attribute instance-attribute running : int = Field ( description = \"Number of currently running tasks\" ) tasks class-attribute instance-attribute tasks : List [ AsyncioTaskModel ] = Field ( description = \"Detailed list of asyncio tasks\" ) total class-attribute instance-attribute total : int = Field ( description = \"Total number of asyncio tasks\" ) DbResponseInfo Bases: BaseModel Database metadata response. database_name class-attribute instance-attribute database_name : str = Field ( description = 'Database name' ) db_start_time class-attribute instance-attribute db_start_time : datetime = Field ( description = \"Database server start time\" ) db_user class-attribute instance-attribute db_user : str = Field ( description = 'Database user' ) postgres_version class-attribute instance-attribute postgres_version : str = Field ( description = \"PostgreSQL server version\" ) server_ip class-attribute instance-attribute server_ip : str = Field ( description = \"Database server IP address\" ) server_port class-attribute instance-attribute server_port : int = Field ( description = \"Database server port\" ) timezone class-attribute instance-attribute timezone : str = Field ( description = \"Database server timezone\" ) DbResponseSizeOutput Bases: BaseModel Database size response. database class-attribute instance-attribute database : str = Field ( description = 'Database name' ) size class-attribute instance-attribute size : str = Field ( description = 'Database size' ) HealthResponseModel Bases: BaseModel Basic application health response. Used by lightweight health check endpoints to confirm that the service is running and responsive. status class-attribute instance-attribute status : str = Field ( description = CURRENT_HEALTH_STATUS ) timestamp class-attribute instance-attribute timestamp : datetime = Field ( description = EPOCH_TIME_DESC ) HealthServerResponseModel Bases: BaseModel Detailed application health response including server metadata. epoch class-attribute instance-attribute epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" ) pod class-attribute instance-attribute pod : str = Field ( description = \"Pod, container, or instance identifier\" ) status class-attribute instance-attribute status : str = Field ( description = CURRENT_HEALTH_STATUS ) timestamp class-attribute instance-attribute timestamp : datetime = Field ( description = EPOCH_TIME_DESC ) tz class-attribute instance-attribute tz : str = Field ( description = 'Server timezone' ) uptime class-attribute instance-attribute uptime : str = Field ( description = APPLICATION_UPTIME ) HealthUptimeModel Bases: BaseModel Application uptime response. uptime class-attribute instance-attribute uptime : str = Field ( description = APPLICATION_UPTIME ) IPLocationResponse Bases: BaseModel IP geolocation lookup response. country class-attribute instance-attribute country : Optional [ str ] = Field ( description = \"Full country name associated with the IP address\" , examples = [ \"United States\" , \"Mexico\" , \"Unknown\" ], ) country_code class-attribute instance-attribute country_code : Optional [ str ] = Field ( description = \"ISO country code associated with the IP address\" , examples = [ \"US\" , \"MX\" , \"Unknown\" ], ) ip_address class-attribute instance-attribute ip_address : str = Field ( description = \"IP address that was looked up\" ) is_localhost class-attribute instance-attribute is_localhost : bool = Field ( description = \"Indicates whether the IP address is localhost or loopback\" , default = False , ) lookup_success class-attribute instance-attribute lookup_success : bool = Field ( description = \"Indicates whether the IP geolocation lookup succeeded\" , default = True , ) Profile Bases: BaseModel User profile representation. Used by profile-related endpoints to return identifying and contact information. birthdate class-attribute instance-attribute birthdate : date = Field ( description = 'User date of birth' ) country class-attribute instance-attribute country : str = Field ( description = 'Country of residence' ) creditcard class-attribute instance-attribute creditcard : str = Field ( description = \"Masked credit card number\" ) email class-attribute instance-attribute email : EmailStr = Field ( description = 'User email address' ) ipv4 class-attribute instance-attribute ipv4 : str = Field ( description = 'Associated IPv4 address' ) name class-attribute instance-attribute name : str = Field ( description = 'Full name of the user' ) phone class-attribute instance-attribute phone : str = Field ( description = 'Contact phone number' ) postalcode class-attribute instance-attribute postalcode : str = Field ( description = 'Postal or ZIP code' ) ssn class-attribute instance-attribute ssn : str = Field ( description = \"Masked social security number\" ) username class-attribute instance-attribute username : str = Field ( description = 'Unique username' ) ProfilesResponse Bases: BaseModel Response model containing a list of user profiles. profiles class-attribute instance-attribute profiles : List [ Profile ] = Field ( description = \"List of user profiles\" ) ResponseObjectsModel Bases: BaseModel Generic response model containing an object count and timestamp. Field aliases are used to expose human-readable keys in the API response. current_time class-attribute instance-attribute current_time : datetime = Field ( ... , alias = \"current time\" , description = \"Current server timestamp\" , ) model_config class-attribute instance-attribute model_config = { \"json_schema_extra\" : { \"by_alias\" : True , \"description\" : \"Generic response containing an object count and timestamp\" , } } total_objects class-attribute instance-attribute total_objects : str = Field ( ... , alias = \"total objects\" , description = \"Total number of objects returned or processed\" , ) ServerEpochTimeResponseModel Bases: BaseModel Server epoch time response. epoch class-attribute instance-attribute epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" ) ServerInfoResponseModel Bases: BaseModel Comprehensive server and runtime diagnostics response. Provides detailed information about the runtime environment, operating system, process state, and resource utilization. architecture class-attribute instance-attribute architecture : str = Field ( description = \"System CPU architecture\" ) cpu_frequency class-attribute instance-attribute cpu_frequency : int = Field ( description = \"CPU frequency in MHz\" ) cpus class-attribute instance-attribute cpus : int = Field ( description = \"Number of available CPU cores\" ) current_path class-attribute instance-attribute current_path : str = Field ( description = \"Current working directory of the application\" ) epoch class-attribute instance-attribute epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" ) executable class-attribute instance-attribute executable : str = Field ( description = \"Path to the Python executable\" ) fastapi_version class-attribute instance-attribute fastapi_version : str = Field ( description = \"FastAPI framework version\" ) free_memory class-attribute instance-attribute free_memory : str = Field ( description = \"Available system memory\" ) hostname class-attribute instance-attribute hostname : str = Field ( description = 'Hostname of the server' ) kernel_version class-attribute instance-attribute kernel_version : str = Field ( description = \"Operating system kernel version\" ) memory class-attribute instance-attribute memory : str = Field ( description = 'Total system memory' ) native_compiler class-attribute instance-attribute native_compiler : str = Field ( description = \"Compiler used to build Python\" ) pid class-attribute instance-attribute pid : int = Field ( description = 'Process identifier (PID)' ) port class-attribute instance-attribute port : Optional [ str ] = Field ( description = \"Server listening port\" ) process_memory class-attribute instance-attribute process_memory : str = Field ( description = \"Memory consumed by the application process\" ) python_version class-attribute instance-attribute python_version : str = Field ( description = \"Python runtime version\" ) script class-attribute instance-attribute script : List [ str ] = Field ( description = \"Command-line arguments used to start the process\" ) server_time class-attribute instance-attribute server_time : datetime = Field ( description = EPOCH_TIME_DESC ) starlette_version class-attribute instance-attribute starlette_version : str = Field ( description = \"Starlette framework version\" ) system class-attribute instance-attribute system : str = Field ( description = 'Operating system name' ) uptime class-attribute instance-attribute uptime : str = Field ( description = APPLICATION_UPTIME ) user class-attribute instance-attribute user : str = Field ( description = \"System user running the process\" ) uvicorn_version class-attribute instance-attribute uvicorn_version : str = Field ( description = \"Uvicorn ASGI server version\" ) ServerTimeResponseModel Bases: BaseModel Server time response. timestamp class-attribute instance-attribute timestamp : datetime = Field ( description = EPOCH_TIME_DESC ) SystemHealthResponseModel Bases: BaseModel System health response including memory availability metrics. epoch class-attribute instance-attribute epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" ) free class-attribute instance-attribute free : str = Field ( description = 'Available system memory' ) pod class-attribute instance-attribute pod : str = Field ( description = \"Pod, container, or instance identifier\" ) status class-attribute instance-attribute status : str = Field ( description = CURRENT_HEALTH_STATUS ) timestamp class-attribute instance-attribute timestamp : datetime = Field ( description = EPOCH_TIME_DESC ) tz class-attribute instance-attribute tz : str = Field ( description = 'Server timezone' ) uptime class-attribute instance-attribute uptime : str = Field ( description = APPLICATION_UPTIME ) TaskLocationModel Bases: BaseModel Execution location metadata for an asyncio task. file class-attribute instance-attribute file : str = Field ( description = \"Source file where the task is executing\" ) function class-attribute instance-attribute function : str = Field ( description = \"Function name associated with the task\" ) line class-attribute instance-attribute line : int = Field ( description = \"Line number in the source file\" )","title":"Response Models"},{"location":"core/models/responses/#response-models","text":"","title":"Response Models"},{"location":"core/models/responses/#aniachifast.core.models.responses","text":"Response models for FastAPI endpoints. This module defines all Pydantic response models exposed by the API. The models are used as response_model definitions in FastAPI routes to enforce response validation and to generate accurate OpenAPI (Swagger) documentation. The responses covered by this module include: - Application and system health checks - Server and runtime diagnostics - Asyncio task inspection - Database metadata - User profile information - IP geolocation lookup results All models are designed for production use in commercial-grade APIs.","title":"responses"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTaskModel","text":"Bases: BaseModel Representation of an asyncio Task and its execution state.","title":"AsyncioTaskModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTaskModel.cancelled","text":"cancelled : bool = Field ( description = \"Whether the task was cancelled\" )","title":"cancelled"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTaskModel.coroutine","text":"coroutine : str = Field ( description = \"Coroutine associated with the task\" )","title":"coroutine"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTaskModel.done","text":"done : bool = Field ( description = \"Whether the task has completed execution\" )","title":"done"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTaskModel.id","text":"id : int = Field ( description = 'Unique task identifier' )","title":"id"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTaskModel.location","text":"location : Optional [ TaskLocationModel ] = Field ( description = \"Execution location metadata, if available\" )","title":"location"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTaskModel.name","text":"name : str = Field ( description = 'Task name' )","title":"name"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTasksResponseModel","text":"Bases: BaseModel Asyncio task inspection response. Provides aggregated task counts and detailed task metadata.","title":"AsyncioTasksResponseModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTasksResponseModel.running","text":"running : int = Field ( description = \"Number of currently running tasks\" )","title":"running"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTasksResponseModel.tasks","text":"tasks : List [ AsyncioTaskModel ] = Field ( description = \"Detailed list of asyncio tasks\" )","title":"tasks"},{"location":"core/models/responses/#aniachifast.core.models.responses.AsyncioTasksResponseModel.total","text":"total : int = Field ( description = \"Total number of asyncio tasks\" )","title":"total"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo","text":"Bases: BaseModel Database metadata response.","title":"DbResponseInfo"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo.database_name","text":"database_name : str = Field ( description = 'Database name' )","title":"database_name"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo.db_start_time","text":"db_start_time : datetime = Field ( description = \"Database server start time\" )","title":"db_start_time"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo.db_user","text":"db_user : str = Field ( description = 'Database user' )","title":"db_user"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo.postgres_version","text":"postgres_version : str = Field ( description = \"PostgreSQL server version\" )","title":"postgres_version"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo.server_ip","text":"server_ip : str = Field ( description = \"Database server IP address\" )","title":"server_ip"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo.server_port","text":"server_port : int = Field ( description = \"Database server port\" )","title":"server_port"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseInfo.timezone","text":"timezone : str = Field ( description = \"Database server timezone\" )","title":"timezone"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseSizeOutput","text":"Bases: BaseModel Database size response.","title":"DbResponseSizeOutput"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseSizeOutput.database","text":"database : str = Field ( description = 'Database name' )","title":"database"},{"location":"core/models/responses/#aniachifast.core.models.responses.DbResponseSizeOutput.size","text":"size : str = Field ( description = 'Database size' )","title":"size"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthResponseModel","text":"Bases: BaseModel Basic application health response. Used by lightweight health check endpoints to confirm that the service is running and responsive.","title":"HealthResponseModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthResponseModel.status","text":"status : str = Field ( description = CURRENT_HEALTH_STATUS )","title":"status"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthResponseModel.timestamp","text":"timestamp : datetime = Field ( description = EPOCH_TIME_DESC )","title":"timestamp"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthServerResponseModel","text":"Bases: BaseModel Detailed application health response including server metadata.","title":"HealthServerResponseModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthServerResponseModel.epoch","text":"epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" )","title":"epoch"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthServerResponseModel.pod","text":"pod : str = Field ( description = \"Pod, container, or instance identifier\" )","title":"pod"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthServerResponseModel.status","text":"status : str = Field ( description = CURRENT_HEALTH_STATUS )","title":"status"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthServerResponseModel.timestamp","text":"timestamp : datetime = Field ( description = EPOCH_TIME_DESC )","title":"timestamp"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthServerResponseModel.tz","text":"tz : str = Field ( description = 'Server timezone' )","title":"tz"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthServerResponseModel.uptime","text":"uptime : str = Field ( description = APPLICATION_UPTIME )","title":"uptime"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthUptimeModel","text":"Bases: BaseModel Application uptime response.","title":"HealthUptimeModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.HealthUptimeModel.uptime","text":"uptime : str = Field ( description = APPLICATION_UPTIME )","title":"uptime"},{"location":"core/models/responses/#aniachifast.core.models.responses.IPLocationResponse","text":"Bases: BaseModel IP geolocation lookup response.","title":"IPLocationResponse"},{"location":"core/models/responses/#aniachifast.core.models.responses.IPLocationResponse.country","text":"country : Optional [ str ] = Field ( description = \"Full country name associated with the IP address\" , examples = [ \"United States\" , \"Mexico\" , \"Unknown\" ], )","title":"country"},{"location":"core/models/responses/#aniachifast.core.models.responses.IPLocationResponse.country_code","text":"country_code : Optional [ str ] = Field ( description = \"ISO country code associated with the IP address\" , examples = [ \"US\" , \"MX\" , \"Unknown\" ], )","title":"country_code"},{"location":"core/models/responses/#aniachifast.core.models.responses.IPLocationResponse.ip_address","text":"ip_address : str = Field ( description = \"IP address that was looked up\" )","title":"ip_address"},{"location":"core/models/responses/#aniachifast.core.models.responses.IPLocationResponse.is_localhost","text":"is_localhost : bool = Field ( description = \"Indicates whether the IP address is localhost or loopback\" , default = False , )","title":"is_localhost"},{"location":"core/models/responses/#aniachifast.core.models.responses.IPLocationResponse.lookup_success","text":"lookup_success : bool = Field ( description = \"Indicates whether the IP geolocation lookup succeeded\" , default = True , )","title":"lookup_success"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile","text":"Bases: BaseModel User profile representation. Used by profile-related endpoints to return identifying and contact information.","title":"Profile"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.birthdate","text":"birthdate : date = Field ( description = 'User date of birth' )","title":"birthdate"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.country","text":"country : str = Field ( description = 'Country of residence' )","title":"country"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.creditcard","text":"creditcard : str = Field ( description = \"Masked credit card number\" )","title":"creditcard"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.email","text":"email : EmailStr = Field ( description = 'User email address' )","title":"email"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.ipv4","text":"ipv4 : str = Field ( description = 'Associated IPv4 address' )","title":"ipv4"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.name","text":"name : str = Field ( description = 'Full name of the user' )","title":"name"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.phone","text":"phone : str = Field ( description = 'Contact phone number' )","title":"phone"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.postalcode","text":"postalcode : str = Field ( description = 'Postal or ZIP code' )","title":"postalcode"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.ssn","text":"ssn : str = Field ( description = \"Masked social security number\" )","title":"ssn"},{"location":"core/models/responses/#aniachifast.core.models.responses.Profile.username","text":"username : str = Field ( description = 'Unique username' )","title":"username"},{"location":"core/models/responses/#aniachifast.core.models.responses.ProfilesResponse","text":"Bases: BaseModel Response model containing a list of user profiles.","title":"ProfilesResponse"},{"location":"core/models/responses/#aniachifast.core.models.responses.ProfilesResponse.profiles","text":"profiles : List [ Profile ] = Field ( description = \"List of user profiles\" )","title":"profiles"},{"location":"core/models/responses/#aniachifast.core.models.responses.ResponseObjectsModel","text":"Bases: BaseModel Generic response model containing an object count and timestamp. Field aliases are used to expose human-readable keys in the API response.","title":"ResponseObjectsModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.ResponseObjectsModel.current_time","text":"current_time : datetime = Field ( ... , alias = \"current time\" , description = \"Current server timestamp\" , )","title":"current_time"},{"location":"core/models/responses/#aniachifast.core.models.responses.ResponseObjectsModel.model_config","text":"model_config = { \"json_schema_extra\" : { \"by_alias\" : True , \"description\" : \"Generic response containing an object count and timestamp\" , } }","title":"model_config"},{"location":"core/models/responses/#aniachifast.core.models.responses.ResponseObjectsModel.total_objects","text":"total_objects : str = Field ( ... , alias = \"total objects\" , description = \"Total number of objects returned or processed\" , )","title":"total_objects"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerEpochTimeResponseModel","text":"Bases: BaseModel Server epoch time response.","title":"ServerEpochTimeResponseModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerEpochTimeResponseModel.epoch","text":"epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" )","title":"epoch"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel","text":"Bases: BaseModel Comprehensive server and runtime diagnostics response. Provides detailed information about the runtime environment, operating system, process state, and resource utilization.","title":"ServerInfoResponseModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.architecture","text":"architecture : str = Field ( description = \"System CPU architecture\" )","title":"architecture"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.cpu_frequency","text":"cpu_frequency : int = Field ( description = \"CPU frequency in MHz\" )","title":"cpu_frequency"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.cpus","text":"cpus : int = Field ( description = \"Number of available CPU cores\" )","title":"cpus"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.current_path","text":"current_path : str = Field ( description = \"Current working directory of the application\" )","title":"current_path"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.epoch","text":"epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" )","title":"epoch"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.executable","text":"executable : str = Field ( description = \"Path to the Python executable\" )","title":"executable"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.fastapi_version","text":"fastapi_version : str = Field ( description = \"FastAPI framework version\" )","title":"fastapi_version"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.free_memory","text":"free_memory : str = Field ( description = \"Available system memory\" )","title":"free_memory"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.hostname","text":"hostname : str = Field ( description = 'Hostname of the server' )","title":"hostname"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.kernel_version","text":"kernel_version : str = Field ( description = \"Operating system kernel version\" )","title":"kernel_version"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.memory","text":"memory : str = Field ( description = 'Total system memory' )","title":"memory"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.native_compiler","text":"native_compiler : str = Field ( description = \"Compiler used to build Python\" )","title":"native_compiler"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.pid","text":"pid : int = Field ( description = 'Process identifier (PID)' )","title":"pid"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.port","text":"port : Optional [ str ] = Field ( description = \"Server listening port\" )","title":"port"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.process_memory","text":"process_memory : str = Field ( description = \"Memory consumed by the application process\" )","title":"process_memory"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.python_version","text":"python_version : str = Field ( description = \"Python runtime version\" )","title":"python_version"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.script","text":"script : List [ str ] = Field ( description = \"Command-line arguments used to start the process\" )","title":"script"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.server_time","text":"server_time : datetime = Field ( description = EPOCH_TIME_DESC )","title":"server_time"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.starlette_version","text":"starlette_version : str = Field ( description = \"Starlette framework version\" )","title":"starlette_version"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.system","text":"system : str = Field ( description = 'Operating system name' )","title":"system"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.uptime","text":"uptime : str = Field ( description = APPLICATION_UPTIME )","title":"uptime"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.user","text":"user : str = Field ( description = \"System user running the process\" )","title":"user"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerInfoResponseModel.uvicorn_version","text":"uvicorn_version : str = Field ( description = \"Uvicorn ASGI server version\" )","title":"uvicorn_version"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerTimeResponseModel","text":"Bases: BaseModel Server time response.","title":"ServerTimeResponseModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.ServerTimeResponseModel.timestamp","text":"timestamp : datetime = Field ( description = EPOCH_TIME_DESC )","title":"timestamp"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel","text":"Bases: BaseModel System health response including memory availability metrics.","title":"SystemHealthResponseModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel.epoch","text":"epoch : int = Field ( description = \"Current server time expressed as Unix epoch seconds\" )","title":"epoch"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel.free","text":"free : str = Field ( description = 'Available system memory' )","title":"free"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel.pod","text":"pod : str = Field ( description = \"Pod, container, or instance identifier\" )","title":"pod"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel.status","text":"status : str = Field ( description = CURRENT_HEALTH_STATUS )","title":"status"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel.timestamp","text":"timestamp : datetime = Field ( description = EPOCH_TIME_DESC )","title":"timestamp"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel.tz","text":"tz : str = Field ( description = 'Server timezone' )","title":"tz"},{"location":"core/models/responses/#aniachifast.core.models.responses.SystemHealthResponseModel.uptime","text":"uptime : str = Field ( description = APPLICATION_UPTIME )","title":"uptime"},{"location":"core/models/responses/#aniachifast.core.models.responses.TaskLocationModel","text":"Bases: BaseModel Execution location metadata for an asyncio task.","title":"TaskLocationModel"},{"location":"core/models/responses/#aniachifast.core.models.responses.TaskLocationModel.file","text":"file : str = Field ( description = \"Source file where the task is executing\" )","title":"file"},{"location":"core/models/responses/#aniachifast.core.models.responses.TaskLocationModel.function","text":"function : str = Field ( description = \"Function name associated with the task\" )","title":"function"},{"location":"core/models/responses/#aniachifast.core.models.responses.TaskLocationModel.line","text":"line : int = Field ( description = \"Line number in the source file\" )","title":"line"},{"location":"core/models/roles/","text":"Core Models Roles aniachifast.core.models.roles Role-Based Access Control (RBAC) Models This module defines SQLAlchemy ORM models for implementing role-based access control in the application. It includes: - Role: Defines available roles in the system - UserRole: Many-to-many relationship between users and roles Role Bases: Base Represents a role in the system with permissions and metadata. Examples of roles: 'admin', 'user', 'moderator', 'editor', etc. __tablename__ class-attribute instance-attribute __tablename__ = 'roles' created_at class-attribute instance-attribute created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , ) description class-attribute instance-attribute description : Mapped [ str | None ] = mapped_column ( Text , nullable = True ) id class-attribute instance-attribute id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , ) is_active class-attribute instance-attribute is_active : Mapped [ bool ] = mapped_column ( Boolean , default = True , nullable = False ) last_update class-attribute instance-attribute last_update : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), server_onupdate = now (), nullable = False , ) name class-attribute instance-attribute name : Mapped [ str ] = mapped_column ( String ( 50 ), unique = True , nullable = False , index = True ) user_roles class-attribute instance-attribute user_roles = relationship ( \"UserRole\" , back_populates = \"role\" ) __repr__ __repr__ () -> str __str__ __str__ () -> str UserRole Bases: Base Many-to-many relationship table between users and roles. A user can have multiple roles, and a role can be assigned to multiple users. __tablename__ class-attribute instance-attribute __tablename__ = 'user_roles' assigned_at class-attribute instance-attribute assigned_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , ) id class-attribute instance-attribute id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , ) role class-attribute instance-attribute role = relationship ( 'Role' , back_populates = 'user_roles' ) role_id class-attribute instance-attribute role_id : Mapped [ int ] = mapped_column ( Integer , ForeignKey ( \"roles.id\" , ondelete = \"CASCADE\" ), nullable = False , index = True , ) user class-attribute instance-attribute user = relationship ( 'User' , backref = 'user_roles' ) user_id class-attribute instance-attribute user_id : Mapped [ int ] = mapped_column ( Integer , ForeignKey ( \"users.id\" , ondelete = \"CASCADE\" ), nullable = False , index = True , ) __repr__ __repr__ () -> str __str__ __str__ () -> str","title":"Roles"},{"location":"core/models/roles/#core-models-roles","text":"","title":"Core Models Roles"},{"location":"core/models/roles/#aniachifast.core.models.roles","text":"","title":"roles"},{"location":"core/models/roles/#aniachifast.core.models.roles--role-based-access-control-rbac-models","text":"This module defines SQLAlchemy ORM models for implementing role-based access control in the application. It includes: - Role: Defines available roles in the system - UserRole: Many-to-many relationship between users and roles","title":"Role-Based Access Control (RBAC) Models"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role","text":"Bases: Base Represents a role in the system with permissions and metadata. Examples of roles: 'admin', 'user', 'moderator', 'editor', etc.","title":"Role"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.__tablename__","text":"__tablename__ = 'roles'","title":"__tablename__"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.created_at","text":"created_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , )","title":"created_at"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.description","text":"description : Mapped [ str | None ] = mapped_column ( Text , nullable = True )","title":"description"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.id","text":"id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , )","title":"id"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.is_active","text":"is_active : Mapped [ bool ] = mapped_column ( Boolean , default = True , nullable = False )","title":"is_active"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.last_update","text":"last_update : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), server_onupdate = now (), nullable = False , )","title":"last_update"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.name","text":"name : Mapped [ str ] = mapped_column ( String ( 50 ), unique = True , nullable = False , index = True )","title":"name"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.user_roles","text":"user_roles = relationship ( \"UserRole\" , back_populates = \"role\" )","title":"user_roles"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.__repr__","text":"__repr__ () -> str","title":"__repr__"},{"location":"core/models/roles/#aniachifast.core.models.roles.Role.__str__","text":"__str__ () -> str","title":"__str__"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole","text":"Bases: Base Many-to-many relationship table between users and roles. A user can have multiple roles, and a role can be assigned to multiple users.","title":"UserRole"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.__tablename__","text":"__tablename__ = 'user_roles'","title":"__tablename__"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.assigned_at","text":"assigned_at : Mapped [ datetime ] = mapped_column ( DateTime ( timezone = True ), server_default = now (), nullable = False , )","title":"assigned_at"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.id","text":"id : Mapped [ int ] = mapped_column ( Integer , primary_key = True , autoincrement = True , index = True , )","title":"id"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.role","text":"role = relationship ( 'Role' , back_populates = 'user_roles' )","title":"role"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.role_id","text":"role_id : Mapped [ int ] = mapped_column ( Integer , ForeignKey ( \"roles.id\" , ondelete = \"CASCADE\" ), nullable = False , index = True , )","title":"role_id"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.user","text":"user = relationship ( 'User' , backref = 'user_roles' )","title":"user"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.user_id","text":"user_id : Mapped [ int ] = mapped_column ( Integer , ForeignKey ( \"users.id\" , ondelete = \"CASCADE\" ), nullable = False , index = True , )","title":"user_id"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.__repr__","text":"__repr__ () -> str","title":"__repr__"},{"location":"core/models/roles/#aniachifast.core.models.roles.UserRole.__str__","text":"__str__ () -> str","title":"__str__"},{"location":"core/models/activity_types_helper/overview/","text":"Core Models Activity Types Helper Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Models Activity Types Helper"},{"location":"core/models/activity_types_helper/overview/#core-models-activity-types-helper","text":"","title":"Core Models Activity Types Helper"},{"location":"core/models/activity_types_helper/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/models/activity_types_helper/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/models/activity_types_helper/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/models/cloud_files/overview/","text":"Core Models Cloud Files Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Models Cloud Files"},{"location":"core/models/cloud_files/overview/#core-models-cloud-files","text":"","title":"Core Models Cloud Files"},{"location":"core/models/cloud_files/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/models/cloud_files/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/models/cloud_files/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/models/email/overview/","text":"Core Models Email Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Models Email"},{"location":"core/models/email/overview/#core-models-email","text":"","title":"Core Models Email"},{"location":"core/models/email/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/models/email/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/models/email/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/models/ledger/overview/","text":"Core Models Ledger Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Models Ledger"},{"location":"core/models/ledger/overview/#core-models-ledger","text":"","title":"Core Models Ledger"},{"location":"core/models/ledger/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/models/ledger/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/models/ledger/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/models/roles/overview/","text":"Core Models Roles Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Models Roles"},{"location":"core/models/roles/overview/#core-models-roles","text":"","title":"Core Models Roles"},{"location":"core/models/roles/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/models/roles/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/models/roles/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/queues/email_q/","text":"Core Queues Email Q aniachifast.core.queues.email_q Email queue abstraction. This module provides a minimal, framework-agnostic abstraction for enqueueing email delivery requests. The goal is to decouple request handling from the actual email delivery mechanism (e.g. SQS, Redis, in-memory, or local queues). At the moment, only a simulated implementation is provided. Real queue implementations (SQS, Redis, etc.) can be added later without changing the public interface. This module MUST NOT block HTTP request handling in production environments. The current implementation simulates latency and failures for development and testing purposes only. logger module-attribute logger = getLogger ( 'aniachifast' ) EmailQueue A static dispatcher for routing email payloads to configured backends. Overview This class acts as a facade, not a queue itself. Its primary role is to provide a single, static enqueue method that decouples the EmailHelper from concrete delivery implementations. When enqueue is called, it inspects the EMAIL_QUEUE_IMPLEMENTATION setting from the application's configuration and acts as a router to dispatch the payload to the appropriate handling logic. Implementations The dispatcher supports several backends, selected at runtime: - local : Dynamically loads and calls the callable specified in the EMAIL_BACKEND setting (e.g., a function that uses an SMTP library). This is intended for live email sending via a configured service. - test : A built-in synchronous implementation that simulates network latency and random failures. It logs the payload and does not send a real email. Useful for development and debugging. - memory , redis , sqs : Reserved names for planned future implementations that will use true queueing systems. enqueue staticmethod enqueue ( payload : EmailPayload ) -> None Enqueue an email payload for asynchronous delivery. This method does not return any delivery status. It only guarantees that the payload was accepted by the selected queue implementation. In the current test implementation: - A random delay is introduced to simulate queue latency - Failures are randomly simulated to test retry and error handling Parameters: payload ( EmailPayload ) \u2013 A dictionary containing the email data. Expected keys typically include: - to : Recipient email address - subject : Email subject - content : Email body Raises: RuntimeError \u2013 If the queue implementation is invalid If a simulated failure occurs ( test mode only) Example payload = { ... \"to\": \"user@example.com\", ... \"subject\": \"Welcome\", ... \"content\": \"Hello and welcome!\" ... } EmailQueue.enqueue(payload)","title":"Email Q"},{"location":"core/queues/email_q/#core-queues-email-q","text":"","title":"Core Queues Email Q"},{"location":"core/queues/email_q/#aniachifast.core.queues.email_q","text":"Email queue abstraction. This module provides a minimal, framework-agnostic abstraction for enqueueing email delivery requests. The goal is to decouple request handling from the actual email delivery mechanism (e.g. SQS, Redis, in-memory, or local queues). At the moment, only a simulated implementation is provided. Real queue implementations (SQS, Redis, etc.) can be added later without changing the public interface. This module MUST NOT block HTTP request handling in production environments. The current implementation simulates latency and failures for development and testing purposes only.","title":"email_q"},{"location":"core/queues/email_q/#aniachifast.core.queues.email_q.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/queues/email_q/#aniachifast.core.queues.email_q.EmailQueue","text":"A static dispatcher for routing email payloads to configured backends. Overview This class acts as a facade, not a queue itself. Its primary role is to provide a single, static enqueue method that decouples the EmailHelper from concrete delivery implementations. When enqueue is called, it inspects the EMAIL_QUEUE_IMPLEMENTATION setting from the application's configuration and acts as a router to dispatch the payload to the appropriate handling logic. Implementations The dispatcher supports several backends, selected at runtime: - local : Dynamically loads and calls the callable specified in the EMAIL_BACKEND setting (e.g., a function that uses an SMTP library). This is intended for live email sending via a configured service. - test : A built-in synchronous implementation that simulates network latency and random failures. It logs the payload and does not send a real email. Useful for development and debugging. - memory , redis , sqs : Reserved names for planned future implementations that will use true queueing systems.","title":"EmailQueue"},{"location":"core/queues/email_q/#aniachifast.core.queues.email_q.EmailQueue.enqueue","text":"enqueue ( payload : EmailPayload ) -> None Enqueue an email payload for asynchronous delivery. This method does not return any delivery status. It only guarantees that the payload was accepted by the selected queue implementation. In the current test implementation: - A random delay is introduced to simulate queue latency - Failures are randomly simulated to test retry and error handling Parameters: payload ( EmailPayload ) \u2013 A dictionary containing the email data. Expected keys typically include: - to : Recipient email address - subject : Email subject - content : Email body Raises: RuntimeError \u2013 If the queue implementation is invalid If a simulated failure occurs ( test mode only) Example payload = { ... \"to\": \"user@example.com\", ... \"subject\": \"Welcome\", ... \"content\": \"Hello and welcome!\" ... } EmailQueue.enqueue(payload)","title":"enqueue"},{"location":"core/queues/ledger_q/","text":"Core Queues Ledger Q aniachifast.core.queues.ledger_q Ledger queue abstraction. This module provides a minimal, framework-agnostic abstraction for enqueueing user activity logging requests. The goal is to decouple request handling from the actual ledger storage mechanism (e.g. database, SQS, Redis, or local queues). At the moment, only a simulated implementation is provided. Real queue implementations (database, SQS, Redis, etc.) can be added later without changing the public interface. This module MUST NOT block HTTP request handling in production environments. The current implementation simulates latency and failures for development and testing purposes only. logger module-attribute logger = getLogger ( 'aniachifast' ) LedgerQueue A static dispatcher for routing ledger activities to configured backends. Overview This class acts as a facade, not a queue itself. Its primary role is to provide a single, static enqueue method that decouples the LedgerHelper from concrete storage implementations. When enqueue is called, it inspects the LEDGER_QUEUE_IMPLEMENTATION setting from the application's configuration and acts as a router to dispatch the payload to the appropriate handling logic. Implementations The dispatcher supports several backends, selected at runtime: - test : A built-in synchronous implementation that simulates network latency and random failures. It logs the payload directly to the console. Useful for development and debugging without external dependencies. - postgresql : Dynamically loads and calls the callable specified in the LEDGER_POSTGRESQL_BACKEND setting. This backend is responsible for inserting the activity record into a PostgreSQL database. - dynamodb : Dynamically loads and calls the callable specified in the LEDGER_DYNAMODB_BACKEND setting. This backend persists the activity record to an AWS DynamoDB table. - memory , local , redis , sqs : Reserved names for planned future implementations. The public interface ( enqueue method) is designed to remain stable, allowing new backends to be added without changing the calling code. enqueue staticmethod enqueue ( payload : ActivityPayload ) -> None Enqueue an activity payload for asynchronous logging. This method does not return any logging status. It only guarantees that the payload was accepted by the selected queue implementation. In the current test implementation: - A random delay is introduced to simulate queue latency - Failures are randomly simulated to test retry and error handling Parameters: payload ( ActivityPayload ) \u2013 An ActivityPayload containing the activity data. Raises: RuntimeError \u2013 If the queue implementation is invalid If a simulated failure occurs ( test mode only) Example payload = ActivityPayload( ... user_id=\"user123\", ... activity=\"login_attempt\", ... ip_address=\"192.168.1.1\" ... ) LedgerQueue.enqueue(payload)","title":"Ledger Q"},{"location":"core/queues/ledger_q/#core-queues-ledger-q","text":"","title":"Core Queues Ledger Q"},{"location":"core/queues/ledger_q/#aniachifast.core.queues.ledger_q","text":"Ledger queue abstraction. This module provides a minimal, framework-agnostic abstraction for enqueueing user activity logging requests. The goal is to decouple request handling from the actual ledger storage mechanism (e.g. database, SQS, Redis, or local queues). At the moment, only a simulated implementation is provided. Real queue implementations (database, SQS, Redis, etc.) can be added later without changing the public interface. This module MUST NOT block HTTP request handling in production environments. The current implementation simulates latency and failures for development and testing purposes only.","title":"ledger_q"},{"location":"core/queues/ledger_q/#aniachifast.core.queues.ledger_q.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/queues/ledger_q/#aniachifast.core.queues.ledger_q.LedgerQueue","text":"A static dispatcher for routing ledger activities to configured backends. Overview This class acts as a facade, not a queue itself. Its primary role is to provide a single, static enqueue method that decouples the LedgerHelper from concrete storage implementations. When enqueue is called, it inspects the LEDGER_QUEUE_IMPLEMENTATION setting from the application's configuration and acts as a router to dispatch the payload to the appropriate handling logic. Implementations The dispatcher supports several backends, selected at runtime: - test : A built-in synchronous implementation that simulates network latency and random failures. It logs the payload directly to the console. Useful for development and debugging without external dependencies. - postgresql : Dynamically loads and calls the callable specified in the LEDGER_POSTGRESQL_BACKEND setting. This backend is responsible for inserting the activity record into a PostgreSQL database. - dynamodb : Dynamically loads and calls the callable specified in the LEDGER_DYNAMODB_BACKEND setting. This backend persists the activity record to an AWS DynamoDB table. - memory , local , redis , sqs : Reserved names for planned future implementations. The public interface ( enqueue method) is designed to remain stable, allowing new backends to be added without changing the calling code.","title":"LedgerQueue"},{"location":"core/queues/ledger_q/#aniachifast.core.queues.ledger_q.LedgerQueue.enqueue","text":"enqueue ( payload : ActivityPayload ) -> None Enqueue an activity payload for asynchronous logging. This method does not return any logging status. It only guarantees that the payload was accepted by the selected queue implementation. In the current test implementation: - A random delay is introduced to simulate queue latency - Failures are randomly simulated to test retry and error handling Parameters: payload ( ActivityPayload ) \u2013 An ActivityPayload containing the activity data. Raises: RuntimeError \u2013 If the queue implementation is invalid If a simulated failure occurs ( test mode only) Example payload = ActivityPayload( ... user_id=\"user123\", ... activity=\"login_attempt\", ... ip_address=\"192.168.1.1\" ... ) LedgerQueue.enqueue(payload)","title":"enqueue"},{"location":"core/queues/uploader_q/","text":"Core Queues Uploader Q aniachifast.core.queues.uploader_q Uploader queue dispatcher module. This module defines the UploaderQueue facade, responsible for routing validated file upload payloads to the appropriate cloud storage backend based on runtime configuration. The dispatcher does not implement a queue itself. Instead, it provides a static entry point that dynamically resolves and invokes the correct upload backend, allowing the upload pipeline to remain decoupled from provider-specific implementations. dispatch_map module-attribute dispatch_map = { \"minio\" : ( \"Uploading file to minio\" , MINIO_UPLOAD_BACKEND , ), \"aws\" : ( \"Uploading file to aws s3 bucket\" , AWS_S3_UPLOAD_BACKEND , ), \"gcp\" : ( \"Uploading file to gcp storage\" , GCP_UPLOAD_BACKEND , ), \"azure\" : ( \"Uploading file to azure storage\" , AZURE_UPLOAD_BACKEND , ), \"alicloud\" : ( \"Uploading file to alicloud oss\" , ALICLOUD_UPLOAD_BACKEND , ), \"digitalocean\" : ( \"Uploading file to digitalocean spaces\" , DIGITALOCEAN_UPLOAD_BACKEND , ), \"local_fs\" : ( \"Uploading file to local filesystem\" , FILE_LOCAL_FS_UPLOAD_BACKEND , ), } logger module-attribute logger = getLogger ( 'aniachifast' ) settings module-attribute settings = get_settings () UploaderQueue A static dispatcher for routing file uploads to configured cloud backends. Overview This class acts as a facade, not a queue itself. Its purpose is to provide a single, static enqueue method that decouples the UploaderHelper from concrete cloud storage implementations. When enqueue is called, it inspects the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION setting and acts as a router to dispatch the file payload to the correct backend logic. Implementations The dispatcher determines the target provider and then dynamically loads a callable from a provider-specific setting (e.g., AWS_S3_UPLOAD_BACKEND , MINIO_UPLOAD_BACKEND ). aws : Routes to the AWS S3 backend. minio : Routes to the MinIO S3-compatible backend. gcp : Routes to the Google Cloud Storage backend. azure : Routes to the Azure Blob Storage backend. alicloud : Routes to the Alibaba Cloud OSS backend. digitalocean : Routes to the DigitalOcean Spaces backend. test : A synchronous, in-memory implementation for debugging that simulates a delay but performs no actual upload. enqueue staticmethod enqueue ( payload : ValidatedFile ) -> None Dispatch a validated file payload to the configured upload backend. This method inspects the current application settings to determine which cloud storage provider should handle the upload. The provider implementation is then dynamically loaded and invoked. Supported implementations include cloud providers (AWS, MinIO, GCP, Azure, Alibaba Cloud, DigitalOcean), local filesystem storage, and a test backend that simulates upload latency without persisting data. Parameters: payload ( ValidatedFile ) \u2013 A validated file object containing metadata and binary content ready for upload. Raises: RuntimeError \u2013 If the configured upload implementation is not supported. Exception \u2013 Propagates any exception raised by the backend implementation after logging.","title":"Uploader Q"},{"location":"core/queues/uploader_q/#core-queues-uploader-q","text":"","title":"Core Queues Uploader Q"},{"location":"core/queues/uploader_q/#aniachifast.core.queues.uploader_q","text":"Uploader queue dispatcher module. This module defines the UploaderQueue facade, responsible for routing validated file upload payloads to the appropriate cloud storage backend based on runtime configuration. The dispatcher does not implement a queue itself. Instead, it provides a static entry point that dynamically resolves and invokes the correct upload backend, allowing the upload pipeline to remain decoupled from provider-specific implementations.","title":"uploader_q"},{"location":"core/queues/uploader_q/#aniachifast.core.queues.uploader_q.dispatch_map","text":"dispatch_map = { \"minio\" : ( \"Uploading file to minio\" , MINIO_UPLOAD_BACKEND , ), \"aws\" : ( \"Uploading file to aws s3 bucket\" , AWS_S3_UPLOAD_BACKEND , ), \"gcp\" : ( \"Uploading file to gcp storage\" , GCP_UPLOAD_BACKEND , ), \"azure\" : ( \"Uploading file to azure storage\" , AZURE_UPLOAD_BACKEND , ), \"alicloud\" : ( \"Uploading file to alicloud oss\" , ALICLOUD_UPLOAD_BACKEND , ), \"digitalocean\" : ( \"Uploading file to digitalocean spaces\" , DIGITALOCEAN_UPLOAD_BACKEND , ), \"local_fs\" : ( \"Uploading file to local filesystem\" , FILE_LOCAL_FS_UPLOAD_BACKEND , ), }","title":"dispatch_map"},{"location":"core/queues/uploader_q/#aniachifast.core.queues.uploader_q.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/queues/uploader_q/#aniachifast.core.queues.uploader_q.settings","text":"settings = get_settings ()","title":"settings"},{"location":"core/queues/uploader_q/#aniachifast.core.queues.uploader_q.UploaderQueue","text":"A static dispatcher for routing file uploads to configured cloud backends. Overview This class acts as a facade, not a queue itself. Its purpose is to provide a single, static enqueue method that decouples the UploaderHelper from concrete cloud storage implementations. When enqueue is called, it inspects the FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION setting and acts as a router to dispatch the file payload to the correct backend logic. Implementations The dispatcher determines the target provider and then dynamically loads a callable from a provider-specific setting (e.g., AWS_S3_UPLOAD_BACKEND , MINIO_UPLOAD_BACKEND ). aws : Routes to the AWS S3 backend. minio : Routes to the MinIO S3-compatible backend. gcp : Routes to the Google Cloud Storage backend. azure : Routes to the Azure Blob Storage backend. alicloud : Routes to the Alibaba Cloud OSS backend. digitalocean : Routes to the DigitalOcean Spaces backend. test : A synchronous, in-memory implementation for debugging that simulates a delay but performs no actual upload.","title":"UploaderQueue"},{"location":"core/queues/uploader_q/#aniachifast.core.queues.uploader_q.UploaderQueue.enqueue","text":"enqueue ( payload : ValidatedFile ) -> None Dispatch a validated file payload to the configured upload backend. This method inspects the current application settings to determine which cloud storage provider should handle the upload. The provider implementation is then dynamically loaded and invoked. Supported implementations include cloud providers (AWS, MinIO, GCP, Azure, Alibaba Cloud, DigitalOcean), local filesystem storage, and a test backend that simulates upload latency without persisting data. Parameters: payload ( ValidatedFile ) \u2013 A validated file object containing metadata and binary content ready for upload. Raises: RuntimeError \u2013 If the configured upload implementation is not supported. Exception \u2013 Propagates any exception raised by the backend implementation after logging.","title":"enqueue"},{"location":"core/queues/email_q/overview/","text":"Core Queues Email Q Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Queues Email Q"},{"location":"core/queues/email_q/overview/#core-queues-email-q","text":"","title":"Core Queues Email Q"},{"location":"core/queues/email_q/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/queues/email_q/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/queues/email_q/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/queues/ledger_q/overview/","text":"Core Queues Ledger Q Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Queues Ledger Q"},{"location":"core/queues/ledger_q/overview/#core-queues-ledger-q","text":"","title":"Core Queues Ledger Q"},{"location":"core/queues/ledger_q/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/queues/ledger_q/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/queues/ledger_q/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/queues/uploader_q/overview/","text":"Core Queues Uploader Q Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Queues Uploader Q"},{"location":"core/queues/uploader_q/overview/#core-queues-uploader-q","text":"","title":"Core Queues Uploader Q"},{"location":"core/queues/uploader_q/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/queues/uploader_q/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/queues/uploader_q/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/overview/","text":"Core Storage Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage"},{"location":"core/storage/overview/#core-storage","text":"","title":"Core Storage"},{"location":"core/storage/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/alicloud_impl/","text":"Core Storage Backends Alicloud Impl aniachifast.core.storage.backends.alicloud_impl Alibaba Cloud OSS storage provider. This module provides a static abstraction over Alibaba Cloud Object Storage Service (OSS) for uploading binary files. Key features Lazy, cached OSS client initialization Simple binary uploads Optional object metadata support Compatible with AliCloud OSS API logger module-attribute logger = getLogger ( 'aniachifast' ) AliCloudStorageProvider Alibaba Cloud OSS provider (static fa\u00e7ade). __init__ __init__ () -> None upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to Alibaba Cloud OSS.","title":"Alicloud Impl"},{"location":"core/storage/backends/alicloud_impl/#core-storage-backends-alicloud-impl","text":"","title":"Core Storage Backends Alicloud Impl"},{"location":"core/storage/backends/alicloud_impl/#aniachifast.core.storage.backends.alicloud_impl","text":"Alibaba Cloud OSS storage provider. This module provides a static abstraction over Alibaba Cloud Object Storage Service (OSS) for uploading binary files.","title":"alicloud_impl"},{"location":"core/storage/backends/alicloud_impl/#aniachifast.core.storage.backends.alicloud_impl--key-features","text":"Lazy, cached OSS client initialization Simple binary uploads Optional object metadata support Compatible with AliCloud OSS API","title":"Key features"},{"location":"core/storage/backends/alicloud_impl/#aniachifast.core.storage.backends.alicloud_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/storage/backends/alicloud_impl/#aniachifast.core.storage.backends.alicloud_impl.AliCloudStorageProvider","text":"Alibaba Cloud OSS provider (static fa\u00e7ade).","title":"AliCloudStorageProvider"},{"location":"core/storage/backends/alicloud_impl/#aniachifast.core.storage.backends.alicloud_impl.AliCloudStorageProvider.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/storage/backends/alicloud_impl/#aniachifast.core.storage.backends.alicloud_impl.AliCloudStorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to Alibaba Cloud OSS.","title":"upload_file"},{"location":"core/storage/backends/aws_s3_impl/","text":"Core Storage Backends Aws S3 Impl aniachifast.core.storage.backends.aws_s3_impl AWS S3 storage provider. This module provides a lightweight abstraction over Amazon S3 for uploading binary files to a configured bucket. It is intended to be used strictly as an infrastructure-layer component and must not contain business logic. Key features Lazy, cached boto3 S3 client initialization Optional custom endpoint support (LocalStack, S3-compatible) Simple binary uploads using in-memory buffers Optional object metadata support Compatible with AWS S3 and S3-compatible providers Typical use cases Persisting validated uploads Storing generated artifacts (reports, exports) Temporary or permanent object storage All configuration values are resolved lazily from application settings backed by environment variables. logger module-attribute logger = getLogger ( 'aniachifast' ) AwsS3StorageProvider AWS S3 object storage provider. This class acts as a thin fa\u00e7ade over the boto3 S3 client and exposes a minimal static interface for uploading binary objects. Static fa\u00e7ade for AWS S3 operations. This class is not meant to be instantiated. Design notes The S3 client is initialized lazily and cached (singleton-style). The provider is stateless and safe to reuse across requests. Bucket existence is assumed (AWS best practice). Supports custom endpoints (LocalStack, S3-compatible storage). Suitable for: - FastAPI dependencies - Background workers - Async task executors __init__ __init__ () -> None upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to the configured AWS S3 bucket. The file content is uploaded using an in-memory buffer via put_object . The destination object path follows the convention:: <user_id>/<filename> The resolved path is written back into payload.bucket_path as a side effect. Parameters payload : ValidatedFile A validated file descriptor containing: - content : raw binary file data - filename : original file name - content_type : MIME type - metadata : optional user-defined metadata - user_id : identifier used to namespace the object path Returns str | None The object key if the upload succeeds; otherwise None . Raises botocore.exceptions.ClientError If the upload fails due to permissions, network issues, or invalid parameters. TypeError If the payload does not conform to ValidatedFile (enforced by beartype ). Side Effects payload.bucket_path Is set to the resolved object key after a successful upload.","title":"Aws S3 Impl"},{"location":"core/storage/backends/aws_s3_impl/#core-storage-backends-aws-s3-impl","text":"","title":"Core Storage Backends Aws S3 Impl"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl","text":"AWS S3 storage provider. This module provides a lightweight abstraction over Amazon S3 for uploading binary files to a configured bucket. It is intended to be used strictly as an infrastructure-layer component and must not contain business logic.","title":"aws_s3_impl"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl--key-features","text":"Lazy, cached boto3 S3 client initialization Optional custom endpoint support (LocalStack, S3-compatible) Simple binary uploads using in-memory buffers Optional object metadata support Compatible with AWS S3 and S3-compatible providers","title":"Key features"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl--typical-use-cases","text":"Persisting validated uploads Storing generated artifacts (reports, exports) Temporary or permanent object storage All configuration values are resolved lazily from application settings backed by environment variables.","title":"Typical use cases"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider","text":"AWS S3 object storage provider. This class acts as a thin fa\u00e7ade over the boto3 S3 client and exposes a minimal static interface for uploading binary objects. Static fa\u00e7ade for AWS S3 operations. This class is not meant to be instantiated.","title":"AwsS3StorageProvider"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider--design-notes","text":"The S3 client is initialized lazily and cached (singleton-style). The provider is stateless and safe to reuse across requests. Bucket existence is assumed (AWS best practice). Supports custom endpoints (LocalStack, S3-compatible storage). Suitable for: - FastAPI dependencies - Background workers - Async task executors","title":"Design notes"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to the configured AWS S3 bucket. The file content is uploaded using an in-memory buffer via put_object . The destination object path follows the convention:: <user_id>/<filename> The resolved path is written back into payload.bucket_path as a side effect.","title":"upload_file"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider.upload_file--parameters","text":"payload : ValidatedFile A validated file descriptor containing: - content : raw binary file data - filename : original file name - content_type : MIME type - metadata : optional user-defined metadata - user_id : identifier used to namespace the object path","title":"Parameters"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider.upload_file--returns","text":"str | None The object key if the upload succeeds; otherwise None .","title":"Returns"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider.upload_file--raises","text":"botocore.exceptions.ClientError If the upload fails due to permissions, network issues, or invalid parameters. TypeError If the payload does not conform to ValidatedFile (enforced by beartype ).","title":"Raises"},{"location":"core/storage/backends/aws_s3_impl/#aniachifast.core.storage.backends.aws_s3_impl.AwsS3StorageProvider.upload_file--side-effects","text":"payload.bucket_path Is set to the resolved object key after a successful upload.","title":"Side Effects"},{"location":"core/storage/backends/azure_impl/","text":"Core Storage Backends Azure Impl aniachifast.core.storage.backends.azure_impl Azure Blob Storage provider. This module provides a lightweight abstraction over Azure Blob Storage for uploading binary files to a configured container. It is intended to be used strictly as an infrastructure-layer component and must not contain business logic. Key features Lazy, cached BlobServiceClient initialization Support for Azurite and custom endpoints Simple binary uploads using in-memory buffers Optional blob metadata support Compatible with Azure Blob Storage APIs Typical use cases Persisting validated uploads Storing generated artifacts Temporary or permanent object storage All configuration values are resolved lazily from application settings backed by environment variables. logger module-attribute logger = getLogger ( 'aniachifast' ) AzureBlobStorageProvider Azure Blob Storage object storage provider. This class acts as a thin fa\u00e7ade over the Azure Blob Storage SDK and exposes a minimal static interface for uploading binary objects. This class is not meant to be instantiated. Design notes The BlobServiceClient is initialized lazily and cached. The provider is stateless and safe to reuse across requests. Container existence is assumed (Azure best practice). Supports Azurite and custom endpoints. Suitable for: - FastAPI dependencies - Background workers - Async task executors __init__ __init__ () -> None upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to the configured Azure Blob container. The file content is uploaded directly from memory. The destination blob path follows the convention:: <user_id>/<filename> The resolved path is written back into payload.bucket_path as a side effect. Parameters payload : ValidatedFile A validated file descriptor containing: - content : raw binary file data - filename : original file name - content_type : MIME type - metadata : optional user-defined metadata - user_id : identifier used to namespace the blob path Returns str | None The blob path if the upload succeeds; otherwise None . Raises azure.core.exceptions.AzureError If the upload fails due to permissions, network issues, or invalid parameters. TypeError If the payload does not conform to ValidatedFile (enforced by beartype ). Side Effects payload.bucket_path Is set to the resolved blob path after a successful upload.","title":"Azure Impl"},{"location":"core/storage/backends/azure_impl/#core-storage-backends-azure-impl","text":"","title":"Core Storage Backends Azure Impl"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl","text":"Azure Blob Storage provider. This module provides a lightweight abstraction over Azure Blob Storage for uploading binary files to a configured container. It is intended to be used strictly as an infrastructure-layer component and must not contain business logic.","title":"azure_impl"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl--key-features","text":"Lazy, cached BlobServiceClient initialization Support for Azurite and custom endpoints Simple binary uploads using in-memory buffers Optional blob metadata support Compatible with Azure Blob Storage APIs","title":"Key features"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl--typical-use-cases","text":"Persisting validated uploads Storing generated artifacts Temporary or permanent object storage All configuration values are resolved lazily from application settings backed by environment variables.","title":"Typical use cases"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider","text":"Azure Blob Storage object storage provider. This class acts as a thin fa\u00e7ade over the Azure Blob Storage SDK and exposes a minimal static interface for uploading binary objects. This class is not meant to be instantiated.","title":"AzureBlobStorageProvider"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider--design-notes","text":"The BlobServiceClient is initialized lazily and cached. The provider is stateless and safe to reuse across requests. Container existence is assumed (Azure best practice). Supports Azurite and custom endpoints. Suitable for: - FastAPI dependencies - Background workers - Async task executors","title":"Design notes"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to the configured Azure Blob container. The file content is uploaded directly from memory. The destination blob path follows the convention:: <user_id>/<filename> The resolved path is written back into payload.bucket_path as a side effect.","title":"upload_file"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider.upload_file--parameters","text":"payload : ValidatedFile A validated file descriptor containing: - content : raw binary file data - filename : original file name - content_type : MIME type - metadata : optional user-defined metadata - user_id : identifier used to namespace the blob path","title":"Parameters"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider.upload_file--returns","text":"str | None The blob path if the upload succeeds; otherwise None .","title":"Returns"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider.upload_file--raises","text":"azure.core.exceptions.AzureError If the upload fails due to permissions, network issues, or invalid parameters. TypeError If the payload does not conform to ValidatedFile (enforced by beartype ).","title":"Raises"},{"location":"core/storage/backends/azure_impl/#aniachifast.core.storage.backends.azure_impl.AzureBlobStorageProvider.upload_file--side-effects","text":"payload.bucket_path Is set to the resolved blob path after a successful upload.","title":"Side Effects"},{"location":"core/storage/backends/digital_impl/","text":"Core Storage Backends Digital Impl aniachifast.core.storage.backends.digital_impl DigitalOcean Spaces storage provider. This module provides a static abstraction over DigitalOcean Spaces, which is fully compatible with the Amazon S3 API. Key features Lazy, cached S3 client initialization Simple binary uploads Optional object metadata support logger module-attribute logger = getLogger ( 'aniachifast' ) DigitalOceanStorageProvider DigitalOcean Spaces provider (static fa\u00e7ade). __init__ __init__ () -> None upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to DigitalOcean Spaces.","title":"Digital Impl"},{"location":"core/storage/backends/digital_impl/#core-storage-backends-digital-impl","text":"","title":"Core Storage Backends Digital Impl"},{"location":"core/storage/backends/digital_impl/#aniachifast.core.storage.backends.digital_impl","text":"DigitalOcean Spaces storage provider. This module provides a static abstraction over DigitalOcean Spaces, which is fully compatible with the Amazon S3 API.","title":"digital_impl"},{"location":"core/storage/backends/digital_impl/#aniachifast.core.storage.backends.digital_impl--key-features","text":"Lazy, cached S3 client initialization Simple binary uploads Optional object metadata support","title":"Key features"},{"location":"core/storage/backends/digital_impl/#aniachifast.core.storage.backends.digital_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/storage/backends/digital_impl/#aniachifast.core.storage.backends.digital_impl.DigitalOceanStorageProvider","text":"DigitalOcean Spaces provider (static fa\u00e7ade).","title":"DigitalOceanStorageProvider"},{"location":"core/storage/backends/digital_impl/#aniachifast.core.storage.backends.digital_impl.DigitalOceanStorageProvider.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/storage/backends/digital_impl/#aniachifast.core.storage.backends.digital_impl.DigitalOceanStorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to DigitalOcean Spaces.","title":"upload_file"},{"location":"core/storage/backends/gcp_impl/","text":"Core Storage Backends Gcp Impl aniachifast.core.storage.backends.gcp_impl Google Cloud Storage provider. This module provides a static, cached abstraction over Google Cloud Storage (GCS) for uploading binary files to a configured bucket. It is intended to be used as an infrastructure-layer component and must not contain business logic. Configuration is resolved lazily from application settings. Key features Lazy, cached GCS client initialization Automatic bucket resolution Simple binary uploads using in-memory buffers Optional object metadata support Native Google Cloud authentication support Typical use cases Persisting validated uploads Storing generated artifacts (reports, exports) Long-term object storage on GCP Authentication This provider relies on standard Google Application Default Credentials (ADC), typically supplied via: - GOOGLE_APPLICATION_CREDENTIALS environment variable - GCP workload identity (GKE, Cloud Run, etc.) logger module-attribute logger = getLogger ( 'aniachifast' ) GCSStorageProvider Google Cloud Storage provider (static fa\u00e7ade). This class exposes a minimal static interface for uploading binary objects to a GCS bucket. The client is initialized lazily and cached to avoid repeated authentication and connection overhead. This class must not be instantiated. __init__ __init__ () -> None upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to a Google Cloud Storage bucket. The final object path follows the convention:: <user_id>/<filename> Parameters payload : ValidatedFile Validated file descriptor. Returns str | None GCS object path if upload succeeds, otherwise None . Raises google.cloud.exceptions.GoogleCloudError If the upload fails.","title":"Gcp Impl"},{"location":"core/storage/backends/gcp_impl/#core-storage-backends-gcp-impl","text":"","title":"Core Storage Backends Gcp Impl"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl","text":"Google Cloud Storage provider. This module provides a static, cached abstraction over Google Cloud Storage (GCS) for uploading binary files to a configured bucket. It is intended to be used as an infrastructure-layer component and must not contain business logic. Configuration is resolved lazily from application settings.","title":"gcp_impl"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl--key-features","text":"Lazy, cached GCS client initialization Automatic bucket resolution Simple binary uploads using in-memory buffers Optional object metadata support Native Google Cloud authentication support","title":"Key features"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl--typical-use-cases","text":"Persisting validated uploads Storing generated artifacts (reports, exports) Long-term object storage on GCP","title":"Typical use cases"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl--authentication","text":"This provider relies on standard Google Application Default Credentials (ADC), typically supplied via: - GOOGLE_APPLICATION_CREDENTIALS environment variable - GCP workload identity (GKE, Cloud Run, etc.)","title":"Authentication"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl.GCSStorageProvider","text":"Google Cloud Storage provider (static fa\u00e7ade). This class exposes a minimal static interface for uploading binary objects to a GCS bucket. The client is initialized lazily and cached to avoid repeated authentication and connection overhead. This class must not be instantiated.","title":"GCSStorageProvider"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl.GCSStorageProvider.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl.GCSStorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to a Google Cloud Storage bucket. The final object path follows the convention:: <user_id>/<filename>","title":"upload_file"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl.GCSStorageProvider.upload_file--parameters","text":"payload : ValidatedFile Validated file descriptor.","title":"Parameters"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl.GCSStorageProvider.upload_file--returns","text":"str | None GCS object path if upload succeeds, otherwise None .","title":"Returns"},{"location":"core/storage/backends/gcp_impl/#aniachifast.core.storage.backends.gcp_impl.GCSStorageProvider.upload_file--raises","text":"google.cloud.exceptions.GoogleCloudError If the upload fails.","title":"Raises"},{"location":"core/storage/backends/local_fs_impl/","text":"Core Storage Backends Local Fs Impl aniachifast.core.storage.backends.local_fs_impl Local filesystem storage backend implementation. This module provides the local filesystem implementation of the application's storage backend abstraction. The concrete storage backend used at runtime is selected through application settings, specifically via: FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION When this setting is configured to use the \"local_fs\" backend, the application routes all file upload operations to this provider. This implementation is primarily intended for: - Local development - Testing environments - Single-node deployments without external object storage It persists uploaded files directly to a directory on the local filesystem. logger module-attribute logger = getLogger ( 'aniachifast' ) LocalFsStorageProvider Local filesystem storage backend. This class is a concrete implementation of the application's storage backend contract. It is selected dynamically based on the value of FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION defined in the application settings. When configured as the active backend, all validated file uploads are written directly to the local filesystem directory specified by: FILE_LOCAL_FS_UPLOAD_DIR Design notes: - This class is intentionally non-instantiable. - All functionality is exposed through static methods. - The interface is compatible with other storage backends (e.g. S3, MinIO), enabling backend swapping via configuration without changing application logic. __init__ __init__ () -> None Storage providers are selected and invoked dynamically by the storage routing layer based on configuration. Instantiating this class directly is not supported. upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str Upload a validated file using the local filesystem backend. This method is invoked by the storage routing layer when FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION is configured to use the local filesystem storage backend. The file contents are written verbatim to the directory defined by FILE_LOCAL_FS_UPLOAD_DIR . The directory is created if it does not already exist. Parameters: payload ( ValidatedFile ) \u2013 A validated file payload containing: - filename: Target filename on disk. - file_content: Raw binary contents of the file. Returns: str ( str ) \u2013 Absolute path to the stored file. Raises: ValueError \u2013 If the local filesystem upload directory is not configured. IOError \u2013 If an error occurs while writing the file to disk. Notes This storage backend always persists binary content ( ValidatedFile.content ). If the uploaded file is text-based, decoding is handled upstream and exposed via ValidatedFile.content_text . Encoding decisions are outside the responsibility of the storage layer.","title":"Local Fs Impl"},{"location":"core/storage/backends/local_fs_impl/#core-storage-backends-local-fs-impl","text":"","title":"Core Storage Backends Local Fs Impl"},{"location":"core/storage/backends/local_fs_impl/#aniachifast.core.storage.backends.local_fs_impl","text":"Local filesystem storage backend implementation. This module provides the local filesystem implementation of the application's storage backend abstraction. The concrete storage backend used at runtime is selected through application settings, specifically via: FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION When this setting is configured to use the \"local_fs\" backend, the application routes all file upload operations to this provider. This implementation is primarily intended for: - Local development - Testing environments - Single-node deployments without external object storage It persists uploaded files directly to a directory on the local filesystem.","title":"local_fs_impl"},{"location":"core/storage/backends/local_fs_impl/#aniachifast.core.storage.backends.local_fs_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/storage/backends/local_fs_impl/#aniachifast.core.storage.backends.local_fs_impl.LocalFsStorageProvider","text":"Local filesystem storage backend. This class is a concrete implementation of the application's storage backend contract. It is selected dynamically based on the value of FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION defined in the application settings. When configured as the active backend, all validated file uploads are written directly to the local filesystem directory specified by: FILE_LOCAL_FS_UPLOAD_DIR Design notes: - This class is intentionally non-instantiable. - All functionality is exposed through static methods. - The interface is compatible with other storage backends (e.g. S3, MinIO), enabling backend swapping via configuration without changing application logic.","title":"LocalFsStorageProvider"},{"location":"core/storage/backends/local_fs_impl/#aniachifast.core.storage.backends.local_fs_impl.LocalFsStorageProvider.__init__","text":"__init__ () -> None Storage providers are selected and invoked dynamically by the storage routing layer based on configuration. Instantiating this class directly is not supported.","title":"__init__"},{"location":"core/storage/backends/local_fs_impl/#aniachifast.core.storage.backends.local_fs_impl.LocalFsStorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str Upload a validated file using the local filesystem backend. This method is invoked by the storage routing layer when FILE_CLOUD_UPLOAD_BUCKET_IMPLEMENTATION is configured to use the local filesystem storage backend. The file contents are written verbatim to the directory defined by FILE_LOCAL_FS_UPLOAD_DIR . The directory is created if it does not already exist. Parameters: payload ( ValidatedFile ) \u2013 A validated file payload containing: - filename: Target filename on disk. - file_content: Raw binary contents of the file. Returns: str ( str ) \u2013 Absolute path to the stored file. Raises: ValueError \u2013 If the local filesystem upload directory is not configured. IOError \u2013 If an error occurs while writing the file to disk.","title":"upload_file"},{"location":"core/storage/backends/local_fs_impl/#aniachifast.core.storage.backends.local_fs_impl.LocalFsStorageProvider.upload_file--notes","text":"This storage backend always persists binary content ( ValidatedFile.content ). If the uploaded file is text-based, decoding is handled upstream and exposed via ValidatedFile.content_text . Encoding decisions are outside the responsibility of the storage layer.","title":"Notes"},{"location":"core/storage/backends/minio_impl/","text":"Core Storage Backends Minio Impl aniachifast.core.storage.backends.minio_impl MinIO / S3 storage provider. This module provides a lightweight abstraction over MinIO-compatible object storage (S3 API) for uploading binary files to a configured bucket. It is intended to be used as an infrastructure-layer component and must not contain business logic. Configuration is resolved lazily from application settings. Key features Lazy, cached MinIO client initialization Automatic bucket creation (idempotent) Simple binary uploads using in-memory buffers Optional object metadata support Compatible with MinIO and any S3-compatible backend Typical use cases Persisting validated uploads Storing generated artifacts (reports, exports) Temporary or permanent object storage This provider assumes credentials and connection parameters are supplied via environment-backed application settings. logger module-attribute logger = getLogger ( 'aniachifast' ) MinioStorageProvider MinIO / S3-compatible object storage provider. This class acts as a thin fa\u00e7ade over the MinIO Python SDK and exposes a minimal static interface for uploading binary objects. Static fa\u00e7ade for MinIO object storage operations. This class is not meant to be instantiated. Design notes The MinIO client is initialized lazily and cached (singleton-style). Bucket existence is validated once and is idempotent. The class itself is stateless and safe to reuse across requests. This provider is suitable for use in: - FastAPI dependencies - Background workers - Async task executors __init__ __init__ () -> None upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to the configured MinIO bucket. This method uploads the binary content contained in a :class: ValidatedFile instance to MinIO using the S3-compatible API. The object is streamed from memory using a BytesIO buffer. The final object path inside the bucket is automatically derived from the payload metadata and follows the convention:: <user_id>/<filename> The resolved path is stored back into payload.bucket_path as a side effect for downstream consumers. Parameters payload : ValidatedFile A validated file descriptor containing: - content : raw binary file data - filename : original file name - content_type : MIME type - metadata : optional user-defined metadata - user_id : identifier used to namespace the object path Returns str | None The object path inside the bucket if the upload completed successfully; otherwise None . Raises minio.error.S3Error If the upload fails due to network issues, authentication errors, missing permissions, or invalid parameters. TypeError If the provided payload does not conform to the expected ValidatedFile structure (enforced by beartype ). Side Effects payload.bucket_path Is set to the resolved object destination path after a successful upload. Examples Upload a validated file:: payload = ValidatedFile( user_id=\"user-123\", filename=\"report.pdf\", content=b\"...\", content_type=\"application/pdf\", metadata={\"source\": \"api\"}, ) path = MinioStorageProvider.upload_file(payload) assert path == \"user-123/report.pdf\" assert payload.bucket_path == path","title":"Minio Impl"},{"location":"core/storage/backends/minio_impl/#core-storage-backends-minio-impl","text":"","title":"Core Storage Backends Minio Impl"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl","text":"MinIO / S3 storage provider. This module provides a lightweight abstraction over MinIO-compatible object storage (S3 API) for uploading binary files to a configured bucket. It is intended to be used as an infrastructure-layer component and must not contain business logic. Configuration is resolved lazily from application settings.","title":"minio_impl"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl--key-features","text":"Lazy, cached MinIO client initialization Automatic bucket creation (idempotent) Simple binary uploads using in-memory buffers Optional object metadata support Compatible with MinIO and any S3-compatible backend","title":"Key features"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl--typical-use-cases","text":"Persisting validated uploads Storing generated artifacts (reports, exports) Temporary or permanent object storage This provider assumes credentials and connection parameters are supplied via environment-backed application settings.","title":"Typical use cases"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider","text":"MinIO / S3-compatible object storage provider. This class acts as a thin fa\u00e7ade over the MinIO Python SDK and exposes a minimal static interface for uploading binary objects. Static fa\u00e7ade for MinIO object storage operations. This class is not meant to be instantiated.","title":"MinioStorageProvider"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider--design-notes","text":"The MinIO client is initialized lazily and cached (singleton-style). Bucket existence is validated once and is idempotent. The class itself is stateless and safe to reuse across requests. This provider is suitable for use in: - FastAPI dependencies - Background workers - Async task executors","title":"Design notes"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider.__init__","text":"__init__ () -> None","title":"__init__"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to the configured MinIO bucket. This method uploads the binary content contained in a :class: ValidatedFile instance to MinIO using the S3-compatible API. The object is streamed from memory using a BytesIO buffer. The final object path inside the bucket is automatically derived from the payload metadata and follows the convention:: <user_id>/<filename> The resolved path is stored back into payload.bucket_path as a side effect for downstream consumers.","title":"upload_file"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider.upload_file--parameters","text":"payload : ValidatedFile A validated file descriptor containing: - content : raw binary file data - filename : original file name - content_type : MIME type - metadata : optional user-defined metadata - user_id : identifier used to namespace the object path","title":"Parameters"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider.upload_file--returns","text":"str | None The object path inside the bucket if the upload completed successfully; otherwise None .","title":"Returns"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider.upload_file--raises","text":"minio.error.S3Error If the upload fails due to network issues, authentication errors, missing permissions, or invalid parameters. TypeError If the provided payload does not conform to the expected ValidatedFile structure (enforced by beartype ).","title":"Raises"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider.upload_file--side-effects","text":"payload.bucket_path Is set to the resolved object destination path after a successful upload.","title":"Side Effects"},{"location":"core/storage/backends/minio_impl/#aniachifast.core.storage.backends.minio_impl.MinioStorageProvider.upload_file--examples","text":"Upload a validated file:: payload = ValidatedFile( user_id=\"user-123\", filename=\"report.pdf\", content=b\"...\", content_type=\"application/pdf\", metadata={\"source\": \"api\"}, ) path = MinioStorageProvider.upload_file(payload) assert path == \"user-123/report.pdf\" assert payload.bucket_path == path","title":"Examples"},{"location":"core/storage/backends/overview/","text":"Core Storage Backends Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends"},{"location":"core/storage/backends/overview/#core-storage-backends","text":"","title":"Core Storage Backends"},{"location":"core/storage/backends/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/protocols/","text":"Core Storage Backends Protocols aniachifast.core.storage.backends.protocols Common object storage provider interface. Defines the minimal contract that all object storage providers (AWS S3, Azure Blob Storage, GCP, etc.) must implement. This interface belongs to the infrastructure boundary and must not contain business logic. ObjectStorageProvider Bases: Protocol Object storage provider contract. Implementations must: - Accept a ValidatedFile payload - Upload binary content to object storage - Set payload.bucket_path as a side effect - Return the resolved object path on success upload_file staticmethod upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to object storage. Parameters payload : ValidatedFile Validated file descriptor containing binary content and immutable metadata. Returns str | None The object path if the upload succeeds; otherwise None .","title":"Protocols"},{"location":"core/storage/backends/protocols/#core-storage-backends-protocols","text":"","title":"Core Storage Backends Protocols"},{"location":"core/storage/backends/protocols/#aniachifast.core.storage.backends.protocols","text":"Common object storage provider interface. Defines the minimal contract that all object storage providers (AWS S3, Azure Blob Storage, GCP, etc.) must implement. This interface belongs to the infrastructure boundary and must not contain business logic.","title":"protocols"},{"location":"core/storage/backends/protocols/#aniachifast.core.storage.backends.protocols.ObjectStorageProvider","text":"Bases: Protocol Object storage provider contract. Implementations must: - Accept a ValidatedFile payload - Upload binary content to object storage - Set payload.bucket_path as a side effect - Return the resolved object path on success","title":"ObjectStorageProvider"},{"location":"core/storage/backends/protocols/#aniachifast.core.storage.backends.protocols.ObjectStorageProvider.upload_file","text":"upload_file ( payload : ValidatedFile ) -> str | None Upload a validated file to object storage.","title":"upload_file"},{"location":"core/storage/backends/protocols/#aniachifast.core.storage.backends.protocols.ObjectStorageProvider.upload_file--parameters","text":"payload : ValidatedFile Validated file descriptor containing binary content and immutable metadata.","title":"Parameters"},{"location":"core/storage/backends/protocols/#aniachifast.core.storage.backends.protocols.ObjectStorageProvider.upload_file--returns","text":"str | None The object path if the upload succeeds; otherwise None .","title":"Returns"},{"location":"core/storage/backends/alicloud_impl/overview/","text":"Core Storage Backends Alicloud Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends Alicloud Impl"},{"location":"core/storage/backends/alicloud_impl/overview/#core-storage-backends-alicloud-impl","text":"","title":"Core Storage Backends Alicloud Impl"},{"location":"core/storage/backends/alicloud_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/alicloud_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/alicloud_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/aws_s3_impl/overview/","text":"Core Storage Backends Aws S3 Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends Aws S3 Impl"},{"location":"core/storage/backends/aws_s3_impl/overview/#core-storage-backends-aws-s3-impl","text":"","title":"Core Storage Backends Aws S3 Impl"},{"location":"core/storage/backends/aws_s3_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/aws_s3_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/aws_s3_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/azure_impl/overview/","text":"Core Storage Backends Azure Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends Azure Impl"},{"location":"core/storage/backends/azure_impl/overview/#core-storage-backends-azure-impl","text":"","title":"Core Storage Backends Azure Impl"},{"location":"core/storage/backends/azure_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/azure_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/azure_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/digital_impl/overview/","text":"Core Storage Backends Digital Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends Digital Impl"},{"location":"core/storage/backends/digital_impl/overview/#core-storage-backends-digital-impl","text":"","title":"Core Storage Backends Digital Impl"},{"location":"core/storage/backends/digital_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/digital_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/digital_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/gcp_impl/overview/","text":"Core Storage Backends Gcp Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends Gcp Impl"},{"location":"core/storage/backends/gcp_impl/overview/#core-storage-backends-gcp-impl","text":"","title":"Core Storage Backends Gcp Impl"},{"location":"core/storage/backends/gcp_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/gcp_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/gcp_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/minio_impl/overview/","text":"Core Storage Backends Minio Impl Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends Minio Impl"},{"location":"core/storage/backends/minio_impl/overview/#core-storage-backends-minio-impl","text":"","title":"Core Storage Backends Minio Impl"},{"location":"core/storage/backends/minio_impl/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/minio_impl/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/minio_impl/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"core/storage/backends/protocols/overview/","text":"Core Storage Backends Protocols Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Core Storage Backends Protocols"},{"location":"core/storage/backends/protocols/overview/#core-storage-backends-protocols","text":"","title":"Core Storage Backends Protocols"},{"location":"core/storage/backends/protocols/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"core/storage/backends/protocols/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"core/storage/backends/protocols/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"getting-started/configuration/","text":"Configuration Guide Environment Variables Configure your application using environment variables or a .env file. Required Settings # Database DATABASE_URL=postgresql://<username>:<password>@localhost/<database> # Authentication AUTH_TYPE=database # or 'cognito' JWT_SECRET_KEY=<your-secret-key-here> JWT_ALGORITHM=HS256 JWT_EXPIRE_MINUTES=30 Optional Settings # Redis Cache REDIS_URL=redis://localhost:6379 # AWS Cognito (if using cognito auth) AWS_COGNITO_USER_POOL_ID=<your-pool-id> AWS_COGNITO_CLIENT_ID=<your-client-id> AWS_REGION=us-east-1 Configuration Module aniachifast.core.config Application configuration module. This module defines and exposes the global application settings using Pydantic BaseSettings . Configuration values are loaded from environment variables, .env files, and default values defined in code. It centralizes all runtime configuration related to: - Application behavior and feature toggles - Database and cache connectivity - Observability and logging - Static files and branding - Third-party services and infrastructure A cache accessor ( get_settings ) is provided to ensure a single settings instance is shared across the entire application lifecycle. Usage with FastAPI dependencies The get_settings() function is designed to be used as a FastAPI dependency. This allows routes, background tasks, and services to access application configuration in a consistent and testable way. Example: from fastapi import Depends, FastAPI from aniachifast.config.settings import get_settings settings = get_settings() app = FastAPI() @app.get('/health') def health(): return { 'debug': settings.DEBUG, 'timezone': settings.TIME_TZ, } Because get_settings() is wrapped with a singleton decorator, the configuration is instantiated only once and reused across all requests. This approach: - Avoids global mutable state - Plays well with FastAPI's dependency injection system - Simplifies testing and overrides get_settings cached get_settings () -> GlobalSettings Retrieve the global application settings instance. This function returns a singleton instance of the internal GlobalSettings class, ensuring that configuration is loaded and parsed only once during the application lifecycle. Returns: GlobalSettings ( GlobalSettings ) \u2013 The global application settings instance.","title":"Configuration"},{"location":"getting-started/configuration/#configuration-guide","text":"","title":"Configuration Guide"},{"location":"getting-started/configuration/#environment-variables","text":"Configure your application using environment variables or a .env file.","title":"Environment Variables"},{"location":"getting-started/configuration/#required-settings","text":"# Database DATABASE_URL=postgresql://<username>:<password>@localhost/<database> # Authentication AUTH_TYPE=database # or 'cognito' JWT_SECRET_KEY=<your-secret-key-here> JWT_ALGORITHM=HS256 JWT_EXPIRE_MINUTES=30","title":"Required Settings"},{"location":"getting-started/configuration/#optional-settings","text":"# Redis Cache REDIS_URL=redis://localhost:6379 # AWS Cognito (if using cognito auth) AWS_COGNITO_USER_POOL_ID=<your-pool-id> AWS_COGNITO_CLIENT_ID=<your-client-id> AWS_REGION=us-east-1","title":"Optional Settings"},{"location":"getting-started/configuration/#configuration-module","text":"","title":"Configuration Module"},{"location":"getting-started/configuration/#aniachifast.core.config","text":"Application configuration module. This module defines and exposes the global application settings using Pydantic BaseSettings . Configuration values are loaded from environment variables, .env files, and default values defined in code. It centralizes all runtime configuration related to: - Application behavior and feature toggles - Database and cache connectivity - Observability and logging - Static files and branding - Third-party services and infrastructure A cache accessor ( get_settings ) is provided to ensure a single settings instance is shared across the entire application lifecycle.","title":"config"},{"location":"getting-started/configuration/#aniachifast.core.config--usage-with-fastapi-dependencies","text":"The get_settings() function is designed to be used as a FastAPI dependency. This allows routes, background tasks, and services to access application configuration in a consistent and testable way. Example: from fastapi import Depends, FastAPI from aniachifast.config.settings import get_settings settings = get_settings() app = FastAPI() @app.get('/health') def health(): return { 'debug': settings.DEBUG, 'timezone': settings.TIME_TZ, } Because get_settings() is wrapped with a singleton decorator, the configuration is instantiated only once and reused across all requests. This approach: - Avoids global mutable state - Plays well with FastAPI's dependency injection system - Simplifies testing and overrides","title":"Usage with FastAPI dependencies"},{"location":"getting-started/configuration/#aniachifast.core.config.get_settings","text":"get_settings () -> GlobalSettings Retrieve the global application settings instance. This function returns a singleton instance of the internal GlobalSettings class, ensuring that configuration is loaded and parsed only once during the application lifecycle. Returns: GlobalSettings ( GlobalSettings ) \u2013 The global application settings instance.","title":"get_settings"},{"location":"getting-started/installation/","text":"Installation Requirements Python : >=3.12,<3.14 (as specified in pyproject.toml ) FastAPI Base Project Version : 0.0.59 (as specified in pyproject.toml ) Core Dependencies This project relies on several core dependencies. For a complete and up-to-date list of all dependencies and their exact version constraints, please refer to the pyproject.toml file in the project's root directory. Key dependencies include: - fastapi (version 0.128.0 from pyproject.toml ) - sqlalchemy (version 2.0.46 from pyproject.toml ) - uvicorn (version 0.40.0 from pyproject.toml - under server optional dependency) - UV package manager (recommended for dependency management) Optional Dependencies This project also provides optional dependencies for extended functionality. These can be installed to enable features such as AWS integration, Azure storage, Google Cloud Platform services, MinIO, PDF generation, or a dedicated server. To install optional dependencies, you can specify them during installation. Example: Install with UV (including 'aws' and 'pdf' optional dependencies) uv add fastapibase[aws,pdf] Example: Install with pip (including 'aws' and 'pdf' optional dependencies) pip install fastapibase[aws,pdf] Below is a list of available optional dependency groups: aws : For AWS service integration (e.g., boto3 , requests-aws4auth ). azure : For Azure storage and identity services (e.g., azure-storage-blob , azure-identity ). gcp : For Google Cloud Platform services (e.g., google-cloud-storage ). alicloud : For Alibaba Cloud OSS integration (e.g., oss2 ). minio : For MinIO storage integration (e.g., minio ). pdf : For PDF generation capabilities (e.g., xhtml2pdf , pymupdf , pypdf ). server : For running the application with a dedicated server (e.g., uvicorn ). qrcode : For QR code generation (e.g., qrcode ). full : Installs all optional dependencies ( fastapibase[aws,azure,gcp,alicloud,pdf,minio,server,qrcode] ). uv add fastapibase Install with pip pip install fastapibase Development Installation git clone <repository-url> cd fastapibase uv sync Verify Installation import fastapibase print(fastapibase.__version__)","title":"Installation"},{"location":"getting-started/installation/#installation","text":"","title":"Installation"},{"location":"getting-started/installation/#requirements","text":"Python : >=3.12,<3.14 (as specified in pyproject.toml ) FastAPI Base Project Version : 0.0.59 (as specified in pyproject.toml )","title":"Requirements"},{"location":"getting-started/installation/#core-dependencies","text":"This project relies on several core dependencies. For a complete and up-to-date list of all dependencies and their exact version constraints, please refer to the pyproject.toml file in the project's root directory. Key dependencies include: - fastapi (version 0.128.0 from pyproject.toml ) - sqlalchemy (version 2.0.46 from pyproject.toml ) - uvicorn (version 0.40.0 from pyproject.toml - under server optional dependency) - UV package manager (recommended for dependency management)","title":"Core Dependencies"},{"location":"getting-started/installation/#optional-dependencies","text":"This project also provides optional dependencies for extended functionality. These can be installed to enable features such as AWS integration, Azure storage, Google Cloud Platform services, MinIO, PDF generation, or a dedicated server. To install optional dependencies, you can specify them during installation. Example: Install with UV (including 'aws' and 'pdf' optional dependencies) uv add fastapibase[aws,pdf] Example: Install with pip (including 'aws' and 'pdf' optional dependencies) pip install fastapibase[aws,pdf] Below is a list of available optional dependency groups: aws : For AWS service integration (e.g., boto3 , requests-aws4auth ). azure : For Azure storage and identity services (e.g., azure-storage-blob , azure-identity ). gcp : For Google Cloud Platform services (e.g., google-cloud-storage ). alicloud : For Alibaba Cloud OSS integration (e.g., oss2 ). minio : For MinIO storage integration (e.g., minio ). pdf : For PDF generation capabilities (e.g., xhtml2pdf , pymupdf , pypdf ). server : For running the application with a dedicated server (e.g., uvicorn ). qrcode : For QR code generation (e.g., qrcode ). full : Installs all optional dependencies ( fastapibase[aws,azure,gcp,alicloud,pdf,minio,server,qrcode] ). uv add fastapibase","title":"Optional Dependencies"},{"location":"getting-started/installation/#install-with-pip","text":"pip install fastapibase","title":"Install with pip"},{"location":"getting-started/installation/#development-installation","text":"git clone <repository-url> cd fastapibase uv sync","title":"Development Installation"},{"location":"getting-started/installation/#verify-installation","text":"import fastapibase print(fastapibase.__version__)","title":"Verify Installation"},{"location":"getting-started/quickstart/","text":"Quick Start Basic FastAPI App from fastapi import FastAPI from aniachifast.core.config import get_settings from aniachifast.auth.auth_factory import AuthFactory app = FastAPI() settings = get_settings() # Initialize authentication auth = AuthFactory.create_auth(settings.auth_type) @app.get(\"/\") async def root(): return {\"message\": \"Hello Aniachifast!\"} @app.get(\"/protected\") async def protected_route(user=Depends(auth.get_current_user)): return {\"user\": user} Configuration Create a .env file: AUTH_TYPE=database DATABASE_URL=postgresql://<username>:<password>@localhost/<database> JWT_SECRET_KEY=<your-secret-key> Run the Application uvicorn app:app --reload","title":"Quick Start"},{"location":"getting-started/quickstart/#quick-start","text":"","title":"Quick Start"},{"location":"getting-started/quickstart/#basic-fastapi-app","text":"from fastapi import FastAPI from aniachifast.core.config import get_settings from aniachifast.auth.auth_factory import AuthFactory app = FastAPI() settings = get_settings() # Initialize authentication auth = AuthFactory.create_auth(settings.auth_type) @app.get(\"/\") async def root(): return {\"message\": \"Hello Aniachifast!\"} @app.get(\"/protected\") async def protected_route(user=Depends(auth.get_current_user)): return {\"user\": user}","title":"Basic FastAPI App"},{"location":"getting-started/quickstart/#configuration","text":"Create a .env file: AUTH_TYPE=database DATABASE_URL=postgresql://<username>:<password>@localhost/<database> JWT_SECRET_KEY=<your-secret-key>","title":"Configuration"},{"location":"getting-started/quickstart/#run-the-application","text":"uvicorn app:app --reload","title":"Run the Application"},{"location":"info/overview/","text":"Info Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Info"},{"location":"info/overview/#info","text":"","title":"Info"},{"location":"info/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"info/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"info/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"middlewares/context/","text":"Context Middleware aniachifast.middlewares.ctx_middleware Request Context Middleware. This middleware initializes the request execution context and MUST be executed before any other middleware. It injects the following attributes into request.state : request_id : str A globally unique identifier for the request start_time : float High-precision start timestamp for latency calculation It also propagates the request identifier to the response headers using X-Request-ID . Why this middleware is critical: - Enables request-scoped logging - Enables accurate execution timing - Enables trace correlation across services - Enables cryptographic response signing This middleware is considered non-negotiable for production-grade APIs. settings module-attribute settings = get_settings () RequestContextMiddleware Bases: BaseHTTPMiddleware Middleware that initializes per-request execution context. important app.add_middleware(RequestContextMiddleware) # MUST BE LAST Attributes added to request.state: request_id : str Unique identifier for the request start_time : float Request start time (perf_counter) Response headers: X-Request-ID : str Echoes the request identifier back to the client __init__ __init__ ( app ) dispatch async dispatch ( request : Request , call_next ) -> Response Initialize request context and continue request processing. Parameters request : Request Incoming HTTP request call_next : Callable Next middleware or endpoint handler Returns Response HTTP response with injected headers","title":"Context Middleware"},{"location":"middlewares/context/#context-middleware","text":"","title":"Context Middleware"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware","text":"Request Context Middleware. This middleware initializes the request execution context and MUST be executed before any other middleware. It injects the following attributes into request.state : request_id : str A globally unique identifier for the request start_time : float High-precision start timestamp for latency calculation It also propagates the request identifier to the response headers using X-Request-ID . Why this middleware is critical: - Enables request-scoped logging - Enables accurate execution timing - Enables trace correlation across services - Enables cryptographic response signing This middleware is considered non-negotiable for production-grade APIs.","title":"ctx_middleware"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.settings","text":"settings = get_settings ()","title":"settings"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.RequestContextMiddleware","text":"Bases: BaseHTTPMiddleware Middleware that initializes per-request execution context. important app.add_middleware(RequestContextMiddleware) # MUST BE LAST","title":"RequestContextMiddleware"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.RequestContextMiddleware--attributes-added-to-requeststate","text":"request_id : str Unique identifier for the request start_time : float Request start time (perf_counter)","title":"Attributes added to request.state:"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.RequestContextMiddleware--response-headers","text":"X-Request-ID : str Echoes the request identifier back to the client","title":"Response headers:"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.RequestContextMiddleware.__init__","text":"__init__ ( app )","title":"__init__"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.RequestContextMiddleware.dispatch","text":"dispatch ( request : Request , call_next ) -> Response Initialize request context and continue request processing.","title":"dispatch"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.RequestContextMiddleware.dispatch--parameters","text":"request : Request Incoming HTTP request call_next : Callable Next middleware or endpoint handler","title":"Parameters"},{"location":"middlewares/context/#aniachifast.middlewares.ctx_middleware.RequestContextMiddleware.dispatch--returns","text":"Response HTTP response with injected headers","title":"Returns"},{"location":"middlewares/cors/","text":"CORS Middleware aniachifast.middlewares.cors_middleware System CORS middleware. This module defines a system-level CORS middleware based on Starlette's CORSMiddleware . It provides a centralized and extensible entry point for configuring Cross-Origin Resource Sharing (CORS) across the application. The middleware is registered in the FastAPI middleware stack and participates in the HTTP request/response pipeline. It does not handle application lifecycle events such as startup or shutdown. This abstraction allows future extensions (logging, metrics, dynamic rules) without modifying the application setup code. settings module-attribute settings = get_settings () SystemCORSMiddleware Bases: CORSMiddleware System-level CORS middleware. This middleware extends Starlette's CORSMiddleware to provide a centralized and system-defined CORS policy for the application. It acts as a semantic wrapper, allowing future extensions such as logging, metrics, or dynamic CORS rules while preserving the default behavior of CORSMiddleware. Notes This middleware is executed as part of the HTTP request pipeline. It does not manage application lifecycle events. All standard CORSMiddleware parameters are supported. __init__ __init__ ( app )","title":"CORS Middleware"},{"location":"middlewares/cors/#cors-middleware","text":"","title":"CORS Middleware"},{"location":"middlewares/cors/#aniachifast.middlewares.cors_middleware","text":"System CORS middleware. This module defines a system-level CORS middleware based on Starlette's CORSMiddleware . It provides a centralized and extensible entry point for configuring Cross-Origin Resource Sharing (CORS) across the application. The middleware is registered in the FastAPI middleware stack and participates in the HTTP request/response pipeline. It does not handle application lifecycle events such as startup or shutdown. This abstraction allows future extensions (logging, metrics, dynamic rules) without modifying the application setup code.","title":"cors_middleware"},{"location":"middlewares/cors/#aniachifast.middlewares.cors_middleware.settings","text":"settings = get_settings ()","title":"settings"},{"location":"middlewares/cors/#aniachifast.middlewares.cors_middleware.SystemCORSMiddleware","text":"Bases: CORSMiddleware System-level CORS middleware. This middleware extends Starlette's CORSMiddleware to provide a centralized and system-defined CORS policy for the application. It acts as a semantic wrapper, allowing future extensions such as logging, metrics, or dynamic CORS rules while preserving the default behavior of CORSMiddleware. Notes This middleware is executed as part of the HTTP request pipeline. It does not manage application lifecycle events. All standard CORSMiddleware parameters are supported.","title":"SystemCORSMiddleware"},{"location":"middlewares/cors/#aniachifast.middlewares.cors_middleware.SystemCORSMiddleware.__init__","text":"__init__ ( app )","title":"__init__"},{"location":"middlewares/logging/","text":"Logging Middleware aniachifast.middlewares.log_middleware HTTP request/response logging middleware. This module defines a FastAPI/Starlette middleware responsible for logging incoming HTTP requests and their corresponding responses. It captures: HTTP method Request path Response status code Processing duration Response size (when available) Logs are written to a rotating file handler to prevent uncontrolled disk usage and can be extended to include console logging or external log collectors. This middleware operates exclusively in the HTTP request/response pipeline and does not interact with application lifecycle events (startup/shutdown). CallNext module-attribute CallNext = Callable [[ Request ], Awaitable [ Response ]] console_handler module-attribute console_handler = StreamHandler ( stdout ) file_handler module-attribute file_handler = RotatingFileHandler ( filename = LOG_FILE , maxBytes = LOG_MAX_SIZE , backupCount = LOG_ROTATING , encoding = \"utf-8\" , ) logger module-attribute logger = getLogger ( 'aniachifast' ) settings module-attribute settings = get_settings () LogMiddleware Bases: BaseHTTPMiddleware Middleware Class that logs HTTP requests and responses. The middleware intercepts each request, measures execution time, captures response metadata, and logs structured information using the configured application logger. In case of unhandled exceptions during request processing, the middleware logs the error and returns a standardized JSON 500 response. app_started instance-attribute app_started = False __init__ __init__ ( app ) dispatch async dispatch ( request : Request , call_next : CallNext ) -> Response Process an incoming HTTP request and log its execution details. This method measures request execution time, logs the HTTP method, path, status code, response size, and total processing duration. If an exception occurs during request handling, it is logged and a generic HTTP 500 JSON response is returned. Parameters: request ( Request ) \u2013 Incoming HTTP request. call_next ( Callable ) \u2013 Next handler in the middleware chain. Returns: Response ( Response ) \u2013 The HTTP response generated by the application or Response \u2013 an internal error response in case of failure. Response \u2013 TODO remove prints","title":"Logging Middleware"},{"location":"middlewares/logging/#logging-middleware","text":"","title":"Logging Middleware"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware","text":"HTTP request/response logging middleware. This module defines a FastAPI/Starlette middleware responsible for logging incoming HTTP requests and their corresponding responses. It captures: HTTP method Request path Response status code Processing duration Response size (when available) Logs are written to a rotating file handler to prevent uncontrolled disk usage and can be extended to include console logging or external log collectors. This middleware operates exclusively in the HTTP request/response pipeline and does not interact with application lifecycle events (startup/shutdown).","title":"log_middleware"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.CallNext","text":"CallNext = Callable [[ Request ], Awaitable [ Response ]]","title":"CallNext"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.console_handler","text":"console_handler = StreamHandler ( stdout )","title":"console_handler"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.file_handler","text":"file_handler = RotatingFileHandler ( filename = LOG_FILE , maxBytes = LOG_MAX_SIZE , backupCount = LOG_ROTATING , encoding = \"utf-8\" , )","title":"file_handler"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.settings","text":"settings = get_settings ()","title":"settings"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.LogMiddleware","text":"Bases: BaseHTTPMiddleware Middleware Class that logs HTTP requests and responses. The middleware intercepts each request, measures execution time, captures response metadata, and logs structured information using the configured application logger. In case of unhandled exceptions during request processing, the middleware logs the error and returns a standardized JSON 500 response.","title":"LogMiddleware"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.LogMiddleware.app_started","text":"app_started = False","title":"app_started"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.LogMiddleware.__init__","text":"__init__ ( app )","title":"__init__"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.LogMiddleware.dispatch","text":"dispatch ( request : Request , call_next : CallNext ) -> Response Process an incoming HTTP request and log its execution details. This method measures request execution time, logs the HTTP method, path, status code, response size, and total processing duration. If an exception occurs during request handling, it is logged and a generic HTTP 500 JSON response is returned. Parameters: request ( Request ) \u2013 Incoming HTTP request. call_next ( Callable ) \u2013 Next handler in the middleware chain. Returns: Response ( Response ) \u2013 The HTTP response generated by the application or Response \u2013 an internal error response in case of failure. Response \u2013","title":"dispatch"},{"location":"middlewares/logging/#aniachifast.middlewares.log_middleware.LogMiddleware.dispatch--todo-remove-prints","text":"","title":"TODO remove prints"},{"location":"middlewares/overview/","text":"Middlewares Overview This section provides an overview of the middlewares components. Components Usage Examples","title":"Overview"},{"location":"middlewares/overview/#middlewares-overview","text":"This section provides an overview of the middlewares components.","title":"Middlewares Overview"},{"location":"middlewares/overview/#components","text":"","title":"Components"},{"location":"middlewares/overview/#usage-examples","text":"","title":"Usage Examples"},{"location":"middlewares/prometheus/","text":"Prometheus Middleware aniachifast.middlewares.prometheus_middleware Prometheus metrics middleware and Pushgateway integration. This module provides a FastAPI middleware for collecting HTTP request metrics and an asynchronous background task for pushing those metrics to a Prometheus Pushgateway. Features: - Counts total HTTP requests grouped by method and endpoint. - Measures request latency per endpoint. - Periodically pushes collected metrics to a Prometheus Pushgateway. Typical usage: - Register StatsMiddleware as a FastAPI middleware. - Start push_metrics_periodically as a background task during application startup. This design is suitable for containerized or short-lived workloads where pulling metrics directly is not feasible and Pushgateway is required. REQUEST_COUNT module-attribute REQUEST_COUNT = Counter ( \"http_requests_total\" , \"Total HTTP requests\" , [ \"method\" , \"endpoint\" ], ) REQUEST_LATENCY module-attribute REQUEST_LATENCY = Histogram ( \"http_request_duration_seconds\" , \"HTTP request latency\" , [ \"endpoint\" ], ) settings module-attribute settings = get_settings () StatsMiddleware Bases: BaseHTTPMiddleware FastAPI middleware for collecting HTTP request metrics. This middleware records: - The total number of HTTP requests. - The latency of each request. Metrics are labeled by HTTP method and request endpoint and stored in Prometheus counters and histograms. Usage example: from fastapi import FastAPI from aniachifast.monitoring.prometheus_middleware import StatsMiddleware app = FastAPI() app.add_middleware(StatsMiddleware) The collected metrics can later be pushed to a Prometheus Pushgateway using the push_metrics_periodically task. __init__ __init__ ( app ) dispatch async dispatch ( request : Request , call_next ) Process an incoming HTTP request and record metrics. Measures request execution time and updates Prometheus counters and histograms using the request method and path as metric labels. push_metrics_periodically async push_metrics_periodically () Periodically push collected Prometheus metrics to a Pushgateway. This coroutine runs indefinitely and pushes the current values of all registered HTTP metrics to the configured Prometheus Pushgateway at a fixed interval. The interval and Pushgateway URL are obtained from application settings. Intended usage: from fastapi import FastAPI import asyncio app = FastAPI() #TODO revisar como se integraria al lifespan task This approach is recommended for: - Background workers - Serverless environments - Containers where Prometheus cannot scrape metrics directly","title":"Prometheus Middleware"},{"location":"middlewares/prometheus/#prometheus-middleware","text":"","title":"Prometheus Middleware"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware","text":"Prometheus metrics middleware and Pushgateway integration. This module provides a FastAPI middleware for collecting HTTP request metrics and an asynchronous background task for pushing those metrics to a Prometheus Pushgateway. Features: - Counts total HTTP requests grouped by method and endpoint. - Measures request latency per endpoint. - Periodically pushes collected metrics to a Prometheus Pushgateway. Typical usage: - Register StatsMiddleware as a FastAPI middleware. - Start push_metrics_periodically as a background task during application startup. This design is suitable for containerized or short-lived workloads where pulling metrics directly is not feasible and Pushgateway is required.","title":"prometheus_middleware"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware.REQUEST_COUNT","text":"REQUEST_COUNT = Counter ( \"http_requests_total\" , \"Total HTTP requests\" , [ \"method\" , \"endpoint\" ], )","title":"REQUEST_COUNT"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware.REQUEST_LATENCY","text":"REQUEST_LATENCY = Histogram ( \"http_request_duration_seconds\" , \"HTTP request latency\" , [ \"endpoint\" ], )","title":"REQUEST_LATENCY"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware.settings","text":"settings = get_settings ()","title":"settings"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware.StatsMiddleware","text":"Bases: BaseHTTPMiddleware FastAPI middleware for collecting HTTP request metrics. This middleware records: - The total number of HTTP requests. - The latency of each request. Metrics are labeled by HTTP method and request endpoint and stored in Prometheus counters and histograms. Usage example: from fastapi import FastAPI from aniachifast.monitoring.prometheus_middleware import StatsMiddleware app = FastAPI() app.add_middleware(StatsMiddleware) The collected metrics can later be pushed to a Prometheus Pushgateway using the push_metrics_periodically task.","title":"StatsMiddleware"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware.StatsMiddleware.__init__","text":"__init__ ( app )","title":"__init__"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware.StatsMiddleware.dispatch","text":"dispatch ( request : Request , call_next ) Process an incoming HTTP request and record metrics. Measures request execution time and updates Prometheus counters and histograms using the request method and path as metric labels.","title":"dispatch"},{"location":"middlewares/prometheus/#aniachifast.middlewares.prometheus_middleware.push_metrics_periodically","text":"push_metrics_periodically () Periodically push collected Prometheus metrics to a Pushgateway. This coroutine runs indefinitely and pushes the current values of all registered HTTP metrics to the configured Prometheus Pushgateway at a fixed interval. The interval and Pushgateway URL are obtained from application settings. Intended usage: from fastapi import FastAPI import asyncio app = FastAPI() #TODO revisar como se integraria al lifespan task This approach is recommended for: - Background workers - Serverless environments - Containers where Prometheus cannot scrape metrics directly","title":"push_metrics_periodically"},{"location":"services/admin_users_response/","text":"Admin Users Response aniachifast.services.admin_users_response Admin User Management API Routes This module defines administrative HTTP endpoints for user management. These endpoints provide access to complete user information and administrative operations. SECURITY WARNING: These endpoints are highly sensitive and should only be accessible in DEBUG mode with ENABLE_ADMIN_ENDPOINTS enabled. They expose complete user information including sensitive data. Access Control: - Requires DEBUG=True - Requires ENABLE_ADMIN_ENDPOINTS=True - Protected by admin_enabled_guard dependency DB_DEPENDENCY module-attribute DB_DEPENDENCY : Session = Depends ( get_db ) USER_MANAGMENT_DEPENDENCY module-attribute USER_MANAGMENT_DEPENDENCY = Depends ( get_user_management ) router module-attribute router = APIRouter ( prefix = \"/admin/tools\" , tags = [ \"Admin\" ], dependencies = [ Depends ( admin_enabled_guard )], ) settings module-attribute settings = get_settings () admin_enabled_guard admin_enabled_guard () Admin endpoints guard. FastAPI dependency that prevents access to admin endpoints when either DEBUG mode or ENABLE_ADMIN_ENDPOINTS is disabled. This guard acts as a security gate for administrative functionality. When either DEBUG is False or ENABLE_ADMIN_ENDPOINTS is False, any endpoint protected by this dependency will immediately return HTTP 403 (Forbidden). Security rationale Admin endpoints expose sensitive information and should NEVER be accessible in production environments. This double-check ensures: - DEBUG mode must be explicitly enabled - Admin endpoints must be explicitly enabled - Both conditions must be true for access Raises: HTTPException \u2013 403 Forbidden if admin endpoints are disabled or DEBUG mode is off. Example (Router-level protection) from fastapi import APIRouter, Depends from aniachifast.services.admin_user_response import admin_enabled_guard router = APIRouter( prefix=\"/admin\", tags=[\"Admin\"], dependencies=[Depends(admin_enabled_guard)] ) Example (Endpoint-level protection) @router.get(\"/users/{uuid}\", dependencies=[Depends(admin_enabled_guard)]) async def get_user(...): ... get_user_by_uuid async get_user_by_uuid ( request : Request , user_uuid : UUID , fmt : str = PARSE_ACCEPT_ALL_FORMATS , user_mgmt : UserManagement = USER_MANAGMENT_DEPENDENCY , ) -> JSONResponse Retrieve complete user information by UUID. This administrative endpoint returns all user data including fields that are normally not exposed through public APIs. WARNING : This endpoint exposes sensitive user information and should only be used by administrators in development/debug environments. Parameters: request ( Request ) \u2013 Incoming HTTP request object. user_uuid ( UUID ) \u2013 The UUID of the user to retrieve. fmt ( str , default: PARSE_ACCEPT_ALL_FORMATS ) \u2013 Response format from Accept header validation. user_mgmt ( UserManagement , default: USER_MANAGMENT_DEPENDENCY ) \u2013 User management service instance. Returns: JSONResponse ( JSONResponse ) \u2013 Complete user information wrapped in APIResponseV2. Raises: HTTPException \u2013 403 if admin endpoints are disabled 404 if user not found Example cURL example:: curl {{host}}/admin/tools/user/123e4567-e89b-12d3-a456-426614174000 Response:: { \"data\": { \"id\": 1, \"uuid\": \"123e4567-e89b-12d3-a456-426614174000\", \"username\": \"johndoe\", \"email\": \"john@example.com\", \"is_active\": true, \"is_verified\": true, ... }, \"meta\": { \"api_version\": \"v1\", \"status\": 200, \"request_id\": \"req_abc123\", ... } } get_user_management get_user_management ( db : Session = DB_DEPENDENCY , ) -> UserManagement Dependency to get UserManagement instance with database session. Parameters: db ( Session , default: DB_DEPENDENCY ) \u2013 Database session from get_db dependency. Returns: UserManagement ( UserManagement ) \u2013 Instance with active database session. list_user_contacts async list_user_contacts ( request : Request , fmt : str = PARSE_ACCEPT_ALL_FORMATS , user_mgmt : UserManagement = USER_MANAGMENT_DEPENDENCY , ) -> JSONResponse Retrieve a list of user UUIDs and email addresses. This administrative endpoint returns a minimal representation of all users, exposing only non-sensitive fields. Returned fields: - uuid : User unique identifier - email : User email address This endpoint does not expose sensitive user information and is safe for administrative integrations. Parameters: request ( Request ) \u2013 Incoming HTTP request object. fmt ( str , default: PARSE_ACCEPT_ALL_FORMATS ) \u2013 Response format from Accept header validation. user_mgmt ( UserManagement , default: USER_MANAGMENT_DEPENDENCY ) \u2013 User management service instance. Returns: JSONResponse ( JSONResponse ) \u2013 User contact list wrapped in APIResponseV2. Example cURL example:: curl {{host}}/admin/tools/users/contacts JSON response:: { \"data\": [ { \"uuid\": \"123e4567-e89b-12d3-a456-426614174000\", \"email\": \"user@example.com\" } ], \"meta\": { \"api_version\": \"v1\", \"status\": 200, \"request_id\": \"req_xyz123\" } }","title":"Admin Users Response"},{"location":"services/admin_users_response/#admin-users-response","text":"","title":"Admin Users Response"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response","text":"","title":"admin_users_response"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response--admin-user-management-api-routes","text":"This module defines administrative HTTP endpoints for user management. These endpoints provide access to complete user information and administrative operations. SECURITY WARNING: These endpoints are highly sensitive and should only be accessible in DEBUG mode with ENABLE_ADMIN_ENDPOINTS enabled. They expose complete user information including sensitive data. Access Control: - Requires DEBUG=True - Requires ENABLE_ADMIN_ENDPOINTS=True - Protected by admin_enabled_guard dependency","title":"Admin User Management API Routes"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.DB_DEPENDENCY","text":"DB_DEPENDENCY : Session = Depends ( get_db )","title":"DB_DEPENDENCY"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.USER_MANAGMENT_DEPENDENCY","text":"USER_MANAGMENT_DEPENDENCY = Depends ( get_user_management )","title":"USER_MANAGMENT_DEPENDENCY"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.router","text":"router = APIRouter ( prefix = \"/admin/tools\" , tags = [ \"Admin\" ], dependencies = [ Depends ( admin_enabled_guard )], )","title":"router"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.admin_enabled_guard","text":"admin_enabled_guard () Admin endpoints guard. FastAPI dependency that prevents access to admin endpoints when either DEBUG mode or ENABLE_ADMIN_ENDPOINTS is disabled. This guard acts as a security gate for administrative functionality. When either DEBUG is False or ENABLE_ADMIN_ENDPOINTS is False, any endpoint protected by this dependency will immediately return HTTP 403 (Forbidden).","title":"admin_enabled_guard"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.admin_enabled_guard--security-rationale","text":"Admin endpoints expose sensitive information and should NEVER be accessible in production environments. This double-check ensures: - DEBUG mode must be explicitly enabled - Admin endpoints must be explicitly enabled - Both conditions must be true for access Raises: HTTPException \u2013 403 Forbidden if admin endpoints are disabled or DEBUG mode is off.","title":"Security rationale"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.admin_enabled_guard--example-router-level-protection","text":"from fastapi import APIRouter, Depends from aniachifast.services.admin_user_response import admin_enabled_guard router = APIRouter( prefix=\"/admin\", tags=[\"Admin\"], dependencies=[Depends(admin_enabled_guard)] )","title":"Example (Router-level protection)"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.admin_enabled_guard--example-endpoint-level-protection","text":"@router.get(\"/users/{uuid}\", dependencies=[Depends(admin_enabled_guard)]) async def get_user(...): ...","title":"Example (Endpoint-level protection)"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.get_user_by_uuid","text":"get_user_by_uuid ( request : Request , user_uuid : UUID , fmt : str = PARSE_ACCEPT_ALL_FORMATS , user_mgmt : UserManagement = USER_MANAGMENT_DEPENDENCY , ) -> JSONResponse Retrieve complete user information by UUID. This administrative endpoint returns all user data including fields that are normally not exposed through public APIs. WARNING : This endpoint exposes sensitive user information and should only be used by administrators in development/debug environments. Parameters: request ( Request ) \u2013 Incoming HTTP request object. user_uuid ( UUID ) \u2013 The UUID of the user to retrieve. fmt ( str , default: PARSE_ACCEPT_ALL_FORMATS ) \u2013 Response format from Accept header validation. user_mgmt ( UserManagement , default: USER_MANAGMENT_DEPENDENCY ) \u2013 User management service instance. Returns: JSONResponse ( JSONResponse ) \u2013 Complete user information wrapped in APIResponseV2. Raises: HTTPException \u2013 403 if admin endpoints are disabled 404 if user not found Example cURL example:: curl {{host}}/admin/tools/user/123e4567-e89b-12d3-a456-426614174000 Response:: { \"data\": { \"id\": 1, \"uuid\": \"123e4567-e89b-12d3-a456-426614174000\", \"username\": \"johndoe\", \"email\": \"john@example.com\", \"is_active\": true, \"is_verified\": true, ... }, \"meta\": { \"api_version\": \"v1\", \"status\": 200, \"request_id\": \"req_abc123\", ... } }","title":"get_user_by_uuid"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.get_user_management","text":"get_user_management ( db : Session = DB_DEPENDENCY , ) -> UserManagement Dependency to get UserManagement instance with database session. Parameters: db ( Session , default: DB_DEPENDENCY ) \u2013 Database session from get_db dependency. Returns: UserManagement ( UserManagement ) \u2013 Instance with active database session.","title":"get_user_management"},{"location":"services/admin_users_response/#aniachifast.services.admin_users_response.list_user_contacts","text":"list_user_contacts ( request : Request , fmt : str = PARSE_ACCEPT_ALL_FORMATS , user_mgmt : UserManagement = USER_MANAGMENT_DEPENDENCY , ) -> JSONResponse Retrieve a list of user UUIDs and email addresses. This administrative endpoint returns a minimal representation of all users, exposing only non-sensitive fields. Returned fields: - uuid : User unique identifier - email : User email address This endpoint does not expose sensitive user information and is safe for administrative integrations. Parameters: request ( Request ) \u2013 Incoming HTTP request object. fmt ( str , default: PARSE_ACCEPT_ALL_FORMATS ) \u2013 Response format from Accept header validation. user_mgmt ( UserManagement , default: USER_MANAGMENT_DEPENDENCY ) \u2013 User management service instance. Returns: JSONResponse ( JSONResponse ) \u2013 User contact list wrapped in APIResponseV2. Example cURL example:: curl {{host}}/admin/tools/users/contacts JSON response:: { \"data\": [ { \"uuid\": \"123e4567-e89b-12d3-a456-426614174000\", \"email\": \"user@example.com\" } ], \"meta\": { \"api_version\": \"v1\", \"status\": 200, \"request_id\": \"req_xyz123\" } }","title":"list_user_contacts"},{"location":"services/auth_response/","text":"Authentication Response Service aniachifast.services.auth_response Authentication API routes. This module defines all authentication-related HTTP endpoints, including user registration, login, token verification, and retrieval of the currently authenticated user. The implementation relies on an abstract authentication interface, allowing seamless switching between different authentication providers (e.g., database-based authentication or AWS Cognito). ALLOWED_HEADERS_DEPENDENCY module-attribute ALLOWED_HEADERS_DEPENDENCY = Depends ( allowed_headers ( COMMON_TYPES ) ) ALLOWED_HEADERS_DEPENDENCY_JSON module-attribute ALLOWED_HEADERS_DEPENDENCY_JSON = Depends ( allowed_headers ( JSON_TYPES ) ) AUTH_SERVICE_DEPENDENCY module-attribute AUTH_SERVICE_DEPENDENCY = Depends ( get_auth_service ) limiter module-attribute limiter = get_limiter () oauth2_scheme module-attribute oauth2_scheme = OAuth2PasswordBearer ( tokenUrl = \"/auth/login\" ) router module-attribute router = APIRouter ( dependencies = [ Depends ( auth_enabled_guard )] ) settings module-attribute settings = get_settings () activate_user_get async activate_user_get ( request : Request , activation_code : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Activate a user account using an activation code provided as a path parameter. This endpoint is primarily intended to be used from activation links sent via email, allowing users to activate their account by visiting a URL. The activation code is expected to be: - Single-use - Time-limited - Safe to be exposed in the URL path Parameters: request ( Request ) \u2013 Incoming HTTP request object. activation_code ( str ) \u2013 Unique activation code assigned to the user. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result of the activation process wrapped in APIResponseV2. Contains 'success' (bool) and 'message' (str) fields. Example Activation via browser or email link:: GET /auth/activate/ABC123 cURL example:: curl {{host}}/auth/activate/ABC123 activate_user_post async activate_user_post ( request : Request , activation_code : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Activate a user account using an activation code provided as a path parameter. This endpoint is intended for programmatic or backend-to-backend activation flows where an explicit HTTP POST is preferred. The activation code is extracted directly from the URL path, avoiding the need for request bodies or query parameters. Parameters: request ( Request ) \u2013 Incoming HTTP request object. activation_code ( str ) \u2013 Unique activation code assigned to the user. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result of the activation process wrapped in APIResponseV2. Contains 'success' (bool) and 'message' (str) fields. Example cURL example:: curl -X POST //{{host}}/auth/activate/ABC123 auth_enabled_guard auth_enabled_guard () Authentication endpoints guard. FastAPI dependency that prevents access to authentication endpoints when the Auth feature is disabled. This guard acts as a feature-flag gate for the entire authentication section of the API. When ENABLE_JWT_AUTH_ENDPOINT is set to False , any endpoint protected by this dependency will immediately return an HTTP 403 (Forbidden), without executing: - Endpoint logic - Authentication services - Database connections - External providers (e.g. Cognito) This dependency is designed to be used: - At the router level (recommended) - Or at the individual endpoint level if needed Security rationale This guard provides a second layer of defense (\"double check\") in addition to conditionally registering the router. Even if: - A router is accidentally included - A test loads the router manually - A future refactor forgets to apply the feature flag The request will still be blocked before any sensitive logic runs. Raises: HTTPException \u2013 403 Forbidden if authentication endpoints are disabled. Example (Router-level protection) \ud83d\ude80 from fastapi import APIRouter, Depends from aniachifast.auth.guards import auth_enabled_guard router = APIRouter( prefix=\"/auth\", tags=[\"Auth\"], dependencies=[Depends(auth_enabled_guard)] ) All routes in this router will be disabled automatically when ENABLE_JWT_AUTH_ENDPOINT = False . Example (Endpoint-level protection) \ud83d\udd12 @router.post(\"/login\", dependencies=[Depends(auth_enabled_guard)]) async def login_user(...): ... Example (Disabled state behavior) \ud83d\udeab If ENABLE_JWT_AUTH_ENDPOINT = False : Request POST /auth/login Response HTTP/1.1 403 Forbidden Body { \"detail\": \"Forbidden\" } Notes HTTP 403 is intentionally used to explicitly deny access while keeping routing intact. This dependency does not return any value. Logging can be added here for audit or security monitoring. get_me async get_me ( token : str = Depends ( oauth2_scheme ), auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> UserResponse Retrieve the currently authenticated user. The JWT token is extracted from the Authorization header and validated using the active authentication provider. Parameters: token ( str , default: Depends ( oauth2_scheme ) ) \u2013 Bearer token extracted via OAuth2 scheme. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: UserResponse ( UserResponse ) \u2013 Authenticated user information. Raises: HTTPException \u2013 401 Unauthorized if token is invalid. login_user async login_user ( request : Request , form_data : OAuth2PasswordRequestForm = Depends (), auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> JSONResponse Authenticate user credentials and issue an access token. Credentials are provided using the OAuth2 password flow and validated by the configured authentication provider. The endpoint handles various login failure scenarios: - Invalid credentials with remaining attempts - Account lockout due to too many failed attempts - Disabled or inactive accounts - Token limit exceeded Parameters: request ( Request ) \u2013 Incoming HTTP request object. form_data ( OAuth2PasswordRequestForm , default: Depends () ) \u2013 OAuth2 username/password data. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: JSONResponse ( JSONResponse ) \u2013 JWT access token on success or API envelope with error details on failure. register_user async register_user ( request : Request , user : UserCreate , _ = ALLOWED_HEADERS_DEPENDENCY_JSON , __ = NO_PARAMS_DEPENDENCY , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> UserRegisterResponse Register a new user in the authentication system. The registration process is delegated to the configured authentication provider (e.g., database or Cognito). Validates: - Username pattern (must be valid email if FORCE_USERNAME_EQUALS_EMAIL=True) - Password strength (8-20 chars, uppercase, lowercase, number, special char) - User uniqueness Parameters: request ( Request ) \u2013 Incoming HTTP request object. user ( UserCreate ) \u2013 User registration payload. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: UserRegisterResponse ( UserRegisterResponse ) \u2013 API envelope with newly created user data or error details. Example cURL example:: curl -X POST \"http://localhost:8000/auth/register\" -H \"Content-Type: application/json\" -d '{ \"username\": \"user@example.com\", \"email\": \"user@example.com\", \"password\": \"<ypupass>\" }' | jq request_password_reset_get async request_password_reset_get ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Request a password reset code for a user via GET. This endpoint is intended for browser-based access where the email is provided as a URL path parameter. The endpoint will: - Validate that the user exists - Check if the account is disabled or blocked - Generate a new reset code with expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting password reset. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str), 'message' (str), and optionally 'reset_code' (str) fields. Example Browser example:: http://{{host}}/auth/reset-password/user@example.com request_password_reset_post async request_password_reset_post ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Request a password reset code for a user via POST. This endpoint is intended for programmatic or API-based access. It takes the email address as a path parameter and processes the password reset request. The endpoint will: - Validate that the user exists - Check if the account is disabled or blocked - Generate a new reset code with expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting password reset. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str), 'message' (str), and optionally 'reset_code' (str) fields. Example cURL example:: curl -X POST {{host}}/auth/reset-password/user@example.com resend_activation_code_get async resend_activation_code_get ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Resend or regenerate activation code for a user via GET. This endpoint is designed to be accessed via URL, typically from email links or browser navigation. It takes the email address as a path parameter. The endpoint will: - Validate that the user exists - Check if the account is already activated - Check if the account is disabled - Generate a new activation code with extended expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting reactivation. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str) and 'message' (str) fields. Example Browser or email link:: GET /auth/resend-activation/user@example.com cURL example:: curl {{host}}/auth/resend-activation/user@example.com resend_activation_code_post async resend_activation_code_post ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Resend or regenerate activation code for a user via POST. This endpoint is intended for programmatic or API-based access. It takes the email address as a path parameter and processes the reactivation request. The endpoint will: - Validate that the user exists - Check if the account is already activated - Check if the account is disabled - Generate a new activation code with extended expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting reactivation. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str) and 'message' (str) fields. Example cURL example:: curl -X POST {{host}}/auth/resend-activation/user@example.com slash async slash ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY ) -> JSONResponse Authentication service health check endpoint. This endpoint provides a minimal status response indicating whether the authentication service is enabled and which provider is active. Parameters: request ( Request ) \u2013 Incoming HTTP request object. Returns: JSONResponse ( JSONResponse ) \u2013 Service status and authentication provider metadata. validate_token async validate_token ( request : Request , token : str , auth_service : AuthInterface = Depends ( get_auth_service_stateless ), ) -> JSONResponse Validate JWT token and return all decoded information. This endpoint validates the JWT token and returns structured user information. The token is provided as a URL path parameter, making it easy to use as a debugging/validation tool by simply pasting the token in the URL. IMPORTANT: This endpoint is STATELESS - it does NOT connect to the database. All information comes from the JWT token itself. Parameters: request ( Request ) \u2013 Incoming HTTP request object. token ( str ) \u2013 JWT token as URL path parameter. auth_service ( AuthInterface , default: Depends ( get_auth_service_stateless ) ) \u2013 Resolved authentication service (stateless). Returns: JSONResponse ( JSONResponse ) \u2013 Complete token information including user data. Example cURL example:: curl -X GET \"http://localhost:8000/auth/validate/token/YOUR_TOKEN_HERE\" Browser example:: http://localhost:8000/auth/validate/token/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9... verify_token async verify_token ( token : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Verify the validity of a JWT access token. This endpoint checks whether the provided token is valid and recognized by the authentication provider. Parameters: token ( str ) \u2013 JWT access token. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Dictionary containing the token validity status.","title":"Auth Responses"},{"location":"services/auth_response/#authentication-response-service","text":"","title":"Authentication Response Service"},{"location":"services/auth_response/#aniachifast.services.auth_response","text":"Authentication API routes. This module defines all authentication-related HTTP endpoints, including user registration, login, token verification, and retrieval of the currently authenticated user. The implementation relies on an abstract authentication interface, allowing seamless switching between different authentication providers (e.g., database-based authentication or AWS Cognito).","title":"auth_response"},{"location":"services/auth_response/#aniachifast.services.auth_response.ALLOWED_HEADERS_DEPENDENCY","text":"ALLOWED_HEADERS_DEPENDENCY = Depends ( allowed_headers ( COMMON_TYPES ) )","title":"ALLOWED_HEADERS_DEPENDENCY"},{"location":"services/auth_response/#aniachifast.services.auth_response.ALLOWED_HEADERS_DEPENDENCY_JSON","text":"ALLOWED_HEADERS_DEPENDENCY_JSON = Depends ( allowed_headers ( JSON_TYPES ) )","title":"ALLOWED_HEADERS_DEPENDENCY_JSON"},{"location":"services/auth_response/#aniachifast.services.auth_response.AUTH_SERVICE_DEPENDENCY","text":"AUTH_SERVICE_DEPENDENCY = Depends ( get_auth_service )","title":"AUTH_SERVICE_DEPENDENCY"},{"location":"services/auth_response/#aniachifast.services.auth_response.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/auth_response/#aniachifast.services.auth_response.oauth2_scheme","text":"oauth2_scheme = OAuth2PasswordBearer ( tokenUrl = \"/auth/login\" )","title":"oauth2_scheme"},{"location":"services/auth_response/#aniachifast.services.auth_response.router","text":"router = APIRouter ( dependencies = [ Depends ( auth_enabled_guard )] )","title":"router"},{"location":"services/auth_response/#aniachifast.services.auth_response.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/auth_response/#aniachifast.services.auth_response.activate_user_get","text":"activate_user_get ( request : Request , activation_code : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Activate a user account using an activation code provided as a path parameter. This endpoint is primarily intended to be used from activation links sent via email, allowing users to activate their account by visiting a URL. The activation code is expected to be: - Single-use - Time-limited - Safe to be exposed in the URL path Parameters: request ( Request ) \u2013 Incoming HTTP request object. activation_code ( str ) \u2013 Unique activation code assigned to the user. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result of the activation process wrapped in APIResponseV2. Contains 'success' (bool) and 'message' (str) fields. Example Activation via browser or email link:: GET /auth/activate/ABC123 cURL example:: curl {{host}}/auth/activate/ABC123","title":"activate_user_get"},{"location":"services/auth_response/#aniachifast.services.auth_response.activate_user_post","text":"activate_user_post ( request : Request , activation_code : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Activate a user account using an activation code provided as a path parameter. This endpoint is intended for programmatic or backend-to-backend activation flows where an explicit HTTP POST is preferred. The activation code is extracted directly from the URL path, avoiding the need for request bodies or query parameters. Parameters: request ( Request ) \u2013 Incoming HTTP request object. activation_code ( str ) \u2013 Unique activation code assigned to the user. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result of the activation process wrapped in APIResponseV2. Contains 'success' (bool) and 'message' (str) fields. Example cURL example:: curl -X POST //{{host}}/auth/activate/ABC123","title":"activate_user_post"},{"location":"services/auth_response/#aniachifast.services.auth_response.auth_enabled_guard","text":"auth_enabled_guard () Authentication endpoints guard. FastAPI dependency that prevents access to authentication endpoints when the Auth feature is disabled. This guard acts as a feature-flag gate for the entire authentication section of the API. When ENABLE_JWT_AUTH_ENDPOINT is set to False , any endpoint protected by this dependency will immediately return an HTTP 403 (Forbidden), without executing: - Endpoint logic - Authentication services - Database connections - External providers (e.g. Cognito) This dependency is designed to be used: - At the router level (recommended) - Or at the individual endpoint level if needed","title":"auth_enabled_guard"},{"location":"services/auth_response/#aniachifast.services.auth_response.auth_enabled_guard--security-rationale","text":"This guard provides a second layer of defense (\"double check\") in addition to conditionally registering the router. Even if: - A router is accidentally included - A test loads the router manually - A future refactor forgets to apply the feature flag The request will still be blocked before any sensitive logic runs. Raises: HTTPException \u2013 403 Forbidden if authentication endpoints are disabled.","title":"Security rationale"},{"location":"services/auth_response/#aniachifast.services.auth_response.auth_enabled_guard--example-router-level-protection","text":"from fastapi import APIRouter, Depends from aniachifast.auth.guards import auth_enabled_guard router = APIRouter( prefix=\"/auth\", tags=[\"Auth\"], dependencies=[Depends(auth_enabled_guard)] ) All routes in this router will be disabled automatically when ENABLE_JWT_AUTH_ENDPOINT = False .","title":"Example (Router-level protection) \ud83d\ude80"},{"location":"services/auth_response/#aniachifast.services.auth_response.auth_enabled_guard--example-endpoint-level-protection","text":"@router.post(\"/login\", dependencies=[Depends(auth_enabled_guard)]) async def login_user(...): ...","title":"Example (Endpoint-level protection) \ud83d\udd12"},{"location":"services/auth_response/#aniachifast.services.auth_response.auth_enabled_guard--example-disabled-state-behavior","text":"If ENABLE_JWT_AUTH_ENDPOINT = False : Request POST /auth/login Response HTTP/1.1 403 Forbidden Body { \"detail\": \"Forbidden\" }","title":"Example (Disabled state behavior) \ud83d\udeab"},{"location":"services/auth_response/#aniachifast.services.auth_response.auth_enabled_guard--notes","text":"HTTP 403 is intentionally used to explicitly deny access while keeping routing intact. This dependency does not return any value. Logging can be added here for audit or security monitoring.","title":"Notes"},{"location":"services/auth_response/#aniachifast.services.auth_response.get_me","text":"get_me ( token : str = Depends ( oauth2_scheme ), auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> UserResponse Retrieve the currently authenticated user. The JWT token is extracted from the Authorization header and validated using the active authentication provider. Parameters: token ( str , default: Depends ( oauth2_scheme ) ) \u2013 Bearer token extracted via OAuth2 scheme. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: UserResponse ( UserResponse ) \u2013 Authenticated user information. Raises: HTTPException \u2013 401 Unauthorized if token is invalid.","title":"get_me"},{"location":"services/auth_response/#aniachifast.services.auth_response.login_user","text":"login_user ( request : Request , form_data : OAuth2PasswordRequestForm = Depends (), auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> JSONResponse Authenticate user credentials and issue an access token. Credentials are provided using the OAuth2 password flow and validated by the configured authentication provider. The endpoint handles various login failure scenarios: - Invalid credentials with remaining attempts - Account lockout due to too many failed attempts - Disabled or inactive accounts - Token limit exceeded Parameters: request ( Request ) \u2013 Incoming HTTP request object. form_data ( OAuth2PasswordRequestForm , default: Depends () ) \u2013 OAuth2 username/password data. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: JSONResponse ( JSONResponse ) \u2013 JWT access token on success or API envelope with error details on failure.","title":"login_user"},{"location":"services/auth_response/#aniachifast.services.auth_response.register_user","text":"register_user ( request : Request , user : UserCreate , _ = ALLOWED_HEADERS_DEPENDENCY_JSON , __ = NO_PARAMS_DEPENDENCY , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> UserRegisterResponse Register a new user in the authentication system. The registration process is delegated to the configured authentication provider (e.g., database or Cognito). Validates: - Username pattern (must be valid email if FORCE_USERNAME_EQUALS_EMAIL=True) - Password strength (8-20 chars, uppercase, lowercase, number, special char) - User uniqueness Parameters: request ( Request ) \u2013 Incoming HTTP request object. user ( UserCreate ) \u2013 User registration payload. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: UserRegisterResponse ( UserRegisterResponse ) \u2013 API envelope with newly created user data or error details. Example cURL example:: curl -X POST \"http://localhost:8000/auth/register\" -H \"Content-Type: application/json\" -d '{ \"username\": \"user@example.com\", \"email\": \"user@example.com\", \"password\": \"<ypupass>\" }' | jq","title":"register_user"},{"location":"services/auth_response/#aniachifast.services.auth_response.request_password_reset_get","text":"request_password_reset_get ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Request a password reset code for a user via GET. This endpoint is intended for browser-based access where the email is provided as a URL path parameter. The endpoint will: - Validate that the user exists - Check if the account is disabled or blocked - Generate a new reset code with expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting password reset. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str), 'message' (str), and optionally 'reset_code' (str) fields. Example Browser example:: http://{{host}}/auth/reset-password/user@example.com","title":"request_password_reset_get"},{"location":"services/auth_response/#aniachifast.services.auth_response.request_password_reset_post","text":"request_password_reset_post ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Request a password reset code for a user via POST. This endpoint is intended for programmatic or API-based access. It takes the email address as a path parameter and processes the password reset request. The endpoint will: - Validate that the user exists - Check if the account is disabled or blocked - Generate a new reset code with expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting password reset. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str), 'message' (str), and optionally 'reset_code' (str) fields. Example cURL example:: curl -X POST {{host}}/auth/reset-password/user@example.com","title":"request_password_reset_post"},{"location":"services/auth_response/#aniachifast.services.auth_response.resend_activation_code_get","text":"resend_activation_code_get ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Resend or regenerate activation code for a user via GET. This endpoint is designed to be accessed via URL, typically from email links or browser navigation. It takes the email address as a path parameter. The endpoint will: - Validate that the user exists - Check if the account is already activated - Check if the account is disabled - Generate a new activation code with extended expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting reactivation. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str) and 'message' (str) fields. Example Browser or email link:: GET /auth/resend-activation/user@example.com cURL example:: curl {{host}}/auth/resend-activation/user@example.com","title":"resend_activation_code_get"},{"location":"services/auth_response/#aniachifast.services.auth_response.resend_activation_code_post","text":"resend_activation_code_post ( request : Request , email : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Resend or regenerate activation code for a user via POST. This endpoint is intended for programmatic or API-based access. It takes the email address as a path parameter and processes the reactivation request. The endpoint will: - Validate that the user exists - Check if the account is already activated - Check if the account is disabled - Generate a new activation code with extended expiration - Return the result wrapped in APIResponseV2 Parameters: request ( Request ) \u2013 Incoming HTTP request object. email ( str ) \u2013 Email address of the user requesting reactivation. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Result wrapped in APIResponseV2 envelope. Contains 'status' (str) and 'message' (str) fields. Example cURL example:: curl -X POST {{host}}/auth/resend-activation/user@example.com","title":"resend_activation_code_post"},{"location":"services/auth_response/#aniachifast.services.auth_response.slash","text":"slash ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY ) -> JSONResponse Authentication service health check endpoint. This endpoint provides a minimal status response indicating whether the authentication service is enabled and which provider is active. Parameters: request ( Request ) \u2013 Incoming HTTP request object. Returns: JSONResponse ( JSONResponse ) \u2013 Service status and authentication provider metadata.","title":"slash"},{"location":"services/auth_response/#aniachifast.services.auth_response.validate_token","text":"validate_token ( request : Request , token : str , auth_service : AuthInterface = Depends ( get_auth_service_stateless ), ) -> JSONResponse Validate JWT token and return all decoded information. This endpoint validates the JWT token and returns structured user information. The token is provided as a URL path parameter, making it easy to use as a debugging/validation tool by simply pasting the token in the URL. IMPORTANT: This endpoint is STATELESS - it does NOT connect to the database. All information comes from the JWT token itself. Parameters: request ( Request ) \u2013 Incoming HTTP request object. token ( str ) \u2013 JWT token as URL path parameter. auth_service ( AuthInterface , default: Depends ( get_auth_service_stateless ) ) \u2013 Resolved authentication service (stateless). Returns: JSONResponse ( JSONResponse ) \u2013 Complete token information including user data. Example cURL example:: curl -X GET \"http://localhost:8000/auth/validate/token/YOUR_TOKEN_HERE\" Browser example:: http://localhost:8000/auth/validate/token/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...","title":"validate_token"},{"location":"services/auth_response/#aniachifast.services.auth_response.verify_token","text":"verify_token ( token : str , auth_service : AuthInterface = AUTH_SERVICE_DEPENDENCY , ) -> dict Verify the validity of a JWT access token. This endpoint checks whether the provided token is valid and recognized by the authentication provider. Parameters: token ( str ) \u2013 JWT access token. auth_service ( AuthInterface , default: AUTH_SERVICE_DEPENDENCY ) \u2013 Resolved authentication service. Returns: dict ( dict ) \u2013 Dictionary containing the token validity status.","title":"verify_token"},{"location":"services/common_responses/","text":"Common Response Service aniachifast.services.common_responses Common and utility HTTP endpoints for the FastAPI application. This module defines a collection of low-cost, defensive HTTP endpoints that are commonly exposed at the root level of the API. These endpoints are intentionally simple, fast, and guarded, and are mainly used for: Default index and landing responses Lightweight liveness checks (ping / pong) Runtime route discovery and introspection Debugging and inspection of incoming request headers Security and safeguard design: All endpoints are protected by a global dependency guard that allows the entire module to be enabled or disabled via configuration. Endpoints are aggressively rate-limited to mitigate abuse, scanning, and denial-of-service attempts. Sensitive endpoints are gated behind explicit feature flags and environment checks (e.g. DEBUG mode). Output formats are strictly validated using typed enums and path dependencies to prevent injection or serialization issues. Several endpoints support multiple output formats (HTML, JSON, CSV, TSV, XML, YAML, and plain text) using custom FastAPI response classes. The output format is selected explicitly through validated path parameters. This module is typically mounted at the root level of the API. limiter module-attribute limiter = get_limiter () router module-attribute router = APIRouter ( dependencies = [ Depends ( common_reponses_enabled_guard )] ) settings module-attribute settings = get_settings () common_reponses_enabled_guard common_reponses_enabled_guard () Dependency guard for common utility endpoints. This guard acts as a centralized feature flag that restricts access to all endpoints defined in this module. The dependency ensures that common endpoints are only accessible when explicitly enabled via application configuration. If the feature flag is disabled, all routes using this dependency will be blocked. Safeguards implemented: - Prevents accidental exposure of informational endpoints - Centralized enable/disable control via configuration - Fails fast with an explicit HTTP 403 response Raises: HTTPException \u2013 Raised with status code 403 (Forbidden) when common endpoints are disabled via configuration. debug_headers async debug_headers ( request : Request ) -> JSONResponse Debug endpoint returning all incoming request headers. Intended strictly for development and troubleshooting. This endpoint should never be exposed in production environments unless protected by additional access controls. Safeguards implemented: - Requires DEBUG mode to be enabled - Explicit feature flag - Rate limited to reduce information leakage risk Raises: HTTPException \u2013 Raised with status code 403 when debugging is disabled. debug_payload async debug_payload ( request : Request , __ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Debug endpoint to inspect incoming payloads. Detection priority: 1. Raw JSON 2. Base64-encoded JSON 3. Binary payload (non UTF-8) 4. Plain text / unknown debug_queryparams async debug_queryparams ( request : Request ) -> JSONResponse Debug endpoint returning all incoming request query parameters. Intended strictly for development and troubleshooting. This endpoint should never be exposed in production environments unless protected by additional access controls. Safeguards implemented: - Requires DEBUG mode to be enabled - Explicit feature flag - Rate limited to reduce information leakage risk Raises: HTTPException \u2013 Raised with status code 403 when debugging is disabled. Example cURL examples:: curl \"http://localhost:8000/debug/queryparams?param1=value1&param2=value2\" curl -X POST \"http://localhost:8000/debug/queryparams?name=jn&age=30&d=te\" curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/json\" -d '{\"name\": \"John\", \"age\": 30, \"active\": true}' |jq # Text payload curl -X PUT \"http://localhost:8000/debug/payload\" -H \"Content-Type: text/plain\" -d \"Simple text content for debugging\" |jq # Form data curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/x-www-form-urlencoded\" -d \"username=admin&password=secret\" |jq # Base64 encoded payload (as text) curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: text/plain\" -d \"SGVsbG8gV29ybGQh\" |jq # Binary file (will be returned as base64) curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/octet-stream\" --data-binary @image.png |jq # Empty payload (GET) curl \"http://localhost:8000/debug/payload\" |jq # DELETE with JSON curl -X DELETE \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/json\" -d '{\"id\": 123, \"reason\": \"cleanup\"}' |jq endpoints async endpoints ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = FMT_PATH , __ = NO_PARAMS_DEPENDENCY , ) -> Response Runtime route discovery endpoint. Dynamically inspects the FastAPI application and returns metadata about all registered routes, including HTTP methods and paths. The output format is selected via the _fmt path parameter. Supported formats: - html - json - txt / md - csv - tsv - xml - yaml Safeguards implemented: - Explicit feature flag to disable route introspection - Strong rate limiting to reduce reconnaissance risk - Output format validation via typed enums Raises: HTTPException \u2013 Raised with status code 403 when the endpoint is disabled. endpoints_html async endpoints_html ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> Response HTML shortcut for route discovery. Convenience endpoint equivalent to /routes/html , intended primarily for browser-based access. Safeguards implemented: - Explicit feature flag - Moderate rate limiting Raises: HTTPException \u2013 Raised with status code 403 when the endpoint is disabled. favicon async favicon ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> Response Binary favicon endpoint. Serves the application favicon as raw PNG bytes. This endpoint is commonly requested automatically by browsers and user agents. Safeguards implemented: - Can be fully disabled via configuration - Protected by high but finite rate limiting - Explicit 404 response when disabled Parameters: request ( Request ) \u2013 Incoming FastAPI request object. Raises: HTTPException \u2013 Raised with status code 404 when the favicon endpoint is disabled. Example cURL examples:: curl \"http://localhost:8000/favicon.ico\" -o favicon.png curl -I \"http://localhost:8000/favicon.ico\" favicon64 async favicon64 ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Base64-encoded favicon endpoint. Returns the application favicon encoded as a Base64 string. This endpoint is useful for debugging, embedding, or non-binary environments. Safeguards implemented: - Can be fully disabled via configuration - Rate-limited to prevent unnecessary CPU usage - Explicit 404 response when disabled Parameters: request ( Request ) \u2013 Incoming FastAPI request object. Raises: HTTPException \u2013 Raised with status code 404 when the favicon endpoint is disabled. Example cURL examples:: curl \"http://localhost:8000/favicon64\" curl \"http://localhost:8000/favicon64\" | base64 -d > favicon.png index async index ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> Response Default index endpoint. Serves a plain-text landing response for multiple common index paths, including legacy file-based URLs. This endpoint is useful for browser access, basic service validation, and legacy compatibility. Safeguards implemented: - Can be fully disabled via configuration - Aggressively rate-limited to prevent scanning and abuse - Returns an explicit 404 response when disabled Parameters: request ( Request ) \u2013 Incoming FastAPI request object. Raises: HTTPException \u2013 Raised with status code 404 when the index endpoint is disabled. Example cURL examples:: curl \"http://localhost:8000/\" curl \"http://localhost:8000/index\" curl \"http://localhost:8000/index.html\" curl \"http://localhost:8000/index.php\" ping async ping ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Complementary liveness endpoint. Mirrors the behavior of the /ping endpoint and is mainly useful for symmetry testing and diagnostics. Safeguards implemented: - Very low rate limit - No side effects Parameters: request ( Request ) \u2013 Incoming FastAPI request object. pong async pong ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Lightweight liveness endpoint. Returns a minimal response used to verify that the application is reachable and responsive. Safeguards implemented: - Very low rate limit to prevent abuse - Minimal processing and no external dependencies Parameters: request ( Request ) \u2013 Incoming FastAPI request object.","title":"Common Responses"},{"location":"services/common_responses/#common-response-service","text":"","title":"Common Response Service"},{"location":"services/common_responses/#aniachifast.services.common_responses","text":"Common and utility HTTP endpoints for the FastAPI application. This module defines a collection of low-cost, defensive HTTP endpoints that are commonly exposed at the root level of the API. These endpoints are intentionally simple, fast, and guarded, and are mainly used for: Default index and landing responses Lightweight liveness checks (ping / pong) Runtime route discovery and introspection Debugging and inspection of incoming request headers Security and safeguard design: All endpoints are protected by a global dependency guard that allows the entire module to be enabled or disabled via configuration. Endpoints are aggressively rate-limited to mitigate abuse, scanning, and denial-of-service attempts. Sensitive endpoints are gated behind explicit feature flags and environment checks (e.g. DEBUG mode). Output formats are strictly validated using typed enums and path dependencies to prevent injection or serialization issues. Several endpoints support multiple output formats (HTML, JSON, CSV, TSV, XML, YAML, and plain text) using custom FastAPI response classes. The output format is selected explicitly through validated path parameters. This module is typically mounted at the root level of the API.","title":"common_responses"},{"location":"services/common_responses/#aniachifast.services.common_responses.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/common_responses/#aniachifast.services.common_responses.router","text":"router = APIRouter ( dependencies = [ Depends ( common_reponses_enabled_guard )] )","title":"router"},{"location":"services/common_responses/#aniachifast.services.common_responses.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/common_responses/#aniachifast.services.common_responses.common_reponses_enabled_guard","text":"common_reponses_enabled_guard () Dependency guard for common utility endpoints. This guard acts as a centralized feature flag that restricts access to all endpoints defined in this module. The dependency ensures that common endpoints are only accessible when explicitly enabled via application configuration. If the feature flag is disabled, all routes using this dependency will be blocked. Safeguards implemented: - Prevents accidental exposure of informational endpoints - Centralized enable/disable control via configuration - Fails fast with an explicit HTTP 403 response Raises: HTTPException \u2013 Raised with status code 403 (Forbidden) when common endpoints are disabled via configuration.","title":"common_reponses_enabled_guard"},{"location":"services/common_responses/#aniachifast.services.common_responses.debug_headers","text":"debug_headers ( request : Request ) -> JSONResponse Debug endpoint returning all incoming request headers. Intended strictly for development and troubleshooting. This endpoint should never be exposed in production environments unless protected by additional access controls. Safeguards implemented: - Requires DEBUG mode to be enabled - Explicit feature flag - Rate limited to reduce information leakage risk Raises: HTTPException \u2013 Raised with status code 403 when debugging is disabled.","title":"debug_headers"},{"location":"services/common_responses/#aniachifast.services.common_responses.debug_payload","text":"debug_payload ( request : Request , __ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Debug endpoint to inspect incoming payloads. Detection priority: 1. Raw JSON 2. Base64-encoded JSON 3. Binary payload (non UTF-8) 4. Plain text / unknown","title":"debug_payload"},{"location":"services/common_responses/#aniachifast.services.common_responses.debug_queryparams","text":"debug_queryparams ( request : Request ) -> JSONResponse Debug endpoint returning all incoming request query parameters. Intended strictly for development and troubleshooting. This endpoint should never be exposed in production environments unless protected by additional access controls. Safeguards implemented: - Requires DEBUG mode to be enabled - Explicit feature flag - Rate limited to reduce information leakage risk Raises: HTTPException \u2013 Raised with status code 403 when debugging is disabled. Example cURL examples:: curl \"http://localhost:8000/debug/queryparams?param1=value1&param2=value2\" curl -X POST \"http://localhost:8000/debug/queryparams?name=jn&age=30&d=te\" curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/json\" -d '{\"name\": \"John\", \"age\": 30, \"active\": true}' |jq # Text payload curl -X PUT \"http://localhost:8000/debug/payload\" -H \"Content-Type: text/plain\" -d \"Simple text content for debugging\" |jq # Form data curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/x-www-form-urlencoded\" -d \"username=admin&password=secret\" |jq # Base64 encoded payload (as text) curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: text/plain\" -d \"SGVsbG8gV29ybGQh\" |jq # Binary file (will be returned as base64) curl -X POST \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/octet-stream\" --data-binary @image.png |jq # Empty payload (GET) curl \"http://localhost:8000/debug/payload\" |jq # DELETE with JSON curl -X DELETE \"http://localhost:8000/debug/payload\" -H \"Content-Type: application/json\" -d '{\"id\": 123, \"reason\": \"cleanup\"}' |jq","title":"debug_queryparams"},{"location":"services/common_responses/#aniachifast.services.common_responses.endpoints","text":"endpoints ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = FMT_PATH , __ = NO_PARAMS_DEPENDENCY , ) -> Response Runtime route discovery endpoint. Dynamically inspects the FastAPI application and returns metadata about all registered routes, including HTTP methods and paths. The output format is selected via the _fmt path parameter. Supported formats: - html - json - txt / md - csv - tsv - xml - yaml Safeguards implemented: - Explicit feature flag to disable route introspection - Strong rate limiting to reduce reconnaissance risk - Output format validation via typed enums Raises: HTTPException \u2013 Raised with status code 403 when the endpoint is disabled.","title":"endpoints"},{"location":"services/common_responses/#aniachifast.services.common_responses.endpoints_html","text":"endpoints_html ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> Response HTML shortcut for route discovery. Convenience endpoint equivalent to /routes/html , intended primarily for browser-based access. Safeguards implemented: - Explicit feature flag - Moderate rate limiting Raises: HTTPException \u2013 Raised with status code 403 when the endpoint is disabled.","title":"endpoints_html"},{"location":"services/common_responses/#aniachifast.services.common_responses.favicon","text":"favicon ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> Response Binary favicon endpoint. Serves the application favicon as raw PNG bytes. This endpoint is commonly requested automatically by browsers and user agents. Safeguards implemented: - Can be fully disabled via configuration - Protected by high but finite rate limiting - Explicit 404 response when disabled Parameters: request ( Request ) \u2013 Incoming FastAPI request object. Raises: HTTPException \u2013 Raised with status code 404 when the favicon endpoint is disabled. Example cURL examples:: curl \"http://localhost:8000/favicon.ico\" -o favicon.png curl -I \"http://localhost:8000/favicon.ico\"","title":"favicon"},{"location":"services/common_responses/#aniachifast.services.common_responses.favicon64","text":"favicon64 ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Base64-encoded favicon endpoint. Returns the application favicon encoded as a Base64 string. This endpoint is useful for debugging, embedding, or non-binary environments. Safeguards implemented: - Can be fully disabled via configuration - Rate-limited to prevent unnecessary CPU usage - Explicit 404 response when disabled Parameters: request ( Request ) \u2013 Incoming FastAPI request object. Raises: HTTPException \u2013 Raised with status code 404 when the favicon endpoint is disabled. Example cURL examples:: curl \"http://localhost:8000/favicon64\" curl \"http://localhost:8000/favicon64\" | base64 -d > favicon.png","title":"favicon64"},{"location":"services/common_responses/#aniachifast.services.common_responses.index","text":"index ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> Response Default index endpoint. Serves a plain-text landing response for multiple common index paths, including legacy file-based URLs. This endpoint is useful for browser access, basic service validation, and legacy compatibility. Safeguards implemented: - Can be fully disabled via configuration - Aggressively rate-limited to prevent scanning and abuse - Returns an explicit 404 response when disabled Parameters: request ( Request ) \u2013 Incoming FastAPI request object. Raises: HTTPException \u2013 Raised with status code 404 when the index endpoint is disabled. Example cURL examples:: curl \"http://localhost:8000/\" curl \"http://localhost:8000/index\" curl \"http://localhost:8000/index.html\" curl \"http://localhost:8000/index.php\"","title":"index"},{"location":"services/common_responses/#aniachifast.services.common_responses.ping","text":"ping ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Complementary liveness endpoint. Mirrors the behavior of the /ping endpoint and is mainly useful for symmetry testing and diagnostics. Safeguards implemented: - Very low rate limit - No side effects Parameters: request ( Request ) \u2013 Incoming FastAPI request object.","title":"ping"},{"location":"services/common_responses/#aniachifast.services.common_responses.pong","text":"pong ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Lightweight liveness endpoint. Returns a minimal response used to verify that the application is reachable and responsive. Safeguards implemented: - Very low rate limit to prevent abuse - Minimal processing and no external dependencies Parameters: request ( Request ) \u2013 Incoming FastAPI request object.","title":"pong"},{"location":"services/core_responses/","text":"Core Response Service aniachifast.services.core_responses Core utilities and introspection endpoints. This module exposes a collection of internal/debug-only FastAPI endpoints designed to inspect and introspect the Python runtime environment where the service is executing. Provided capabilities include: - Garbage collector object counts - Loaded Python modules and their versions - Installed Python packages (even if not loaded) - Asyncio task inspection - Multiple output formats (JSON, HTML, CSV, TSV, XML, YAML, plain text) \u26a0\ufe0f SECURITY NOTE: All endpoints in this module are protected by: - ENABLE_CORE_ENDPOINT feature flag - DEBUG mode requirement - Allowed headers validation - Rate limiting These endpoints are intended strictly for debugging, diagnostics, and operational introspection in controlled environments. limiter module-attribute limiter = get_limiter () router module-attribute router = APIRouter ( dependencies = [ Depends ( core_reponses_enabled_guard )] ) settings module-attribute settings = get_settings () core_reponses_enabled_guard core_reponses_enabled_guard () Dependency guard that restricts access to core-related endpoints. This dependency ensures that the system information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to core utilities. router = APIRouter( ... dependencies=[Depends(ENABLE_CORE_ENDPOINT)] ... ) installed_modules async installed_modules ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = Path ( ... , description = \"Output format\" ), ) -> Response Returns all Python packages installed in the current environment. This endpoint inspects package metadata using importlib.metadata and returns package names and versions, regardless of whether they are currently loaded in memory. Access is restricted to debug mode and requires the core endpoints feature flag to be enabled. modules_count async modules_count ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Return the number of Python modules currently loaded in memory. This endpoint inspects sys.modules to determine how many modules have been imported and are active in the current runtime. Returns: JSONResponse ( JSONResponse ) \u2013 Count of loaded modules and current timestamp. modules_versions async modules_versions ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = Path ( ... , description = \"Output format\" ), ) -> Response Returns version information for currently loaded Python modules. For each loaded module, this endpoint attempts to resolve its version using installed package metadata. If unavailable, it falls back to the module's __version__ attribute when present. Only modules already loaded into memory are inspected. Access is restricted to debug mode and requires the core endpoints feature flag to be enabled. slash async slash ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Root core utilities endpoint. Provides a simple textual response confirming availability of core utilities along with the current server time. Access is restricted to debug mode and requires the core endpoints feature flag to be enabled. Returns: PlainTextResponse ( PlainTextResponse ) \u2013 Basic service message and timestamp. slash_modules async slash_modules ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Base endpoint for module-related core utilities. Serves as a grouping endpoint for both loaded and installed module inspection routes. slash_modules_mem async slash_modules_mem ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Base endpoint for in-memory module inspection. Acts as a logical namespace root for endpoints related to modules currently loaded into memory. total_objects async total_objects ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Return the total number of objects tracked by Python's garbage collector. This endpoint uses gc.get_objects() to inspect all objects currently tracked in memory by the garbage collector. Intended for memory diagnostics and leak investigation. Returns: JSONResponse ( JSONResponse ) \u2013 Total object count and current timestamp.","title":"Core Responses"},{"location":"services/core_responses/#core-response-service","text":"","title":"Core Response Service"},{"location":"services/core_responses/#aniachifast.services.core_responses","text":"Core utilities and introspection endpoints. This module exposes a collection of internal/debug-only FastAPI endpoints designed to inspect and introspect the Python runtime environment where the service is executing. Provided capabilities include: - Garbage collector object counts - Loaded Python modules and their versions - Installed Python packages (even if not loaded) - Asyncio task inspection - Multiple output formats (JSON, HTML, CSV, TSV, XML, YAML, plain text) \u26a0\ufe0f SECURITY NOTE: All endpoints in this module are protected by: - ENABLE_CORE_ENDPOINT feature flag - DEBUG mode requirement - Allowed headers validation - Rate limiting These endpoints are intended strictly for debugging, diagnostics, and operational introspection in controlled environments.","title":"core_responses"},{"location":"services/core_responses/#aniachifast.services.core_responses.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/core_responses/#aniachifast.services.core_responses.router","text":"router = APIRouter ( dependencies = [ Depends ( core_reponses_enabled_guard )] )","title":"router"},{"location":"services/core_responses/#aniachifast.services.core_responses.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/core_responses/#aniachifast.services.core_responses.core_reponses_enabled_guard","text":"core_reponses_enabled_guard () Dependency guard that restricts access to core-related endpoints. This dependency ensures that the system information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to core utilities. router = APIRouter( ... dependencies=[Depends(ENABLE_CORE_ENDPOINT)] ... )","title":"core_reponses_enabled_guard"},{"location":"services/core_responses/#aniachifast.services.core_responses.installed_modules","text":"installed_modules ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = Path ( ... , description = \"Output format\" ), ) -> Response Returns all Python packages installed in the current environment. This endpoint inspects package metadata using importlib.metadata and returns package names and versions, regardless of whether they are currently loaded in memory. Access is restricted to debug mode and requires the core endpoints feature flag to be enabled.","title":"installed_modules"},{"location":"services/core_responses/#aniachifast.services.core_responses.modules_count","text":"modules_count ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Return the number of Python modules currently loaded in memory. This endpoint inspects sys.modules to determine how many modules have been imported and are active in the current runtime. Returns: JSONResponse ( JSONResponse ) \u2013 Count of loaded modules and current timestamp.","title":"modules_count"},{"location":"services/core_responses/#aniachifast.services.core_responses.modules_versions","text":"modules_versions ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = Path ( ... , description = \"Output format\" ), ) -> Response Returns version information for currently loaded Python modules. For each loaded module, this endpoint attempts to resolve its version using installed package metadata. If unavailable, it falls back to the module's __version__ attribute when present. Only modules already loaded into memory are inspected. Access is restricted to debug mode and requires the core endpoints feature flag to be enabled.","title":"modules_versions"},{"location":"services/core_responses/#aniachifast.services.core_responses.slash","text":"slash ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Root core utilities endpoint. Provides a simple textual response confirming availability of core utilities along with the current server time. Access is restricted to debug mode and requires the core endpoints feature flag to be enabled. Returns: PlainTextResponse ( PlainTextResponse ) \u2013 Basic service message and timestamp.","title":"slash"},{"location":"services/core_responses/#aniachifast.services.core_responses.slash_modules","text":"slash_modules ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Base endpoint for module-related core utilities. Serves as a grouping endpoint for both loaded and installed module inspection routes.","title":"slash_modules"},{"location":"services/core_responses/#aniachifast.services.core_responses.slash_modules_mem","text":"slash_modules_mem ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Base endpoint for in-memory module inspection. Acts as a logical namespace root for endpoints related to modules currently loaded into memory.","title":"slash_modules_mem"},{"location":"services/core_responses/#aniachifast.services.core_responses.total_objects","text":"total_objects ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Return the total number of objects tracked by Python's garbage collector. This endpoint uses gc.get_objects() to inspect all objects currently tracked in memory by the garbage collector. Intended for memory diagnostics and leak investigation. Returns: JSONResponse ( JSONResponse ) \u2013 Total object count and current timestamp.","title":"total_objects"},{"location":"services/database_responses/","text":"Database Response Service aniachifast.services.database_responses Database administrative and inspection endpoints. This module exposes a set of read-only endpoints to inspect the state, configuration, and performance of the connected PostgreSQL database. Features: - Database version and session info - Active connections - Table listings and size metrics - Table structure (schema) - Query performance statistics - Database-level statistics Access Control: - Controlled by ENABLE_RDS_INFO_ENDPOINT setting. - Rate limited. - Intended for debugging and monitoring. DB_DEPENDENCY module-attribute DB_DEPENDENCY = Depends ( get_db ) limiter module-attribute limiter = get_limiter () queries module-attribute queries = build_queries () router module-attribute router = APIRouter ( dependencies = [ Depends ( rds_enabled_guard )] ) settings module-attribute settings = get_settings () active_connections async active_connections ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse List all active database connections. Returns a list of active sessions for the current database user, including client address, application name, and query state. all_tables async all_tables ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse List all user tables in the public schema. Excludes system tables and statistics tables. database_stats async database_stats ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get database-level statistics. Returns metrics from pg_stat_database including: - Commit/Rollback counts - Tuples returned/fetched/inserted/updated/deleted - Deadlocks and conflicts db_version_full async db_version_full ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get detailed database version information. Returns comprehensive metadata including OS version, server IP, and port configuration. db_version_simple async db_version_simple ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get simplified database version information. Returns basic metadata about the connected database instance, including version, current user, and server time. last_queries async last_queries ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get statistics on recently executed queries. Returns the top 500 queries by average execution time, including call counts and rows returned. Requires pg_stat_statements to be enabled in the database. rds_enabled_guard rds_enabled_guard () Dependency guard that restricts access to RDS-related endpoints. This dependency ensures that the RDS information endpoint is only accessible when both conditions are met: - The RDS info endpoint is explicitly enabled via configuration. - The application is running in DEBUG mode. If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled or the application is not running in debug mode. Example Use this guard as a dependency in a router or endpoint to restrict access to internal or sensitive RDS information. router = APIRouter( ... dependencies=[Depends(rds_enabled_guard)] ... ) slash async slash ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Root database utils endpoint. Returns a simple ASCII banner with the current server time. table_sizes async table_sizes ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get size metrics for all tables. Returns detailed size information including: - Total size (data + indexes) - Main relation size - Index size - Toast size table_structure async table_structure ( request : Request , table : str = Query ( ... , description = \"Table name to inspect\" ), db : Session = DB_DEPENDENCY , ) -> JSONResponse Get the structure (columns and types) of a specific table. Parameters: table ( str , default: Query (..., description='Table name to inspect') ) \u2013 The name of the table to inspect.","title":"Database Responses"},{"location":"services/database_responses/#database-response-service","text":"","title":"Database Response Service"},{"location":"services/database_responses/#aniachifast.services.database_responses","text":"Database administrative and inspection endpoints. This module exposes a set of read-only endpoints to inspect the state, configuration, and performance of the connected PostgreSQL database. Features: - Database version and session info - Active connections - Table listings and size metrics - Table structure (schema) - Query performance statistics - Database-level statistics Access Control: - Controlled by ENABLE_RDS_INFO_ENDPOINT setting. - Rate limited. - Intended for debugging and monitoring.","title":"database_responses"},{"location":"services/database_responses/#aniachifast.services.database_responses.DB_DEPENDENCY","text":"DB_DEPENDENCY = Depends ( get_db )","title":"DB_DEPENDENCY"},{"location":"services/database_responses/#aniachifast.services.database_responses.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/database_responses/#aniachifast.services.database_responses.queries","text":"queries = build_queries ()","title":"queries"},{"location":"services/database_responses/#aniachifast.services.database_responses.router","text":"router = APIRouter ( dependencies = [ Depends ( rds_enabled_guard )] )","title":"router"},{"location":"services/database_responses/#aniachifast.services.database_responses.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/database_responses/#aniachifast.services.database_responses.active_connections","text":"active_connections ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse List all active database connections. Returns a list of active sessions for the current database user, including client address, application name, and query state.","title":"active_connections"},{"location":"services/database_responses/#aniachifast.services.database_responses.all_tables","text":"all_tables ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse List all user tables in the public schema. Excludes system tables and statistics tables.","title":"all_tables"},{"location":"services/database_responses/#aniachifast.services.database_responses.database_stats","text":"database_stats ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get database-level statistics. Returns metrics from pg_stat_database including: - Commit/Rollback counts - Tuples returned/fetched/inserted/updated/deleted - Deadlocks and conflicts","title":"database_stats"},{"location":"services/database_responses/#aniachifast.services.database_responses.db_version_full","text":"db_version_full ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get detailed database version information. Returns comprehensive metadata including OS version, server IP, and port configuration.","title":"db_version_full"},{"location":"services/database_responses/#aniachifast.services.database_responses.db_version_simple","text":"db_version_simple ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get simplified database version information. Returns basic metadata about the connected database instance, including version, current user, and server time.","title":"db_version_simple"},{"location":"services/database_responses/#aniachifast.services.database_responses.last_queries","text":"last_queries ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get statistics on recently executed queries. Returns the top 500 queries by average execution time, including call counts and rows returned. Requires pg_stat_statements to be enabled in the database.","title":"last_queries"},{"location":"services/database_responses/#aniachifast.services.database_responses.rds_enabled_guard","text":"rds_enabled_guard () Dependency guard that restricts access to RDS-related endpoints. This dependency ensures that the RDS information endpoint is only accessible when both conditions are met: - The RDS info endpoint is explicitly enabled via configuration. - The application is running in DEBUG mode. If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled or the application is not running in debug mode. Example Use this guard as a dependency in a router or endpoint to restrict access to internal or sensitive RDS information. router = APIRouter( ... dependencies=[Depends(rds_enabled_guard)] ... )","title":"rds_enabled_guard"},{"location":"services/database_responses/#aniachifast.services.database_responses.slash","text":"slash ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Root database utils endpoint. Returns a simple ASCII banner with the current server time.","title":"slash"},{"location":"services/database_responses/#aniachifast.services.database_responses.table_sizes","text":"table_sizes ( request : Request , _ : bool = NO_PARAMS_DEPENDENCY , db : Session = DB_DEPENDENCY , ) -> JSONResponse Get size metrics for all tables. Returns detailed size information including: - Total size (data + indexes) - Main relation size - Index size - Toast size","title":"table_sizes"},{"location":"services/database_responses/#aniachifast.services.database_responses.table_structure","text":"table_structure ( request : Request , table : str = Query ( ... , description = \"Table name to inspect\" ), db : Session = DB_DEPENDENCY , ) -> JSONResponse Get the structure (columns and types) of a specific table. Parameters: table ( str , default: Query (..., description='Table name to inspect') ) \u2013 The name of the table to inspect.","title":"table_structure"},{"location":"services/health_responses/","text":"Health Response Service aniachifast.services.health_responses Health check endpoints for application monitoring. This module provides various health check endpoints to monitor the application status, system resources, and server information. All endpoints support rate limiting and can be disabled via configuration. limiter module-attribute limiter = get_limiter () router module-attribute router = APIRouter ( dependencies = [ Depends ( health_reponses_enabled_guard )] ) settings module-attribute settings = get_settings () epoch_time async epoch_time ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Server epoch time endpoint. Returns the current server time as Unix epoch timestamp for programmatic time synchronization and logging purposes. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Current server time as epoch timestamp. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings. health async health ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Basic health check endpoint. Provides a lightweight health status check for the application. Available on both /status and /health paths for compatibility. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Basic health status response. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings. health_memory async health_memory ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> Any System memory health endpoint. Returns current system memory usage statistics and health metrics including available memory, used memory, and memory pressure indicators. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: Any ( Any ) \u2013 System memory health metrics response. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings. health_reponses_enabled_guard health_reponses_enabled_guard () Dependency guard that restricts access to health-related endpoints. This dependency ensures that the system information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to health utilities. router = APIRouter( ... dependencies=[Depends(ENABLE_HEALTH_ENDPOINT)] ... ) health_verbose async health_verbose ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Verbose health check endpoint. Provides detailed server and application health information including system metrics, configuration status, and extended diagnostics. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Detailed health information response. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings. server_time async server_time ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Server time endpoint. Returns the current server time with timezone information in a human-readable format for debugging and synchronization purposes. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Current server time with timezone information. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings. uptime async uptime ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Server uptime endpoint. Returns the current server uptime for monitoring and debugging purposes. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Current server time as epoch timestamp. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings.","title":"Health Responses"},{"location":"services/health_responses/#health-response-service","text":"","title":"Health Response Service"},{"location":"services/health_responses/#aniachifast.services.health_responses","text":"Health check endpoints for application monitoring. This module provides various health check endpoints to monitor the application status, system resources, and server information. All endpoints support rate limiting and can be disabled via configuration.","title":"health_responses"},{"location":"services/health_responses/#aniachifast.services.health_responses.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/health_responses/#aniachifast.services.health_responses.router","text":"router = APIRouter ( dependencies = [ Depends ( health_reponses_enabled_guard )] )","title":"router"},{"location":"services/health_responses/#aniachifast.services.health_responses.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/health_responses/#aniachifast.services.health_responses.epoch_time","text":"epoch_time ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Server epoch time endpoint. Returns the current server time as Unix epoch timestamp for programmatic time synchronization and logging purposes. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Current server time as epoch timestamp. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings.","title":"epoch_time"},{"location":"services/health_responses/#aniachifast.services.health_responses.health","text":"health ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Basic health check endpoint. Provides a lightweight health status check for the application. Available on both /status and /health paths for compatibility. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Basic health status response. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings.","title":"health"},{"location":"services/health_responses/#aniachifast.services.health_responses.health_memory","text":"health_memory ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> Any System memory health endpoint. Returns current system memory usage statistics and health metrics including available memory, used memory, and memory pressure indicators. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: Any ( Any ) \u2013 System memory health metrics response. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings.","title":"health_memory"},{"location":"services/health_responses/#aniachifast.services.health_responses.health_reponses_enabled_guard","text":"health_reponses_enabled_guard () Dependency guard that restricts access to health-related endpoints. This dependency ensures that the system information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to health utilities. router = APIRouter( ... dependencies=[Depends(ENABLE_HEALTH_ENDPOINT)] ... )","title":"health_reponses_enabled_guard"},{"location":"services/health_responses/#aniachifast.services.health_responses.health_verbose","text":"health_verbose ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Verbose health check endpoint. Provides detailed server and application health information including system metrics, configuration status, and extended diagnostics. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Detailed health information response. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings.","title":"health_verbose"},{"location":"services/health_responses/#aniachifast.services.health_responses.server_time","text":"server_time ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Server time endpoint. Returns the current server time with timezone information in a human-readable format for debugging and synchronization purposes. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Current server time with timezone information. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings.","title":"server_time"},{"location":"services/health_responses/#aniachifast.services.health_responses.uptime","text":"uptime ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> JSONResponse Server uptime endpoint. Returns the current server uptime for monitoring and debugging purposes. Parameters: request ( Request ) \u2013 FastAPI request object for rate limiting. Returns: JSONResponse ( JSONResponse ) \u2013 Current server time as epoch timestamp. Raises: HTTPException \u2013 403 if health endpoints are disabled in settings.","title":"uptime"},{"location":"services/ip_responses/","text":"IP Responses aniachifast.services.ip_responses IP Utilities Service This module provides FastAPI endpoints for IP geolocation services using the GeoLite2 database. It offers both GET and POST endpoints to retrieve geographical information about IP addresses. Features: - GET endpoint with IP as path parameter - POST endpoint with IP in request payload - Integration with existing GeoIP resolver - Standardized API responses using APIResponseV2 - Rate limiting and error handling Dependencies GeoLite2 database via geo_ip_utils APIResponseV2 for response envelope FastAPI for routing and validation ALLOWED_HEADERS_DEPENDENCY_JSON module-attribute ALLOWED_HEADERS_DEPENDENCY_JSON = Depends ( allowed_headers ( JSON_TYPES ) ) ALLOWED_HEADERS_DEPENDENCY_WEB module-attribute ALLOWED_HEADERS_DEPENDENCY_WEB = Depends ( allowed_headers ( SIMPLE_TYPES ) ) limiter module-attribute limiter = get_limiter () router module-attribute router = APIRouter ( dependencies = [ Depends ( ip_reponses_enabled_guard )] ) settings module-attribute settings = get_settings () get_ip_info_path async get_ip_info_path ( request : Request , ip_address : str , _ = ALLOWED_HEADERS_DEPENDENCY_WEB , ) -> APIResponseV2 [ IPLocationResponse ] Get geographical information for an IP address via path parameter. This endpoint accepts an IP address as a path parameter and returns geographical information including country code and country name. Parameters: request ( Request ) \u2013 FastAPI request object ip_address ( str ) \u2013 IPv4 or IPv6 address to lookup Returns: APIResponseV2 [ IPLocationResponse ] \u2013 APIResponseV2[IPLocationResponse]: Standardized response with IP location data Raises: HTTPException \u2013 If the IP address format is invalid Example GET /ip/8.8.8.8 Response: { \"api_version\": \"v2\", \"status\": 200, \"timestamp\": 1640995200, \"request_id\": \"req_xyz789\", \"execution_time_ms\": 15.234, \"checksum\": \"sha256_hash...\", \"signature\": \"hmac_signature...\", \"data\": { \"ip_address\": \"8.8.8.8\", \"country_code\": \"US\", \"country\": \"United States\", \"is_localhost\": false, \"lookup_success\": true }, \"context\": { ... } } get_ip_info_payload async get_ip_info_payload ( request : Request , ip_request : IPRequest , _ = NO_PARAMS_DEPENDENCY , __ = ALLOWED_HEADERS_DEPENDENCY_JSON , ) -> APIResponseV2 [ IPLocationResponse ] Get geographical information for an IP address via request payload. This endpoint accepts an IP address in the request body and returns geographical information including country code and country name. Parameters: request ( Request ) \u2013 FastAPI request object ip_request ( IPRequest ) \u2013 Request payload containing the IP address Returns: APIResponseV2 [ IPLocationResponse ] \u2013 APIResponseV2[IPLocationResponse]: Standardized response with IP location data Example POST /ip/lookup { \"ip_address\": \"8.8.8.8\" } Response: { \"api_version\": \"v2\", \"status\": 200, \"timestamp\": 1640995200, \"request_id\": \"req_xyz789\", \"execution_time_ms\": 12.456, \"checksum\": \"sha256_hash...\", \"signature\": \"hmac_signature...\", \"data\": { \"ip_address\": \"8.8.8.8\", \"country_code\": \"US\", \"country\": \"United States\", \"is_localhost\": false, \"lookup_success\": true }, \"context\": { ... } } ip_reponses_enabled_guard ip_reponses_enabled_guard () Dependency guard that restricts access to IP-related endpoints. This dependency ensures that the IP information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to ip lookups. router = APIRouter( ... dependencies=[Depends(ip_reponses_enabled_guard)] ... ) slash async slash ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Root database utils endpoint. Returns a simple ASCII banner with the current server time.","title":"IP Responses"},{"location":"services/ip_responses/#ip-responses","text":"","title":"IP Responses"},{"location":"services/ip_responses/#aniachifast.services.ip_responses","text":"","title":"ip_responses"},{"location":"services/ip_responses/#aniachifast.services.ip_responses--ip-utilities-service","text":"This module provides FastAPI endpoints for IP geolocation services using the GeoLite2 database. It offers both GET and POST endpoints to retrieve geographical information about IP addresses. Features: - GET endpoint with IP as path parameter - POST endpoint with IP in request payload - Integration with existing GeoIP resolver - Standardized API responses using APIResponseV2 - Rate limiting and error handling Dependencies GeoLite2 database via geo_ip_utils APIResponseV2 for response envelope FastAPI for routing and validation","title":"IP Utilities Service"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.ALLOWED_HEADERS_DEPENDENCY_JSON","text":"ALLOWED_HEADERS_DEPENDENCY_JSON = Depends ( allowed_headers ( JSON_TYPES ) )","title":"ALLOWED_HEADERS_DEPENDENCY_JSON"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.ALLOWED_HEADERS_DEPENDENCY_WEB","text":"ALLOWED_HEADERS_DEPENDENCY_WEB = Depends ( allowed_headers ( SIMPLE_TYPES ) )","title":"ALLOWED_HEADERS_DEPENDENCY_WEB"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.router","text":"router = APIRouter ( dependencies = [ Depends ( ip_reponses_enabled_guard )] )","title":"router"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.get_ip_info_path","text":"get_ip_info_path ( request : Request , ip_address : str , _ = ALLOWED_HEADERS_DEPENDENCY_WEB , ) -> APIResponseV2 [ IPLocationResponse ] Get geographical information for an IP address via path parameter. This endpoint accepts an IP address as a path parameter and returns geographical information including country code and country name. Parameters: request ( Request ) \u2013 FastAPI request object ip_address ( str ) \u2013 IPv4 or IPv6 address to lookup Returns: APIResponseV2 [ IPLocationResponse ] \u2013 APIResponseV2[IPLocationResponse]: Standardized response with IP location data Raises: HTTPException \u2013 If the IP address format is invalid Example GET /ip/8.8.8.8 Response: { \"api_version\": \"v2\", \"status\": 200, \"timestamp\": 1640995200, \"request_id\": \"req_xyz789\", \"execution_time_ms\": 15.234, \"checksum\": \"sha256_hash...\", \"signature\": \"hmac_signature...\", \"data\": { \"ip_address\": \"8.8.8.8\", \"country_code\": \"US\", \"country\": \"United States\", \"is_localhost\": false, \"lookup_success\": true }, \"context\": { ... } }","title":"get_ip_info_path"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.get_ip_info_payload","text":"get_ip_info_payload ( request : Request , ip_request : IPRequest , _ = NO_PARAMS_DEPENDENCY , __ = ALLOWED_HEADERS_DEPENDENCY_JSON , ) -> APIResponseV2 [ IPLocationResponse ] Get geographical information for an IP address via request payload. This endpoint accepts an IP address in the request body and returns geographical information including country code and country name. Parameters: request ( Request ) \u2013 FastAPI request object ip_request ( IPRequest ) \u2013 Request payload containing the IP address Returns: APIResponseV2 [ IPLocationResponse ] \u2013 APIResponseV2[IPLocationResponse]: Standardized response with IP location data Example POST /ip/lookup { \"ip_address\": \"8.8.8.8\" } Response: { \"api_version\": \"v2\", \"status\": 200, \"timestamp\": 1640995200, \"request_id\": \"req_xyz789\", \"execution_time_ms\": 12.456, \"checksum\": \"sha256_hash...\", \"signature\": \"hmac_signature...\", \"data\": { \"ip_address\": \"8.8.8.8\", \"country_code\": \"US\", \"country\": \"United States\", \"is_localhost\": false, \"lookup_success\": true }, \"context\": { ... } }","title":"get_ip_info_payload"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.ip_reponses_enabled_guard","text":"ip_reponses_enabled_guard () Dependency guard that restricts access to IP-related endpoints. This dependency ensures that the IP information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to ip lookups. router = APIRouter( ... dependencies=[Depends(ip_reponses_enabled_guard)] ... )","title":"ip_reponses_enabled_guard"},{"location":"services/ip_responses/#aniachifast.services.ip_responses.slash","text":"slash ( request : Request , _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Root database utils endpoint. Returns a simple ASCII banner with the current server time.","title":"slash"},{"location":"services/ledger_responses/","text":"Services Ledger Responses aniachifast.services.ledger_responses Activity Ledger Debug & Query Endpoints. This module exposes read-only administrative endpoints for querying activity ledger events across supported backends (DynamoDB or PostgreSQL). Key characteristics Backend-agnostic read access via ActivityLedgerReader protocol Explicit support for: User-scoped events Company-scoped events Anonymous traffic Global event queries Optional pagination, ordering, and date-range filtering Multi-format responses (JSON, CSV, etc.) Strictly guarded: disabled by default in production IMPORTANT These endpoints are intended for: - Debugging - Auditing - Operations - Incident investigation They MUST NOT be exposed publicly. Guards Access is granted only if : - ENABLE_LEDGERS_DEBUG_ENDPOINT = True - DEBUG = True router module-attribute router : APIRouter = APIRouter ( dependencies = [ Depends ( ledger_debug_reponses_enabled_guard ) ] ) get_all_events get_all_events ( request : Request , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve all activity events across all users and companies. Example curl \"http://localhost:8000/ledger/all/json?limit=100\" get_company_events get_company_events ( request : Request , company_ref : str , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve activity events for a company or anonymous traffic. Path behavior \"anonymous\" \u2192 events without company_id \" \" \u2192 company-specific events Example curl \"http://localhost:8000/ledger/companies/json/anonymous\" curl \"http://localhost:8000/ledger/companies/json/123e4567-e8.....174000\" curl \"http://localhost:8000/ledger/companies/html/123e4567-e8.....174000\" curl \"http://localhost:8000/ledger/companies/xml/123e4567-e8.....174000\" get_events_by_registered_users_endpoint get_events_by_registered_users_endpoint ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve activity events for registered users only (events where user_id IS NOT NULL). Example curl \"http://localhost:8000/ledger/users/json\" get_ledger_reader get_ledger_reader () -> ActivityLedgerReader Dependency resolver for ledger reader backend. Backend selection is controlled via configuration: LEDGER_QUEUE_IMPLEMENTATION: - \"postgresql\" - \"dynamodb\" (default) Returns ActivityLedgerReader Concrete ledger reader implementation. get_user_events get_user_events ( user_ref : str , request : Request , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve activity events for a specific user. Path behavior \"anonymous\" \u2192 events without user_id \" \" \u2192 events for a specific user Query parameters from_ts : datetime, optional Start timestamp (inclusive). to_ts : datetime, optional End timestamp (inclusive). limit : int Maximum number of records. oldest_first : bool Sort order. Example curl \"http://localhost:8000/ledger/user/json/anonymous\" curl \"http://localhost:8000/ledger/user/json/123e4567-e89b....000?limit=50\" ledger_debug_reponses_enabled_guard ledger_debug_reponses_enabled_guard () -> None Dependency guard for ledger debug endpoints. Ensures ledger endpoints are only accessible when explicitly enabled and running in debug mode. Raises HTTPException 403 Forbidden if access is not allowed. slash async slash ( _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Ledger utilities root endpoint. Returns an ASCII banner identifying the active ledger backend and current server time. Example curl http://localhost:8000/ledger/","title":"Ledger Responses"},{"location":"services/ledger_responses/#services-ledger-responses","text":"","title":"Services Ledger Responses"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses","text":"Activity Ledger Debug & Query Endpoints. This module exposes read-only administrative endpoints for querying activity ledger events across supported backends (DynamoDB or PostgreSQL).","title":"ledger_responses"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses--key-characteristics","text":"Backend-agnostic read access via ActivityLedgerReader protocol Explicit support for: User-scoped events Company-scoped events Anonymous traffic Global event queries Optional pagination, ordering, and date-range filtering Multi-format responses (JSON, CSV, etc.) Strictly guarded: disabled by default in production","title":"Key characteristics"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses--important","text":"These endpoints are intended for: - Debugging - Auditing - Operations - Incident investigation They MUST NOT be exposed publicly.","title":"IMPORTANT"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses--guards","text":"Access is granted only if : - ENABLE_LEDGERS_DEBUG_ENDPOINT = True - DEBUG = True","title":"Guards"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.router","text":"router : APIRouter = APIRouter ( dependencies = [ Depends ( ledger_debug_reponses_enabled_guard ) ] )","title":"router"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_all_events","text":"get_all_events ( request : Request , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve all activity events across all users and companies.","title":"get_all_events"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_all_events--example","text":"curl \"http://localhost:8000/ledger/all/json?limit=100\"","title":"Example"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_company_events","text":"get_company_events ( request : Request , company_ref : str , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve activity events for a company or anonymous traffic.","title":"get_company_events"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_company_events--path-behavior","text":"\"anonymous\" \u2192 events without company_id \" \" \u2192 company-specific events","title":"Path behavior"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_company_events--example","text":"curl \"http://localhost:8000/ledger/companies/json/anonymous\" curl \"http://localhost:8000/ledger/companies/json/123e4567-e8.....174000\" curl \"http://localhost:8000/ledger/companies/html/123e4567-e8.....174000\" curl \"http://localhost:8000/ledger/companies/xml/123e4567-e8.....174000\"","title":"Example"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_events_by_registered_users_endpoint","text":"get_events_by_registered_users_endpoint ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve activity events for registered users only (events where user_id IS NOT NULL).","title":"get_events_by_registered_users_endpoint"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_events_by_registered_users_endpoint--example","text":"curl \"http://localhost:8000/ledger/users/json\"","title":"Example"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_ledger_reader","text":"get_ledger_reader () -> ActivityLedgerReader Dependency resolver for ledger reader backend. Backend selection is controlled via configuration: LEDGER_QUEUE_IMPLEMENTATION: - \"postgresql\" - \"dynamodb\" (default)","title":"get_ledger_reader"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_ledger_reader--returns","text":"ActivityLedgerReader Concrete ledger reader implementation.","title":"Returns"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_user_events","text":"get_user_events ( user_ref : str , request : Request , _fmt : AvailableFormats = FMT_PATH , from_ts : datetime | None = Query ( default = None ), to_ts : datetime | None = Query ( default = None ), limit : int = Query ( default = 200 ), oldest_first : bool = Query ( default = False ), ledger : ActivityLedgerReader = Depends ( get_ledger_reader ), ) -> Response Retrieve activity events for a specific user.","title":"get_user_events"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_user_events--path-behavior","text":"\"anonymous\" \u2192 events without user_id \" \" \u2192 events for a specific user","title":"Path behavior"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_user_events--query-parameters","text":"from_ts : datetime, optional Start timestamp (inclusive). to_ts : datetime, optional End timestamp (inclusive). limit : int Maximum number of records. oldest_first : bool Sort order.","title":"Query parameters"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.get_user_events--example","text":"curl \"http://localhost:8000/ledger/user/json/anonymous\" curl \"http://localhost:8000/ledger/user/json/123e4567-e89b....000?limit=50\"","title":"Example"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.ledger_debug_reponses_enabled_guard","text":"ledger_debug_reponses_enabled_guard () -> None Dependency guard for ledger debug endpoints. Ensures ledger endpoints are only accessible when explicitly enabled and running in debug mode.","title":"ledger_debug_reponses_enabled_guard"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.ledger_debug_reponses_enabled_guard--raises","text":"HTTPException 403 Forbidden if access is not allowed.","title":"Raises"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.slash","text":"slash ( _ = NO_PARAMS_DEPENDENCY ) -> PlainTextResponse Ledger utilities root endpoint. Returns an ASCII banner identifying the active ledger backend and current server time.","title":"slash"},{"location":"services/ledger_responses/#aniachifast.services.ledger_responses.slash--example","text":"curl http://localhost:8000/ledger/","title":"Example"},{"location":"services/overview/","text":"Services Overview The services module provides response builders and business logic for various API operations. Available Services Authentication Services Auth Response - Authentication response builders and handlers Admin Users Response - Administrative user management responses Data Services Database Responses - Database operation responses Common Responses - Common response patterns Core Responses - Core application responses System Services Health Responses - Health check and monitoring responses Process Responses - Process management responses Utils Response - Utility operation responses Network Services IP Responses - IP address and geolocation responses Usage from aniachifast.services import auth_response, health_responses # Authentication responses response = auth_response.build_login_response(user, token) # Health check responses health = health_responses.get_health_status() Response Patterns All services follow consistent response patterns: - Success responses with data - Error responses with details - Standardized status codes - Consistent envelope structure","title":"Overview"},{"location":"services/overview/#services-overview","text":"The services module provides response builders and business logic for various API operations.","title":"Services Overview"},{"location":"services/overview/#available-services","text":"","title":"Available Services"},{"location":"services/overview/#authentication-services","text":"Auth Response - Authentication response builders and handlers Admin Users Response - Administrative user management responses","title":"Authentication Services"},{"location":"services/overview/#data-services","text":"Database Responses - Database operation responses Common Responses - Common response patterns Core Responses - Core application responses","title":"Data Services"},{"location":"services/overview/#system-services","text":"Health Responses - Health check and monitoring responses Process Responses - Process management responses Utils Response - Utility operation responses","title":"System Services"},{"location":"services/overview/#network-services","text":"IP Responses - IP address and geolocation responses","title":"Network Services"},{"location":"services/overview/#usage","text":"from aniachifast.services import auth_response, health_responses # Authentication responses response = auth_response.build_login_response(user, token) # Health check responses health = health_responses.get_health_status()","title":"Usage"},{"location":"services/overview/#response-patterns","text":"All services follow consistent response patterns: - Success responses with data - Error responses with details - Standardized status codes - Consistent envelope structure","title":"Response Patterns"},{"location":"services/process_responses/","text":"Process Response Service aniachifast.services.process_responses Operating system process inspection endpoints. This module exposes HTTP endpoints that provide runtime visibility into operating system processes currently visible to the application. All endpoints are intended for diagnostic and debugging purposes only and are protected by: - A feature flag ( ENABLE_PROCESS_ENDPOINT ) - Debug mode ( DEBUG ) - Rate limiting - Header validation This module acts as a presentation layer on top of the process inspection logic implemented in aniachifast.tools.process_utils . Supported output formats are defined in AvailableFormats , and sorting fields are strictly validated using the OrderBy enumeration to prevent invalid or unsafe input. FMT_PATH module-attribute FMT_PATH = Path ( ... , description = 'Output format' ) LIMITS_PATH module-attribute LIMITS_PATH = Path ( ... , ge = 1 , description = \"Maximum number of processes to return\" , ) SORT_BY_PATH module-attribute SORT_BY_PATH = Path ( ... , description = 'Field to sort by' ) limiter module-attribute limiter = get_limiter () router module-attribute router = APIRouter ( dependencies = [ Depends ( process_reponses_enabled_guard )] ) settings module-attribute settings = get_settings () asyncio_tasks async asyncio_tasks ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> AsyncioTasksResponseModel Inspect asyncio tasks currently running in the active event loop. This endpoint reports: - Total number of tasks - Number of running tasks - Per-task metadata including coroutine name and execution location \u26a0\ufe0f NOTE: Only tasks running inside the current worker process are visible. concurrency_cluster_inspection async concurrency_cluster_inspection ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Cluster-wide inspection of all Uvicorn workers and their concurrency. This endpoint attempts to discover and analyze ALL Uvicorn workers running on the system, providing a complete view of: - All worker processes (using parent-child process detection) - Total thread count across workers - Memory usage across workers - Estimated ledger threads per worker \u26a0\ufe0f NOTE: This endpoint uses system-level process inspection (psutil) and may require appropriate permissions. It shows estimated information since we cannot directly access internal state of other worker processes. concurrency_full_inspection async concurrency_full_inspection ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Complete inspection of all concurrency mechanisms in the current worker. \u26a0\ufe0f IMPORTANT: This endpoint shows information for the CURRENT WORKER only. If Uvicorn is running with multiple workers (--workers N), each worker has its own separate process with independent: - ThreadPoolExecutors (including ledger executor) - AsyncIO event loops and tasks - System threads - Memory space To get information from ALL workers, use the /concurrency/cluster endpoint. debug_processes async debug_processes ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Debug endpoint to see all processes and help troubleshoot worker detection. This endpoint shows all Python processes and their command lines to help understand why the cluster endpoint might not be detecting all workers. process async process ( request : Request , _fmt : AvailableFormats = FMT_PATH , _sort_by : OrderBy = SORT_BY_PATH , limits : int = LIMITS_PATH , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> Response Retrieve operating system process information. This endpoint returns a snapshot of currently running operating system processes visible to the application. The results can be: Sorted by a validated metric (memory usage, CPU, PID, etc.). Limited to a maximum number of entries. Rendered in multiple output formats suitable for humans or machines. The sorting field is validated using the OrderBy enum, ensuring that only supported metrics can be used and preventing arbitrary or unsafe input. Access Control: - Requires ENABLE_PROCESS_ENDPOINT to be enabled. - Requires application to be running in DEBUG mode. - Enforced rate limiting (100 requests per minute). Parameters: request ( Request ) \u2013 The incoming FastAPI request object. _fmt ( AvailableFormats , default: FMT_PATH ) \u2013 Output format for the response. Supported values include: json , html , txt , plain , md , csv , tsv , xml , yaml . _sort_by ( OrderBy , default: SORT_BY_PATH ) \u2013 Field used to sort the process list. Valid values are defined by the OrderBy enumeration. limits ( int , default: LIMITS_PATH ) \u2013 Maximum number of processes to return. Must be greater than or equal to 1. Returns: Response ( Response ) \u2013 A formatted response containing process information, rendered according to the requested output format. Raises: HTTPException (403) \u2013 If core route access is disabled or the application is not running in debug mode. Example GET /json/rss/10 GET /html/cpu/25 GET /csv/pid/50 process_reponses_enabled_guard process_reponses_enabled_guard () Dependency guard that restricts access to process-related endpoints. This dependency ensures that the system information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to process utilities. router = APIRouter( ... dependencies=[Depends(ENABLE_PROCESS_ENDPOINT)] ... )","title":"Process Responses"},{"location":"services/process_responses/#process-response-service","text":"","title":"Process Response Service"},{"location":"services/process_responses/#aniachifast.services.process_responses","text":"Operating system process inspection endpoints. This module exposes HTTP endpoints that provide runtime visibility into operating system processes currently visible to the application. All endpoints are intended for diagnostic and debugging purposes only and are protected by: - A feature flag ( ENABLE_PROCESS_ENDPOINT ) - Debug mode ( DEBUG ) - Rate limiting - Header validation This module acts as a presentation layer on top of the process inspection logic implemented in aniachifast.tools.process_utils . Supported output formats are defined in AvailableFormats , and sorting fields are strictly validated using the OrderBy enumeration to prevent invalid or unsafe input.","title":"process_responses"},{"location":"services/process_responses/#aniachifast.services.process_responses.FMT_PATH","text":"FMT_PATH = Path ( ... , description = 'Output format' )","title":"FMT_PATH"},{"location":"services/process_responses/#aniachifast.services.process_responses.LIMITS_PATH","text":"LIMITS_PATH = Path ( ... , ge = 1 , description = \"Maximum number of processes to return\" , )","title":"LIMITS_PATH"},{"location":"services/process_responses/#aniachifast.services.process_responses.SORT_BY_PATH","text":"SORT_BY_PATH = Path ( ... , description = 'Field to sort by' )","title":"SORT_BY_PATH"},{"location":"services/process_responses/#aniachifast.services.process_responses.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/process_responses/#aniachifast.services.process_responses.router","text":"router = APIRouter ( dependencies = [ Depends ( process_reponses_enabled_guard )] )","title":"router"},{"location":"services/process_responses/#aniachifast.services.process_responses.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/process_responses/#aniachifast.services.process_responses.asyncio_tasks","text":"asyncio_tasks ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> AsyncioTasksResponseModel Inspect asyncio tasks currently running in the active event loop. This endpoint reports: - Total number of tasks - Number of running tasks - Per-task metadata including coroutine name and execution location \u26a0\ufe0f NOTE: Only tasks running inside the current worker process are visible.","title":"asyncio_tasks"},{"location":"services/process_responses/#aniachifast.services.process_responses.concurrency_cluster_inspection","text":"concurrency_cluster_inspection ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Cluster-wide inspection of all Uvicorn workers and their concurrency. This endpoint attempts to discover and analyze ALL Uvicorn workers running on the system, providing a complete view of: - All worker processes (using parent-child process detection) - Total thread count across workers - Memory usage across workers - Estimated ledger threads per worker \u26a0\ufe0f NOTE: This endpoint uses system-level process inspection (psutil) and may require appropriate permissions. It shows estimated information since we cannot directly access internal state of other worker processes.","title":"concurrency_cluster_inspection"},{"location":"services/process_responses/#aniachifast.services.process_responses.concurrency_full_inspection","text":"concurrency_full_inspection ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Complete inspection of all concurrency mechanisms in the current worker. \u26a0\ufe0f IMPORTANT: This endpoint shows information for the CURRENT WORKER only. If Uvicorn is running with multiple workers (--workers N), each worker has its own separate process with independent: - ThreadPoolExecutors (including ledger executor) - AsyncIO event loops and tasks - System threads - Memory space To get information from ALL workers, use the /concurrency/cluster endpoint.","title":"concurrency_full_inspection"},{"location":"services/process_responses/#aniachifast.services.process_responses.debug_processes","text":"debug_processes ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> JSONResponse Debug endpoint to see all processes and help troubleshoot worker detection. This endpoint shows all Python processes and their command lines to help understand why the cluster endpoint might not be detecting all workers.","title":"debug_processes"},{"location":"services/process_responses/#aniachifast.services.process_responses.process","text":"process ( request : Request , _fmt : AvailableFormats = FMT_PATH , _sort_by : OrderBy = SORT_BY_PATH , limits : int = LIMITS_PATH , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> Response Retrieve operating system process information. This endpoint returns a snapshot of currently running operating system processes visible to the application. The results can be: Sorted by a validated metric (memory usage, CPU, PID, etc.). Limited to a maximum number of entries. Rendered in multiple output formats suitable for humans or machines. The sorting field is validated using the OrderBy enum, ensuring that only supported metrics can be used and preventing arbitrary or unsafe input. Access Control: - Requires ENABLE_PROCESS_ENDPOINT to be enabled. - Requires application to be running in DEBUG mode. - Enforced rate limiting (100 requests per minute). Parameters: request ( Request ) \u2013 The incoming FastAPI request object. _fmt ( AvailableFormats , default: FMT_PATH ) \u2013 Output format for the response. Supported values include: json , html , txt , plain , md , csv , tsv , xml , yaml . _sort_by ( OrderBy , default: SORT_BY_PATH ) \u2013 Field used to sort the process list. Valid values are defined by the OrderBy enumeration. limits ( int , default: LIMITS_PATH ) \u2013 Maximum number of processes to return. Must be greater than or equal to 1. Returns: Response ( Response ) \u2013 A formatted response containing process information, rendered according to the requested output format. Raises: HTTPException (403) \u2013 If core route access is disabled or the application is not running in debug mode. Example GET /json/rss/10 GET /html/cpu/25 GET /csv/pid/50","title":"process"},{"location":"services/process_responses/#aniachifast.services.process_responses.process_reponses_enabled_guard","text":"process_reponses_enabled_guard () Dependency guard that restricts access to process-related endpoints. This dependency ensures that the system information endpoint is only accessible when both conditions are met: - The IP info endpoint is explicitly enabled via configuration. - If either condition is not satisfied, access is denied with an HTTP 403 Forbidden response. Raises: HTTPException \u2013 Raised with status code 403 if the endpoint is disabled Example Use this guard as a dependency in a router or endpoint to restrict access to process utilities. router = APIRouter( ... dependencies=[Depends(ENABLE_PROCESS_ENDPOINT)] ... )","title":"process_reponses_enabled_guard"},{"location":"services/roles_response/","text":"Services Roles Response aniachifast.services.roles_response Role Management API Routes This module provides HTTP endpoints for managing roles and user role assignments. router module-attribute router = APIRouter () RoleAssignment Bases: BaseModel Model for assigning/removing a role to/from a user role_name instance-attribute role_name : str user_id instance-attribute user_id : int RoleCreate Bases: BaseModel Model for creating a new role description class-attribute instance-attribute description : str | None = None name instance-attribute name : str assign_role async assign_role ( request : Request , assignment : RoleAssignment , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Assign a role to a user. Requires: admin role create_new_role async create_new_role ( request : Request , role_data : RoleCreate , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Create a new role in the system. Requires: admin role get_user_roles_endpoint async get_user_roles_endpoint ( request : Request , user_id : int , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Get all roles assigned to a specific user. Requires: admin role list_roles async list_roles ( request : Request , active_only : bool = True , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) List all roles in the system. Requires: admin role remove_role async remove_role ( request : Request , assignment : RoleAssignment , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Remove a role from a user. Requires: admin role","title":"Roles Response"},{"location":"services/roles_response/#services-roles-response","text":"","title":"Services Roles Response"},{"location":"services/roles_response/#aniachifast.services.roles_response","text":"","title":"roles_response"},{"location":"services/roles_response/#aniachifast.services.roles_response--role-management-api-routes","text":"This module provides HTTP endpoints for managing roles and user role assignments.","title":"Role Management API Routes"},{"location":"services/roles_response/#aniachifast.services.roles_response.router","text":"router = APIRouter ()","title":"router"},{"location":"services/roles_response/#aniachifast.services.roles_response.RoleAssignment","text":"Bases: BaseModel Model for assigning/removing a role to/from a user","title":"RoleAssignment"},{"location":"services/roles_response/#aniachifast.services.roles_response.RoleAssignment.role_name","text":"role_name : str","title":"role_name"},{"location":"services/roles_response/#aniachifast.services.roles_response.RoleAssignment.user_id","text":"user_id : int","title":"user_id"},{"location":"services/roles_response/#aniachifast.services.roles_response.RoleCreate","text":"Bases: BaseModel Model for creating a new role","title":"RoleCreate"},{"location":"services/roles_response/#aniachifast.services.roles_response.RoleCreate.description","text":"description : str | None = None","title":"description"},{"location":"services/roles_response/#aniachifast.services.roles_response.RoleCreate.name","text":"name : str","title":"name"},{"location":"services/roles_response/#aniachifast.services.roles_response.assign_role","text":"assign_role ( request : Request , assignment : RoleAssignment , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Assign a role to a user. Requires: admin role","title":"assign_role"},{"location":"services/roles_response/#aniachifast.services.roles_response.create_new_role","text":"create_new_role ( request : Request , role_data : RoleCreate , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Create a new role in the system. Requires: admin role","title":"create_new_role"},{"location":"services/roles_response/#aniachifast.services.roles_response.get_user_roles_endpoint","text":"get_user_roles_endpoint ( request : Request , user_id : int , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Get all roles assigned to a specific user. Requires: admin role","title":"get_user_roles_endpoint"},{"location":"services/roles_response/#aniachifast.services.roles_response.list_roles","text":"list_roles ( request : Request , active_only : bool = True , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) List all roles in the system. Requires: admin role","title":"list_roles"},{"location":"services/roles_response/#aniachifast.services.roles_response.remove_role","text":"remove_role ( request : Request , assignment : RoleAssignment , db : Session = Depends ( get_db ), current_user : UserResponse = Depends ( require_admin ), ) Remove a role from a user. Requires: admin role","title":"remove_role"},{"location":"services/utils_response/","text":"Utils Response Service aniachifast.services.utils_response Utils Response Service This module exposes lightweight utility endpoints intended for testing, debugging, demos, and non-critical tooling. Features: - ASCII-art health-style endpoint - UUID generation (JSON or plain text) - Fake profile generation using Faker Security & Controls: - All endpoints are rate-limited - Responses are cached for a short TTL - Access can be globally enabled/disabled via settings \u26a0\ufe0f IMPORTANT: These endpoints are NOT intended for production business logic. They should be explicitly enabled via configuration flags. Configuration Flags: - ENABLE_UTILS_ENDPOINT (bool): If False, all endpoints return HTTP 403 Forbidden. Example ENABLE_UTILS_ENDPOINT = true Example usage GET /utils/ GET /utils/uuids/10 GET /utils/profiles?n=50 limiter module-attribute limiter = get_limiter () router module-attribute router : APIRouter = APIRouter ( dependencies = [ Depends ( utils_reponses_enabled_guard )] ) settings module-attribute settings = get_settings () get_generate_profiles async get_generate_profiles ( request : Request , n : int = Query ( 100 , description = \"Number of profiles to generate\" , ge = 0 , le = 1500 , ), _ = ALLOWED_HEADERS_DEPENDENCY , ) -> Response Generate fake user profiles. Profiles are generated using Faker and normalized to JSON-safe types. Access Control Controlled by ENABLE_UTILS_ENDPOINT setting. Parameters: request ( Request ) \u2013 Incoming request. n ( int , default: Query (100, description='Number of profiles to generate', ge=0, le=1500) ) \u2013 Number of profiles to generate. Returns: Response \u2013 ProfilesResponse containing a list of profiles. Raises: HTTPException \u2013 403 if utils endpoints are disabled. get_generate_r_uuids async get_generate_r_uuids ( request : Request , h : int = Path ( ... , description = \"Number of UUIDs to generate\" , ge = 0 , le = 500 , ), header : str = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> Response Generate UUIDv4 identifiers. Output format depends on the negotiated response header: - JSON \u2192 list[str] - Plain text \u2192 one UUID per line Access Control Controlled by ENABLE_UTILS_ENDPOINT setting. Parameters: request ( Request ) \u2013 Incoming request. h ( int , default: Path (..., description='Number of UUIDs to generate', ge=0, le=500) ) \u2013 Number of UUIDs to generate (0\u2013500). header ( str , default: ALLOWED_HEADERS_DEPENDENCY ) \u2013 Allowed content-type header. Returns: Response \u2013 JSONResponse or PlainTextResponse. Raises: HTTPException \u2013 403 if utils endpoints are disabled. slash async slash ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Root utility endpoint. Returns a simple ASCII-art banner with the current timestamp. Intended as a lightweight connectivity / sanity check. Returns: PlainTextResponse ( PlainTextResponse ) \u2013 ASCII art with timestamp. utils_reponses_enabled_guard utils_reponses_enabled_guard () Dependency guard that restricts access to utility-related endpoints. This dependency ensures that utility and system information endpoints are only accessible when explicitly enabled via configuration and running in a safe environment. Access is granted only when both conditions are met: - ENABLE_UTILS_ENDPOINT is set to True. - DEBUG mode is enabled. If either condition is not satisfied, the request is rejected with an HTTP 403 (Forbidden) response. Raises: HTTPException \u2013 Raised with status code 403 when utility endpoints are disabled or when the application is not running in debug mode. Example Restrict access to utility endpoints at the router level: router = APIRouter( dependencies=[Depends(utils_reponses_enabled_guard)] ) Or apply it directly to a single endpoint: @router.get(\"/utils/ip\") def ip_info(): return {\"status\": \"ok\"}","title":"Utils Response"},{"location":"services/utils_response/#utils-response-service","text":"","title":"Utils Response Service"},{"location":"services/utils_response/#aniachifast.services.utils_response","text":"Utils Response Service This module exposes lightweight utility endpoints intended for testing, debugging, demos, and non-critical tooling. Features: - ASCII-art health-style endpoint - UUID generation (JSON or plain text) - Fake profile generation using Faker Security & Controls: - All endpoints are rate-limited - Responses are cached for a short TTL - Access can be globally enabled/disabled via settings \u26a0\ufe0f IMPORTANT: These endpoints are NOT intended for production business logic. They should be explicitly enabled via configuration flags. Configuration Flags: - ENABLE_UTILS_ENDPOINT (bool): If False, all endpoints return HTTP 403 Forbidden. Example ENABLE_UTILS_ENDPOINT = true Example usage GET /utils/ GET /utils/uuids/10 GET /utils/profiles?n=50","title":"utils_response"},{"location":"services/utils_response/#aniachifast.services.utils_response.limiter","text":"limiter = get_limiter ()","title":"limiter"},{"location":"services/utils_response/#aniachifast.services.utils_response.router","text":"router : APIRouter = APIRouter ( dependencies = [ Depends ( utils_reponses_enabled_guard )] )","title":"router"},{"location":"services/utils_response/#aniachifast.services.utils_response.settings","text":"settings = get_settings ()","title":"settings"},{"location":"services/utils_response/#aniachifast.services.utils_response.get_generate_profiles","text":"get_generate_profiles ( request : Request , n : int = Query ( 100 , description = \"Number of profiles to generate\" , ge = 0 , le = 1500 , ), _ = ALLOWED_HEADERS_DEPENDENCY , ) -> Response Generate fake user profiles. Profiles are generated using Faker and normalized to JSON-safe types. Access Control Controlled by ENABLE_UTILS_ENDPOINT setting. Parameters: request ( Request ) \u2013 Incoming request. n ( int , default: Query (100, description='Number of profiles to generate', ge=0, le=1500) ) \u2013 Number of profiles to generate. Returns: Response \u2013 ProfilesResponse containing a list of profiles. Raises: HTTPException \u2013 403 if utils endpoints are disabled.","title":"get_generate_profiles"},{"location":"services/utils_response/#aniachifast.services.utils_response.get_generate_r_uuids","text":"get_generate_r_uuids ( request : Request , h : int = Path ( ... , description = \"Number of UUIDs to generate\" , ge = 0 , le = 500 , ), header : str = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> Response Generate UUIDv4 identifiers. Output format depends on the negotiated response header: - JSON \u2192 list[str] - Plain text \u2192 one UUID per line Access Control Controlled by ENABLE_UTILS_ENDPOINT setting. Parameters: request ( Request ) \u2013 Incoming request. h ( int , default: Path (..., description='Number of UUIDs to generate', ge=0, le=500) ) \u2013 Number of UUIDs to generate (0\u2013500). header ( str , default: ALLOWED_HEADERS_DEPENDENCY ) \u2013 Allowed content-type header. Returns: Response \u2013 JSONResponse or PlainTextResponse. Raises: HTTPException \u2013 403 if utils endpoints are disabled.","title":"get_generate_r_uuids"},{"location":"services/utils_response/#aniachifast.services.utils_response.slash","text":"slash ( request : Request , _ = ALLOWED_HEADERS_DEPENDENCY , __ = NO_PARAMS_DEPENDENCY , ) -> PlainTextResponse Root utility endpoint. Returns a simple ASCII-art banner with the current timestamp. Intended as a lightweight connectivity / sanity check. Returns: PlainTextResponse ( PlainTextResponse ) \u2013 ASCII art with timestamp.","title":"slash"},{"location":"services/utils_response/#aniachifast.services.utils_response.utils_reponses_enabled_guard","text":"utils_reponses_enabled_guard () Dependency guard that restricts access to utility-related endpoints. This dependency ensures that utility and system information endpoints are only accessible when explicitly enabled via configuration and running in a safe environment. Access is granted only when both conditions are met: - ENABLE_UTILS_ENDPOINT is set to True. - DEBUG mode is enabled. If either condition is not satisfied, the request is rejected with an HTTP 403 (Forbidden) response. Raises: HTTPException \u2013 Raised with status code 403 when utility endpoints are disabled or when the application is not running in debug mode. Example Restrict access to utility endpoints at the router level: router = APIRouter( dependencies=[Depends(utils_reponses_enabled_guard)] ) Or apply it directly to a single endpoint: @router.get(\"/utils/ip\") def ip_info(): return {\"status\": \"ok\"}","title":"utils_reponses_enabled_guard"},{"location":"tools/brand_utils/","text":"Brand Utilities aniachifast.tools.brand_utils aniachifast.assets_utils This module provides utilities to access AniachiFast visual resources, such as the ASCII logo, ASCII name, and favicon. It allows retrieving the favicon either as a base64 Data URI or as raw binary bytes. Functions: - get_ascii_logo() -> str: Returns the ASCII art logo. - get_ascii_name() -> str: Returns the ASCII art name. - get_favicon(as_bytes: bool = False) -> Union[str, bytes]: Returns the favicon as a base64 Data URI or raw bytes. __ANIACHI_LOGO module-attribute __ANIACHI_LOGO : Final [ str ] = ( \" \\n %@@@@@@@@@@@ @@@@@@@@@@@@ %@@@@@@@@@@@ \\n @@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@ \\n * @@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@ \\n @@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@ \\n @@@@@ @@@@ %#%%% #*::::::::-* %#%%%%% %#+::::::: @@@@@@@@@ \\n @@@@@@@@ ---========:::::::::::========-::::::: @@@@@@@ \\n @@@@@@@@@@ ::::::=========-::::::::::=========::::: @@@@@ \\n @@@@@@@@@@@::::::::-========-::::::::::=========::: @@@ \\n @@@@@@@@@@@-:::::::-========-::::::::::=========#@ \\n @@@@@@@@@@@-:::::::-========-::::::::::-======%@@@ \\n ::::*@@@@@@@@@=::::::::=========::::::::::-====%@@@@@ \\n + :==-*@@@@@@@@@@@+====:::=========::::::::::-==%@@@@@@@ \\n @@@ @@@@@@@@@@@@:::::::=========::::::::::-%@@@@@@@@@ \\n @@@@@ @@@@@@@@@@#::::::::=========-:::::::::@@@@@@@@@ \\n @@@@@@@@ @@@@@@@@@@%::::::::-========-::::::: @@@@@@@@ \\n @@@@@@@@@ :@@@@@@@@@%::::::::-========-::::: @@@@@ \\n @@@@@@@@@@@@ ::::::#@@@@@@@@@-::::*::-========-::: @@@ \\n @@@@@@@@@@@:::::::::*@@@@@@@@@++ ::::-========== \\n @@@@@@@+==-:::::::::+@@@@@@@@@@ :::::::=======%@@ \\n @@@=======-:::::::::=@@@@@@@@@*::::::::=====%@@@@@ \\n :::-========-::::::::=@@@@@@@@@@*::::::::==+@@@@@@@@ \\n %@@ :::::::-=========::::= @@@@@@@@@@#:::::::+@@@@@@@@@@@ \\n @@@*:::::::::-=======+@@ @@@@@@@@@@#:::-- @@@@@@@@@@ \\n @@@@@%::::::::::===+@@@@@@@ @@@@@@@@@@@% @@@@@@@@ \\n @@@@@@@@-::::::::-@@@@@@@@@@@ :#@@@@@@@@@@ @@@@@@ \\n @@@@@@@@@@-:::::-= @@@@@@@@@@@@ :::%@@@@@@@@@@ @@@@ \\n @@@@@@@@@@@=:- @@@@@@@@@@@@ :-= @@@@@@@@@@@ @@ \\n @@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@@ \\n @@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@ \" ) __ANIACHI_TEXT module-attribute __ANIACHI_TEXT : Final [ str ] = ( \" \\n\\n _ _ _ _ \\n / \\\\ _ __ (_) __ _ ___| |__ (_) \\n / _ \\\\ | '_ \\\\ | |/ _` |/ __| '_ \\\\ | | \\n / ___ \\\\ | | | | | (_| | (__| | | | | \\n /_/___ \\\\ _ \\\\ _| |_|_| \\\\ __,_| \\\\ ___|_|_|_|_| \\n | ___|_ _ ___| |_ __ _ _ __ (_) | | \\n | |_ / _` / __| __/ _` | '_ \\\\ | | | | \\n | _| (_| \\\\ __ \\\\ || (_| | |_) | | |_| \\n |_| \\\\ __,_|___/ \\\\ __ \\\\ __,_| .__/|_| (_) \\n |_| \\n\\n \" ) __FAVICON module-attribute __FAVICON : Final [ str ] = 'aniachi_logo.png' get_ascii_logo get_ascii_logo () -> str Return the ASCII art logo of Aniachi. Returns: str ( str ) \u2013 ASCII art representing the Aniachi logo. Example print(get_ascii_logo()) get_ascii_name get_ascii_name () -> str Return the ASCII art name of Aniachi. Returns: str ( str ) \u2013 ASCII art representing the Aniachi name. Example print(get_ascii_name()) get_favicon get_favicon ( as_bytes : bool = False ) -> Union [ str , bytes ] Return the favicon either as a base64 Data URI or as raw bytes. Parameters: as_bytes ( bool , default: False ) \u2013 If True, returns raw bytes. Default is False (base64 Data URI). Returns: Union [ str , bytes ] \u2013 Union[str, bytes]: Base64 Data URI or raw bytes of the favicon. Example favicon_uri = get_favicon() favicon_bytes = get_favicon(as_bytes=True)","title":"Brand Utils"},{"location":"tools/brand_utils/#brand-utilities","text":"","title":"Brand Utilities"},{"location":"tools/brand_utils/#aniachifast.tools.brand_utils","text":"aniachifast.assets_utils This module provides utilities to access AniachiFast visual resources, such as the ASCII logo, ASCII name, and favicon. It allows retrieving the favicon either as a base64 Data URI or as raw binary bytes. Functions: - get_ascii_logo() -> str: Returns the ASCII art logo. - get_ascii_name() -> str: Returns the ASCII art name. - get_favicon(as_bytes: bool = False) -> Union[str, bytes]: Returns the favicon as a base64 Data URI or raw bytes.","title":"brand_utils"},{"location":"tools/brand_utils/#aniachifast.tools.brand_utils.__ANIACHI_LOGO","text":"__ANIACHI_LOGO : Final [ str ] = ( \" \\n %@@@@@@@@@@@ @@@@@@@@@@@@ %@@@@@@@@@@@ \\n @@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@ \\n * @@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@ \\n @@@@ @@@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@ \\n @@@@@ @@@@ %#%%% #*::::::::-* %#%%%%% %#+::::::: @@@@@@@@@ \\n @@@@@@@@ ---========:::::::::::========-::::::: @@@@@@@ \\n @@@@@@@@@@ ::::::=========-::::::::::=========::::: @@@@@ \\n @@@@@@@@@@@::::::::-========-::::::::::=========::: @@@ \\n @@@@@@@@@@@-:::::::-========-::::::::::=========#@ \\n @@@@@@@@@@@-:::::::-========-::::::::::-======%@@@ \\n ::::*@@@@@@@@@=::::::::=========::::::::::-====%@@@@@ \\n + :==-*@@@@@@@@@@@+====:::=========::::::::::-==%@@@@@@@ \\n @@@ @@@@@@@@@@@@:::::::=========::::::::::-%@@@@@@@@@ \\n @@@@@ @@@@@@@@@@#::::::::=========-:::::::::@@@@@@@@@ \\n @@@@@@@@ @@@@@@@@@@%::::::::-========-::::::: @@@@@@@@ \\n @@@@@@@@@ :@@@@@@@@@%::::::::-========-::::: @@@@@ \\n @@@@@@@@@@@@ ::::::#@@@@@@@@@-::::*::-========-::: @@@ \\n @@@@@@@@@@@:::::::::*@@@@@@@@@++ ::::-========== \\n @@@@@@@+==-:::::::::+@@@@@@@@@@ :::::::=======%@@ \\n @@@=======-:::::::::=@@@@@@@@@*::::::::=====%@@@@@ \\n :::-========-::::::::=@@@@@@@@@@*::::::::==+@@@@@@@@ \\n %@@ :::::::-=========::::= @@@@@@@@@@#:::::::+@@@@@@@@@@@ \\n @@@*:::::::::-=======+@@ @@@@@@@@@@#:::-- @@@@@@@@@@ \\n @@@@@%::::::::::===+@@@@@@@ @@@@@@@@@@@% @@@@@@@@ \\n @@@@@@@@-::::::::-@@@@@@@@@@@ :#@@@@@@@@@@ @@@@@@ \\n @@@@@@@@@@-:::::-= @@@@@@@@@@@@ :::%@@@@@@@@@@ @@@@ \\n @@@@@@@@@@@=:- @@@@@@@@@@@@ :-= @@@@@@@@@@@ @@ \\n @@@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@@ \\n @@@@@@@@@@@ @@@@@@@@@@@@ @@@@@@@@@@@@ \" )","title":"__ANIACHI_LOGO"},{"location":"tools/brand_utils/#aniachifast.tools.brand_utils.__ANIACHI_TEXT","text":"__ANIACHI_TEXT : Final [ str ] = ( \" \\n\\n _ _ _ _ \\n / \\\\ _ __ (_) __ _ ___| |__ (_) \\n / _ \\\\ | '_ \\\\ | |/ _` |/ __| '_ \\\\ | | \\n / ___ \\\\ | | | | | (_| | (__| | | | | \\n /_/___ \\\\ _ \\\\ _| |_|_| \\\\ __,_| \\\\ ___|_|_|_|_| \\n | ___|_ _ ___| |_ __ _ _ __ (_) | | \\n | |_ / _` / __| __/ _` | '_ \\\\ | | | | \\n | _| (_| \\\\ __ \\\\ || (_| | |_) | | |_| \\n |_| \\\\ __,_|___/ \\\\ __ \\\\ __,_| .__/|_| (_) \\n |_| \\n\\n \" )","title":"__ANIACHI_TEXT"},{"location":"tools/brand_utils/#aniachifast.tools.brand_utils.__FAVICON","text":"__FAVICON : Final [ str ] = 'aniachi_logo.png'","title":"__FAVICON"},{"location":"tools/brand_utils/#aniachifast.tools.brand_utils.get_ascii_logo","text":"get_ascii_logo () -> str Return the ASCII art logo of Aniachi. Returns: str ( str ) \u2013 ASCII art representing the Aniachi logo. Example print(get_ascii_logo())","title":"get_ascii_logo"},{"location":"tools/brand_utils/#aniachifast.tools.brand_utils.get_ascii_name","text":"get_ascii_name () -> str Return the ASCII art name of Aniachi. Returns: str ( str ) \u2013 ASCII art representing the Aniachi name. Example print(get_ascii_name())","title":"get_ascii_name"},{"location":"tools/brand_utils/#aniachifast.tools.brand_utils.get_favicon","text":"get_favicon ( as_bytes : bool = False ) -> Union [ str , bytes ] Return the favicon either as a base64 Data URI or as raw bytes. Parameters: as_bytes ( bool , default: False ) \u2013 If True, returns raw bytes. Default is False (base64 Data URI). Returns: Union [ str , bytes ] \u2013 Union[str, bytes]: Base64 Data URI or raw bytes of the favicon. Example favicon_uri = get_favicon() favicon_bytes = get_favicon(as_bytes=True)","title":"get_favicon"},{"location":"tools/browser_utils/","text":"Browser Utils aniachifast.tools.browser_utils Request metadata extraction utilities. This module defines lightweight, framework-agnostic helpers for extracting client-related metadata from HTTP request objects. Design goals: - Avoid tight coupling to FastAPI or Starlette - Enable static typing via Protocols - Support runtime validation via beartype - Facilitate unit testing and mocking - Provide safe, best-effort metadata extraction Currently supported metadata: - User-Agent header Intended usage: - API response context enrichment - Observability and logging - Audit and diagnostics - Best-effort request metadata (NOT security-critical) Important: - No network or I/O operations are performed - All functions are synchronous by design - Returned values MUST NOT be trusted for authentication or authorization get_user_agent get_user_agent ( request : RequestLike | None , ) -> Optional [ str ] Extract the User-Agent header from an HTTP request. This function is intentionally synchronous: - No I/O is performed - Accessing headers is an in-memory operation Parameters: request ( RequestLike | None ) \u2013 Request-like object exposing headers. Returns: str ( Optional [ str ] ) \u2013 User-Agent value if present, otherwise \"Unknown\".","title":"Browser Utils"},{"location":"tools/browser_utils/#browser-utils","text":"","title":"Browser Utils"},{"location":"tools/browser_utils/#aniachifast.tools.browser_utils","text":"Request metadata extraction utilities. This module defines lightweight, framework-agnostic helpers for extracting client-related metadata from HTTP request objects. Design goals: - Avoid tight coupling to FastAPI or Starlette - Enable static typing via Protocols - Support runtime validation via beartype - Facilitate unit testing and mocking - Provide safe, best-effort metadata extraction Currently supported metadata: - User-Agent header Intended usage: - API response context enrichment - Observability and logging - Audit and diagnostics - Best-effort request metadata (NOT security-critical) Important: - No network or I/O operations are performed - All functions are synchronous by design - Returned values MUST NOT be trusted for authentication or authorization","title":"browser_utils"},{"location":"tools/browser_utils/#aniachifast.tools.browser_utils.get_user_agent","text":"get_user_agent ( request : RequestLike | None , ) -> Optional [ str ] Extract the User-Agent header from an HTTP request. This function is intentionally synchronous: - No I/O is performed - Accessing headers is an in-memory operation Parameters: request ( RequestLike | None ) \u2013 Request-like object exposing headers. Returns: str ( Optional [ str ] ) \u2013 User-Agent value if present, otherwise \"Unknown\".","title":"get_user_agent"},{"location":"tools/dependencies/","text":"Dependencies utilities FastAPI request validation dependencies and helpers. Main functions allowed_headers FastAPI dependency that validates allowed Accept header values. from aniachifast.tools.dependencies import allowed_headers from fastapi import Depends @app.get(\"/items\", dependencies=[Depends(allowed_headers({\"application/json\"}))]) async def get_items(): return {\"items\": []} get_header_format Optionally extracts a valid Accept header without raising exceptions. validate_metadata Validates and sanitizes JSON metadata input. aniachifast.tools.dependencies FastAPI request validation dependencies and helpers. This module provides reusable validation utilities designed to be used primarily as FastAPI dependencies. Their main purpose is to validate HTTP request headers (such as Accept ) and ensure that incoming requests comply with the formats supported by the application. Key concepts: - Header validation is performed using FastAPI dependency injection. - The allowed_headers family of functions works together with predefined media type constants (e.g. MediaTypes, COMMON_TYPES). - These dependencies are commonly used to enforce content negotiation rules before an endpoint handler is executed. Additionally, this module contains helper utilities that are not yet dependencies but are used to validate and sanitize metadata values received from the client. allowed_headers allowed_headers ( headers : Set [ str ], ) -> Callable [[ Request ], str ] FastAPI dependency that enforces allowed Accept header values. This dependency validates the incoming request Accept header against a predefined set of allowed media types. If none of the provided media types matches the request, an HTTP 406 (Not Acceptable) error is raised. IMPORTANT : You MUST use the predefined header sets from aniachifast.tools.request_types (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets. This ensures consistency and maintains a single source of truth for allowed header combinations. Parameters: headers ( Set [ str ] ) \u2013 A set of allowed media types. Use predefined sets from request_types module (COMMON_TYPES, SIMPLE_TYPES, JSON_TYPES, HTML_TYPES). Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: A dependency function that returns the matched media type. Raises: HTTPException \u2013 406 Not Acceptable if no allowed media type is found. Example CORRECT - Using predefined sets from request_types: from fastapi import Depends, APIRouter from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES, JSON_TYPES router = APIRouter() @router.get( \"/items\", dependencies=[Depends(allowed_headers(COMMON_TYPES))] ) async def list_items(): return {\"status\": \"ok\"} @router.post( \"/items\", dependencies=[Depends(allowed_headers(JSON_TYPES))] ) async def create_item(): return {\"status\": \"created\"} INCORRECT - Do NOT create ad-hoc sets: # \u274c WRONG - Don't do this from aniachifast.tools.media_utils import MediaTypes @router.get( \"/items\", dependencies=[Depends(allowed_headers( {MediaTypes.JSON, MediaTypes.HTML}))] ) get_header_format get_header_format ( headers : Set [ str ], ) -> Callable [[ Request ], Optional [ str ]] FastAPI dependency that optionally extracts a valid Accept header. Unlike allowed_headers , this dependency does not raise an exception if the request does not contain an accepted media type. Instead, it returns None when no intersection is found. This is useful for endpoints where content negotiation is optional or where a default format can be applied. Parameters: headers ( Set [ str ] ) \u2013 A set of acceptable media types. Returns: Callable [[ Request ], Optional [ str ]] \u2013 Callable[[Request], Optional[str]]: A dependency function returning the matched media type or None if no match is found. Example @router.get(\"/optional-format\") async def example( fmt: str | None = Depends(get_header_format({MediaTypes.JSON})) ): return {\"format\": fmt or \"default\"} validate_metadata validate_metadata ( metadata : Optional [ str ], dict_convert : bool = True ) -> tuple [ Optional [ Union [ dict , str ]], bool ] not necessary dependency because of pydantic models Validate and sanitize metadata input. This helper function validates that a metadata string: - Is valid JSON - Deserializes to a dictionary - Contains only valid string keys without spaces - Uses alphanumeric and underscore characters only This function is NOT a FastAPI dependency yet, but it is designed to be easily adapted into one in the future. Parameters: metadata ( Optional [ str ] ) \u2013 JSON string representing metadata. dict_convert ( bool , default: True ) \u2013 If True, returns a dictionary when valid. If False, returns the original string. Returns: tuple [ Optional [ Union [ dict , str ]], bool ] \u2013 tuple[Optional[Union[dict, str]], bool]: - The validated metadata (dict or original value) - A boolean indicating whether validation succeeded Example data, ok = validate_metadata('{\"user_id\": \"123\"}') if not ok: raise ValueError(\"Invalid metadata\")","title":"Dependencies"},{"location":"tools/dependencies/#dependencies-utilities","text":"FastAPI request validation dependencies and helpers.","title":"Dependencies utilities"},{"location":"tools/dependencies/#main-functions","text":"","title":"Main functions"},{"location":"tools/dependencies/#allowed_headers","text":"FastAPI dependency that validates allowed Accept header values. from aniachifast.tools.dependencies import allowed_headers from fastapi import Depends @app.get(\"/items\", dependencies=[Depends(allowed_headers({\"application/json\"}))]) async def get_items(): return {\"items\": []}","title":"allowed_headers"},{"location":"tools/dependencies/#get_header_format","text":"Optionally extracts a valid Accept header without raising exceptions.","title":"get_header_format"},{"location":"tools/dependencies/#validate_metadata","text":"Validates and sanitizes JSON metadata input.","title":"validate_metadata"},{"location":"tools/dependencies/#aniachifast.tools.dependencies","text":"FastAPI request validation dependencies and helpers. This module provides reusable validation utilities designed to be used primarily as FastAPI dependencies. Their main purpose is to validate HTTP request headers (such as Accept ) and ensure that incoming requests comply with the formats supported by the application. Key concepts: - Header validation is performed using FastAPI dependency injection. - The allowed_headers family of functions works together with predefined media type constants (e.g. MediaTypes, COMMON_TYPES). - These dependencies are commonly used to enforce content negotiation rules before an endpoint handler is executed. Additionally, this module contains helper utilities that are not yet dependencies but are used to validate and sanitize metadata values received from the client.","title":"dependencies"},{"location":"tools/dependencies/#aniachifast.tools.dependencies.allowed_headers","text":"allowed_headers ( headers : Set [ str ], ) -> Callable [[ Request ], str ] FastAPI dependency that enforces allowed Accept header values. This dependency validates the incoming request Accept header against a predefined set of allowed media types. If none of the provided media types matches the request, an HTTP 406 (Not Acceptable) error is raised. IMPORTANT : You MUST use the predefined header sets from aniachifast.tools.request_types (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets. This ensures consistency and maintains a single source of truth for allowed header combinations. Parameters: headers ( Set [ str ] ) \u2013 A set of allowed media types. Use predefined sets from request_types module (COMMON_TYPES, SIMPLE_TYPES, JSON_TYPES, HTML_TYPES). Returns: Callable [[ Request ], str ] \u2013 Callable[[Request], str]: A dependency function that returns the matched media type. Raises: HTTPException \u2013 406 Not Acceptable if no allowed media type is found. Example CORRECT - Using predefined sets from request_types: from fastapi import Depends, APIRouter from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES, JSON_TYPES router = APIRouter() @router.get( \"/items\", dependencies=[Depends(allowed_headers(COMMON_TYPES))] ) async def list_items(): return {\"status\": \"ok\"} @router.post( \"/items\", dependencies=[Depends(allowed_headers(JSON_TYPES))] ) async def create_item(): return {\"status\": \"created\"} INCORRECT - Do NOT create ad-hoc sets: # \u274c WRONG - Don't do this from aniachifast.tools.media_utils import MediaTypes @router.get( \"/items\", dependencies=[Depends(allowed_headers( {MediaTypes.JSON, MediaTypes.HTML}))] )","title":"allowed_headers"},{"location":"tools/dependencies/#aniachifast.tools.dependencies.get_header_format","text":"get_header_format ( headers : Set [ str ], ) -> Callable [[ Request ], Optional [ str ]] FastAPI dependency that optionally extracts a valid Accept header. Unlike allowed_headers , this dependency does not raise an exception if the request does not contain an accepted media type. Instead, it returns None when no intersection is found. This is useful for endpoints where content negotiation is optional or where a default format can be applied. Parameters: headers ( Set [ str ] ) \u2013 A set of acceptable media types. Returns: Callable [[ Request ], Optional [ str ]] \u2013 Callable[[Request], Optional[str]]: A dependency function returning the matched media type or None if no match is found. Example @router.get(\"/optional-format\") async def example( fmt: str | None = Depends(get_header_format({MediaTypes.JSON})) ): return {\"format\": fmt or \"default\"}","title":"get_header_format"},{"location":"tools/dependencies/#aniachifast.tools.dependencies.validate_metadata","text":"validate_metadata ( metadata : Optional [ str ], dict_convert : bool = True ) -> tuple [ Optional [ Union [ dict , str ]], bool ] not necessary dependency because of pydantic models Validate and sanitize metadata input. This helper function validates that a metadata string: - Is valid JSON - Deserializes to a dictionary - Contains only valid string keys without spaces - Uses alphanumeric and underscore characters only This function is NOT a FastAPI dependency yet, but it is designed to be easily adapted into one in the future. Parameters: metadata ( Optional [ str ] ) \u2013 JSON string representing metadata. dict_convert ( bool , default: True ) \u2013 If True, returns a dictionary when valid. If False, returns the original string. Returns: tuple [ Optional [ Union [ dict , str ]], bool ] \u2013 tuple[Optional[Union[dict, str]], bool]: - The validated metadata (dict or original value) - A boolean indicating whether validation succeeded Example data, ok = validate_metadata('{\"user_id\": \"123\"}') if not ok: raise ValueError(\"Invalid metadata\")","title":"validate_metadata"},{"location":"tools/dependencies_utils/","text":"Dependencies Utils aniachifast.tools.dependencies_utils Dependency definitions for FastAPI endpoints. This module provides commonly used dependencies for FastAPI routes, including allowed headers and standard path parameters. Centralizing these dependencies helps avoid duplication across multiple services and maintains consistency. Dependencies: - ALLOWED_HEADERS_DEPENDENCY: Ensures that only permitted HTTP headers are accepted. - FMT_PATH: Represents a required path parameter specifying the output format. ALLOWED_HEADERS_DEPENDENCY module-attribute ALLOWED_HEADERS_DEPENDENCY = Depends ( allowed_headers ( COMMON_TYPES ) ) COMMON_UPLOAD_FILE_DEPENDENCY module-attribute COMMON_UPLOAD_FILE_DEPENDENCY = Annotated [ ValidatedFile , Depends ( save_upload_file_dependency ( allowed_types = COMMON_UPLOAD_TYPES , max_size_bytes = 30 * 1024 * 1024 , ) ), ] FMT_PATH module-attribute FMT_PATH = Path ( ... , description = 'Output format' ) GET_CURRENT_USER_DEPENDENCY module-attribute GET_CURRENT_USER_DEPENDENCY = Annotated [ UserResponse , Depends ( get_current_user ) ] HTTP_AUTH_CREDENTIALS_DEPENDENCY module-attribute HTTP_AUTH_CREDENTIALS_DEPENDENCY : ( HTTPAuthorizationCredentials ) = Depends ( HTTPBearer ()) NO_PARAMS_DEPENDENCY module-attribute NO_PARAMS_DEPENDENCY = Depends ( no_query_params ) PARSE_ACCEPT_ALL_FORMATS module-attribute PARSE_ACCEPT_ALL_FORMATS = Depends ( validate_and_parse_accept_header ( accepted_headers = ALL_FORMATS_TYPES , raise_exception = True , default_format = \"json\" , html_default_format = \"json\" , ) )","title":"Dependencies Utils"},{"location":"tools/dependencies_utils/#dependencies-utils","text":"","title":"Dependencies Utils"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils","text":"Dependency definitions for FastAPI endpoints. This module provides commonly used dependencies for FastAPI routes, including allowed headers and standard path parameters. Centralizing these dependencies helps avoid duplication across multiple services and maintains consistency. Dependencies: - ALLOWED_HEADERS_DEPENDENCY: Ensures that only permitted HTTP headers are accepted. - FMT_PATH: Represents a required path parameter specifying the output format.","title":"dependencies_utils"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils.ALLOWED_HEADERS_DEPENDENCY","text":"ALLOWED_HEADERS_DEPENDENCY = Depends ( allowed_headers ( COMMON_TYPES ) )","title":"ALLOWED_HEADERS_DEPENDENCY"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils.COMMON_UPLOAD_FILE_DEPENDENCY","text":"COMMON_UPLOAD_FILE_DEPENDENCY = Annotated [ ValidatedFile , Depends ( save_upload_file_dependency ( allowed_types = COMMON_UPLOAD_TYPES , max_size_bytes = 30 * 1024 * 1024 , ) ), ]","title":"COMMON_UPLOAD_FILE_DEPENDENCY"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils.FMT_PATH","text":"FMT_PATH = Path ( ... , description = 'Output format' )","title":"FMT_PATH"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils.GET_CURRENT_USER_DEPENDENCY","text":"GET_CURRENT_USER_DEPENDENCY = Annotated [ UserResponse , Depends ( get_current_user ) ]","title":"GET_CURRENT_USER_DEPENDENCY"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils.HTTP_AUTH_CREDENTIALS_DEPENDENCY","text":"HTTP_AUTH_CREDENTIALS_DEPENDENCY : ( HTTPAuthorizationCredentials ) = Depends ( HTTPBearer ())","title":"HTTP_AUTH_CREDENTIALS_DEPENDENCY"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils.NO_PARAMS_DEPENDENCY","text":"NO_PARAMS_DEPENDENCY = Depends ( no_query_params )","title":"NO_PARAMS_DEPENDENCY"},{"location":"tools/dependencies_utils/#aniachifast.tools.dependencies_utils.PARSE_ACCEPT_ALL_FORMATS","text":"PARSE_ACCEPT_ALL_FORMATS = Depends ( validate_and_parse_accept_header ( accepted_headers = ALL_FORMATS_TYPES , raise_exception = True , default_format = \"json\" , html_default_format = \"json\" , ) )","title":"PARSE_ACCEPT_ALL_FORMATS"},{"location":"tools/dynamic_import_utilities/","text":"Tools Dynamic Import Utilities aniachifast.tools.dynamic_import_utilities Dynamic import utilities. This module provides helpers for dynamically loading Python callables (functions, static methods, class methods, or other callable objects) from fully-qualified dotted paths defined in application settings. Resolved callables are cached to avoid repeated imports and introspection, providing singleton-like behavior similar to dependency injection systems found in Java or Spring-based architectures. logger module-attribute logger = getLogger ( 'aniachifast' ) load_callable cached load_callable ( path : str ) -> Callable [ ... , Any ] Load and return a callable from a fully-qualified dotted import path. This function supports resolving: - Module-level functions - Static methods - Class methods - Callables nested inside classes The resolved callable is cached after the first successful load. Examples load_callable(\"myapp.mail.send_email\") load_callable(\"myapp.mail.EmailService.send_email\") Args path : str Fully-qualified dotted path to a callable. Returns Callable[..., Any] The resolved callable object. Raises RuntimeError If the module cannot be imported or an attribute cannot be resolved. TypeError If the resolved object is not callable.","title":"Dynamic Import Utilities"},{"location":"tools/dynamic_import_utilities/#tools-dynamic-import-utilities","text":"","title":"Tools Dynamic Import Utilities"},{"location":"tools/dynamic_import_utilities/#aniachifast.tools.dynamic_import_utilities","text":"Dynamic import utilities. This module provides helpers for dynamically loading Python callables (functions, static methods, class methods, or other callable objects) from fully-qualified dotted paths defined in application settings. Resolved callables are cached to avoid repeated imports and introspection, providing singleton-like behavior similar to dependency injection systems found in Java or Spring-based architectures.","title":"dynamic_import_utilities"},{"location":"tools/dynamic_import_utilities/#aniachifast.tools.dynamic_import_utilities.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"tools/dynamic_import_utilities/#aniachifast.tools.dynamic_import_utilities.load_callable","text":"load_callable ( path : str ) -> Callable [ ... , Any ] Load and return a callable from a fully-qualified dotted import path. This function supports resolving: - Module-level functions - Static methods - Class methods - Callables nested inside classes The resolved callable is cached after the first successful load.","title":"load_callable"},{"location":"tools/dynamic_import_utilities/#aniachifast.tools.dynamic_import_utilities.load_callable--examples","text":"load_callable(\"myapp.mail.send_email\") load_callable(\"myapp.mail.EmailService.send_email\")","title":"Examples"},{"location":"tools/dynamic_import_utilities/#aniachifast.tools.dynamic_import_utilities.load_callable--args","text":"path : str Fully-qualified dotted path to a callable.","title":"Args"},{"location":"tools/dynamic_import_utilities/#aniachifast.tools.dynamic_import_utilities.load_callable--returns","text":"Callable[..., Any] The resolved callable object.","title":"Returns"},{"location":"tools/dynamic_import_utilities/#aniachifast.tools.dynamic_import_utilities.load_callable--raises","text":"RuntimeError If the module cannot be imported or an attribute cannot be resolved. TypeError If the resolved object is not callable.","title":"Raises"},{"location":"tools/files_utils/","text":"File Utilities aniachifast.tools.files_utils File utility helpers. This module provides low-level utility functions related to file handling and content inspection. The helpers are intentionally lightweight and operate on in-memory file-like objects rather than filesystem paths. Typical use cases include: - Hash calculation for uploaded files (e.g. FastAPI UploadFile ) - Content integrity verification - Deduplication and fingerprinting of binary data - Pre-processing files before persistence or transmission All utilities in this module expect file-like objects to be positioned at the beginning of the stream unless otherwise documented. calculate_hash calculate_hash ( file_content : BytesIO ) -> tuple [ str , str ] Calculate cryptographic hashes for a file-like object. This function computes both SHA-256 and MD5 hashes for the given in-memory binary stream. It is commonly used to verify file integrity, detect duplicates, or generate stable fingerprints for uploaded content. The function reads the file content sequentially and closes the provided stream once processing is complete. Parameters: file_content ( BytesIO ) \u2013 A file-like object opened in binary mode. The stream is expected to be positioned at the beginning. Returns: tuple [ str , str ] \u2013 tuple[str, str]: A tuple containing: - SHA-256 hexadecimal digest - MD5 hexadecimal digest Example from io import BytesIO from aniachifast.tools.file_utils import calculate_hash content = BytesIO(b\"hello world\") sha256, md5 = calculate_hash(content) md5 '5eb63bbbe01eeed093cb22bb8f5acdc3' sha256 'b94d27b9934d3e08a52e52d7da7dabfade...' Notes The input stream is fully consumed and closed by this function. Callers should not attempt to reuse the stream after hashing. This utility operates entirely in memory and does not perform any filesystem I/O.","title":"File Utils"},{"location":"tools/files_utils/#file-utilities","text":"","title":"File Utilities"},{"location":"tools/files_utils/#aniachifast.tools.files_utils","text":"File utility helpers. This module provides low-level utility functions related to file handling and content inspection. The helpers are intentionally lightweight and operate on in-memory file-like objects rather than filesystem paths. Typical use cases include: - Hash calculation for uploaded files (e.g. FastAPI UploadFile ) - Content integrity verification - Deduplication and fingerprinting of binary data - Pre-processing files before persistence or transmission All utilities in this module expect file-like objects to be positioned at the beginning of the stream unless otherwise documented.","title":"files_utils"},{"location":"tools/files_utils/#aniachifast.tools.files_utils.calculate_hash","text":"calculate_hash ( file_content : BytesIO ) -> tuple [ str , str ] Calculate cryptographic hashes for a file-like object. This function computes both SHA-256 and MD5 hashes for the given in-memory binary stream. It is commonly used to verify file integrity, detect duplicates, or generate stable fingerprints for uploaded content. The function reads the file content sequentially and closes the provided stream once processing is complete. Parameters: file_content ( BytesIO ) \u2013 A file-like object opened in binary mode. The stream is expected to be positioned at the beginning. Returns: tuple [ str , str ] \u2013 tuple[str, str]: A tuple containing: - SHA-256 hexadecimal digest - MD5 hexadecimal digest Example from io import BytesIO from aniachifast.tools.file_utils import calculate_hash content = BytesIO(b\"hello world\") sha256, md5 = calculate_hash(content) md5 '5eb63bbbe01eeed093cb22bb8f5acdc3' sha256 'b94d27b9934d3e08a52e52d7da7dabfade...' Notes The input stream is fully consumed and closed by this function. Callers should not attempt to reuse the stream after hashing. This utility operates entirely in memory and does not perform any filesystem I/O.","title":"calculate_hash"},{"location":"tools/geo_ip_utils/","text":"GeoIP Utilities aniachifast.tools.geo_ip_utils GeoIP resolver utilities. Provides a process-local, singleton GeoIP resolver based on the MaxMind GeoIP2 database. Design goals: - Explicit initialization - Per-process singleton - Thread-safe caching - No FastAPI middleware coupling - Low overhead - Easy to test and extend Typical use cases: - API response context enrichment - Observability metadata - Security diagnostics logger module-attribute logger = getLogger ( 'aniachifast' ) GeoIPResolver GeoIP resolver with in-memory caching. This class encapsulates: - The GeoIP database reader - A TTL + LRU cache for IP lookups - Thread-safe access A single instance is intended per process. __init__ __init__ ( * , db_path : Optional [ str ], cache_size : int = 1000 , cache_ttl_seconds : int = 3600 , print_on : bool = False ) -> None Parameters: db_path ( Optional [ str ] ) \u2013 Path to the MaxMind GeoIP2 database file. cache_size ( int , default: 1000 ) \u2013 Maximum number of IPs cached. cache_ttl_seconds ( int , default: 3600 ) \u2013 Cache TTL in seconds. is_enabled is_enabled () -> bool Return True if GeoIP resolution is enabled. resolve_ip resolve_ip ( ip : str | None | RequestLike ) -> Optional [ dict ] Resolve an IP address to country-level information. Parameters: ip ( str | None | RequestLike ) \u2013 IPv4 or IPv6 address. Returns: Optional [ dict ] \u2013 dict with country metadata or None if unavailable. Example { \"country_code\": \"MX\", \"country\": \"Mexico\" } get_geoip_resolver cached get_geoip_resolver () -> GeoIPResolver Return the process-local GeoIPResolver singleton. The database path is taken from application settings.","title":"GeoIP Utils"},{"location":"tools/geo_ip_utils/#geoip-utilities","text":"","title":"GeoIP Utilities"},{"location":"tools/geo_ip_utils/#aniachifast.tools.geo_ip_utils","text":"GeoIP resolver utilities. Provides a process-local, singleton GeoIP resolver based on the MaxMind GeoIP2 database. Design goals: - Explicit initialization - Per-process singleton - Thread-safe caching - No FastAPI middleware coupling - Low overhead - Easy to test and extend Typical use cases: - API response context enrichment - Observability metadata - Security diagnostics","title":"geo_ip_utils"},{"location":"tools/geo_ip_utils/#aniachifast.tools.geo_ip_utils.logger","text":"logger = getLogger ( 'aniachifast' )","title":"logger"},{"location":"tools/geo_ip_utils/#aniachifast.tools.geo_ip_utils.GeoIPResolver","text":"GeoIP resolver with in-memory caching. This class encapsulates: - The GeoIP database reader - A TTL + LRU cache for IP lookups - Thread-safe access A single instance is intended per process.","title":"GeoIPResolver"},{"location":"tools/geo_ip_utils/#aniachifast.tools.geo_ip_utils.GeoIPResolver.__init__","text":"__init__ ( * , db_path : Optional [ str ], cache_size : int = 1000 , cache_ttl_seconds : int = 3600 , print_on : bool = False ) -> None Parameters: db_path ( Optional [ str ] ) \u2013 Path to the MaxMind GeoIP2 database file. cache_size ( int , default: 1000 ) \u2013 Maximum number of IPs cached. cache_ttl_seconds ( int , default: 3600 ) \u2013 Cache TTL in seconds.","title":"__init__"},{"location":"tools/geo_ip_utils/#aniachifast.tools.geo_ip_utils.GeoIPResolver.is_enabled","text":"is_enabled () -> bool Return True if GeoIP resolution is enabled.","title":"is_enabled"},{"location":"tools/geo_ip_utils/#aniachifast.tools.geo_ip_utils.GeoIPResolver.resolve_ip","text":"resolve_ip ( ip : str | None | RequestLike ) -> Optional [ dict ] Resolve an IP address to country-level information. Parameters: ip ( str | None | RequestLike ) \u2013 IPv4 or IPv6 address. Returns: Optional [ dict ] \u2013 dict with country metadata or None if unavailable. Example { \"country_code\": \"MX\", \"country\": \"Mexico\" }","title":"resolve_ip"},{"location":"tools/geo_ip_utils/#aniachifast.tools.geo_ip_utils.get_geoip_resolver","text":"get_geoip_resolver () -> GeoIPResolver Return the process-local GeoIPResolver singleton. The database path is taken from application settings.","title":"get_geoip_resolver"},{"location":"tools/html_css_utils/","text":"HTML CSS Utils aniachifast.tools.html_css_utils SVG and CSS Templates for HTML Rendering This module provides a set of predefined constants for SVG and CSS templates used in HTML rendering. It includes templates for: Small SVG graphics (e.g., indicator circles). Google-like search result styling. Simple table-based styling with highlights. These constants are intended to be used across the application wherever HTML rendering with consistent styling is required. Constants PATH3 (Final[str]): SVG markup with circle elements. GOOGLE_STYLE (Final[str]): CSS mimicking Google search result layout. SIMPLE_STYLE (Final[str]): CSS for table-based HTML results and highlights. Usage Example from templates import PATH3, GOOGLE_STYLE Use PATH3 as inline SVG svg_html = f' {PATH3} ' Include GOOGLE_STYLE in section of HTML GOOGLE_STYLE module-attribute GOOGLE_STYLE : Final [ str ] = ( \" \\n <style> \\n body { \\n font-family: Arial, sans-serif; \\n margin: 40px; \\n } \\n .result { \\n display: flex; \\n gap: 20px; \\n align-items: flex-start; \\n margin-bottom: 30px; \\n } \\n .favicon img { \\n width: 88px; \\n height: 148px; \\n object-fit: cover; \\n } \\n .text .source { \\n font-size: 0.95em; \\n color: #555; \\n font-weight: 100; \\n } \\n .text .source span { \\n color: #555; \\n font-weight: 900; \\n } \\n .text .url { \\n color: #9cbeff; \\n font-size: 0.9em; \\n } \\n .text .url span { \\n color: 555; \\n font-size: 0.9em; \\n } \\n .text .size { \\n color: #9cbeff; \\n font-size: 0.94em; \\n } \\n .text .size span { \\n color: 555; \\n font-size: 0.94em; \\n } \\n .text .title { \\n color: #1a0dab; \\n font-size: 1.2em; \\n text-decoration: none; \\n } \\n .text .snippet { \\n color: #4d5156; \\n font-size: 0.95em; \\n } \\n .highlight { \\n font-size: 0.95em; \\n color: red; \\n font-weight: 900; \\n } \\n </style> \\n \" ) CSS template mimicking Google's search result style. This constant is intended for styling HTML search results to resemble Google's layout, including text, snippets, highlights, and favicon display. Attributes: GOOGLE_STYLE ( Final [ str ] ) \u2013 The full CSS markup as a string. PATH3 module-attribute PATH3 : Final [ str ] = ( '<circle cx=\"5\" cy=\"5\" r=\"2\" fill=\"black\"/><circle cx=\"15\" cy=\"5\" \\n r=\"8\" fill=\"black\"/><circle cx=\"5\" cy=\"15\" r=\"2\" fill=\"red\"/><circle cx=\"15\" \\n cy=\"15\" r=\"8\" fill=\"black\"/>' ) SVG template representing a set of circles with predefined coordinates and colors. This constant is intended for use in rendering small SVG graphics or indicators. Attributes: PATH3 ( Final [ str ] ) \u2013 The raw SVG markup as a string. PURE_SIMPLE_STYLE module-attribute PURE_SIMPLE_STYLE : Final [ str ] = ( \" \\n <style> \\n table { \\n width: 80%; \\n border-collapse: collapse; \\n margin: 10px 0; \\n font-size: 14px; \\n } \\n table, th, td { \\n border: 1px solid grey; \\n } \\n th, td { \\n padding: 2px; \\n text-align: left; \\n } \\n th { \\n background-color: #f2f2f2; \\n } \\n tr:nth-child(even) { \\n background-color: #f9f9f9; \\n } \\n hr { \\n border: none; \\n height: 1px; \\n width: 80%; \\n margin-left: 0; \\n margin-bottom: 4px; \\n background-color: grey; \\n } \\n .date-text { \\n font-family: 'Courier New', Courier, monospace; \\n font-size: 11px; \\n color: grey; \\n } \\n </style> \\n \" ) Pure simple CSS template for table-based results without highlights. This constant provides basic styling for HTML tables and dates SIMPLE_STYLE module-attribute SIMPLE_STYLE : Final [ str ] = ( \" \\n <style> \\n table { \\n width: 80%; \\n border-collapse: collapse; \\n margin: 10px 0; \\n font-size: 14px; \\n background-color: #e6f2ff; \\n } \\n table, th, td { \\n border: 1px solid grey; \\n } \\n th, td { \\n padding: 10px; \\n text-align: justify; \\n } \\n th { \\n background-color: #f2f2f2; \\n } \\n tr:nth-child(even) { \\n background-color: #f9f9f9; \\n } \\n hr { \\n border: none; \\n height: 1px; \\n width: 80%; \\n margin-left: 0; \\n margin-right: auto; \\n margin-bottom: 4px; \\n background-color: grey; \\n } \\n .date-text { \\n font-family: 'Courier New', Courier, monospace; \\n font-size: 11px; \\n display: inline-block; \\n margin: 0; \\n color: grey; \\n } \\n img { \\n padding: 0px; \\n } \\n span { \\n font-family: 'Courier New', Courier, monospace; \\n font-size: 14px; \\n color: gray; \\n margin: 20px; \\n } \\n .find-text { \\n background-color: #fff700; \\n color: black; \\n display: inline-block; \\n border-radius: 5px; \\n border: 1px solid transparent; \\n fill: #000000; \\n border-image-slice: 33%; \\n border-image-repeat: stretch; \\n border-image: url('data:image/svg+xml;utf8, \\n <svg xmlns= \\\" http://www.w3.org/2000/svg \\\"\\n width= \\\" 15 \\\" height= \\\" 15 \\\" >>ttt<</svg>'); \\n padding: 0px 0px 0px 0px; \\n } \\n </style> \\n \" ) Simple CSS template for table-based results and highlighting. This constant provides basic styling for HTML tables, text highlights, dates, and inline SVG indicators. Attributes: SIMPLE_STYLE ( Final [ str ] ) \u2013 The full CSS markup as a string.","title":"HTML CSS Utils"},{"location":"tools/html_css_utils/#html-css-utils","text":"","title":"HTML CSS Utils"},{"location":"tools/html_css_utils/#aniachifast.tools.html_css_utils","text":"SVG and CSS Templates for HTML Rendering This module provides a set of predefined constants for SVG and CSS templates used in HTML rendering. It includes templates for: Small SVG graphics (e.g., indicator circles). Google-like search result styling. Simple table-based styling with highlights. These constants are intended to be used across the application wherever HTML rendering with consistent styling is required. Constants PATH3 (Final[str]): SVG markup with circle elements. GOOGLE_STYLE (Final[str]): CSS mimicking Google search result layout. SIMPLE_STYLE (Final[str]): CSS for table-based HTML results and highlights. Usage Example from templates import PATH3, GOOGLE_STYLE","title":"html_css_utils"},{"location":"tools/html_css_utils/#aniachifast.tools.html_css_utils--use-path3-as-inline-svg","text":"svg_html = f' {PATH3} '","title":"Use PATH3 as inline SVG"},{"location":"tools/html_css_utils/#aniachifast.tools.html_css_utils--include-google_style-in-section-of-html","text":"","title":"Include GOOGLE_STYLE in section of HTML"},{"location":"tools/html_css_utils/#aniachifast.tools.html_css_utils.GOOGLE_STYLE","text":"GOOGLE_STYLE : Final [ str ] = ( \" \\n <style> \\n body { \\n font-family: Arial, sans-serif; \\n margin: 40px; \\n } \\n .result { \\n display: flex; \\n gap: 20px; \\n align-items: flex-start; \\n margin-bottom: 30px; \\n } \\n .favicon img { \\n width: 88px; \\n height: 148px; \\n object-fit: cover; \\n } \\n .text .source { \\n font-size: 0.95em; \\n color: #555; \\n font-weight: 100; \\n } \\n .text .source span { \\n color: #555; \\n font-weight: 900; \\n } \\n .text .url { \\n color: #9cbeff; \\n font-size: 0.9em; \\n } \\n .text .url span { \\n color: 555; \\n font-size: 0.9em; \\n } \\n .text .size { \\n color: #9cbeff; \\n font-size: 0.94em; \\n } \\n .text .size span { \\n color: 555; \\n font-size: 0.94em; \\n } \\n .text .title { \\n color: #1a0dab; \\n font-size: 1.2em; \\n text-decoration: none; \\n } \\n .text .snippet { \\n color: #4d5156; \\n font-size: 0.95em; \\n } \\n .highlight { \\n font-size: 0.95em; \\n color: red; \\n font-weight: 900; \\n } \\n </style> \\n \" ) CSS template mimicking Google's search result style. This constant is intended for styling HTML search results to resemble Google's layout, including text, snippets, highlights, and favicon display. Attributes: GOOGLE_STYLE ( Final [ str ] ) \u2013 The full CSS markup as a string.","title":"GOOGLE_STYLE"},{"location":"tools/html_css_utils/#aniachifast.tools.html_css_utils.PATH3","text":"PATH3 : Final [ str ] = ( '<circle cx=\"5\" cy=\"5\" r=\"2\" fill=\"black\"/><circle cx=\"15\" cy=\"5\" \\n r=\"8\" fill=\"black\"/><circle cx=\"5\" cy=\"15\" r=\"2\" fill=\"red\"/><circle cx=\"15\" \\n cy=\"15\" r=\"8\" fill=\"black\"/>' ) SVG template representing a set of circles with predefined coordinates and colors. This constant is intended for use in rendering small SVG graphics or indicators. Attributes: PATH3 ( Final [ str ] ) \u2013 The raw SVG markup as a string.","title":"PATH3"},{"location":"tools/html_css_utils/#aniachifast.tools.html_css_utils.PURE_SIMPLE_STYLE","text":"PURE_SIMPLE_STYLE : Final [ str ] = ( \" \\n <style> \\n table { \\n width: 80%; \\n border-collapse: collapse; \\n margin: 10px 0; \\n font-size: 14px; \\n } \\n table, th, td { \\n border: 1px solid grey; \\n } \\n th, td { \\n padding: 2px; \\n text-align: left; \\n } \\n th { \\n background-color: #f2f2f2; \\n } \\n tr:nth-child(even) { \\n background-color: #f9f9f9; \\n } \\n hr { \\n border: none; \\n height: 1px; \\n width: 80%; \\n margin-left: 0; \\n margin-bottom: 4px; \\n background-color: grey; \\n } \\n .date-text { \\n font-family: 'Courier New', Courier, monospace; \\n font-size: 11px; \\n color: grey; \\n } \\n </style> \\n \" ) Pure simple CSS template for table-based results without highlights. This constant provides basic styling for HTML tables and dates","title":"PURE_SIMPLE_STYLE"},{"location":"tools/html_css_utils/#aniachifast.tools.html_css_utils.SIMPLE_STYLE","text":"SIMPLE_STYLE : Final [ str ] = ( \" \\n <style> \\n table { \\n width: 80%; \\n border-collapse: collapse; \\n margin: 10px 0; \\n font-size: 14px; \\n background-color: #e6f2ff; \\n } \\n table, th, td { \\n border: 1px solid grey; \\n } \\n th, td { \\n padding: 10px; \\n text-align: justify; \\n } \\n th { \\n background-color: #f2f2f2; \\n } \\n tr:nth-child(even) { \\n background-color: #f9f9f9; \\n } \\n hr { \\n border: none; \\n height: 1px; \\n width: 80%; \\n margin-left: 0; \\n margin-right: auto; \\n margin-bottom: 4px; \\n background-color: grey; \\n } \\n .date-text { \\n font-family: 'Courier New', Courier, monospace; \\n font-size: 11px; \\n display: inline-block; \\n margin: 0; \\n color: grey; \\n } \\n img { \\n padding: 0px; \\n } \\n span { \\n font-family: 'Courier New', Courier, monospace; \\n font-size: 14px; \\n color: gray; \\n margin: 20px; \\n } \\n .find-text { \\n background-color: #fff700; \\n color: black; \\n display: inline-block; \\n border-radius: 5px; \\n border: 1px solid transparent; \\n fill: #000000; \\n border-image-slice: 33%; \\n border-image-repeat: stretch; \\n border-image: url('data:image/svg+xml;utf8, \\n <svg xmlns= \\\" http://www.w3.org/2000/svg \\\"\\n width= \\\" 15 \\\" height= \\\" 15 \\\" >>ttt<</svg>'); \\n padding: 0px 0px 0px 0px; \\n } \\n </style> \\n \" ) Simple CSS template for table-based results and highlighting. This constant provides basic styling for HTML tables, text highlights, dates, and inline SVG indicators. Attributes: SIMPLE_STYLE ( Final [ str ] ) \u2013 The full CSS markup as a string.","title":"SIMPLE_STYLE"},{"location":"tools/html_utils/","text":"HTML Utilities aniachifast.tools.html_utils HTML generation utilities for API responses and search results rendering. This module provides helper functions to dynamically generate HTML documents and fragments for FastAPI responses. It focuses on rendering tabular data, image previews, highlighted text matches, and Google-like search result layouts. Main features: - Generate HTML tables combining images and textual content - Highlight matched text ranges inside HTML output - Render single images encoded in base64 - Produce Google-style result layouts for search engines - Generate reusable HTML snippets for image galleries All functions return raw HTML strings and are intended to be used as response payloads (e.g., HTMLResponse ) or embedded into larger HTML documents. HTML escaping is applied where necessary to prevent injection issues, especially when rendering user-provided content. generate_content generate_content ( src : str , matches : list [ tuple [ int , int ]], context_range : int , ) -> str Generate a combined HTML snippet block for all matches in a document. This function aggregates multiple highlighted match <div> blocks into a single container element, suitable for embedding in result previews or search result listings. Internally, it delegates the match rendering to generate_single_div . Parameters: src ( str ) \u2013 Source text where matches were found. matches ( list [ tuple [ int , int ]] ) \u2013 List of (start, end) index tuples representing match positions within the source text. context_range ( int ) \u2013 Number of characters to include before and after each match for context. Returns: str ( str ) \u2013 An HTML fragment containing all highlighted snippets. Example html_snippet = generate_content(text, matches, 50) generate_google_style_html generate_google_style_html ( data : dict ) -> str Generate an HTML document styled similarly to Google search results. This function takes a structured search response dictionary and renders it as a full HTML page, including: - Query title - Result metadata (file name, size, score, UUID, etc.) - Thumbnail previews - Highlighted content snippets showing match context The resulting HTML is intended for human-readable visualization of search results, such as in a browser or embedded UI. Parameters: data ( dict ) \u2013 Search result payload containing: - \"query\": The search query string. - \"hits\": A list of result entries, where each entry includes content, match positions, metadata, and thumbnail data. Returns: str ( str ) \u2013 A complete HTML document as a string. Example html = generate_google_style_html(search_response) open(\"results.html\", \"w\").write(html) generate_single_div generate_single_div ( src : str , matches : list [ tuple [ int , int ]], context_range : int , ) -> list [ str ] Generate HTML snippet blocks with highlighted match occurrences. This function extracts contextual text around each match range and wraps the matched substring in a highlighted HTML span. Each match is rendered as a separate <div> element. HTML escaping is applied to the source text to prevent rendering issues or HTML injection. Parameters: src ( str ) \u2013 Source text where matches were found. matches ( list [ tuple [ int , int ]] ) \u2013 List of (start, end) index tuples representing match positions within the source text. context_range ( int ) \u2013 Number of characters to include before and after each match for context. Returns: list [ str ] \u2013 list[str]: A list of HTML <div> strings, one per match. Example generate_single_div(\"hello world\", [(6, 11)], 5) get_images_thumbails_template get_images_thumbails_template ( images : str , title : str ) -> str Generate a standalone HTML gallery for image thumbnails. This function builds a complete HTML document containing a responsive image gallery layout. It is typically used to display image previews extracted from documents or search results. The images argument is expected to contain pre-rendered <img> HTML tags. Parameters: images ( str ) \u2013 HTML string containing one or more <img> elements. title ( str ) \u2013 Page title and visible heading for the gallery. Returns: str ( str ) \u2013 A complete HTML document string displaying the image gallery. Example html = get_images_thumbails_template(images_html, \"Preview\") open(\"images.html\", \"w\").write(html) highlight_text highlight_text ( text : str , ranges : list [ tuple [ int , int ]] ) -> str Highlight specific character ranges within a text string. The matched ranges are wrapped in a styled HTML span element, while the rest of the text is safely escaped to prevent HTML injection. Parameters: text ( str ) \u2013 Source text to process. ranges ( list [ tuple [ int , int ]] ) \u2013 List of (start, end) index ranges. Returns: str ( str ) \u2013 HTML-safe string with highlighted ranges. html_generator html_generator ( texts : list , images : list , title : str , size : tuple = ( 100 , 100 ), ) -> str Generate an HTML table combining images and text entries. Each row contains an image and its associated text. The function supports custom image sizing and automatically builds a complete HTML document with embedded styles. Parameters: texts ( list ) \u2013 List of dictionaries containing text values. images ( list ) \u2013 List of image URLs or paths. title ( str ) \u2013 Title displayed at the top of the HTML document. size ( tuple , default: (100, 100) ) \u2013 Image dimensions as (width, height). Returns: str ( str ) \u2013 Full HTML document as a string. html_generator_shape_case html_generator_shape_case ( texts : list , images : list , concurrencies : list , title : str , size : tuple = ( 100 , 100 ), ) -> str Generate an HTML table with highlighted text ranges. Similar to html_generator , but supports highlighting specific character ranges within the text, typically used to mark search term occurrences. Parameters: texts ( list ) \u2013 List of dictionaries containing text values. images ( list ) \u2013 List of image URLs or paths. concurrencies ( list ) \u2013 List of character index ranges to highlight. title ( str ) \u2013 Title displayed at the top of the HTML document. size ( tuple , default: (100, 100) ) \u2013 Image dimensions as (width, height). Returns: str ( str ) \u2013 Full HTML document as a string with highlighted text. html_single_image html_single_image ( base64_image : str , fmt : str = \"jpeg\" , size : tuple = ( 100 , 100 ), ) -> str Generate a minimal HTML document displaying a single base64 image. Parameters: base64_image ( str ) \u2013 Base64-encoded image content. fmt ( str , default: 'jpeg' ) \u2013 Image format (e.g., 'jpeg', 'png'). size ( tuple , default: (100, 100) ) \u2013 Image dimensions as (width, height). Returns: str ( str ) \u2013 HTML document containing the rendered image.","title":"HTML Utils"},{"location":"tools/html_utils/#html-utilities","text":"","title":"HTML Utilities"},{"location":"tools/html_utils/#aniachifast.tools.html_utils","text":"HTML generation utilities for API responses and search results rendering. This module provides helper functions to dynamically generate HTML documents and fragments for FastAPI responses. It focuses on rendering tabular data, image previews, highlighted text matches, and Google-like search result layouts. Main features: - Generate HTML tables combining images and textual content - Highlight matched text ranges inside HTML output - Render single images encoded in base64 - Produce Google-style result layouts for search engines - Generate reusable HTML snippets for image galleries All functions return raw HTML strings and are intended to be used as response payloads (e.g., HTMLResponse ) or embedded into larger HTML documents. HTML escaping is applied where necessary to prevent injection issues, especially when rendering user-provided content.","title":"html_utils"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.generate_content","text":"generate_content ( src : str , matches : list [ tuple [ int , int ]], context_range : int , ) -> str Generate a combined HTML snippet block for all matches in a document. This function aggregates multiple highlighted match <div> blocks into a single container element, suitable for embedding in result previews or search result listings. Internally, it delegates the match rendering to generate_single_div . Parameters: src ( str ) \u2013 Source text where matches were found. matches ( list [ tuple [ int , int ]] ) \u2013 List of (start, end) index tuples representing match positions within the source text. context_range ( int ) \u2013 Number of characters to include before and after each match for context. Returns: str ( str ) \u2013 An HTML fragment containing all highlighted snippets. Example html_snippet = generate_content(text, matches, 50)","title":"generate_content"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.generate_google_style_html","text":"generate_google_style_html ( data : dict ) -> str Generate an HTML document styled similarly to Google search results. This function takes a structured search response dictionary and renders it as a full HTML page, including: - Query title - Result metadata (file name, size, score, UUID, etc.) - Thumbnail previews - Highlighted content snippets showing match context The resulting HTML is intended for human-readable visualization of search results, such as in a browser or embedded UI. Parameters: data ( dict ) \u2013 Search result payload containing: - \"query\": The search query string. - \"hits\": A list of result entries, where each entry includes content, match positions, metadata, and thumbnail data. Returns: str ( str ) \u2013 A complete HTML document as a string. Example html = generate_google_style_html(search_response) open(\"results.html\", \"w\").write(html)","title":"generate_google_style_html"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.generate_single_div","text":"generate_single_div ( src : str , matches : list [ tuple [ int , int ]], context_range : int , ) -> list [ str ] Generate HTML snippet blocks with highlighted match occurrences. This function extracts contextual text around each match range and wraps the matched substring in a highlighted HTML span. Each match is rendered as a separate <div> element. HTML escaping is applied to the source text to prevent rendering issues or HTML injection. Parameters: src ( str ) \u2013 Source text where matches were found. matches ( list [ tuple [ int , int ]] ) \u2013 List of (start, end) index tuples representing match positions within the source text. context_range ( int ) \u2013 Number of characters to include before and after each match for context. Returns: list [ str ] \u2013 list[str]: A list of HTML <div> strings, one per match. Example generate_single_div(\"hello world\", [(6, 11)], 5)","title":"generate_single_div"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.get_images_thumbails_template","text":"get_images_thumbails_template ( images : str , title : str ) -> str Generate a standalone HTML gallery for image thumbnails. This function builds a complete HTML document containing a responsive image gallery layout. It is typically used to display image previews extracted from documents or search results. The images argument is expected to contain pre-rendered <img> HTML tags. Parameters: images ( str ) \u2013 HTML string containing one or more <img> elements. title ( str ) \u2013 Page title and visible heading for the gallery. Returns: str ( str ) \u2013 A complete HTML document string displaying the image gallery. Example html = get_images_thumbails_template(images_html, \"Preview\") open(\"images.html\", \"w\").write(html)","title":"get_images_thumbails_template"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.highlight_text","text":"highlight_text ( text : str , ranges : list [ tuple [ int , int ]] ) -> str Highlight specific character ranges within a text string. The matched ranges are wrapped in a styled HTML span element, while the rest of the text is safely escaped to prevent HTML injection. Parameters: text ( str ) \u2013 Source text to process. ranges ( list [ tuple [ int , int ]] ) \u2013 List of (start, end) index ranges. Returns: str ( str ) \u2013 HTML-safe string with highlighted ranges.","title":"highlight_text"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.html_generator","text":"html_generator ( texts : list , images : list , title : str , size : tuple = ( 100 , 100 ), ) -> str Generate an HTML table combining images and text entries. Each row contains an image and its associated text. The function supports custom image sizing and automatically builds a complete HTML document with embedded styles. Parameters: texts ( list ) \u2013 List of dictionaries containing text values. images ( list ) \u2013 List of image URLs or paths. title ( str ) \u2013 Title displayed at the top of the HTML document. size ( tuple , default: (100, 100) ) \u2013 Image dimensions as (width, height). Returns: str ( str ) \u2013 Full HTML document as a string.","title":"html_generator"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.html_generator_shape_case","text":"html_generator_shape_case ( texts : list , images : list , concurrencies : list , title : str , size : tuple = ( 100 , 100 ), ) -> str Generate an HTML table with highlighted text ranges. Similar to html_generator , but supports highlighting specific character ranges within the text, typically used to mark search term occurrences. Parameters: texts ( list ) \u2013 List of dictionaries containing text values. images ( list ) \u2013 List of image URLs or paths. concurrencies ( list ) \u2013 List of character index ranges to highlight. title ( str ) \u2013 Title displayed at the top of the HTML document. size ( tuple , default: (100, 100) ) \u2013 Image dimensions as (width, height). Returns: str ( str ) \u2013 Full HTML document as a string with highlighted text.","title":"html_generator_shape_case"},{"location":"tools/html_utils/#aniachifast.tools.html_utils.html_single_image","text":"html_single_image ( base64_image : str , fmt : str = \"jpeg\" , size : tuple = ( 100 , 100 ), ) -> str Generate a minimal HTML document displaying a single base64 image. Parameters: base64_image ( str ) \u2013 Base64-encoded image content. fmt ( str , default: 'jpeg' ) \u2013 Image format (e.g., 'jpeg', 'png'). size ( tuple , default: (100, 100) ) \u2013 Image dimensions as (width, height). Returns: str ( str ) \u2013 HTML document containing the rendered image.","title":"html_single_image"},{"location":"tools/image_utils/","text":"Image Utilities aniachifast.tools.image_utils Image processing utilities. This module provides functions for generating and manipulating images, including custom QR code generation. AvailableFormats module-attribute AvailableFormats = Literal [ \"jpeg\" , \"png\" , \"gif\" , \"bmp\" , \"tiff\" , \"webp\" ] build_qr_code build_qr_code ( data : str , width : int , height : int , back_color : str , fmt : AvailableFormats = \"jpeg\" , _size : int = 20 , ) -> BytesIO Generate a custom QR code with specific dimensions and colors. Parameters: data ( str ) \u2013 The data to encode in the QR code. width ( int ) \u2013 Desired width of the final image in pixels. height ( int ) \u2013 Desired height of the final image in pixels. back_color ( str ) \u2013 Background color of the QR code (e.g., 'black', '#FF0000'). fmt ( AvailableFormats , default: 'jpeg' ) \u2013 Output image format. Defaults to 'jpeg'. _size ( int , default: 20 ) \u2013 Size of each QR module in pixels. Defaults to 20. Returns: BytesIO ( BytesIO ) \u2013 Byte buffer containing the QR code image. Example qr_buffer = build_qr_code( ... data=\"https://example.com\", ... width=300, ... height=300, ... back_color=\"blue\", ... fmt=\"png\" ... ) Save to file with open(\"qr_code.png\", \"wb\") as f: ... f.write(qr_buffer.getvalue())","title":"Image Utils"},{"location":"tools/image_utils/#image-utilities","text":"","title":"Image Utilities"},{"location":"tools/image_utils/#aniachifast.tools.image_utils","text":"Image processing utilities. This module provides functions for generating and manipulating images, including custom QR code generation.","title":"image_utils"},{"location":"tools/image_utils/#aniachifast.tools.image_utils.AvailableFormats","text":"AvailableFormats = Literal [ \"jpeg\" , \"png\" , \"gif\" , \"bmp\" , \"tiff\" , \"webp\" ]","title":"AvailableFormats"},{"location":"tools/image_utils/#aniachifast.tools.image_utils.build_qr_code","text":"build_qr_code ( data : str , width : int , height : int , back_color : str , fmt : AvailableFormats = \"jpeg\" , _size : int = 20 , ) -> BytesIO Generate a custom QR code with specific dimensions and colors. Parameters: data ( str ) \u2013 The data to encode in the QR code. width ( int ) \u2013 Desired width of the final image in pixels. height ( int ) \u2013 Desired height of the final image in pixels. back_color ( str ) \u2013 Background color of the QR code (e.g., 'black', '#FF0000'). fmt ( AvailableFormats , default: 'jpeg' ) \u2013 Output image format. Defaults to 'jpeg'. _size ( int , default: 20 ) \u2013 Size of each QR module in pixels. Defaults to 20. Returns: BytesIO ( BytesIO ) \u2013 Byte buffer containing the QR code image. Example qr_buffer = build_qr_code( ... data=\"https://example.com\", ... width=300, ... height=300, ... back_color=\"blue\", ... fmt=\"png\" ... )","title":"build_qr_code"},{"location":"tools/image_utils/#aniachifast.tools.image_utils.build_qr_code--save-to-file","text":"with open(\"qr_code.png\", \"wb\") as f: ... f.write(qr_buffer.getvalue())","title":"Save to file"},{"location":"tools/logging_utils/","text":"Logging Utilities aniachifast.tools.logging_utils Verbose logging formatters. This module provides custom logging formatters designed to produce human-readable, multi-line log messages enriched with structured contextual information. The main goal of this module is to improve log readability during development, debugging, and incident analysis by: Displaying logs in a clear, verbose, multi-line format Including optional contextual fields passed via logging.Logger.extra Rendering stack traces in a readable block when exceptions occur This formatter is especially useful in: - FastAPI / ASGI applications - CLI tools - Background workers - Local development and debugging environments It is NOT intended to replace structured logging formats (JSON) in high-throughput production pipelines, but rather to complement them in environments where human inspection is required. Example Basic usage with the standard logging module:: import logging from aniachifast.tools.logging_utils import VerbosePlainFormatter handler = logging.StreamHandler() handler.setFormatter(VerbosePlainFormatter()) logger = logging.getLogger(\"my_app\") logger.setLevel(logging.INFO) logger.addHandler(handler) logger.info( \"Request failed\", extra={ \"path\": \"/users\", \"method\": \"POST\", \"error_type\": \"ValidationError\", }, ) VerbosePlainFormatter Bases: Formatter Human-readable verbose logging formatter with contextual metadata support. This formatter renders log records as multi-line plain text, making them easy to read and inspect in terminal output or text-based logs. Features: - ISO-8601 timestamps - Log level and logger name - Main log message - Optional contextual fields (if present in LogRecord.extra ) - Pretty-printed stack traces for exceptions The formatter looks for the following optional attributes on the logging.LogRecord instance: error_type path method errors body These attributes are commonly injected via the extra parameter when calling logger.* . This design avoids tight coupling to any specific framework (FastAPI, Flask, etc.) while still supporting rich request context. Example :: logger.error( \"Unhandled exception\", extra={ \"path\": \"/auth/login\", \"method\": \"POST\", \"error_type\": \"AuthError\", }, exc_info=True, ) format format ( record : LogRecord ) -> str Format a LogRecord into a human-readable multi-line string. This method overrides logging.Formatter.format to produce a verbose textual representation of the log record, including optional contextual metadata and stack traces. Processing steps: 1. Convert the record creation timestamp to ISO-8601 format 2. Render log level, logger name, and main message 3. Append known contextual fields if present on the record 4. Append formatted stack trace if exc_info is set Parameters: record ( LogRecord ) \u2013 The log record generated by the logging framework. Returns: str ( str ) \u2013 A formatted, multi-line string ready to be emitted by a logging handler. Notes Missing contextual fields are silently ignored. Stack traces are included only when exc_info=True was provided during logging. This formatter does not mutate the LogRecord.","title":"Logging Utils"},{"location":"tools/logging_utils/#logging-utilities","text":"","title":"Logging Utilities"},{"location":"tools/logging_utils/#aniachifast.tools.logging_utils","text":"Verbose logging formatters. This module provides custom logging formatters designed to produce human-readable, multi-line log messages enriched with structured contextual information. The main goal of this module is to improve log readability during development, debugging, and incident analysis by: Displaying logs in a clear, verbose, multi-line format Including optional contextual fields passed via logging.Logger.extra Rendering stack traces in a readable block when exceptions occur This formatter is especially useful in: - FastAPI / ASGI applications - CLI tools - Background workers - Local development and debugging environments It is NOT intended to replace structured logging formats (JSON) in high-throughput production pipelines, but rather to complement them in environments where human inspection is required. Example Basic usage with the standard logging module:: import logging from aniachifast.tools.logging_utils import VerbosePlainFormatter handler = logging.StreamHandler() handler.setFormatter(VerbosePlainFormatter()) logger = logging.getLogger(\"my_app\") logger.setLevel(logging.INFO) logger.addHandler(handler) logger.info( \"Request failed\", extra={ \"path\": \"/users\", \"method\": \"POST\", \"error_type\": \"ValidationError\", }, )","title":"logging_utils"},{"location":"tools/logging_utils/#aniachifast.tools.logging_utils.VerbosePlainFormatter","text":"Bases: Formatter Human-readable verbose logging formatter with contextual metadata support. This formatter renders log records as multi-line plain text, making them easy to read and inspect in terminal output or text-based logs. Features: - ISO-8601 timestamps - Log level and logger name - Main log message - Optional contextual fields (if present in LogRecord.extra ) - Pretty-printed stack traces for exceptions The formatter looks for the following optional attributes on the logging.LogRecord instance: error_type path method errors body These attributes are commonly injected via the extra parameter when calling logger.* . This design avoids tight coupling to any specific framework (FastAPI, Flask, etc.) while still supporting rich request context. Example :: logger.error( \"Unhandled exception\", extra={ \"path\": \"/auth/login\", \"method\": \"POST\", \"error_type\": \"AuthError\", }, exc_info=True, )","title":"VerbosePlainFormatter"},{"location":"tools/logging_utils/#aniachifast.tools.logging_utils.VerbosePlainFormatter.format","text":"format ( record : LogRecord ) -> str Format a LogRecord into a human-readable multi-line string. This method overrides logging.Formatter.format to produce a verbose textual representation of the log record, including optional contextual metadata and stack traces. Processing steps: 1. Convert the record creation timestamp to ISO-8601 format 2. Render log level, logger name, and main message 3. Append known contextual fields if present on the record 4. Append formatted stack trace if exc_info is set Parameters: record ( LogRecord ) \u2013 The log record generated by the logging framework. Returns: str ( str ) \u2013 A formatted, multi-line string ready to be emitted by a logging handler. Notes Missing contextual fields are silently ignored. Stack traces are included only when exc_info=True was provided during logging. This formatter does not mutate the LogRecord.","title":"format"},{"location":"tools/md_utils/","text":"Markdown Utils aniachifast.tools.md_utils Markdown response generation utilities. This module provides helper functions to generate Markdown-formatted content for API responses. It is primarily intended to be used as a response payload when the client requests Markdown output (e.g. .md or text/markdown formats). The generated Markdown is structured, human-readable, and suitable for rendering in browsers, documentation tools, or Markdown viewers. generate_md_response generate_md_response ( data : list , title : str = '' ) -> str Generate a Markdown-formatted response from structured data. This function iterates over a list of dictionaries and renders each value as a numbered \"Page\" section in Markdown format. It is commonly used as a response formatter before sending content to the client. Parameters: data ( list ) \u2013 List of dictionaries containing content values. title ( str , default: '' ) \u2013 Optional title displayed at the top of the document. Returns: str ( str ) \u2013 Markdown-formatted string ready to be sent as a response.","title":"Markdown Utils"},{"location":"tools/md_utils/#markdown-utils","text":"","title":"Markdown Utils"},{"location":"tools/md_utils/#aniachifast.tools.md_utils","text":"Markdown response generation utilities. This module provides helper functions to generate Markdown-formatted content for API responses. It is primarily intended to be used as a response payload when the client requests Markdown output (e.g. .md or text/markdown formats). The generated Markdown is structured, human-readable, and suitable for rendering in browsers, documentation tools, or Markdown viewers.","title":"md_utils"},{"location":"tools/md_utils/#aniachifast.tools.md_utils.generate_md_response","text":"generate_md_response ( data : list , title : str = '' ) -> str Generate a Markdown-formatted response from structured data. This function iterates over a list of dictionaries and renders each value as a numbered \"Page\" section in Markdown format. It is commonly used as a response formatter before sending content to the client. Parameters: data ( list ) \u2013 List of dictionaries containing content values. title ( str , default: '' ) \u2013 Optional title displayed at the top of the document. Returns: str ( str ) \u2013 Markdown-formatted string ready to be sent as a response.","title":"generate_md_response"},{"location":"tools/media_utils/","text":"Media Utilities aniachifast.tools.media_utils HTTP media type (MIME) constants. This module defines a centralized collection of commonly used HTTP media (MIME) type strings. It is intended to prevent hard-coded media type literals scattered across the codebase and to provide a single source of truth for content negotiation, response generation, and OpenAPI documentation. The constants defined here follow standard IANA media type specifications and are suitable for use in FastAPI responses, request validation, dependency-based header validation, and HTTP header construction. Typical use cases include: - Validating the Accept header via FastAPI dependencies - Defining allowed response media types per route or router - Standardizing Content-Type and Accept headers - Declaring supported formats in OpenAPI responses This module does not contain executable logic and should be treated as a lightweight utility namespace. MediaTypes Common HTTP media (MIME) type constants. This class serves as a namespace for frequently used HTTP media types within the application. It is intentionally designed without instance methods or state and should not be instantiated. Using named constants instead of raw strings improves consistency, readability, and reduces the risk of typographical errors in Content-Type and Accept headers. IMPORTANT : When using allowed_headers() dependency for header validation, you MUST use the predefined sets from aniachifast.tools.request_types (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets with these MediaTypes constants. This ensures consistency and maintains a single source of truth. Attributes: GIF ( str ) \u2013 Media type for GIF images ( image/gif ). JPEG ( str ) \u2013 Media type for JPEG images ( image/jpeg ). PNG ( str ) \u2013 Media type for PNG images ( image/png ). PDF ( str ) \u2013 Media type for PDF documents ( application/pdf ). TEXT ( str ) \u2013 Media type for plain text documents ( text/plain ). HTML ( str ) \u2013 Media type for HTML documents ( text/html ). CSS ( str ) \u2013 Media type for Cascading Style Sheets ( text/css ). CSV ( str ) \u2013 Media type for CSV (Comma-Separated Values) files ( text/csv ). TSV ( str ) \u2013 Media type for TSV (Tab-Separated Values) files ( text/tab-separated-values ). JSON ( str ) \u2013 Media type for JSON payloads ( application/json ). XML ( str ) \u2013 Media type for XML documents ( application/xml ). XML_TEXT ( str ) \u2013 Legacy media type for XML documents ( text/xml ). Included for backward compatibility with older clients and non-compliant implementations. YAML ( str ) \u2013 Media type for YAML documents ( text/yaml ). YAML_APP ( str ) \u2013 Alternative media type for YAML documents ( application/yaml ). JAVASCRIPT_TEXT ( str ) \u2013 Legacy media type for JavaScript resources ( text/javascript ). Widely used despite being deprecated in favor of application/javascript . JAVASCRIPT_APP ( str ) \u2013 Standard media type for JavaScript resources ( application/javascript ). DICOM ( str ) \u2013 Media type for DICOM (Digital Imaging and Communications in Medicine) binary files ( application/dicom ). Commonly used for medical imaging data. DICOM_JSON ( str ) \u2013 Media type for DICOM content serialized as JSON ( application/dicom+json ). DICOM_XML ( str ) \u2013 Media type for DICOM content serialized as XML ( application/dicom+xml ). OCTET_STREAM ( str ) \u2013 Generic binary media type ( application/octet-stream ). Used as a fallback for arbitrary binary data when the specific content type is unknown or not declared. Example Using media types in a FastAPI response:: from fastapi.responses import JSONResponse from aniachifast.tools.media_utils import MediaTypes return JSONResponse( content={\"status\": \"ok\"}, media_type=MediaTypes.JSON, ) Declaring supported response formats in OpenAPI:: @router.get( \"/health\", responses={ 200: { \"content\": { MediaTypes.JSON: {}, MediaTypes.HTML: {}, } } }, ) CORRECT - For header validation, use request_types:: from fastapi import Depends from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES @router.get( \"/items\", dependencies=[Depends(allowed_headers(COMMON_TYPES))] ) INCORRECT - Don't create ad-hoc sets for allowed_headers:: # \u274c WRONG - Don't do this from aniachifast.tools.media_utils import MediaTypes @router.get( \"/items\", dependencies=[ Depends(allowed_headers({MediaTypes.JSON, MediaTypes.HTML})) ] ) CSS class-attribute instance-attribute CSS = 'text/css' CSV class-attribute instance-attribute CSV = 'text/csv' DICOM class-attribute instance-attribute DICOM = 'application/dicom' DICOM_JSON class-attribute instance-attribute DICOM_JSON = 'application/dicom+json' DICOM_XML class-attribute instance-attribute DICOM_XML = 'application/dicom+xml' GIF class-attribute instance-attribute GIF = 'image/gif' HTML class-attribute instance-attribute HTML = 'text/html' JAVASCRIPT_APP class-attribute instance-attribute JAVASCRIPT_APP = 'application/javascript' JAVASCRIPT_TEXT class-attribute instance-attribute JAVASCRIPT_TEXT = 'text/javascript' JPEG class-attribute instance-attribute JPEG = 'image/jpeg' JSON class-attribute instance-attribute JSON = 'application/json' OCTET_STREAM class-attribute instance-attribute OCTET_STREAM = 'application/octet-stream' PDF class-attribute instance-attribute PDF = 'application/pdf' PNG class-attribute instance-attribute PNG = 'image/png' TEXT class-attribute instance-attribute TEXT = 'text/plain' TSV class-attribute instance-attribute TSV = 'text/tab-separated-values' XML class-attribute instance-attribute XML = 'application/xml' XML_TEXT class-attribute instance-attribute XML_TEXT = 'text/xml' YAML class-attribute instance-attribute YAML = 'text/yaml' YAML_APP class-attribute instance-attribute YAML_APP = 'application/yaml'","title":"Media Utils"},{"location":"tools/media_utils/#media-utilities","text":"","title":"Media Utilities"},{"location":"tools/media_utils/#aniachifast.tools.media_utils","text":"HTTP media type (MIME) constants. This module defines a centralized collection of commonly used HTTP media (MIME) type strings. It is intended to prevent hard-coded media type literals scattered across the codebase and to provide a single source of truth for content negotiation, response generation, and OpenAPI documentation. The constants defined here follow standard IANA media type specifications and are suitable for use in FastAPI responses, request validation, dependency-based header validation, and HTTP header construction. Typical use cases include: - Validating the Accept header via FastAPI dependencies - Defining allowed response media types per route or router - Standardizing Content-Type and Accept headers - Declaring supported formats in OpenAPI responses This module does not contain executable logic and should be treated as a lightweight utility namespace.","title":"media_utils"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes","text":"Common HTTP media (MIME) type constants. This class serves as a namespace for frequently used HTTP media types within the application. It is intentionally designed without instance methods or state and should not be instantiated. Using named constants instead of raw strings improves consistency, readability, and reduces the risk of typographical errors in Content-Type and Accept headers. IMPORTANT : When using allowed_headers() dependency for header validation, you MUST use the predefined sets from aniachifast.tools.request_types (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets with these MediaTypes constants. This ensures consistency and maintains a single source of truth. Attributes: GIF ( str ) \u2013 Media type for GIF images ( image/gif ). JPEG ( str ) \u2013 Media type for JPEG images ( image/jpeg ). PNG ( str ) \u2013 Media type for PNG images ( image/png ). PDF ( str ) \u2013 Media type for PDF documents ( application/pdf ). TEXT ( str ) \u2013 Media type for plain text documents ( text/plain ). HTML ( str ) \u2013 Media type for HTML documents ( text/html ). CSS ( str ) \u2013 Media type for Cascading Style Sheets ( text/css ). CSV ( str ) \u2013 Media type for CSV (Comma-Separated Values) files ( text/csv ). TSV ( str ) \u2013 Media type for TSV (Tab-Separated Values) files ( text/tab-separated-values ). JSON ( str ) \u2013 Media type for JSON payloads ( application/json ). XML ( str ) \u2013 Media type for XML documents ( application/xml ). XML_TEXT ( str ) \u2013 Legacy media type for XML documents ( text/xml ). Included for backward compatibility with older clients and non-compliant implementations. YAML ( str ) \u2013 Media type for YAML documents ( text/yaml ). YAML_APP ( str ) \u2013 Alternative media type for YAML documents ( application/yaml ). JAVASCRIPT_TEXT ( str ) \u2013 Legacy media type for JavaScript resources ( text/javascript ). Widely used despite being deprecated in favor of application/javascript . JAVASCRIPT_APP ( str ) \u2013 Standard media type for JavaScript resources ( application/javascript ). DICOM ( str ) \u2013 Media type for DICOM (Digital Imaging and Communications in Medicine) binary files ( application/dicom ). Commonly used for medical imaging data. DICOM_JSON ( str ) \u2013 Media type for DICOM content serialized as JSON ( application/dicom+json ). DICOM_XML ( str ) \u2013 Media type for DICOM content serialized as XML ( application/dicom+xml ). OCTET_STREAM ( str ) \u2013 Generic binary media type ( application/octet-stream ). Used as a fallback for arbitrary binary data when the specific content type is unknown or not declared. Example Using media types in a FastAPI response:: from fastapi.responses import JSONResponse from aniachifast.tools.media_utils import MediaTypes return JSONResponse( content={\"status\": \"ok\"}, media_type=MediaTypes.JSON, ) Declaring supported response formats in OpenAPI:: @router.get( \"/health\", responses={ 200: { \"content\": { MediaTypes.JSON: {}, MediaTypes.HTML: {}, } } }, ) CORRECT - For header validation, use request_types:: from fastapi import Depends from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES @router.get( \"/items\", dependencies=[Depends(allowed_headers(COMMON_TYPES))] ) INCORRECT - Don't create ad-hoc sets for allowed_headers:: # \u274c WRONG - Don't do this from aniachifast.tools.media_utils import MediaTypes @router.get( \"/items\", dependencies=[ Depends(allowed_headers({MediaTypes.JSON, MediaTypes.HTML})) ] )","title":"MediaTypes"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.CSS","text":"CSS = 'text/css'","title":"CSS"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.CSV","text":"CSV = 'text/csv'","title":"CSV"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.DICOM","text":"DICOM = 'application/dicom'","title":"DICOM"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.DICOM_JSON","text":"DICOM_JSON = 'application/dicom+json'","title":"DICOM_JSON"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.DICOM_XML","text":"DICOM_XML = 'application/dicom+xml'","title":"DICOM_XML"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.GIF","text":"GIF = 'image/gif'","title":"GIF"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.HTML","text":"HTML = 'text/html'","title":"HTML"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.JAVASCRIPT_APP","text":"JAVASCRIPT_APP = 'application/javascript'","title":"JAVASCRIPT_APP"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.JAVASCRIPT_TEXT","text":"JAVASCRIPT_TEXT = 'text/javascript'","title":"JAVASCRIPT_TEXT"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.JPEG","text":"JPEG = 'image/jpeg'","title":"JPEG"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.JSON","text":"JSON = 'application/json'","title":"JSON"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.OCTET_STREAM","text":"OCTET_STREAM = 'application/octet-stream'","title":"OCTET_STREAM"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.PDF","text":"PDF = 'application/pdf'","title":"PDF"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.PNG","text":"PNG = 'image/png'","title":"PNG"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.TEXT","text":"TEXT = 'text/plain'","title":"TEXT"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.TSV","text":"TSV = 'text/tab-separated-values'","title":"TSV"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.XML","text":"XML = 'application/xml'","title":"XML"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.XML_TEXT","text":"XML_TEXT = 'text/xml'","title":"XML_TEXT"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.YAML","text":"YAML = 'text/yaml'","title":"YAML"},{"location":"tools/media_utils/#aniachifast.tools.media_utils.MediaTypes.YAML_APP","text":"YAML_APP = 'application/yaml'","title":"YAML_APP"},{"location":"tools/mem_utils/","text":"Memory Utilities aniachifast.tools.mem_utils","title":"Memory Utils"},{"location":"tools/mem_utils/#memory-utilities","text":"","title":"Memory Utilities"},{"location":"tools/mem_utils/#aniachifast.tools.mem_utils","text":"","title":"mem_utils"},{"location":"tools/net_utils/","text":"Network Utilities aniachifast.tools.net_utils Network-related utility functions. This module contains helper functions to extract network-level client information from request-like objects. It is intentionally framework-agnostic to ensure: - High testability - Low coupling - Reusability across FastAPI, Starlette, CLI, and background jobs get_ip get_ip ( request : RequestLike | None ) -> str Extract the client IP address from a request-like object. Priority order: 1. X-Forwarded-For header (first IP if multiple proxies) 2. request.client.host 3. 'unknown' fallback Parameters: request ( RequestLike ) \u2013 Request-like object. Returns: str ( str ) \u2013 Client IP address. is_valid_ip is_valid_ip ( ip_address : ( int | str | bytes | IPv4Address | IPv6Address ), raise_422 : bool = True , ) -> bool Validate whether a string is a valid IPv4 or IPv6 address. This function checks the format of the provided IP address. If the value is invalid and raise_422 is enabled, a FastAPI-compatible RequestValidationError is raised. Parameters: ip_address ( str | None ) \u2013 IP address to validate. raise_422 ( bool , default: True ) \u2013 Whether to raise a 422 validation error when invalid. Returns: bool ( bool ) \u2013 True if the IP address is valid, False otherwise. Raises: RequestValidationError \u2013 If the IP address format is invalid and raise_422 is True.","title":"Network Utils"},{"location":"tools/net_utils/#network-utilities","text":"","title":"Network Utilities"},{"location":"tools/net_utils/#aniachifast.tools.net_utils","text":"Network-related utility functions. This module contains helper functions to extract network-level client information from request-like objects. It is intentionally framework-agnostic to ensure: - High testability - Low coupling - Reusability across FastAPI, Starlette, CLI, and background jobs","title":"net_utils"},{"location":"tools/net_utils/#aniachifast.tools.net_utils.get_ip","text":"get_ip ( request : RequestLike | None ) -> str Extract the client IP address from a request-like object. Priority order: 1. X-Forwarded-For header (first IP if multiple proxies) 2. request.client.host 3. 'unknown' fallback Parameters: request ( RequestLike ) \u2013 Request-like object. Returns: str ( str ) \u2013 Client IP address.","title":"get_ip"},{"location":"tools/net_utils/#aniachifast.tools.net_utils.is_valid_ip","text":"is_valid_ip ( ip_address : ( int | str | bytes | IPv4Address | IPv6Address ), raise_422 : bool = True , ) -> bool Validate whether a string is a valid IPv4 or IPv6 address. This function checks the format of the provided IP address. If the value is invalid and raise_422 is enabled, a FastAPI-compatible RequestValidationError is raised. Parameters: ip_address ( str | None ) \u2013 IP address to validate. raise_422 ( bool , default: True ) \u2013 Whether to raise a 422 validation error when invalid. Returns: bool ( bool ) \u2013 True if the IP address is valid, False otherwise. Raises: RequestValidationError \u2013 If the IP address format is invalid and raise_422 is True.","title":"is_valid_ip"},{"location":"tools/os_utils/","text":"Operating System Utilities aniachifast.tools.os_utils System and Server Utilities Module. This module provides helper functions to inspect and display system paths, server environment information, memory usage, CPU stats, and installed package versions. It is designed to assist with debugging, monitoring, and reporting the current server environment for FastAPI applications and related services. Functions: - print_path: Display Python sys.path in a colored table format. - server_info: Return detailed server and environment information in table or JSON format. Colors module-attribute Colors = Literal [ \"red\" , \"green\" , \"yellow\" , \"blue\" , \"magenta\" , \"cyan\" , \"white\" , None , ] Formats module-attribute Formats = Literal [ 'table' , 'json' , 'csv' ] get_pod_name get_pod_name () -> str Get the name of the current pod. Returns: str ( str ) \u2013 The name of the current pod. Example pod_name = get_pod_name() print(pod_name) print_path print_path ( _format : Formats = \"table\" , _color : Colors = \"green\" ) -> None Print the current Python sys.path in a formatted and colored table. Parameters: _format ( Formats , default: 'table' ) \u2013 Format for displaying paths. Defaults to 'table'. _color (Colors, optional): Color to use when printing the table. Raises: NotImplementedError: If a format other than 'table' is specified. Example print_path(_format='table', _color='yellow') server_info server_info ( port : int , _format : Literal [ \"table\" ], _color : Colors = \"green\" , ) -> str server_info ( port : int , _format : Literal [ \"json\" ], _color : Colors = \"green\" , ) -> Dict [ str , Any ] server_info ( port : int , _format : Formats = \"table\" , _color : Colors = \"green\" , ) -> str | dict [ str , Any ] Gather and display detailed server, environment, and system information. Parameters: port ( int ) \u2013 Port number the server is running on. _format ( Formats , default: 'table' ) \u2013 Output format. Defaults to 'table'. _color ( Colors , default: 'green' ) \u2013 Color to use for table output. Returns: str | dict [ str , Any ] \u2013 Union[str, dict]: Colored table string if _format='table' , str | dict [ str , Any ] \u2013 or dictionary of server info if _format='json' . Raises: NotImplementedError \u2013 If _format is not 'table' or 'json'. Example info = server_info(port=8000, _format='table', _color='cyan') print(info) info_dict = server_info(port=8000, _format='json')","title":"OS Utils"},{"location":"tools/os_utils/#operating-system-utilities","text":"","title":"Operating System Utilities"},{"location":"tools/os_utils/#aniachifast.tools.os_utils","text":"System and Server Utilities Module. This module provides helper functions to inspect and display system paths, server environment information, memory usage, CPU stats, and installed package versions. It is designed to assist with debugging, monitoring, and reporting the current server environment for FastAPI applications and related services. Functions: - print_path: Display Python sys.path in a colored table format. - server_info: Return detailed server and environment information in table or JSON format.","title":"os_utils"},{"location":"tools/os_utils/#aniachifast.tools.os_utils.Colors","text":"Colors = Literal [ \"red\" , \"green\" , \"yellow\" , \"blue\" , \"magenta\" , \"cyan\" , \"white\" , None , ]","title":"Colors"},{"location":"tools/os_utils/#aniachifast.tools.os_utils.Formats","text":"Formats = Literal [ 'table' , 'json' , 'csv' ]","title":"Formats"},{"location":"tools/os_utils/#aniachifast.tools.os_utils.get_pod_name","text":"get_pod_name () -> str Get the name of the current pod. Returns: str ( str ) \u2013 The name of the current pod. Example pod_name = get_pod_name() print(pod_name)","title":"get_pod_name"},{"location":"tools/os_utils/#aniachifast.tools.os_utils.print_path","text":"print_path ( _format : Formats = \"table\" , _color : Colors = \"green\" ) -> None Print the current Python sys.path in a formatted and colored table. Parameters: _format ( Formats , default: 'table' ) \u2013 Format for displaying paths. Defaults to 'table'. _color (Colors, optional): Color to use when printing the table. Raises: NotImplementedError: If a format other than 'table' is specified. Example print_path(_format='table', _color='yellow')","title":"print_path"},{"location":"tools/os_utils/#aniachifast.tools.os_utils.server_info","text":"server_info ( port : int , _format : Literal [ \"table\" ], _color : Colors = \"green\" , ) -> str server_info ( port : int , _format : Literal [ \"json\" ], _color : Colors = \"green\" , ) -> Dict [ str , Any ] server_info ( port : int , _format : Formats = \"table\" , _color : Colors = \"green\" , ) -> str | dict [ str , Any ] Gather and display detailed server, environment, and system information. Parameters: port ( int ) \u2013 Port number the server is running on. _format ( Formats , default: 'table' ) \u2013 Output format. Defaults to 'table'. _color ( Colors , default: 'green' ) \u2013 Color to use for table output. Returns: str | dict [ str , Any ] \u2013 Union[str, dict]: Colored table string if _format='table' , str | dict [ str , Any ] \u2013 or dictionary of server info if _format='json' . Raises: NotImplementedError \u2013 If _format is not 'table' or 'json'. Example info = server_info(port=8000, _format='table', _color='cyan') print(info) info_dict = server_info(port=8000, _format='json')","title":"server_info"},{"location":"tools/overview/","text":"Tools & Utilities Overview The tools module provides a comprehensive set of utility functions for common operations in FastAPI applications. Core Utilities String & Text Processing String Utils - String manipulation and formatting Markdown Utils - Markdown processing and conversion Print Utils - Enhanced printing and formatting utilities File & Media Operations File Utils - File system operations and management Image Utils - Image processing and manipulation PDF Utils - PDF generation and manipulation Media Utils - Media file handling XMP Utils - XMP metadata handling Web & Network Network Utils - Network operations and utilities Browser Utils - Browser detection and user agent parsing HTML Utils - HTML processing and manipulation HTML CSS Utils - CSS processing and styling utilities Protocol Utils - Protocol handling utilities Security & Authentication Security Utils - Security-related utilities Request Context Utils - Request context management System & Process OS Utils - Operating system utilities Process Utils - Process management utilities Memory Utils - Memory management and monitoring Time & Dates Time Utils - Time and date utilities Dependencies & Configuration Dependencies - FastAPI dependency injection utilities Dependencies Utils - Additional dependency management tools Data & Responses Response Classes - Response model classes GeoIP Utils - Geographic IP location utilities Brand Utils - Brand and theming utilities Logging Utils - Logging configuration and utilities Decorators Cache Decorator - Caching functionality Singleton Decorator - Singleton pattern implementation Types Request Types - Request type definitions Response Types - Response type definitions Available Formats - Supported format definitions Usage from aniachifast.tools import string_utils, time_utils, file_utils # String operations formatted = string_utils.format_string(text) # Time operations timestamp = time_utils.get_timestamp() # File operations content = file_utils.read_file(path)","title":"Overview"},{"location":"tools/overview/#tools-utilities-overview","text":"The tools module provides a comprehensive set of utility functions for common operations in FastAPI applications.","title":"Tools &amp; Utilities Overview"},{"location":"tools/overview/#core-utilities","text":"","title":"Core Utilities"},{"location":"tools/overview/#string-text-processing","text":"String Utils - String manipulation and formatting Markdown Utils - Markdown processing and conversion Print Utils - Enhanced printing and formatting utilities","title":"String &amp; Text Processing"},{"location":"tools/overview/#file-media-operations","text":"File Utils - File system operations and management Image Utils - Image processing and manipulation PDF Utils - PDF generation and manipulation Media Utils - Media file handling XMP Utils - XMP metadata handling","title":"File &amp; Media Operations"},{"location":"tools/overview/#web-network","text":"Network Utils - Network operations and utilities Browser Utils - Browser detection and user agent parsing HTML Utils - HTML processing and manipulation HTML CSS Utils - CSS processing and styling utilities Protocol Utils - Protocol handling utilities","title":"Web &amp; Network"},{"location":"tools/overview/#security-authentication","text":"Security Utils - Security-related utilities Request Context Utils - Request context management","title":"Security &amp; Authentication"},{"location":"tools/overview/#system-process","text":"OS Utils - Operating system utilities Process Utils - Process management utilities Memory Utils - Memory management and monitoring","title":"System &amp; Process"},{"location":"tools/overview/#time-dates","text":"Time Utils - Time and date utilities","title":"Time &amp; Dates"},{"location":"tools/overview/#dependencies-configuration","text":"Dependencies - FastAPI dependency injection utilities Dependencies Utils - Additional dependency management tools","title":"Dependencies &amp; Configuration"},{"location":"tools/overview/#data-responses","text":"Response Classes - Response model classes GeoIP Utils - Geographic IP location utilities Brand Utils - Brand and theming utilities Logging Utils - Logging configuration and utilities","title":"Data &amp; Responses"},{"location":"tools/overview/#decorators","text":"Cache Decorator - Caching functionality Singleton Decorator - Singleton pattern implementation","title":"Decorators"},{"location":"tools/overview/#types","text":"Request Types - Request type definitions Response Types - Response type definitions Available Formats - Supported format definitions","title":"Types"},{"location":"tools/overview/#usage","text":"from aniachifast.tools import string_utils, time_utils, file_utils # String operations formatted = string_utils.format_string(text) # Time operations timestamp = time_utils.get_timestamp() # File operations content = file_utils.read_file(path)","title":"Usage"},{"location":"tools/pdf_utils/","text":"PDF Utilities aniachifast.tools.pdf_utils PDF metadata utilities. This module provides a class-based approach for generating metadata dictionaries used in PDF document creation. The metadata produced by this module follows the PDF specification, including the required datetime format for fields such as CreationDate . The PDFMetadataBuilder class uses a static method approach and returns a Pydantic model for type safety and validation. Typical use cases include: - PDF generation and document export - Automatic metadata injection during file creation - Ensuring consistent authoring and producer information across PDFs PDFMetadata Bases: BaseModel Pydantic model for PDF metadata. This model ensures type safety and validation for PDF metadata fields. author instance-attribute author : str creationDate instance-attribute creationDate : str creator instance-attribute creator : str keywords instance-attribute keywords : str producer instance-attribute producer : str subject instance-attribute subject : str title instance-attribute title : str PDFMetadataBuilder Builder class for generating PDF metadata. This class provides a static method to create PDF metadata dictionaries with values from application settings and custom parameters. build_metadata staticmethod build_metadata ( author : str , title : str , subject : str , keywords : str ) -> PDFMetadata Generate a PDF metadata object with configuration and custom values. This method creates a PDFMetadata object combining values from application settings (creator, producer) with custom parameters. The creationDate is automatically generated using PDF-compliant format. Parameters: author ( str ) \u2013 Document author name title ( str ) \u2013 Document title subject ( str ) \u2013 Document subject/description keywords ( str ) \u2013 Document keywords (comma-separated) Returns: PDFMetadata ( PDFMetadata ) \u2013 A Pydantic model containing all PDF metadata fields. Example metadata = PDFMetadataBuilder.build_metadata( ... author='John Doe', ... title='Sample Document', ... subject='Test PDF', ... keywords='test, sample, pdf' ... ) metadata.author 'John Doe' metadata.creator 'Gobierno del Estado de Jalisco'","title":"PDF Utils"},{"location":"tools/pdf_utils/#pdf-utilities","text":"","title":"PDF Utilities"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils","text":"PDF metadata utilities. This module provides a class-based approach for generating metadata dictionaries used in PDF document creation. The metadata produced by this module follows the PDF specification, including the required datetime format for fields such as CreationDate . The PDFMetadataBuilder class uses a static method approach and returns a Pydantic model for type safety and validation. Typical use cases include: - PDF generation and document export - Automatic metadata injection during file creation - Ensuring consistent authoring and producer information across PDFs","title":"pdf_utils"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata","text":"Bases: BaseModel Pydantic model for PDF metadata. This model ensures type safety and validation for PDF metadata fields.","title":"PDFMetadata"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata.author","text":"author : str","title":"author"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata.creationDate","text":"creationDate : str","title":"creationDate"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata.creator","text":"creator : str","title":"creator"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata.keywords","text":"keywords : str","title":"keywords"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata.producer","text":"producer : str","title":"producer"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata.subject","text":"subject : str","title":"subject"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadata.title","text":"title : str","title":"title"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadataBuilder","text":"Builder class for generating PDF metadata. This class provides a static method to create PDF metadata dictionaries with values from application settings and custom parameters.","title":"PDFMetadataBuilder"},{"location":"tools/pdf_utils/#aniachifast.tools.pdf_utils.PDFMetadataBuilder.build_metadata","text":"build_metadata ( author : str , title : str , subject : str , keywords : str ) -> PDFMetadata Generate a PDF metadata object with configuration and custom values. This method creates a PDFMetadata object combining values from application settings (creator, producer) with custom parameters. The creationDate is automatically generated using PDF-compliant format. Parameters: author ( str ) \u2013 Document author name title ( str ) \u2013 Document title subject ( str ) \u2013 Document subject/description keywords ( str ) \u2013 Document keywords (comma-separated) Returns: PDFMetadata ( PDFMetadata ) \u2013 A Pydantic model containing all PDF metadata fields. Example metadata = PDFMetadataBuilder.build_metadata( ... author='John Doe', ... title='Sample Document', ... subject='Test PDF', ... keywords='test, sample, pdf' ... ) metadata.author 'John Doe' metadata.creator 'Gobierno del Estado de Jalisco'","title":"build_metadata"},{"location":"tools/print_utils/","text":"Print Utils aniachifast.tools.print_utils Startup Events Logging Utilities. This module provides helper functions to emit console output related to application bootstrap / startup events. Output is controlled via the ENABLE_PRINTS_START_UP_EVENTS configuration flag. settings module-attribute settings = get_settings () print_startup_event print_startup_event ( message : str ) -> None Print a startup (bootstrap) event message to the console if enabled. This function conditionally prints messages that describe the execution of application bootstrap steps (configuration loading, database initialization, route registration, etc.). Printing is controlled by the ENABLE_PRINTS_START_UP_EVENTS setting. Parameters: message ( str ) \u2013 The startup event message to print.","title":"Print Utils"},{"location":"tools/print_utils/#print-utils","text":"","title":"Print Utils"},{"location":"tools/print_utils/#aniachifast.tools.print_utils","text":"Startup Events Logging Utilities. This module provides helper functions to emit console output related to application bootstrap / startup events. Output is controlled via the ENABLE_PRINTS_START_UP_EVENTS configuration flag.","title":"print_utils"},{"location":"tools/print_utils/#aniachifast.tools.print_utils.settings","text":"settings = get_settings ()","title":"settings"},{"location":"tools/print_utils/#aniachifast.tools.print_utils.print_startup_event","text":"print_startup_event ( message : str ) -> None Print a startup (bootstrap) event message to the console if enabled. This function conditionally prints messages that describe the execution of application bootstrap steps (configuration loading, database initialization, route registration, etc.). Printing is controlled by the ENABLE_PRINTS_START_UP_EVENTS setting. Parameters: message ( str ) \u2013 The startup event message to print.","title":"print_startup_event"},{"location":"tools/process_utils/","text":"Process Utilities aniachifast.tools.process_utils process_utils.py Debug utilities for retrieving and formatting OS process and concurrency information. This module is intended ONLY for debugging, diagnostics, and introspection. Security hardening is intentionally relaxed. All public functions return Pydantic models to ensure: - Explicit contracts - Validation - Easy serialization - Backward compatibility via .model_dump() get_cluster_concurrency_info get_cluster_concurrency_info () -> ClusterConcurrencyModel Get cluster-wide concurrency information for all Uvicorn workers. This function inspects the OS process table to locate the main Uvicorn process and all worker processes, returning a cluster-level view of concurrency, threads, memory usage, and executor estimation. Returns: ClusterConcurrencyModel \u2013 ClusterConcurrencyModel get_debug_processes_info get_debug_processes_info () -> DebugProcessesInfoModel Get detailed debug information about system processes. This function is intended for diagnostics and troubleshooting process detection issues (e.g. Python / Uvicorn workers). Returns: DebugProcessesInfoModel \u2013 DebugProcessesInfoModel get_single_worker_concurrency_info get_single_worker_concurrency_info () -> ( SingleWorkerConcurrencyModel ) Get concurrency information for the current worker. Returns: SingleWorkerConcurrencyModel \u2013 SingleWorkerConcurrencyModel os_process_info os_process_info ( top : Optional [ int ] = None , order_by : Optional [ OrderBy ] = None , ) -> OSProcessListModel Retrieve OS process information. Parameters: top ( Optional [ int ] , default: None ) \u2013 Maximum number of processes to return. order_by ( Optional [ OrderBy ] , default: None ) \u2013 Optional ordering field. Returns: OSProcessListModel \u2013 OSProcessListModel","title":"Process Utils"},{"location":"tools/process_utils/#process-utilities","text":"","title":"Process Utilities"},{"location":"tools/process_utils/#aniachifast.tools.process_utils","text":"process_utils.py Debug utilities for retrieving and formatting OS process and concurrency information. This module is intended ONLY for debugging, diagnostics, and introspection. Security hardening is intentionally relaxed. All public functions return Pydantic models to ensure: - Explicit contracts - Validation - Easy serialization - Backward compatibility via .model_dump()","title":"process_utils"},{"location":"tools/process_utils/#aniachifast.tools.process_utils.get_cluster_concurrency_info","text":"get_cluster_concurrency_info () -> ClusterConcurrencyModel Get cluster-wide concurrency information for all Uvicorn workers. This function inspects the OS process table to locate the main Uvicorn process and all worker processes, returning a cluster-level view of concurrency, threads, memory usage, and executor estimation. Returns: ClusterConcurrencyModel \u2013 ClusterConcurrencyModel","title":"get_cluster_concurrency_info"},{"location":"tools/process_utils/#aniachifast.tools.process_utils.get_debug_processes_info","text":"get_debug_processes_info () -> DebugProcessesInfoModel Get detailed debug information about system processes. This function is intended for diagnostics and troubleshooting process detection issues (e.g. Python / Uvicorn workers). Returns: DebugProcessesInfoModel \u2013 DebugProcessesInfoModel","title":"get_debug_processes_info"},{"location":"tools/process_utils/#aniachifast.tools.process_utils.get_single_worker_concurrency_info","text":"get_single_worker_concurrency_info () -> ( SingleWorkerConcurrencyModel ) Get concurrency information for the current worker. Returns: SingleWorkerConcurrencyModel \u2013 SingleWorkerConcurrencyModel","title":"get_single_worker_concurrency_info"},{"location":"tools/process_utils/#aniachifast.tools.process_utils.os_process_info","text":"os_process_info ( top : Optional [ int ] = None , order_by : Optional [ OrderBy ] = None , ) -> OSProcessListModel Retrieve OS process information. Parameters: top ( Optional [ int ] , default: None ) \u2013 Maximum number of processes to return. order_by ( Optional [ OrderBy ] , default: None ) \u2013 Optional ordering field. Returns: OSProcessListModel \u2013 OSProcessListModel","title":"os_process_info"},{"location":"tools/protocol_utils/","text":"Protocol Utils aniachifast.tools.protocol_utils Lightweight request and client protocols. This module defines minimal structural protocols used by networking utilities (e.g. IP extraction) without introducing hard dependencies on specific web frameworks such as FastAPI or Starlette. Design goals: - Avoid coupling tools and utilities to concrete request classes. - Support duck typing via typing.Protocol . - Allow seamless compatibility with FastAPI, Starlette, and custom request/client implementations. - Enable easy mocking for tests. These protocols intentionally expose only the required surface area needed by higher-level utilities. Examples: Using with FastAPI / Starlette:: from fastapi import Request def handler(request: Request): ip = get_ip(request) # Request satisfies RequestLike return {\"ip\": ip} Using with a custom request object:: class CustomClient: host = \"127.0.0.1\" class CustomRequest: headers = {\"x-forwarded-for\": \"127.0.0.1\"} client = CustomClient() ip = get_ip(CustomRequest()) Using in tests:: class FakeClient: host = \"10.0.0.1\" class FakeRequest: headers = {} client = FakeClient() assert get_ip(FakeRequest()) == \"10.0.0.1\" ClientLike Bases: Protocol Minimal structural protocol representing a network client. This protocol defines the smallest interface required to expose a client IP address. Any object providing a host attribute can be used, regardless of its concrete implementation. Attributes: host ( str ) \u2013 Client IP address (IPv4 or IPv6). host instance-attribute host : str RequestLike Bases: Protocol Minimal structural protocol representing an HTTP request. This protocol defines only the attributes required by networking utilities (e.g. get_ip ). It deliberately avoids referencing any framework-specific request types. Attributes: headers ( Mapping [ str , str ] ) \u2013 Mapping of HTTP request headers. client ( ClientLike ) \u2013 Client metadata exposing the remote IP address, or None if unavailable. client instance-attribute client : ClientLike headers instance-attribute headers : Mapping [ str , str ]","title":"Protocol Utils"},{"location":"tools/protocol_utils/#protocol-utils","text":"","title":"Protocol Utils"},{"location":"tools/protocol_utils/#aniachifast.tools.protocol_utils","text":"Lightweight request and client protocols. This module defines minimal structural protocols used by networking utilities (e.g. IP extraction) without introducing hard dependencies on specific web frameworks such as FastAPI or Starlette. Design goals: - Avoid coupling tools and utilities to concrete request classes. - Support duck typing via typing.Protocol . - Allow seamless compatibility with FastAPI, Starlette, and custom request/client implementations. - Enable easy mocking for tests. These protocols intentionally expose only the required surface area needed by higher-level utilities. Examples: Using with FastAPI / Starlette:: from fastapi import Request def handler(request: Request): ip = get_ip(request) # Request satisfies RequestLike return {\"ip\": ip} Using with a custom request object:: class CustomClient: host = \"127.0.0.1\" class CustomRequest: headers = {\"x-forwarded-for\": \"127.0.0.1\"} client = CustomClient() ip = get_ip(CustomRequest()) Using in tests:: class FakeClient: host = \"10.0.0.1\" class FakeRequest: headers = {} client = FakeClient() assert get_ip(FakeRequest()) == \"10.0.0.1\"","title":"protocol_utils"},{"location":"tools/protocol_utils/#aniachifast.tools.protocol_utils.ClientLike","text":"Bases: Protocol Minimal structural protocol representing a network client. This protocol defines the smallest interface required to expose a client IP address. Any object providing a host attribute can be used, regardless of its concrete implementation. Attributes: host ( str ) \u2013 Client IP address (IPv4 or IPv6).","title":"ClientLike"},{"location":"tools/protocol_utils/#aniachifast.tools.protocol_utils.ClientLike.host","text":"host : str","title":"host"},{"location":"tools/protocol_utils/#aniachifast.tools.protocol_utils.RequestLike","text":"Bases: Protocol Minimal structural protocol representing an HTTP request. This protocol defines only the attributes required by networking utilities (e.g. get_ip ). It deliberately avoids referencing any framework-specific request types. Attributes: headers ( Mapping [ str , str ] ) \u2013 Mapping of HTTP request headers. client ( ClientLike ) \u2013 Client metadata exposing the remote IP address, or None if unavailable.","title":"RequestLike"},{"location":"tools/protocol_utils/#aniachifast.tools.protocol_utils.RequestLike.client","text":"client : ClientLike","title":"client"},{"location":"tools/protocol_utils/#aniachifast.tools.protocol_utils.RequestLike.headers","text":"headers : Mapping [ str , str ]","title":"headers"},{"location":"tools/req_ctx_utils/","text":"Request Context Utils aniachifast.tools.req_ctx_utils Request Context Utilities. This module defines helpers and middleware utilities used to create a per-request execution context across the entire FastAPI lifecycle. The context is attached to request.state and provides: - A globally unique request identifier - High-precision execution timing - Shared metadata for logging, tracing, and responses This context is considered non-optional for production systems, as it enables: - Distributed tracing - Deterministic log correlation - Accurate request latency measurement - Secure response signing Typical consumers: - Logging middleware - Error handlers - API response builders - Metrics / Prometheus exporters The context must be initialized before any other middleware. generate_request_id generate_request_id ( request_id_prefix : str = 'req_' ) -> str Generate a globally unique request identifier. Returns str A unique request identifier prefixed with req_ . Example generate_request_id() 'req_f3b9c8e2a0c84c6a9b6fd13a7c9a4b2e' get_elapsed_time get_elapsed_time ( t : float | None , round_digits : int = 6 ) -> float Calculate the elapsed time since a given start point. This function computes the duration in seconds between the current monotonic time and a previously captured start time. It is intended for measuring execution durations (e.g. HTTP request processing time) and is safe against system clock adjustments. Parameters start_time : float Start time captured using time.monotonic() . Returns float Elapsed time in seconds as a floating-point value. Notes This function must be used with values obtained from time.monotonic() . Do not mix with other time sources such as time.time() or time.perf_counter() . The returned value is suitable for logging, metrics, or response headers. get_elapsed_time_ms get_elapsed_time_ms ( t : float | None , round_digits : int = 6 ) -> float Calculate the elapsed time since a given start point. This function computes the duration in seconds between the current monotonic time and a previously captured start time. It is intended for measuring execution durations (e.g. HTTP request processing time) and is safe against system clock adjustments. Parameters start_time : float Start time captured using time.monotonic() . Returns float Elapsed time in seconds as a floating-point value. Notes This function must be used with values obtained from time.monotonic() . Do not mix with other time sources such as time.time() or time.perf_counter() . The returned value is suitable for logging, metrics, or response headers. start_request_timer start_request_timer () -> float Start a high-precision request timer. Uses time.perf_counter() which is monotonic and suitable for accurate latency measurement. Returns float A timestamp representing the request start time. Example start = start_request_timer() time.perf_counter() - start 0.0021","title":"Request Context Utils"},{"location":"tools/req_ctx_utils/#request-context-utils","text":"","title":"Request Context Utils"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils","text":"Request Context Utilities. This module defines helpers and middleware utilities used to create a per-request execution context across the entire FastAPI lifecycle. The context is attached to request.state and provides: - A globally unique request identifier - High-precision execution timing - Shared metadata for logging, tracing, and responses This context is considered non-optional for production systems, as it enables: - Distributed tracing - Deterministic log correlation - Accurate request latency measurement - Secure response signing Typical consumers: - Logging middleware - Error handlers - API response builders - Metrics / Prometheus exporters The context must be initialized before any other middleware.","title":"req_ctx_utils"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.generate_request_id","text":"generate_request_id ( request_id_prefix : str = 'req_' ) -> str Generate a globally unique request identifier.","title":"generate_request_id"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.generate_request_id--returns","text":"str A unique request identifier prefixed with req_ .","title":"Returns"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.generate_request_id--example","text":"generate_request_id() 'req_f3b9c8e2a0c84c6a9b6fd13a7c9a4b2e'","title":"Example"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time","text":"get_elapsed_time ( t : float | None , round_digits : int = 6 ) -> float Calculate the elapsed time since a given start point. This function computes the duration in seconds between the current monotonic time and a previously captured start time. It is intended for measuring execution durations (e.g. HTTP request processing time) and is safe against system clock adjustments.","title":"get_elapsed_time"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time--parameters","text":"start_time : float Start time captured using time.monotonic() .","title":"Parameters"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time--returns","text":"float Elapsed time in seconds as a floating-point value.","title":"Returns"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time--notes","text":"This function must be used with values obtained from time.monotonic() . Do not mix with other time sources such as time.time() or time.perf_counter() . The returned value is suitable for logging, metrics, or response headers.","title":"Notes"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time_ms","text":"get_elapsed_time_ms ( t : float | None , round_digits : int = 6 ) -> float Calculate the elapsed time since a given start point. This function computes the duration in seconds between the current monotonic time and a previously captured start time. It is intended for measuring execution durations (e.g. HTTP request processing time) and is safe against system clock adjustments.","title":"get_elapsed_time_ms"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time_ms--parameters","text":"start_time : float Start time captured using time.monotonic() .","title":"Parameters"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time_ms--returns","text":"float Elapsed time in seconds as a floating-point value.","title":"Returns"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.get_elapsed_time_ms--notes","text":"This function must be used with values obtained from time.monotonic() . Do not mix with other time sources such as time.time() or time.perf_counter() . The returned value is suitable for logging, metrics, or response headers.","title":"Notes"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.start_request_timer","text":"start_request_timer () -> float Start a high-precision request timer. Uses time.perf_counter() which is monotonic and suitable for accurate latency measurement.","title":"start_request_timer"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.start_request_timer--returns","text":"float A timestamp representing the request start time.","title":"Returns"},{"location":"tools/req_ctx_utils/#aniachifast.tools.req_ctx_utils.start_request_timer--example","text":"start = start_request_timer() time.perf_counter() - start 0.0021","title":"Example"},{"location":"tools/response_multi_format/","text":"Tools Response Multi Format aniachifast.tools.response_multi_format Generic API response builders. This module centralizes response formatting logic for administrative and internal API endpoints. It provides reusable helpers to convert service-layer responses into proper HTTP responses based on content negotiation (Accept headers), supporting both single-resource and collection-based payloads. Supported output formats JSON (APIResponseV2 envelope) HTML (tabular) Plain text / Markdown CSV TSV XML YAML Design principles Avoid duplicated response formatting logic across endpoints Keep routers thin and declarative Normalize single-object and list responses automatically Enforce consistent API envelopes for JSON responses Centralize format-switching logic in one place This module must not contain business logic. build_resource_response build_resource_response ( * , data : dict , request : Request , fmt : str , success_status : int = 200 , error_status : int = 404 , api_version : str = \"v1\" ) -> Response Build a formatted HTTP response for API resources. This helper converts a standardized service-layer response into a concrete HTTP response, applying content negotiation based on the requested format. The function supports both: - Single-resource payloads (dict) - Collection payloads (list[dict]) For table-based formats (HTML, CSV, TXT, etc.), single objects are automatically wrapped into a list. Parameters: data ( dict ) \u2013 Service response with the following structure:: Success: { \"status\": \"success\", \"data\": <dict | list[dict]> } Error: { \"status\": \"error\", \"message\": \"<error description>\" } request ( Request ) \u2013 Incoming HTTP request object (used for API metadata). fmt ( str ) \u2013 Response format validated by Accept header parsing. Supported values: json, html, txt, md, csv, tsv, xml, yaml. success_status ( int , default: 200 ) \u2013 HTTP status code used for successful JSON responses. error_status ( int , default: 404 ) \u2013 HTTP status code used for error JSON responses. Returns: Response ( Response ) \u2013 A FastAPI-compatible response object matching the requested output format. Notes JSON responses are always wrapped using APIResponseV2 Error responses are always returned as JSON Non-JSON formats do not include API metadata envelopes","title":"Response Multi Format"},{"location":"tools/response_multi_format/#tools-response-multi-format","text":"","title":"Tools Response Multi Format"},{"location":"tools/response_multi_format/#aniachifast.tools.response_multi_format","text":"Generic API response builders. This module centralizes response formatting logic for administrative and internal API endpoints. It provides reusable helpers to convert service-layer responses into proper HTTP responses based on content negotiation (Accept headers), supporting both single-resource and collection-based payloads.","title":"response_multi_format"},{"location":"tools/response_multi_format/#aniachifast.tools.response_multi_format--supported-output-formats","text":"JSON (APIResponseV2 envelope) HTML (tabular) Plain text / Markdown CSV TSV XML YAML","title":"Supported output formats"},{"location":"tools/response_multi_format/#aniachifast.tools.response_multi_format--design-principles","text":"Avoid duplicated response formatting logic across endpoints Keep routers thin and declarative Normalize single-object and list responses automatically Enforce consistent API envelopes for JSON responses Centralize format-switching logic in one place This module must not contain business logic.","title":"Design principles"},{"location":"tools/response_multi_format/#aniachifast.tools.response_multi_format.build_resource_response","text":"build_resource_response ( * , data : dict , request : Request , fmt : str , success_status : int = 200 , error_status : int = 404 , api_version : str = \"v1\" ) -> Response Build a formatted HTTP response for API resources. This helper converts a standardized service-layer response into a concrete HTTP response, applying content negotiation based on the requested format. The function supports both: - Single-resource payloads (dict) - Collection payloads (list[dict]) For table-based formats (HTML, CSV, TXT, etc.), single objects are automatically wrapped into a list. Parameters: data ( dict ) \u2013 Service response with the following structure:: Success: { \"status\": \"success\", \"data\": <dict | list[dict]> } Error: { \"status\": \"error\", \"message\": \"<error description>\" } request ( Request ) \u2013 Incoming HTTP request object (used for API metadata). fmt ( str ) \u2013 Response format validated by Accept header parsing. Supported values: json, html, txt, md, csv, tsv, xml, yaml. success_status ( int , default: 200 ) \u2013 HTTP status code used for successful JSON responses. error_status ( int , default: 404 ) \u2013 HTTP status code used for error JSON responses. Returns: Response ( Response ) \u2013 A FastAPI-compatible response object matching the requested output format. Notes JSON responses are always wrapped using APIResponseV2 Error responses are always returned as JSON Non-JSON formats do not include API metadata envelopes","title":"build_resource_response"},{"location":"tools/responses_clases/","text":"Response Classes aniachifast.tools.responses_clases Custom FastAPI response classes for multiple output formats. This module provides a collection of custom response classes designed to be used with FastAPI endpoints via the response_class parameter or returned directly from route handlers. Each response class is responsible for transforming the endpoint output into a specific format (serialization and/or compression) before sending the response to the client (browser or API consumer). Supported formats include: - Structured formats: YAML, XML, HTML tables, CSV, TSV, PDF - Compressed outputs: ZIP, GZIP, ZLIB, BZ2, LZMA/XZ, and 7z These responses enable flexible output representations without modifying endpoint business logic. BZ2Response Bases: Response FastAPI response class that returns BZIP2-compressed content. media_type class-attribute instance-attribute media_type = 'application/x-bzip2' __init__ __init__ ( content : str , filename : str = \"file.txt.bz2\" , ** kwargs : Any ) CSVResponse Bases: PlainTextResponse FastAPI response class for CSV-formatted output. Serializes a list of dictionaries into CSV format before sending it to the client. media_type class-attribute instance-attribute media_type = 'text/plain' __init__ __init__ ( content : list [ dict ], headers : list [ str ] | None = None , ** kwargs : Any ) Parameters: content ( list [ dict ] ) \u2013 Data rows to serialize. headers ( list [ str ] | None , default: None ) \u2013 Optional headers. If None, headers will be inferred from the first item in content . Raises ValueError if both headers is None and content is empty. **kwargs ( Any , default: {} ) \u2013 Additional arguments for PlainTextResponse. Note The headers argument cannot be None when passed to csv.DictWriter. This class ensures headers is set or raises a clear exception. GZResponse Bases: StreamingResponse FastAPI response class that returns GZIP-compressed content. media_type class-attribute instance-attribute media_type = 'application/gzip' __init__ __init__ ( content : str , filename = \"file.txt.gz\" , ** kwargs : Any ) HTMLTableResponse Bases: HTMLResponse FastAPI response class that renders tabular data as an HTML table. This response expects a non-empty list of dictionaries. Empty datasets are considered invalid and will raise a ValueError. media_type class-attribute instance-attribute media_type = 'text/html' __init__ __init__ ( data : list [ dict ], showindex : bool = True , ** kwargs : Any ) Parameters: data ( list [ dict ] ) \u2013 Non-empty tabular data to render. showindex ( bool , default: True ) \u2013 Whether to include row indices. **kwargs ( Any , default: {} ) \u2013 Additional HTMLResponse arguments. Raises: ValueError \u2013 If data is an empty list. LZMAResponse Bases: StreamingResponse FastAPI response class that returns LZMA/XZ-compressed content. media_type class-attribute instance-attribute media_type = 'application/x-xz' __init__ __init__ ( content : str , filename : str = \"file.txt.xz\" , ** kwargs : Any ) PDFResponse Bases: StreamingResponse FastAPI response class that converts HTML content into a PDF file. media_type class-attribute instance-attribute media_type = 'application/pdf' __init__ __init__ ( content : str , filename : str = \"output.pdf\" , ** kwargs ) SevenZipResponse Bases: StreamingResponse FastAPI response class that returns 7z-compressed content. media_type class-attribute instance-attribute media_type = 'application/x-7z-compressed' __init__ __init__ ( content : str , filename : str = \"file.txt.7z\" , ** kwargs : Any ) TSVResponse Bases: PlainTextResponse FastAPI response class for TSV (tab-separated values) output. media_type class-attribute instance-attribute media_type = 'text/tab-separated-values' __init__ __init__ ( content : list [ dict ], headers : list [ str ] | None = None , ** kwargs : Any ) Parameters: content ( list [ dict ] ) \u2013 Data rows to serialize. headers ( list [ str ] | None , default: None ) \u2013 Optional headers. If None, headers will be inferred from the first item in content . Raises ValueError if both headers is None and content is empty. **kwargs ( Any , default: {} ) \u2013 Additional arguments for PlainTextResponse. Note The headers argument cannot be None when passed to csv.DictWriter. This class ensures headers is set or raises a clear exception. XMLResponse Bases: Response FastAPI response class for XML-formatted output. Converts a Python dictionary into XML using dicttoxml before sending the response to the client. media_type class-attribute instance-attribute media_type = 'application/xml' render render ( content : list , ** kwargs : Any ) -> bytes Serialize content into XML. Parameters: content ( dict ) \u2013 Data to be serialized. **kwargs ( Any , default: {} ) \u2013 Optional keyword arguments such as custom_root . Returns: bytes ( bytes ) \u2013 XML representation of the content. YAMLResponse Bases: PlainTextResponse FastAPI response class for YAML-formatted output. Converts a Python dictionary into a YAML document before sending it to the client. Intended for use as response_class in FastAPI routes. media_type class-attribute instance-attribute media_type = 'text/yaml' render render ( content : list ) -> bytes Serialize content into YAML. Parameters: content ( dict ) \u2013 Data to be serialized. Returns: bytes ( bytes ) \u2013 UTF-8 encoded YAML representation. ZIPResponse Bases: StreamingResponse FastAPI response class that returns content compressed as ZIP. media_type class-attribute instance-attribute media_type = 'application/zip' __init__ __init__ ( content : str , filename : str = \"file.html\" , zip_name : str = \"file.zip\" , ** kwargs : Any ) Parameters: content ( str ) \u2013 File content to compress. filename ( str , default: 'file.html' ) \u2013 Filename inside the ZIP. zip_name ( str , default: 'file.zip' ) \u2013 Name of the ZIP archive. **kwargs ( Any , default: {} ) \u2013 Additional StreamingResponse arguments. ZLIBResponse Bases: StreamingResponse FastAPI response class that returns ZLIB-compressed content. media_type class-attribute instance-attribute media_type = 'application/zlib' __init__ __init__ ( content : str , filename : str = \"file.txt.zlib\" , ** kwargs ) get_table_format get_table_format ( t : str , _date : bool = True ) -> str Wrap an HTML table with styling and optional timestamp footer. Parameters: t ( str ) \u2013 HTML table markup. _date ( bool , default: True ) \u2013 Whether to include the current timestamp. Returns: str ( str ) \u2013 Full HTML document containing the formatted table.","title":"Response Classes"},{"location":"tools/responses_clases/#response-classes","text":"","title":"Response Classes"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases","text":"Custom FastAPI response classes for multiple output formats. This module provides a collection of custom response classes designed to be used with FastAPI endpoints via the response_class parameter or returned directly from route handlers. Each response class is responsible for transforming the endpoint output into a specific format (serialization and/or compression) before sending the response to the client (browser or API consumer). Supported formats include: - Structured formats: YAML, XML, HTML tables, CSV, TSV, PDF - Compressed outputs: ZIP, GZIP, ZLIB, BZ2, LZMA/XZ, and 7z These responses enable flexible output representations without modifying endpoint business logic.","title":"responses_clases"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.BZ2Response","text":"Bases: Response FastAPI response class that returns BZIP2-compressed content.","title":"BZ2Response"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.BZ2Response.media_type","text":"media_type = 'application/x-bzip2'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.BZ2Response.__init__","text":"__init__ ( content : str , filename : str = \"file.txt.bz2\" , ** kwargs : Any )","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.CSVResponse","text":"Bases: PlainTextResponse FastAPI response class for CSV-formatted output. Serializes a list of dictionaries into CSV format before sending it to the client.","title":"CSVResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.CSVResponse.media_type","text":"media_type = 'text/plain'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.CSVResponse.__init__","text":"__init__ ( content : list [ dict ], headers : list [ str ] | None = None , ** kwargs : Any ) Parameters: content ( list [ dict ] ) \u2013 Data rows to serialize. headers ( list [ str ] | None , default: None ) \u2013 Optional headers. If None, headers will be inferred from the first item in content . Raises ValueError if both headers is None and content is empty. **kwargs ( Any , default: {} ) \u2013 Additional arguments for PlainTextResponse. Note The headers argument cannot be None when passed to csv.DictWriter. This class ensures headers is set or raises a clear exception.","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.GZResponse","text":"Bases: StreamingResponse FastAPI response class that returns GZIP-compressed content.","title":"GZResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.GZResponse.media_type","text":"media_type = 'application/gzip'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.GZResponse.__init__","text":"__init__ ( content : str , filename = \"file.txt.gz\" , ** kwargs : Any )","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.HTMLTableResponse","text":"Bases: HTMLResponse FastAPI response class that renders tabular data as an HTML table. This response expects a non-empty list of dictionaries. Empty datasets are considered invalid and will raise a ValueError.","title":"HTMLTableResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.HTMLTableResponse.media_type","text":"media_type = 'text/html'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.HTMLTableResponse.__init__","text":"__init__ ( data : list [ dict ], showindex : bool = True , ** kwargs : Any ) Parameters: data ( list [ dict ] ) \u2013 Non-empty tabular data to render. showindex ( bool , default: True ) \u2013 Whether to include row indices. **kwargs ( Any , default: {} ) \u2013 Additional HTMLResponse arguments. Raises: ValueError \u2013 If data is an empty list.","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.LZMAResponse","text":"Bases: StreamingResponse FastAPI response class that returns LZMA/XZ-compressed content.","title":"LZMAResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.LZMAResponse.media_type","text":"media_type = 'application/x-xz'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.LZMAResponse.__init__","text":"__init__ ( content : str , filename : str = \"file.txt.xz\" , ** kwargs : Any )","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.PDFResponse","text":"Bases: StreamingResponse FastAPI response class that converts HTML content into a PDF file.","title":"PDFResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.PDFResponse.media_type","text":"media_type = 'application/pdf'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.PDFResponse.__init__","text":"__init__ ( content : str , filename : str = \"output.pdf\" , ** kwargs )","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.SevenZipResponse","text":"Bases: StreamingResponse FastAPI response class that returns 7z-compressed content.","title":"SevenZipResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.SevenZipResponse.media_type","text":"media_type = 'application/x-7z-compressed'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.SevenZipResponse.__init__","text":"__init__ ( content : str , filename : str = \"file.txt.7z\" , ** kwargs : Any )","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.TSVResponse","text":"Bases: PlainTextResponse FastAPI response class for TSV (tab-separated values) output.","title":"TSVResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.TSVResponse.media_type","text":"media_type = 'text/tab-separated-values'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.TSVResponse.__init__","text":"__init__ ( content : list [ dict ], headers : list [ str ] | None = None , ** kwargs : Any ) Parameters: content ( list [ dict ] ) \u2013 Data rows to serialize. headers ( list [ str ] | None , default: None ) \u2013 Optional headers. If None, headers will be inferred from the first item in content . Raises ValueError if both headers is None and content is empty. **kwargs ( Any , default: {} ) \u2013 Additional arguments for PlainTextResponse. Note The headers argument cannot be None when passed to csv.DictWriter. This class ensures headers is set or raises a clear exception.","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.XMLResponse","text":"Bases: Response FastAPI response class for XML-formatted output. Converts a Python dictionary into XML using dicttoxml before sending the response to the client.","title":"XMLResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.XMLResponse.media_type","text":"media_type = 'application/xml'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.XMLResponse.render","text":"render ( content : list , ** kwargs : Any ) -> bytes Serialize content into XML. Parameters: content ( dict ) \u2013 Data to be serialized. **kwargs ( Any , default: {} ) \u2013 Optional keyword arguments such as custom_root . Returns: bytes ( bytes ) \u2013 XML representation of the content.","title":"render"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.YAMLResponse","text":"Bases: PlainTextResponse FastAPI response class for YAML-formatted output. Converts a Python dictionary into a YAML document before sending it to the client. Intended for use as response_class in FastAPI routes.","title":"YAMLResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.YAMLResponse.media_type","text":"media_type = 'text/yaml'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.YAMLResponse.render","text":"render ( content : list ) -> bytes Serialize content into YAML. Parameters: content ( dict ) \u2013 Data to be serialized. Returns: bytes ( bytes ) \u2013 UTF-8 encoded YAML representation.","title":"render"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.ZIPResponse","text":"Bases: StreamingResponse FastAPI response class that returns content compressed as ZIP.","title":"ZIPResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.ZIPResponse.media_type","text":"media_type = 'application/zip'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.ZIPResponse.__init__","text":"__init__ ( content : str , filename : str = \"file.html\" , zip_name : str = \"file.zip\" , ** kwargs : Any ) Parameters: content ( str ) \u2013 File content to compress. filename ( str , default: 'file.html' ) \u2013 Filename inside the ZIP. zip_name ( str , default: 'file.zip' ) \u2013 Name of the ZIP archive. **kwargs ( Any , default: {} ) \u2013 Additional StreamingResponse arguments.","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.ZLIBResponse","text":"Bases: StreamingResponse FastAPI response class that returns ZLIB-compressed content.","title":"ZLIBResponse"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.ZLIBResponse.media_type","text":"media_type = 'application/zlib'","title":"media_type"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.ZLIBResponse.__init__","text":"__init__ ( content : str , filename : str = \"file.txt.zlib\" , ** kwargs )","title":"__init__"},{"location":"tools/responses_clases/#aniachifast.tools.responses_clases.get_table_format","text":"get_table_format ( t : str , _date : bool = True ) -> str Wrap an HTML table with styling and optional timestamp footer. Parameters: t ( str ) \u2013 HTML table markup. _date ( bool , default: True ) \u2013 Whether to include the current timestamp. Returns: str ( str ) \u2013 Full HTML document containing the formatted table.","title":"get_table_format"},{"location":"tools/role_utils/","text":"Tools Role Utils aniachifast.tools.role_utils Role Management Service This module provides a service class for managing user roles in the system. Follows the dependency injection pattern used throughout the application. RoleService Service class for role management operations. This class encapsulates all role-related business logic and follows the dependency injection pattern used in the application. Attributes: db ( Session ) \u2013 SQLAlchemy session for database operations. db instance-attribute db = db __init__ __init__ ( db : Session ) Parameters: db ( Session ) \u2013 SQLAlchemy Session instance for database operations. assign_role_to_user assign_role_to_user ( user_id : int , role_name : str ) -> dict Assign a role to a user. Parameters: user_id ( int ) \u2013 User ID role_name ( str ) \u2013 Name of the role to assign Returns: dict ( dict ) \u2013 Result with status and message create_role create_role ( name : str , description : str | None = None ) -> dict Create a new role in the system. Parameters: name ( str ) \u2013 Role name (must be unique) description ( str | None , default: None ) \u2013 Optional role description Returns: dict ( dict ) \u2013 Result with status and message get_user_roles get_user_roles ( user_id : int ) -> list [ str ] Get all roles assigned to a user. Parameters: user_id ( int ) \u2013 User ID Returns: list [ str ] \u2013 list[str]: List of role names list_all_roles list_all_roles ( active_only : bool = True ) -> list [ dict ] List all roles in the system. Parameters: active_only ( bool , default: True ) \u2013 If True, only return active roles Returns: list [ dict ] \u2013 list[dict]: List of roles with their details remove_role_from_user remove_role_from_user ( user_id : int , role_name : str ) -> dict Remove a role from a user. Parameters: user_id ( int ) \u2013 User ID role_name ( str ) \u2013 Name of the role to remove Returns: dict ( dict ) \u2013 Result with status and message user_has_role user_has_role ( user_id : int , role_name : str ) -> bool Check if a user has a specific role. Parameters: user_id ( int ) \u2013 User ID role_name ( str ) \u2013 Name of the role to check Returns: bool ( bool ) \u2013 True if user has the role, False otherwise","title":"Role Utils"},{"location":"tools/role_utils/#tools-role-utils","text":"","title":"Tools Role Utils"},{"location":"tools/role_utils/#aniachifast.tools.role_utils","text":"","title":"role_utils"},{"location":"tools/role_utils/#aniachifast.tools.role_utils--role-management-service","text":"This module provides a service class for managing user roles in the system. Follows the dependency injection pattern used throughout the application.","title":"Role Management Service"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService","text":"Service class for role management operations. This class encapsulates all role-related business logic and follows the dependency injection pattern used in the application. Attributes: db ( Session ) \u2013 SQLAlchemy session for database operations.","title":"RoleService"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.db","text":"db = db","title":"db"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.__init__","text":"__init__ ( db : Session ) Parameters: db ( Session ) \u2013 SQLAlchemy Session instance for database operations.","title":"__init__"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.assign_role_to_user","text":"assign_role_to_user ( user_id : int , role_name : str ) -> dict Assign a role to a user. Parameters: user_id ( int ) \u2013 User ID role_name ( str ) \u2013 Name of the role to assign Returns: dict ( dict ) \u2013 Result with status and message","title":"assign_role_to_user"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.create_role","text":"create_role ( name : str , description : str | None = None ) -> dict Create a new role in the system. Parameters: name ( str ) \u2013 Role name (must be unique) description ( str | None , default: None ) \u2013 Optional role description Returns: dict ( dict ) \u2013 Result with status and message","title":"create_role"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.get_user_roles","text":"get_user_roles ( user_id : int ) -> list [ str ] Get all roles assigned to a user. Parameters: user_id ( int ) \u2013 User ID Returns: list [ str ] \u2013 list[str]: List of role names","title":"get_user_roles"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.list_all_roles","text":"list_all_roles ( active_only : bool = True ) -> list [ dict ] List all roles in the system. Parameters: active_only ( bool , default: True ) \u2013 If True, only return active roles Returns: list [ dict ] \u2013 list[dict]: List of roles with their details","title":"list_all_roles"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.remove_role_from_user","text":"remove_role_from_user ( user_id : int , role_name : str ) -> dict Remove a role from a user. Parameters: user_id ( int ) \u2013 User ID role_name ( str ) \u2013 Name of the role to remove Returns: dict ( dict ) \u2013 Result with status and message","title":"remove_role_from_user"},{"location":"tools/role_utils/#aniachifast.tools.role_utils.RoleService.user_has_role","text":"user_has_role ( user_id : int , role_name : str ) -> bool Check if a user has a specific role. Parameters: user_id ( int ) \u2013 User ID role_name ( str ) \u2013 Name of the role to check Returns: bool ( bool ) \u2013 True if user has the role, False otherwise","title":"user_has_role"},{"location":"tools/secure_utils/","text":"Security Utilities aniachifast.tools.secure_utils Security utilities module. This module provides cryptographic and security-related helpers used across the application, including: Password hashing and verification using Argon2 Deterministic short hash generation from UUIDs Secure initialization of cryptographic primitives All functions in this module are designed for production use and comply with security and linting best practices. PH module-attribute PH : Optional [ PasswordHasher ] = None hash_password hash_password ( password : str ) -> str Hash a plaintext password using Argon2. Parameters: password ( str ) \u2013 Plaintext password. Returns: str ( str ) \u2013 Secure Argon2 hash of the password. Raises: RuntimeError \u2013 If the password hasher is not initialized. initialize_password_hasher initialize_password_hasher () -> None Initialize the global Argon2 password hasher. This function must be called once during application startup to prepare the password hashing utilities. short_hash_from_uuids short_hash_from_uuids ( uuid1 : UUID , uuid2 : UUID , length : int = 12 ) -> str Generate a deterministic short hash from two UUID values. This function combines two UUIDs, hashes them using SHA-1 (explicitly marked as non-security usage), and encodes the result using URL-safe Base64. The output is truncated to the desired length. Parameters: uuid1 ( UUID ) \u2013 First UUID. uuid2 ( UUID ) \u2013 Second UUID. length ( int , default: 12 ) \u2013 Desired length of the resulting hash string. Returns: str ( str ) \u2013 Lowercase, URL-safe short hash string. verify_password verify_password ( password : str , hashed_password : str ) -> bool Verify a plaintext password against a stored Argon2 hash. Parameters: password ( str ) \u2013 Plaintext password. hashed_password ( str ) \u2013 Stored Argon2 password hash. Returns: bool ( bool ) \u2013 True if the password matches, False otherwise.","title":"Security Utils"},{"location":"tools/secure_utils/#security-utilities","text":"","title":"Security Utilities"},{"location":"tools/secure_utils/#aniachifast.tools.secure_utils","text":"Security utilities module. This module provides cryptographic and security-related helpers used across the application, including: Password hashing and verification using Argon2 Deterministic short hash generation from UUIDs Secure initialization of cryptographic primitives All functions in this module are designed for production use and comply with security and linting best practices.","title":"secure_utils"},{"location":"tools/secure_utils/#aniachifast.tools.secure_utils.PH","text":"PH : Optional [ PasswordHasher ] = None","title":"PH"},{"location":"tools/secure_utils/#aniachifast.tools.secure_utils.hash_password","text":"hash_password ( password : str ) -> str Hash a plaintext password using Argon2. Parameters: password ( str ) \u2013 Plaintext password. Returns: str ( str ) \u2013 Secure Argon2 hash of the password. Raises: RuntimeError \u2013 If the password hasher is not initialized.","title":"hash_password"},{"location":"tools/secure_utils/#aniachifast.tools.secure_utils.initialize_password_hasher","text":"initialize_password_hasher () -> None Initialize the global Argon2 password hasher. This function must be called once during application startup to prepare the password hashing utilities.","title":"initialize_password_hasher"},{"location":"tools/secure_utils/#aniachifast.tools.secure_utils.short_hash_from_uuids","text":"short_hash_from_uuids ( uuid1 : UUID , uuid2 : UUID , length : int = 12 ) -> str Generate a deterministic short hash from two UUID values. This function combines two UUIDs, hashes them using SHA-1 (explicitly marked as non-security usage), and encodes the result using URL-safe Base64. The output is truncated to the desired length. Parameters: uuid1 ( UUID ) \u2013 First UUID. uuid2 ( UUID ) \u2013 Second UUID. length ( int , default: 12 ) \u2013 Desired length of the resulting hash string. Returns: str ( str ) \u2013 Lowercase, URL-safe short hash string.","title":"short_hash_from_uuids"},{"location":"tools/secure_utils/#aniachifast.tools.secure_utils.verify_password","text":"verify_password ( password : str , hashed_password : str ) -> bool Verify a plaintext password against a stored Argon2 hash. Parameters: password ( str ) \u2013 Plaintext password. hashed_password ( str ) \u2013 Stored Argon2 password hash. Returns: bool ( bool ) \u2013 True if the password matches, False otherwise.","title":"verify_password"},{"location":"tools/string_utils/","text":"String Utilities aniachifast.tools.string_utils String and text manipulation utilities. This module centralizes a collection of helper functions focused on string manipulation, normalization, searching, sanitization, and token generation. It is designed to be reusable across different layers of an application (e.g. API, services, utilities) and contains pure functions with no side effects, except where explicitly required (e.g. secure token generation). Common use cases include: - Phone number parsing - Path manipulation - Random and secure string generation - Unicode normalization and accent removal - Text searching and matching - Filename sanitization - Decorative ASCII output PATTERN module-attribute PATTERN = '^([ \\\\ d \\\\ + \\\\ - \\\\ . \\\\ s]+)[xX]? \\\\ s*( \\\\ d+)?$' clean_filename clean_filename ( filename : str , preffix_uuid : bool = True ) -> str Sanitize a filename and optionally prefix it with a UUID. Replaces spaces and invalid characters to ensure filesystem safety. Parameters: filename ( str ) \u2013 Original filename. preffix_uuid ( bool , default: True ) \u2013 Whether to prefix the filename with a UUID. Returns: str ( str ) \u2013 Sanitized filename. find_all_occurrences find_all_occurrences ( source : str , words : str , normalize : bool = False ) -> list [ tuple [ int , int ]] Find all occurrences of a substring in a string. Optionally normalizes the source text before searching. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ tuple [ int , int ]] \u2013 list[tuple[int, int]]: List of (start, end) index tuples. find_all_occurrences_as_dict find_all_occurrences_as_dict ( source : str , words : str , normalize : bool = False ) -> list [ dict [ str , Any ] | None ] Find all occurrences of a substring and return them as dictionaries. This function is a wrapper over find_all_occurrences that transforms index tuples into dictionaries. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ dict [ str , Any ] | None] \u2013 list[dict[str, Any]]: List of dictionaries with start and end indices. find_if_exists_any find_if_exists_any ( source : str , words : str , normalize : bool = False ) -> bool Check if any word exists in the source text. Splits the input words by whitespace and searches each token independently. Parameters: source ( str ) \u2013 Text to search in. words ( str ) \u2013 Space-separated words to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: bool ( bool ) \u2013 True if any word is found, False otherwise. generate_random_string generate_random_string ( length : int = 10 ) -> str Generate a random alphanumeric string. Intended for non-cryptographic use cases such as identifiers, temporary values, or test data. Parameters: length ( int , default: 10 ) \u2013 Length of the generated string. Returns: str ( str ) \u2013 Random alphanumeric string. generate_random_string_url_safe generate_random_string_url_safe ( length : int = 100 ) -> str Generate a cryptographically secure URL-safe token. Uses os.urandom and base64 encoding to produce a secure token suitable for authentication, reset links, or secrets. Parameters: length ( int , default: 100 ) \u2013 Number of random bytes to generate before encoding. Returns: str ( str ) \u2013 URL-safe base64-encoded token. get_cleaned_text get_cleaned_text ( text : str ) -> str Clean text by normalizing and trimming whitespace. Removes accents and diacritical marks, returning a stripped string. Parameters: text ( str ) \u2013 Input text. Returns: str ( str ) \u2013 Cleaned and normalized text. get_last_directory get_last_directory ( path : str ) -> str Return the last directory component of a filesystem path. Normalizes the path and extracts the final directory name. Parameters: path ( str ) \u2013 Filesystem path. Returns: str ( str ) \u2013 Last directory prefixed with / , or / if empty. get_single_ascii_art get_single_ascii_art ( msg : str , msg2 : Optional [ str ]) -> str Generate a simple ASCII art block with optional footer text. Useful for decorative output, logs, or playful API responses. Parameters: msg ( str ) \u2013 Primary message. msg2 ( Optional [ str ] ) \u2013 Optional secondary message. Returns: str ( str ) \u2013 ASCII art string. mask_ip mask_ip ( ip : Optional [ str ]) -> Optional [ str ] Mask an IP address (IPv4 or IPv6) to avoid exposing PII. IPv4 192.168.10.45 -> 192.168.xxx.xxx IPv6 2001:db8:85a3:0:0:8a2e:370:7334 -> 2001:db8:85a3:xxxx:xxxx:xxxx:xxxx:xxxx Parameters: ip ( Optional [ str ] ) \u2013 Raw IP address as string. Returns: Optional [ str ] \u2013 Masked IP address or None if input is None or invalid. normalize_str normalize_str ( value : object ) -> str Convert a value into a human-readable string representation. This function is primarily intended to normalize bytes values by decoding them into UTF-8 strings (with replacement for invalid sequences), preventing the default Python b'...' representation from leaking into user-facing messages. For all other types, str(value) is used. Parameters: value ( object ) \u2013 Any value to normalize. Returns: str ( str ) \u2013 A human-readable string representation of the value. Examples: >>> normalize_str ( b \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( 123 ) '123' >>> normalize_str ( None ) 'None' normalize_text normalize_text ( source : str | None ) -> str Normalize Unicode text by removing accents and diacritics. Converts accented characters into their ASCII equivalents. Parameters: source ( str | None ) \u2013 Input text. Returns: str ( str ) \u2013 Normalized text without diacritics. normalized_metadata_as_str normalized_metadata_as_str ( metadata : dict [ str , Any ] | None , ) -> dict [ str , str ] | None Normalize metadata values to strings. This helper converts all metadata values to their string representation, ensuring compatibility with backends that require dict[str, str] metadata (e.g. MinIO/S3). Parameters metadata : dict[str, Any] | None Arbitrary metadata dictionary. Returns dict[str, str] | None Metadata with all values converted to strings, or None if the input was None. split_phone_extension split_phone_extension ( phone : str , ) -> tuple [ str , Optional [ str ]] Split a phone number from its optional extension. Attempts to extract a phone extension if present. Supported formats include numbers followed by x , X , or whitespace-separated extensions. Parameters: phone ( str ) \u2013 Phone number string. Returns: str \u2013 tuple[str, Optional[str]]: A tuple containing the base phone number Optional [ str ] \u2013 and the extension if found, otherwise None.","title":"String Utils"},{"location":"tools/string_utils/#string-utilities","text":"","title":"String Utilities"},{"location":"tools/string_utils/#aniachifast.tools.string_utils","text":"String and text manipulation utilities. This module centralizes a collection of helper functions focused on string manipulation, normalization, searching, sanitization, and token generation. It is designed to be reusable across different layers of an application (e.g. API, services, utilities) and contains pure functions with no side effects, except where explicitly required (e.g. secure token generation). Common use cases include: - Phone number parsing - Path manipulation - Random and secure string generation - Unicode normalization and accent removal - Text searching and matching - Filename sanitization - Decorative ASCII output","title":"string_utils"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.PATTERN","text":"PATTERN = '^([ \\\\ d \\\\ + \\\\ - \\\\ . \\\\ s]+)[xX]? \\\\ s*( \\\\ d+)?$'","title":"PATTERN"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.clean_filename","text":"clean_filename ( filename : str , preffix_uuid : bool = True ) -> str Sanitize a filename and optionally prefix it with a UUID. Replaces spaces and invalid characters to ensure filesystem safety. Parameters: filename ( str ) \u2013 Original filename. preffix_uuid ( bool , default: True ) \u2013 Whether to prefix the filename with a UUID. Returns: str ( str ) \u2013 Sanitized filename.","title":"clean_filename"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.find_all_occurrences","text":"find_all_occurrences ( source : str , words : str , normalize : bool = False ) -> list [ tuple [ int , int ]] Find all occurrences of a substring in a string. Optionally normalizes the source text before searching. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ tuple [ int , int ]] \u2013 list[tuple[int, int]]: List of (start, end) index tuples.","title":"find_all_occurrences"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.find_all_occurrences_as_dict","text":"find_all_occurrences_as_dict ( source : str , words : str , normalize : bool = False ) -> list [ dict [ str , Any ] | None ] Find all occurrences of a substring and return them as dictionaries. This function is a wrapper over find_all_occurrences that transforms index tuples into dictionaries. Parameters: source ( str ) \u2013 Text where the search is performed. words ( str ) \u2013 Substring to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: list [ dict [ str , Any ] | None] \u2013 list[dict[str, Any]]: List of dictionaries with start and end indices.","title":"find_all_occurrences_as_dict"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.find_if_exists_any","text":"find_if_exists_any ( source : str , words : str , normalize : bool = False ) -> bool Check if any word exists in the source text. Splits the input words by whitespace and searches each token independently. Parameters: source ( str ) \u2013 Text to search in. words ( str ) \u2013 Space-separated words to search for. normalize ( bool , default: False ) \u2013 Whether to normalize the source text. Returns: bool ( bool ) \u2013 True if any word is found, False otherwise.","title":"find_if_exists_any"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.generate_random_string","text":"generate_random_string ( length : int = 10 ) -> str Generate a random alphanumeric string. Intended for non-cryptographic use cases such as identifiers, temporary values, or test data. Parameters: length ( int , default: 10 ) \u2013 Length of the generated string. Returns: str ( str ) \u2013 Random alphanumeric string.","title":"generate_random_string"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.generate_random_string_url_safe","text":"generate_random_string_url_safe ( length : int = 100 ) -> str Generate a cryptographically secure URL-safe token. Uses os.urandom and base64 encoding to produce a secure token suitable for authentication, reset links, or secrets. Parameters: length ( int , default: 100 ) \u2013 Number of random bytes to generate before encoding. Returns: str ( str ) \u2013 URL-safe base64-encoded token.","title":"generate_random_string_url_safe"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.get_cleaned_text","text":"get_cleaned_text ( text : str ) -> str Clean text by normalizing and trimming whitespace. Removes accents and diacritical marks, returning a stripped string. Parameters: text ( str ) \u2013 Input text. Returns: str ( str ) \u2013 Cleaned and normalized text.","title":"get_cleaned_text"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.get_last_directory","text":"get_last_directory ( path : str ) -> str Return the last directory component of a filesystem path. Normalizes the path and extracts the final directory name. Parameters: path ( str ) \u2013 Filesystem path. Returns: str ( str ) \u2013 Last directory prefixed with / , or / if empty.","title":"get_last_directory"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.get_single_ascii_art","text":"get_single_ascii_art ( msg : str , msg2 : Optional [ str ]) -> str Generate a simple ASCII art block with optional footer text. Useful for decorative output, logs, or playful API responses. Parameters: msg ( str ) \u2013 Primary message. msg2 ( Optional [ str ] ) \u2013 Optional secondary message. Returns: str ( str ) \u2013 ASCII art string.","title":"get_single_ascii_art"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.mask_ip","text":"mask_ip ( ip : Optional [ str ]) -> Optional [ str ] Mask an IP address (IPv4 or IPv6) to avoid exposing PII. IPv4 192.168.10.45 -> 192.168.xxx.xxx IPv6 2001:db8:85a3:0:0:8a2e:370:7334 -> 2001:db8:85a3:xxxx:xxxx:xxxx:xxxx:xxxx Parameters: ip ( Optional [ str ] ) \u2013 Raw IP address as string. Returns: Optional [ str ] \u2013 Masked IP address or None if input is None or invalid.","title":"mask_ip"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.normalize_str","text":"normalize_str ( value : object ) -> str Convert a value into a human-readable string representation. This function is primarily intended to normalize bytes values by decoding them into UTF-8 strings (with replacement for invalid sequences), preventing the default Python b'...' representation from leaking into user-facing messages. For all other types, str(value) is used. Parameters: value ( object ) \u2013 Any value to normalize. Returns: str ( str ) \u2013 A human-readable string representation of the value. Examples: >>> normalize_str ( b \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( \"8.8.8.8\" ) '8.8.8.8' >>> normalize_str ( 123 ) '123' >>> normalize_str ( None ) 'None'","title":"normalize_str"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.normalize_text","text":"normalize_text ( source : str | None ) -> str Normalize Unicode text by removing accents and diacritics. Converts accented characters into their ASCII equivalents. Parameters: source ( str | None ) \u2013 Input text. Returns: str ( str ) \u2013 Normalized text without diacritics.","title":"normalize_text"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.normalized_metadata_as_str","text":"normalized_metadata_as_str ( metadata : dict [ str , Any ] | None , ) -> dict [ str , str ] | None Normalize metadata values to strings. This helper converts all metadata values to their string representation, ensuring compatibility with backends that require dict[str, str] metadata (e.g. MinIO/S3).","title":"normalized_metadata_as_str"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.normalized_metadata_as_str--parameters","text":"metadata : dict[str, Any] | None Arbitrary metadata dictionary.","title":"Parameters"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.normalized_metadata_as_str--returns","text":"dict[str, str] | None Metadata with all values converted to strings, or None if the input was None.","title":"Returns"},{"location":"tools/string_utils/#aniachifast.tools.string_utils.split_phone_extension","text":"split_phone_extension ( phone : str , ) -> tuple [ str , Optional [ str ]] Split a phone number from its optional extension. Attempts to extract a phone extension if present. Supported formats include numbers followed by x , X , or whitespace-separated extensions. Parameters: phone ( str ) \u2013 Phone number string. Returns: str \u2013 tuple[str, Optional[str]]: A tuple containing the base phone number Optional [ str ] \u2013 and the extension if found, otherwise None.","title":"split_phone_extension"},{"location":"tools/time_utils/","text":"Time Utilities aniachifast.tools.time_utils Time and date utility functions. This module centralizes all time-related helpers used across the application, including server-local timestamps, epoch times, uptime calculation, timezone formatting, and PDF-compatible datetime strings. It is commonly used by: - FastAPI endpoints (health checks, metadata responses) - Logging and monitoring utilities - Response formatting layers - PDF and document generation The module assumes a fixed server timezone configuration and exposes lightweight helpers that return formatted strings suitable for APIs. __DEFAULT_ALT_AWS_RESPONSE_FORMAT module-attribute __DEFAULT_ALT_AWS_RESPONSE_FORMAT : Final [ str ] = ( DEFAULT_ALT_AWS_RESPONSE_FORMAT ) __SERVER_TZ module-attribute __SERVER_TZ = timezone ( TIME_ZONE ) __STARTUP_TIME module-attribute __STARTUP_TIME : Final [ datetime ] = now () __TIME_FORMAT module-attribute __TIME_FORMAT : Final [ str ] = TIME_FORMAT settings module-attribute settings = get_settings () format_time format_time ( t : datetime ) -> str Format a datetime object using the server time format. Parameters: t ( datetime ) \u2013 Datetime object to format. Returns: str ( str ) \u2013 Formatted datetime string. formated_time_zone formated_time_zone ( str_time : str , input_format : str = __DEFAULT_ALT_AWS_RESPONSE_FORMAT , output_format : str = __TIME_FORMAT , ) -> str Convert a datetime string from one format to another. This is commonly used to normalize timestamps received from external services such as AWS responses. Parameters: str_time ( str ) \u2013 Input datetime string. input_format ( str , default: __DEFAULT_ALT_AWS_RESPONSE_FORMAT ) \u2013 Format of the input datetime string. output_format ( str , default: __TIME_FORMAT ) \u2013 Desired output format. Returns: str ( str ) \u2013 Reformatted datetime string. get_epoch_time get_epoch_time () -> int Return the current UTC time as an epoch timestamp in milliseconds. Returns: int ( int ) \u2013 Epoch timestamp in milliseconds. get_iso_timestamp get_iso_timestamp () -> str Return the current timestamp in ISO 8601 format with timezone offset. Example 2026-01-01T13:38:48-06:00 get_pdf_datetime_string get_pdf_datetime_string ( dt : datetime | None = None ) -> str Generate a PDF-compatible datetime string. This format follows the PDF specification: D:YYYYMMDDHHmmSS+HH'mm' Parameters: dt ( datetime , default: None ) \u2013 Datetime to convert. If None, current time is used. Returns: str ( str ) \u2013 PDF-compatible datetime string. get_startup_time get_startup_time () -> datetime Return the application startup timestamp. This value is captured once when the module is first loaded. Returns: datetime ( datetime ) \u2013 Application startup datetime. get_time get_time () -> str Return the current server time formatted as a string. The time is generated using the configured server timezone. Returns: str ( str ) \u2013 Current server time. get_time_zone get_time_zone () -> str Return the server timezone name and offset. Returns: str ( str ) \u2013 Timezone information (e.g. \"CST -0600\"). get_uptime get_uptime () -> str Return the application uptime as a human-readable string. The uptime is calculated based on the difference between the current time and the startup time. Returns: str ( str ) \u2013 Human-readable uptime (e.g. \"2 hours, 5 minutes\").","title":"Time Utils"},{"location":"tools/time_utils/#time-utilities","text":"","title":"Time Utilities"},{"location":"tools/time_utils/#aniachifast.tools.time_utils","text":"Time and date utility functions. This module centralizes all time-related helpers used across the application, including server-local timestamps, epoch times, uptime calculation, timezone formatting, and PDF-compatible datetime strings. It is commonly used by: - FastAPI endpoints (health checks, metadata responses) - Logging and monitoring utilities - Response formatting layers - PDF and document generation The module assumes a fixed server timezone configuration and exposes lightweight helpers that return formatted strings suitable for APIs.","title":"time_utils"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.__DEFAULT_ALT_AWS_RESPONSE_FORMAT","text":"__DEFAULT_ALT_AWS_RESPONSE_FORMAT : Final [ str ] = ( DEFAULT_ALT_AWS_RESPONSE_FORMAT )","title":"__DEFAULT_ALT_AWS_RESPONSE_FORMAT"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.__SERVER_TZ","text":"__SERVER_TZ = timezone ( TIME_ZONE )","title":"__SERVER_TZ"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.__STARTUP_TIME","text":"__STARTUP_TIME : Final [ datetime ] = now ()","title":"__STARTUP_TIME"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.__TIME_FORMAT","text":"__TIME_FORMAT : Final [ str ] = TIME_FORMAT","title":"__TIME_FORMAT"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.settings","text":"settings = get_settings ()","title":"settings"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.format_time","text":"format_time ( t : datetime ) -> str Format a datetime object using the server time format. Parameters: t ( datetime ) \u2013 Datetime object to format. Returns: str ( str ) \u2013 Formatted datetime string.","title":"format_time"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.formated_time_zone","text":"formated_time_zone ( str_time : str , input_format : str = __DEFAULT_ALT_AWS_RESPONSE_FORMAT , output_format : str = __TIME_FORMAT , ) -> str Convert a datetime string from one format to another. This is commonly used to normalize timestamps received from external services such as AWS responses. Parameters: str_time ( str ) \u2013 Input datetime string. input_format ( str , default: __DEFAULT_ALT_AWS_RESPONSE_FORMAT ) \u2013 Format of the input datetime string. output_format ( str , default: __TIME_FORMAT ) \u2013 Desired output format. Returns: str ( str ) \u2013 Reformatted datetime string.","title":"formated_time_zone"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.get_epoch_time","text":"get_epoch_time () -> int Return the current UTC time as an epoch timestamp in milliseconds. Returns: int ( int ) \u2013 Epoch timestamp in milliseconds.","title":"get_epoch_time"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.get_iso_timestamp","text":"get_iso_timestamp () -> str Return the current timestamp in ISO 8601 format with timezone offset. Example 2026-01-01T13:38:48-06:00","title":"get_iso_timestamp"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.get_pdf_datetime_string","text":"get_pdf_datetime_string ( dt : datetime | None = None ) -> str Generate a PDF-compatible datetime string. This format follows the PDF specification: D:YYYYMMDDHHmmSS+HH'mm' Parameters: dt ( datetime , default: None ) \u2013 Datetime to convert. If None, current time is used. Returns: str ( str ) \u2013 PDF-compatible datetime string.","title":"get_pdf_datetime_string"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.get_startup_time","text":"get_startup_time () -> datetime Return the application startup timestamp. This value is captured once when the module is first loaded. Returns: datetime ( datetime ) \u2013 Application startup datetime.","title":"get_startup_time"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.get_time","text":"get_time () -> str Return the current server time formatted as a string. The time is generated using the configured server timezone. Returns: str ( str ) \u2013 Current server time.","title":"get_time"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.get_time_zone","text":"get_time_zone () -> str Return the server timezone name and offset. Returns: str ( str ) \u2013 Timezone information (e.g. \"CST -0600\").","title":"get_time_zone"},{"location":"tools/time_utils/#aniachifast.tools.time_utils.get_uptime","text":"get_uptime () -> str Return the application uptime as a human-readable string. The uptime is calculated based on the difference between the current time and the startup time. Returns: str ( str ) \u2013 Human-readable uptime (e.g. \"2 hours, 5 minutes\").","title":"get_uptime"},{"location":"tools/xmp_utils/","text":"XMP Utils aniachifast.tools.xmp_utils XMP metadata generation utilities. This module provides helpers for generating XMP (Extensible Metadata Platform) metadata blocks compliant with Adobe standards. The generated metadata is returned as a raw XML string and is intended to be embedded into PDF documents or other XMP-compatible file formats. The implementation follows the Adobe XMP specification and includes: - Standard Dublin Core metadata (title, creator, publisher, language, identifier) - Custom application-specific metadata fields - A fixed XMP packet identifier required by Adobe-compatible parsers Typical use cases include: - PDF document generation - Document traceability and auditing - Metadata enrichment for archival systems - Compliance with document management standards (e.g. PDF/A) The returned XMP string can be injected into a PDF using libraries such as: - PyMuPDF (fitz) - pikepdf - reportlab generate_xmp_metadata generate_xmp_metadata ( title : str = \"\" , creator : str = \"\" , publisher : str = \"\" , language : str = \"\" , custom_pipeline : str = \"\" , custom_hash : str = \"\" , identifier : str | None = None , ) -> str Generate an XMP metadata XML block. This function builds a complete XMP packet using the Adobe XMP format, including standard Dublin Core metadata fields and optional custom application-specific metadata. If no identifier is provided, a UUID v4 is automatically generated to uniquely identify the document. The generated XMP packet includes: - A fixed Adobe XPacket identifier (required for XMP compliance) - Dublin Core metadata: - Title - Creator - Publisher - Identifier - Language - Custom metadata namespace for internal application use Parameters: title ( str , default: '' ) \u2013 Human-readable document title. creator ( str , default: '' ) \u2013 Document author or creator. publisher ( str , default: '' ) \u2013 Publishing entity or organization. language ( str , default: '' ) \u2013 Language code of the document (e.g. \"en\", \"es\"). custom_pipeline ( str , default: '' ) \u2013 Custom pipeline or process identifier used to generate the document. custom_hash ( str , default: '' ) \u2013 Hash or checksum associated with the document content. identifier ( str | None , default: None ) \u2013 Unique document identifier. If not provided, a UUID v4 is generated. Returns: str ( str ) \u2013 A string containing a fully-formed XMP XML metadata packet, ready to be embedded into a PDF or other XMP-compatible file. Examples: Basic usage: >>> xmp = generate_xmp_metadata ( ... title = \"Invoice 2025-001\" , ... creator = \"Billing System\" , ... publisher = \"ACME Corp\" , ... language = \"en\" ... ) >>> print ( xmp ) Including custom metadata: >>> xmp = generate_xmp_metadata ( ... title = \"Signed Contract\" , ... creator = \"Legal Department\" , ... publisher = \"Company XYZ\" , ... language = \"es\" , ... custom_pipeline = \"pdf-signing-v2\" , ... custom_hash = \"a94a8fe5ccb19ba61c4c0873d391e987982fbbd3\" ... ) Notes The XPacket identifier (W5M0MpCehiHzreSzNTczkc9d) is a fixed value defined by Adobe and must not be modified. The returned XML is not validated at runtime; consumers are responsible for embedding it correctly. This function does not perform escaping of XML special characters; input values should be sanitized if necessary.","title":"XMP Utils"},{"location":"tools/xmp_utils/#xmp-utils","text":"","title":"XMP Utils"},{"location":"tools/xmp_utils/#aniachifast.tools.xmp_utils","text":"XMP metadata generation utilities. This module provides helpers for generating XMP (Extensible Metadata Platform) metadata blocks compliant with Adobe standards. The generated metadata is returned as a raw XML string and is intended to be embedded into PDF documents or other XMP-compatible file formats. The implementation follows the Adobe XMP specification and includes: - Standard Dublin Core metadata (title, creator, publisher, language, identifier) - Custom application-specific metadata fields - A fixed XMP packet identifier required by Adobe-compatible parsers Typical use cases include: - PDF document generation - Document traceability and auditing - Metadata enrichment for archival systems - Compliance with document management standards (e.g. PDF/A) The returned XMP string can be injected into a PDF using libraries such as: - PyMuPDF (fitz) - pikepdf - reportlab","title":"xmp_utils"},{"location":"tools/xmp_utils/#aniachifast.tools.xmp_utils.generate_xmp_metadata","text":"generate_xmp_metadata ( title : str = \"\" , creator : str = \"\" , publisher : str = \"\" , language : str = \"\" , custom_pipeline : str = \"\" , custom_hash : str = \"\" , identifier : str | None = None , ) -> str Generate an XMP metadata XML block. This function builds a complete XMP packet using the Adobe XMP format, including standard Dublin Core metadata fields and optional custom application-specific metadata. If no identifier is provided, a UUID v4 is automatically generated to uniquely identify the document. The generated XMP packet includes: - A fixed Adobe XPacket identifier (required for XMP compliance) - Dublin Core metadata: - Title - Creator - Publisher - Identifier - Language - Custom metadata namespace for internal application use Parameters: title ( str , default: '' ) \u2013 Human-readable document title. creator ( str , default: '' ) \u2013 Document author or creator. publisher ( str , default: '' ) \u2013 Publishing entity or organization. language ( str , default: '' ) \u2013 Language code of the document (e.g. \"en\", \"es\"). custom_pipeline ( str , default: '' ) \u2013 Custom pipeline or process identifier used to generate the document. custom_hash ( str , default: '' ) \u2013 Hash or checksum associated with the document content. identifier ( str | None , default: None ) \u2013 Unique document identifier. If not provided, a UUID v4 is generated. Returns: str ( str ) \u2013 A string containing a fully-formed XMP XML metadata packet, ready to be embedded into a PDF or other XMP-compatible file. Examples: Basic usage: >>> xmp = generate_xmp_metadata ( ... title = \"Invoice 2025-001\" , ... creator = \"Billing System\" , ... publisher = \"ACME Corp\" , ... language = \"en\" ... ) >>> print ( xmp ) Including custom metadata: >>> xmp = generate_xmp_metadata ( ... title = \"Signed Contract\" , ... creator = \"Legal Department\" , ... publisher = \"Company XYZ\" , ... language = \"es\" , ... custom_pipeline = \"pdf-signing-v2\" , ... custom_hash = \"a94a8fe5ccb19ba61c4c0873d391e987982fbbd3\" ... ) Notes The XPacket identifier (W5M0MpCehiHzreSzNTczkc9d) is a fixed value defined by Adobe and must not be modified. The returned XML is not validated at runtime; consumers are responsible for embedding it correctly. This function does not perform escaping of XML special characters; input values should be sanitized if necessary.","title":"generate_xmp_metadata"},{"location":"tools/decorators/cache/","text":"Cache Decorator aniachifast.tools.decorators.cache Conditional cache decorator for FastAPI endpoints. This module provides a lightweight wrapper around fastapi-cache that allows cache activation to be controlled dynamically via application settings. Why this exists The @cache decorator from fastapi-cache requires the cache backend to be initialized at application startup. In environments where cache is optional (local development, tests, feature flags, utils endpoints), this can cause runtime errors such as: \"You must call init first!\" This decorator solves that problem by: - Applying the cache decorator only if caching is enabled - Leaving the function untouched otherwise - Avoiding the need to initialize FastAPICache when disabled This pattern is production-safe and commonly used in feature-flagged or environment-based configurations. settings module-attribute settings = get_settings () conditional_cache conditional_cache ( * , expire : int ) -> Callable Conditionally apply FastAPI cache decorator based on application settings. If caching is enabled ( settings.ENABLE_CACHE == True ), this function wraps the target endpoint with fastapi_cache.decorator.cache . If caching is disabled, the original function is returned unchanged, avoiding any dependency on FastAPICache initialization. Parameters expire : int Cache expiration time in seconds. Returns Callable A decorator that conditionally applies caching. Example @router.get(\"/items\") @conditional_cache(expire=10) async def list_items(): return [\"a\", \"b\", \"c\"] Notes When ENABLE_CACHE is False: No cache backend is required FastAPICache.init() is NOT needed Zero runtime overhead is introduced When ENABLE_CACHE is True: FastAPICache.init() MUST be called at startup Normal cache behavior applies","title":"Cache Decorator"},{"location":"tools/decorators/cache/#cache-decorator","text":"","title":"Cache Decorator"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache","text":"Conditional cache decorator for FastAPI endpoints. This module provides a lightweight wrapper around fastapi-cache that allows cache activation to be controlled dynamically via application settings.","title":"cache"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache--why-this-exists","text":"The @cache decorator from fastapi-cache requires the cache backend to be initialized at application startup. In environments where cache is optional (local development, tests, feature flags, utils endpoints), this can cause runtime errors such as: \"You must call init first!\" This decorator solves that problem by: - Applying the cache decorator only if caching is enabled - Leaving the function untouched otherwise - Avoiding the need to initialize FastAPICache when disabled This pattern is production-safe and commonly used in feature-flagged or environment-based configurations.","title":"Why this exists"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache.settings","text":"settings = get_settings ()","title":"settings"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache.conditional_cache","text":"conditional_cache ( * , expire : int ) -> Callable Conditionally apply FastAPI cache decorator based on application settings. If caching is enabled ( settings.ENABLE_CACHE == True ), this function wraps the target endpoint with fastapi_cache.decorator.cache . If caching is disabled, the original function is returned unchanged, avoiding any dependency on FastAPICache initialization.","title":"conditional_cache"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache.conditional_cache--parameters","text":"expire : int Cache expiration time in seconds.","title":"Parameters"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache.conditional_cache--returns","text":"Callable A decorator that conditionally applies caching.","title":"Returns"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache.conditional_cache--example","text":"@router.get(\"/items\") @conditional_cache(expire=10) async def list_items(): return [\"a\", \"b\", \"c\"]","title":"Example"},{"location":"tools/decorators/cache/#aniachifast.tools.decorators.cache.conditional_cache--notes","text":"When ENABLE_CACHE is False: No cache backend is required FastAPICache.init() is NOT needed Zero runtime overhead is introduced When ENABLE_CACHE is True: FastAPICache.init() MUST be called at startup Normal cache behavior applies","title":"Notes"},{"location":"tools/decorators/singleton/","text":"Singleton Decorator aniachifast.tools.decorators.singleton Common decorators used across the application. This module contains reusable decorators that implement cross-cutting concerns such as instance lifecycle management and behavioral constraints. Decorators in this module are designed to be lightweight, dependency-free, and safe to apply across different layers of the application, including: - Configuration and settings objects - Database and client wrappers - Utility and helper classes Currently provided decorators include: singleton : Enforces the Singleton pattern on a class, ensuring that only one instance exists per Python process. This is commonly used for configuration holders, service clients, and shared resources. All decorators in this module operate at runtime and do not alter the public interface of the decorated objects beyond the documented behavior. Notes Decorators in this module are process-scoped and do not provide guarantees across threads or multiple processes. These utilities favor simplicity and predictability over advanced concurrency control. T module-attribute T = TypeVar ( 'T' ) singleton singleton ( cls : Type [ T ]) -> Type [ T ] Class decorator implementing the Singleton pattern. This decorator ensures that a class has only one instantiated object during the lifetime of the Python process. Subsequent calls to the decorated class will return the same instance, regardless of the arguments provided. The implementation is lightweight and process-local. It does not provide thread-safety or cross-process guarantees. Internally, instances are stored in a closure-scoped dictionary. Parameters: cls ( Type [ T ] ) \u2013 The class to be wrapped as a singleton. Returns: Type [ T ] \u2013 The original class, modified to behave as a singleton. Example @singleton ... class Config: ... def init (self): ... self.value = 42 ... a = Config() b = Config() a is b True a.value 42 Notes This singleton implementation is scoped to the current Python interpreter process. It is not thread-safe and may create multiple instances in highly concurrent initialization scenarios. Constructor arguments are only respected on the first call. Subsequent calls ignore any new arguments.","title":"Singleton Decorator"},{"location":"tools/decorators/singleton/#singleton-decorator","text":"","title":"Singleton Decorator"},{"location":"tools/decorators/singleton/#aniachifast.tools.decorators.singleton","text":"Common decorators used across the application. This module contains reusable decorators that implement cross-cutting concerns such as instance lifecycle management and behavioral constraints. Decorators in this module are designed to be lightweight, dependency-free, and safe to apply across different layers of the application, including: - Configuration and settings objects - Database and client wrappers - Utility and helper classes Currently provided decorators include: singleton : Enforces the Singleton pattern on a class, ensuring that only one instance exists per Python process. This is commonly used for configuration holders, service clients, and shared resources. All decorators in this module operate at runtime and do not alter the public interface of the decorated objects beyond the documented behavior. Notes Decorators in this module are process-scoped and do not provide guarantees across threads or multiple processes. These utilities favor simplicity and predictability over advanced concurrency control.","title":"singleton"},{"location":"tools/decorators/singleton/#aniachifast.tools.decorators.singleton.T","text":"T = TypeVar ( 'T' )","title":"T"},{"location":"tools/decorators/singleton/#aniachifast.tools.decorators.singleton.singleton","text":"singleton ( cls : Type [ T ]) -> Type [ T ] Class decorator implementing the Singleton pattern. This decorator ensures that a class has only one instantiated object during the lifetime of the Python process. Subsequent calls to the decorated class will return the same instance, regardless of the arguments provided. The implementation is lightweight and process-local. It does not provide thread-safety or cross-process guarantees. Internally, instances are stored in a closure-scoped dictionary. Parameters: cls ( Type [ T ] ) \u2013 The class to be wrapped as a singleton. Returns: Type [ T ] \u2013 The original class, modified to behave as a singleton. Example @singleton ... class Config: ... def init (self): ... self.value = 42 ... a = Config() b = Config() a is b True a.value 42 Notes This singleton implementation is scoped to the current Python interpreter process. It is not thread-safe and may create multiple instances in highly concurrent initialization scenarios. Constructor arguments are only respected on the first call. Subsequent calls ignore any new arguments.","title":"singleton"},{"location":"tools/dynamic_import_utilities/overview/","text":"Tools Dynamic Import Utilities Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Tools Dynamic Import Utilities"},{"location":"tools/dynamic_import_utilities/overview/#tools-dynamic-import-utilities","text":"","title":"Tools Dynamic Import Utilities"},{"location":"tools/dynamic_import_utilities/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"tools/dynamic_import_utilities/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"tools/dynamic_import_utilities/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"tools/images/filters/","text":"Tools Images Filters aniachifast.tools.images.filters Image processing utilities. This module provides helper functions for basic image transformations commonly used in document processing, previews, and visual normalization tasks. The utilities operate fully in-memory and are suitable for API responses and image preprocessing pipelines. process_img_as_xerox process_img_as_xerox ( img : Image , contrast : float , brightness : float , quality : int = 75 , fmt : str = \"jpeg\" , return_bytes : bool = True , ) -> Union [ ImageFile . ImageFile , BytesIO ] Process an image to simulate a photocopier (xerox-style) effect. The function converts the image to grayscale and applies contrast and brightness enhancements to improve legibility, especially for scanned or low-quality documents. Parameters: img ( Image ) \u2013 Source PIL Image instance. contrast ( float ) \u2013 Contrast enhancement factor. brightness ( float ) \u2013 Brightness enhancement factor. quality ( int , default: 75 ) \u2013 Output image quality when returning bytes. fmt ( str , default: 'jpeg' ) \u2013 Output image format. return_bytes ( bool , default: True ) \u2013 Whether to return a BytesIO stream or a PIL Image. Returns: Union [ ImageFile , BytesIO ] \u2013 A BytesIO object containing the processed image when Union [ ImageFile , BytesIO ] \u2013 return_bytes is True, otherwise a PIL Image instance.","title":"Filters"},{"location":"tools/images/filters/#tools-images-filters","text":"","title":"Tools Images Filters"},{"location":"tools/images/filters/#aniachifast.tools.images.filters","text":"Image processing utilities. This module provides helper functions for basic image transformations commonly used in document processing, previews, and visual normalization tasks. The utilities operate fully in-memory and are suitable for API responses and image preprocessing pipelines.","title":"filters"},{"location":"tools/images/filters/#aniachifast.tools.images.filters.process_img_as_xerox","text":"process_img_as_xerox ( img : Image , contrast : float , brightness : float , quality : int = 75 , fmt : str = \"jpeg\" , return_bytes : bool = True , ) -> Union [ ImageFile . ImageFile , BytesIO ] Process an image to simulate a photocopier (xerox-style) effect. The function converts the image to grayscale and applies contrast and brightness enhancements to improve legibility, especially for scanned or low-quality documents. Parameters: img ( Image ) \u2013 Source PIL Image instance. contrast ( float ) \u2013 Contrast enhancement factor. brightness ( float ) \u2013 Brightness enhancement factor. quality ( int , default: 75 ) \u2013 Output image quality when returning bytes. fmt ( str , default: 'jpeg' ) \u2013 Output image format. return_bytes ( bool , default: True ) \u2013 Whether to return a BytesIO stream or a PIL Image. Returns: Union [ ImageFile , BytesIO ] \u2013 A BytesIO object containing the processed image when Union [ ImageFile , BytesIO ] \u2013 return_bytes is True, otherwise a PIL Image instance.","title":"process_img_as_xerox"},{"location":"tools/images/overview/","text":"Tools Images Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Tools Images"},{"location":"tools/images/overview/#tools-images","text":"","title":"Tools Images"},{"location":"tools/images/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"tools/images/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"tools/images/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"tools/images/filters/overview/","text":"Tools Images Filters Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Tools Images Filters"},{"location":"tools/images/filters/overview/#tools-images-filters","text":"","title":"Tools Images Filters"},{"location":"tools/images/filters/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"tools/images/filters/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"tools/images/filters/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"tools/response_multi_format/overview/","text":"Tools Response Multi Format Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Tools Response Multi Format"},{"location":"tools/response_multi_format/overview/#tools-response-multi-format","text":"","title":"Tools Response Multi Format"},{"location":"tools/response_multi_format/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"tools/response_multi_format/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"tools/response_multi_format/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"tools/role_utils/overview/","text":"Tools Role Utils Overview Add a high-level overview of the module's purpose and functionality here. Usage Examples # Example usage here Important Notes Any additional notes, warnings, or best practices.","title":"Tools Role Utils"},{"location":"tools/role_utils/overview/#tools-role-utils","text":"","title":"Tools Role Utils"},{"location":"tools/role_utils/overview/#overview","text":"Add a high-level overview of the module's purpose and functionality here.","title":"Overview"},{"location":"tools/role_utils/overview/#usage-examples","text":"# Example usage here","title":"Usage Examples"},{"location":"tools/role_utils/overview/#important-notes","text":"Any additional notes, warnings, or best practices.","title":"Important Notes"},{"location":"tools/types/available_formats/","text":"Available Formats aniachifast.tools.available_formats Available Formats Module. This module defines the list of supported output formats that can be used across the application, especially for HTTP responses, content negotiation, and format validation in API endpoints. The formats are represented as a string-based Enum to ensure: - Type safety at the application level - Clear and restricted values for request/response handling - Proper OpenAPI / Swagger documentation generation Lowercase enum members are intentionally used to match real-world API inputs and outputs (e.g. json , html ) and to avoid additional normalization or mapping layers. AvailableFormats Bases: str , Enum Enumeration of supported response/output formats. This Enum represents all allowed textual and structured formats that the API can return or accept. Each member maps directly to its string value to ensure compatibility with HTTP headers, query parameters, and OpenAPI schemas. The enum inherits from str to allow seamless usage with FastAPI, Pydantic models, and request validation. Attributes: html \u2013 HTML formatted output. json \u2013 JSON formatted output. text \u2013 Plain text output. csv \u2013 Comma-separated values format. xml \u2013 XML formatted output. plain \u2013 Raw plain-text output. md \u2013 Markdown formatted output. txt \u2013 Text file format. yml \u2013 YAML format (short extension). yaml \u2013 YAML format (full extension). csv class-attribute instance-attribute csv = 'csv' html class-attribute instance-attribute html = 'html' json class-attribute instance-attribute json = 'json' md class-attribute instance-attribute md = 'md' plain class-attribute instance-attribute plain = 'plain' text class-attribute instance-attribute text = 'text' tsv class-attribute instance-attribute tsv = 'tsv' txt class-attribute instance-attribute txt = 'txt' xml class-attribute instance-attribute xml = 'xml' yaml class-attribute instance-attribute yaml = 'yaml' yml class-attribute instance-attribute yml = 'yml'","title":"Available Formats"},{"location":"tools/types/available_formats/#available-formats","text":"","title":"Available Formats"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats","text":"Available Formats Module. This module defines the list of supported output formats that can be used across the application, especially for HTTP responses, content negotiation, and format validation in API endpoints. The formats are represented as a string-based Enum to ensure: - Type safety at the application level - Clear and restricted values for request/response handling - Proper OpenAPI / Swagger documentation generation Lowercase enum members are intentionally used to match real-world API inputs and outputs (e.g. json , html ) and to avoid additional normalization or mapping layers.","title":"available_formats"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats","text":"Bases: str , Enum Enumeration of supported response/output formats. This Enum represents all allowed textual and structured formats that the API can return or accept. Each member maps directly to its string value to ensure compatibility with HTTP headers, query parameters, and OpenAPI schemas. The enum inherits from str to allow seamless usage with FastAPI, Pydantic models, and request validation. Attributes: html \u2013 HTML formatted output. json \u2013 JSON formatted output. text \u2013 Plain text output. csv \u2013 Comma-separated values format. xml \u2013 XML formatted output. plain \u2013 Raw plain-text output. md \u2013 Markdown formatted output. txt \u2013 Text file format. yml \u2013 YAML format (short extension). yaml \u2013 YAML format (full extension).","title":"AvailableFormats"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.csv","text":"csv = 'csv'","title":"csv"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.html","text":"html = 'html'","title":"html"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.json","text":"json = 'json'","title":"json"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.md","text":"md = 'md'","title":"md"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.plain","text":"plain = 'plain'","title":"plain"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.text","text":"text = 'text'","title":"text"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.tsv","text":"tsv = 'tsv'","title":"tsv"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.txt","text":"txt = 'txt'","title":"txt"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.xml","text":"xml = 'xml'","title":"xml"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.yaml","text":"yaml = 'yaml'","title":"yaml"},{"location":"tools/types/available_formats/#aniachifast.tools.available_formats.AvailableFormats.yml","text":"yml = 'yml'","title":"yml"},{"location":"tools/types/request_types/","text":"Request Types aniachifast.tools.request_types HTTP media type definitions used for request validation. This module defines reusable sets of allowed HTTP Content-Type and Accept header values (media types) designed to work in conjunction with the allowed_headers FastAPI dependency helper. These constants are passed to allowed_headers(...) to enforce request header validation before an endpoint is executed. IMPORTANT : This module is the SINGLE SOURCE OF TRUTH for header validation sets. When using allowed_headers() , you MUST import the predefined sets from this module (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets with MediaTypes directly. Typical FastAPI usage: from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES @router.get(\"/endpoint\", dependencies=[Depends(allowed_headers(COMMON_TYPES))]) async def my_endpoint(): ... This pattern provides: - Early rejection of unsupported media types - Consistent request validation across endpoints - Centralized and reusable request content-type policies - Single source of truth for allowed header combinations The constants are grouped by common API use cases such as JSON-only, HTML-only, or mixed-format endpoints. ALL_FORMATS_TYPES module-attribute ALL_FORMATS_TYPES : Final [ Set [ str ]] = { JSON , CSV , TSV , XML , YAML , YAML_APP , TEXT , } ALL_FORMATS_TYPES_HTML module-attribute ALL_FORMATS_TYPES_HTML : Final [ Set [ str ]] = { JSON , HTML , CSV , TSV , XML , YAML , YAML_APP , TEXT , } BINARY_TYPES module-attribute BINARY_TYPES : frozenset [ str ] = frozenset ({ OCTET_STREAM }) COMMON_TYPES module-attribute COMMON_TYPES : Final [ Set [ str ]] = { JSON , TEXT , HTML } COMMON_UPLOAD_IMAGES_TYPES module-attribute COMMON_UPLOAD_IMAGES_TYPES : Final [ Set [ str ]] = { PDF , JPEG , PNG , GIF , } COMMON_UPLOAD_TYPES module-attribute COMMON_UPLOAD_TYPES : frozenset [ str ] = ( STRUCTURED_TEXT_TYPES | DICOM_TYPES | BINARY_TYPES ) DICOM_TYPES module-attribute DICOM_TYPES : frozenset [ str ] = frozenset ( { DICOM , DICOM_JSON , DICOM_XML } ) HTML_TYPES module-attribute HTML_TYPES : Final [ Set [ str ]] = { HTML } JAVASCRIPT_TYPES module-attribute JAVASCRIPT_TYPES : frozenset [ str ] = frozenset ( { JAVASCRIPT_TEXT , JAVASCRIPT_APP } ) JSON_TYPES module-attribute JSON_TYPES : Final [ Set [ str ]] = { JSON } SIMPLE_TYPES module-attribute SIMPLE_TYPES : Final [ Set [ str ]] = { JSON , HTML } STRUCTURED_TEXT_TYPES module-attribute STRUCTURED_TEXT_TYPES : frozenset [ str ] = ( TEXT_TYPES | JAVASCRIPT_TYPES | { JSON } ) TEXT_TYPES module-attribute TEXT_TYPES : frozenset [ str ] = frozenset ( { TEXT , HTML , CSS , CSV , TSV , XML , XML_TEXT , YAML , YAML_APP , } )","title":"Request Types"},{"location":"tools/types/request_types/#request-types","text":"","title":"Request Types"},{"location":"tools/types/request_types/#aniachifast.tools.request_types","text":"HTTP media type definitions used for request validation. This module defines reusable sets of allowed HTTP Content-Type and Accept header values (media types) designed to work in conjunction with the allowed_headers FastAPI dependency helper. These constants are passed to allowed_headers(...) to enforce request header validation before an endpoint is executed. IMPORTANT : This module is the SINGLE SOURCE OF TRUTH for header validation sets. When using allowed_headers() , you MUST import the predefined sets from this module (e.g., COMMON_TYPES, JSON_TYPES) rather than creating ad-hoc sets with MediaTypes directly. Typical FastAPI usage: from aniachifast.tools.dependencies import allowed_headers from aniachifast.tools.request_types import COMMON_TYPES @router.get(\"/endpoint\", dependencies=[Depends(allowed_headers(COMMON_TYPES))]) async def my_endpoint(): ... This pattern provides: - Early rejection of unsupported media types - Consistent request validation across endpoints - Centralized and reusable request content-type policies - Single source of truth for allowed header combinations The constants are grouped by common API use cases such as JSON-only, HTML-only, or mixed-format endpoints.","title":"request_types"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.ALL_FORMATS_TYPES","text":"ALL_FORMATS_TYPES : Final [ Set [ str ]] = { JSON , CSV , TSV , XML , YAML , YAML_APP , TEXT , }","title":"ALL_FORMATS_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.ALL_FORMATS_TYPES_HTML","text":"ALL_FORMATS_TYPES_HTML : Final [ Set [ str ]] = { JSON , HTML , CSV , TSV , XML , YAML , YAML_APP , TEXT , }","title":"ALL_FORMATS_TYPES_HTML"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.BINARY_TYPES","text":"BINARY_TYPES : frozenset [ str ] = frozenset ({ OCTET_STREAM })","title":"BINARY_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.COMMON_TYPES","text":"COMMON_TYPES : Final [ Set [ str ]] = { JSON , TEXT , HTML }","title":"COMMON_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.COMMON_UPLOAD_IMAGES_TYPES","text":"COMMON_UPLOAD_IMAGES_TYPES : Final [ Set [ str ]] = { PDF , JPEG , PNG , GIF , }","title":"COMMON_UPLOAD_IMAGES_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.COMMON_UPLOAD_TYPES","text":"COMMON_UPLOAD_TYPES : frozenset [ str ] = ( STRUCTURED_TEXT_TYPES | DICOM_TYPES | BINARY_TYPES )","title":"COMMON_UPLOAD_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.DICOM_TYPES","text":"DICOM_TYPES : frozenset [ str ] = frozenset ( { DICOM , DICOM_JSON , DICOM_XML } )","title":"DICOM_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.HTML_TYPES","text":"HTML_TYPES : Final [ Set [ str ]] = { HTML }","title":"HTML_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.JAVASCRIPT_TYPES","text":"JAVASCRIPT_TYPES : frozenset [ str ] = frozenset ( { JAVASCRIPT_TEXT , JAVASCRIPT_APP } )","title":"JAVASCRIPT_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.JSON_TYPES","text":"JSON_TYPES : Final [ Set [ str ]] = { JSON }","title":"JSON_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.SIMPLE_TYPES","text":"SIMPLE_TYPES : Final [ Set [ str ]] = { JSON , HTML }","title":"SIMPLE_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.STRUCTURED_TEXT_TYPES","text":"STRUCTURED_TEXT_TYPES : frozenset [ str ] = ( TEXT_TYPES | JAVASCRIPT_TYPES | { JSON } )","title":"STRUCTURED_TEXT_TYPES"},{"location":"tools/types/request_types/#aniachifast.tools.request_types.TEXT_TYPES","text":"TEXT_TYPES : frozenset [ str ] = frozenset ( { TEXT , HTML , CSS , CSV , TSV , XML , XML_TEXT , YAML , YAML_APP , } )","title":"TEXT_TYPES"},{"location":"tools/types/response_types/","text":"Response Types aniachifast.tools.response_types Response type definitions for image-based HTTP outputs. This module defines a strongly-typed enumeration of supported image media types used by the API when returning binary or image-based responses. The values are compliant with standard MIME types and are intended to be used across FastAPI response declarations, content negotiation, and internal response handling logic. ResponseType Bases: str , Enum Enumeration of supported image response MIME types. This enum represents the allowed image formats that the API can return to clients. Each member maps directly to its corresponding MIME type string, ensuring compatibility with: HTTP Content-Type headers FastAPI response_class usage OpenAPI schema generation Content negotiation logic The enum inherits from str to allow seamless integration with FastAPI, Pydantic models, and dependency validation. BMP class-attribute instance-attribute BMP = 'image/bmp' GIF class-attribute instance-attribute GIF = 'image/gif' ICO class-attribute instance-attribute ICO = 'image/x-icon' JPEG class-attribute instance-attribute JPEG = 'image/jpeg' PNG class-attribute instance-attribute PNG = 'image/png' SVG class-attribute instance-attribute SVG = 'image/svg+xml' TIFF class-attribute instance-attribute TIFF = 'image/tiff' WEBP class-attribute instance-attribute WEBP = 'image/webp'","title":"Response Types"},{"location":"tools/types/response_types/#response-types","text":"","title":"Response Types"},{"location":"tools/types/response_types/#aniachifast.tools.response_types","text":"Response type definitions for image-based HTTP outputs. This module defines a strongly-typed enumeration of supported image media types used by the API when returning binary or image-based responses. The values are compliant with standard MIME types and are intended to be used across FastAPI response declarations, content negotiation, and internal response handling logic.","title":"response_types"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType","text":"Bases: str , Enum Enumeration of supported image response MIME types. This enum represents the allowed image formats that the API can return to clients. Each member maps directly to its corresponding MIME type string, ensuring compatibility with: HTTP Content-Type headers FastAPI response_class usage OpenAPI schema generation Content negotiation logic The enum inherits from str to allow seamless integration with FastAPI, Pydantic models, and dependency validation.","title":"ResponseType"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.BMP","text":"BMP = 'image/bmp'","title":"BMP"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.GIF","text":"GIF = 'image/gif'","title":"GIF"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.ICO","text":"ICO = 'image/x-icon'","title":"ICO"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.JPEG","text":"JPEG = 'image/jpeg'","title":"JPEG"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.PNG","text":"PNG = 'image/png'","title":"PNG"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.SVG","text":"SVG = 'image/svg+xml'","title":"SVG"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.TIFF","text":"TIFF = 'image/tiff'","title":"TIFF"},{"location":"tools/types/response_types/#aniachifast.tools.response_types.ResponseType.WEBP","text":"WEBP = 'image/webp'","title":"WEBP"}]}